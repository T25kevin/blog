[{"title":"ESXi-8.0-VMFSL无法使用存储的问题","url":"/2025/03/19/ESXi-8-0-VMFSL无法使用存储的问题/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>ESXi-8.0-VMFSL无法使用存储的问题</strong></font>\n\n<!--more-->\n\n今天這一篇算是番外篇，藉由`VMFSL`來說明`Shift+O`能做什麼設定。\n我想說這個問題在`ESXi 7.0`版本之後都會遇到，來分享一下我如何解決這個問題。\n首先提一下為什麼要提`VMFSL`，因為在安裝完`ESXi`系統之後，剩下的硬碟空間會被做成一個儲存空間 ( `Datastore` )，你可以想像這是一個資源池，在沒有外接任何網路儲存裝置(`NAS`)，虛擬機所需的虛擬硬碟空間都需要從這個`Datastore`分享。所以`Datastore`的空間大小就很重要了。它關係到你能開多少虛擬機及多大硬碟規格的虛擬機。\n講了那麼多，卻還是沒有提到`VMFSL`，什麼是`VMFSL`?，在`ESXi 7.0`版之後`VMFSL`是為了`vSAN`特別留下的空間用於提升`vSAN`的表現，那什麼是`vSAN`後面會解釋。總之因為這個為了`vSAN`而特別留下的空間，會影響到我們剩下的儲存空間。不囉嗦上圖解釋\n圖一:\n![https://ithelp.ithome.com.tw/upload/images/20220916/20152414dYC2eFodK4.png](https://s2.loli.net/2025/03/19/HlN9E7kPD2QVgo8.png)\n\n圖二:\n![https://ithelp.ithome.com.tw/upload/images/20220916/20152414LX8uKPckUb.png](https://s2.loli.net/2025/03/19/nufALHI1z28obRT.png)\n不知道你有沒有注意到我在安裝`ESXi`的時候我所選擇安裝作業系統的硬碟大小是`142G`。而圖二就是安裝完的結果。你可以看到`VMFSL`的預設大小是`120G`\n。而`Datastore`的空間就是圖中那可憐的`VMFS 14G`的那個空間。\n![https://ithelp.ithome.com.tw/upload/images/20220916/20152414Bkx3RazIk0.png](https://s2.loli.net/2025/03/19/joqm2kUnuTf5ChK.png)\n那我沒有要玩`vSAN`，`VMFSL`可不可以縮小?當然可以!標題的`Shift+O`可不是廢話\n基本上在安裝`ESXi`上就要調整了哦，所以你已經安裝好了就重灌一次吧!\n![https://ithelp.ithome.com.tw/upload/images/20220916/20152414aVlkRoDXOz.png](https://s2.loli.net/2025/03/19/jdNGlEvPz8CiJWQ.png)\n記得在這個畫面趕快按`Shift+O`，不然系統就會自動進安裝畫面了哦\n![https://ithelp.ithome.com.tw/upload/images/20220916/20152414qcLPr1TnUD.png](https://s2.loli.net/2025/03/19/cCzjDOx15BfH69N.png)\n輸入如圖中的指令\n**`cdromBoot runweasel autoPartitionOSDataSize=8192`**\n接著按下`Enter`接著安裝的流程，修改完安裝的結果如下\n![https://ithelp.ithome.com.tw/upload/images/20220916/20152414QhK9a5nMZg.png](https://s2.loli.net/2025/03/19/5BU6wzWMIbiOdaL.png)\n`VMFSL`就只剩我們所設定的`8192(8G)`，而剩餘的空間就是`Datastore(VMFS)`。\n至於可不可以完全不要這個`VMFSL`，又或者大小要多少，這一點我不是很能確定。希望能有高手補充!!\n再補充一點，在不特別設定`VMFSL`大小的情況下，而你的空間又小於`120G`的情況下\n![https://ithelp.ithome.com.tw/upload/images/20220916/20152414k54lumvXWp.png](https://s2.loli.net/2025/03/19/hEqoJgkeHxuFB9m.png)\n你會發現`VMFSL`把剩下的所有空間使用完了。\n前面有提到安裝完系統及預設`VMFSL`的空間，剩下的空間會自動做成`Datastore`\n在大部分的情況下是這樣沒錯，不過如果你將系統安裝在`USB`內，就不是如此了，因為`VMware`預設不允許使用`USB`當`Datastore`。所以下一篇又是番外篇\n我將教你如何將`USB`設定成`Datastore`。","tags":["工具","虚拟机"],"categories":["工具"]},{"title":"Docker-Volume-数据持久化方案","url":"/2025/03/14/Docker-Volume-数据持久化方案/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>Docker Volume 数据持久化方案：</strong></font>\n\n<!--more-->\n\n### 使用 Docker Volume 代替直接挂载\n\n```bash\n# 创建 volume\ndocker volume create mongo_data\n\n# 删除卷\ndocker volume rm mongo_data\n# 运行容器\ndocker run -d --restart=always -p 27017:27017 --name mymongo -v volume:/data/db -e MONGO_LOG_MAX_SIZE=5242880 mongo:latest --wiredTigerCacheSizeGB 1 --auth\n```\n\n### 查看 Volume 物理路径（MacOS）\n\n```bash\ndocker volume inspect mongo_data\n```\n\n#### 输出示例：\n\n实际数据存储在 Docker 虚拟机中，避免直接操作宿主机文件系统。\n\n```cmd\n[\n    {\n        \"CreatedAt\": \"2025-03-14T05:XX:XXZ\",\n        \"Driver\": \"local\",\n        \"Mountpoint\": \"/var/lib/docker/volumes/mongo_data/_data\",\n        \"Name\": \"mongo_data\",\n        \"Options\": null,\n        \"Scope\": \"local\"\n    }\n]\n```\n\n### 进入`mongo`容器\n\n```bash\ndocker exec -it mymongo /bin/bash\n```\n\n![image](https://s2.loli.net/2025/03/14/DZOC8ImKc2T59G3.png)\n\n注意：这里的mymongo是容器的名字，不是镜像的名字。（忘记容器名字，可使用docker ps -a 查看容器名）\n![image](https://s2.loli.net/2025/03/14/V7NiL5AWElx16va.png)\n2.3.2.进入`mongosh`中\n\n```bash\n# 进入mongo shell\nmongosh\n```\n\n注：`mongosh 6.0`版本之后使用，`mongo 6.0`版本之前使用，博主就是在这里出问题的，博主安装最新`mongodb`版本，但是使用的是 `mongo` 所以一直出现问题：`bash: mongo: command not found`\n![image](https://s2.loli.net/2025/03/14/9VQ3fFU5I4BJXe8.png)\n\n![image](https://s2.loli.net/2025/03/14/FPByZHwLNp7dRUv.png)\n2.3.3.进入`admin`数据库\n\n```perl\nuse admin\n```\n\n![image](https://s2.loli.net/2025/03/14/McbuCipRfOx1e3o.png)\n2.3.4 创建一个用户，`mongodb`默认没有用户\n\n```bash\n# 1.这里创建用户名为root，密码为mongo2023，角色（该用户的权限）为root，数据库为admin（你们按照你们自己的设置）\n# 用户名：root，密码：mongo2023，角色：root，数据库：admin\n\ndb.createUser({user:'root',pwd:'mongo2023',roles:[{role:'root',db:'admin'}]})\n\n\n# 2.认证登录db.auth('用户名','密码')，打印1则代表认证通过\ndb.auth('root','mongo2023')\n```\n\n![image](https://s2.loli.net/2025/03/14/KWStwbdhveoZOYU.png)\n到这里就完成了创建用户和设置密码，如果要退出 Ctrl+D 或者 exit 退出mongodb\n","tags":["数据库","持久化"],"categories":["Docker","mongodb"]},{"title":"Docker部署Mongodb_错误收集","url":"/2025/03/14/Docker部署Mongodb_错误收集/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**Docker部署Mongodb_错误收集**</strong></font>\n\n<!--more-->\n\n### **WiredTiger 存储引擎无法正常访问数据文件**\n\n### **解决方案**\n\n#### 1. 彻底清理残留数据文件\n\n```bash\n# 停止并删除旧容器\ndocker stop mongo && docker rm mongo\n\n# 删除宿主机映射目录中的所有文件（谨慎操作！先备份重要数据）\nsudo rm -rf /path/to/your/mongodb_data/*\n\n# 重写创建文件夹\nmkdir /path/to/your/mongodb_data\n```\n\n#### 2. 确保目录权限正确（MacOS 特殊配置）\n\n```bash\n# 授予容器用户（UID 999）写权限（MacOS需通过 ACL 配置）\nsudo chmod -R 777 /path/to/your/mongodb_data\nsudo chown -R $(whoami) /path/to/your/mongodb_data\n```\n\n#### 3. 调整 Docker 运行命令（关键参数优化）\n\n```bash\ndocker run -d \\\n  --name mongo \\\n  -p 27017:27017 \\\n  -v /path/to/your/mongodb_data:/data/db \\\n  -e MONGO_INITDB_ROOT_USERNAME=admin \\\n  -e MONGO_INITDB_ROOT_PASSWORD=admin \\\n  --user 1000:50 \\  # MacOS Docker 特殊 UID 配置\n  --restart unless-stopped \\\n  mongo:latest \\\n  --wiredTigerCacheSizeGB 1  # 限制缓存大小适配小内存环境\n```\n\n#### 4. 验证容器日志\n\n```bash\ndocker logs -f mongo\n```\n\n预期看到：\n\n```log\n{\"t\":{\"$date\":\"2025-03-14T05:XX:XX.XXXZ\"},\"s\":\"I\",\"c\":\"STORAGE\",\"id\":22430,\"ctx\":\"initandlisten\",\"msg\":\"WiredTiger message\",\"attr\":{\"message\":\"WT_SESSION.create...\"}}\n```\n\n------\n\n### **关键配置解析**\n\n| **参数**                    | **作用说明**                                                 |\n| :-------------------------- | :----------------------------------------------------------- |\n| `--user 1000:50`            | 强制容器以 MacOS 当前用户（UID 1000）和 Docker 默认组（GID 50）运行 |\n| `--wiredTigerCacheSizeGB 1` | 显式限制 WiredTiger 缓存为 1GB，避免内存不足导致崩溃         |\n| `chmod 777`                 | 临时赋予完全权限（生产环境不推荐，开发环境可用）             |\n| `rm -rf`                    | 清除可能存在的损坏文件或权限冲突文件                         |\n\n------\n\n### **故障深度分析**\n\n#### **错误日志解读**\n\n```log\n\"msg\":\"__posix_open_file:924:/data/db/WiredTiger.wt: handle-open: open\",\"error_str\":\"Operation not permitted\"\n```\n\n表明 MongoDB 进程对 `/data/db/WiredTiger.wt` 文件 **没有写权限** 或 **文件已被锁定**。\n\n#### **MacOS 特殊限制**\n\n- Docker Desktop 使用虚拟机挂载文件系统（gRPC-FUSE），存在权限映射问题\n- MacOS 原生文件系统（APFS）与 Linux 容器权限模型不兼容\n\n------\n\n### **高级方案（生产环境推荐）**\n\n#### 使用 Docker Volume 代替直接挂载\n\n```bash\n# 创建 volume\ndocker volume create mongo_data\n\n# 运行容器\ndocker run -d \\\n  -v mongo_data:/data/db \\\n  mongo:latest\n```\n\n#### 查看 Volume 物理路径（MacOS）\n\n```bash\ndocker volume inspect mongo_data\n```\n\n输出示例：\n\n```json\n[\n    {\n        \"CreatedAt\": \"2025-03-14T05:XX:XXZ\",\n        \"Driver\": \"local\",\n        \"Mountpoint\": \"/var/lib/docker/volumes/mongo_data/_data\",\n        \"Name\": \"mongo_data\",\n        \"Options\": null,\n        \"Scope\": \"local\"\n    }\n]\n```\n\n实际数据存储在 Docker 虚拟机中，避免直接操作宿主机文件系统。\n\n------\n\n### **总结**\n\n1. **开发环境**：使用 `chmod 777` 快速修复权限，清理残留文件\n2. **生产环境**：\n   - 使用 Docker Volume 避免路径映射问题\n   - 通过 `docker exec` 进入容器检查文件权限\n   - 定期备份 Volume 数据 (`docker cp` 或专用备份工具)\n\n通过以上方案，可彻底解决因文件权限导致的 MongoDB 启动失败问题。","tags":["docker","mongodb","数据库"],"categories":["Docker","数据库"]},{"title":"正在运行的-Docker-容器打包镜像方法","url":"/2025/02/28/正在运行的-Docker-容器打包镜像方法/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>正在运行的-Docker-容器打包镜像方法</strong></font>\n\n<!--more-->\n\n#### ‌**1. 使用 `docker commit` 命令直接打包**‌\n\n‌**适用场景**‌：快速保存当前容器的运行状态为镜像，适合临时调试或快速迁移。\n‌**步骤**‌：\n\n1. ‌**获取容器 ID**‌\n\n   ```bash\n   docker ps  # 查看正在运行的容器，记录目标容器的 ID ‌:ml-citation{ref=\"1,3\" data=\"citationList\"}  \n   ```\n\n2. ‌**提交容器为新镜像**‌\n\n   ```bash\n   docker commit <容器ID> <新镜像名>:<标签>  # 例如：docker commit abc123 my-app:v1 ‌:ml-citation{ref=\"1,2\" data=\"citationList\"}  \n   ```\n\n3. ‌**验证镜像是否生成**‌\n\n   ```bash\n   docker images  # 检查列表中是否包含新镜像 :ml-citation{ref=\"2,3\" data=\"citationList\"}  \n   ```\n\n------\n\n#### ‌**2. 导出镜像为可迁移文件**‌\n\n‌**适用场景**‌：将镜像保存为 `.tar` 文件，便于传输或备份。\n‌**步骤**‌：\n\n1. ‌**导出镜像为 `.tar` 文件**‌\n\n   ```bash\n   docker save -o <文件名>.tar <镜像名>:<标签>  # 例如：docker save -o my-app.tar my-app:v1 ‌:ml-citation{ref=\"4,5\" data=\"citationList\"}  \n   ```\n\n2. ‌**在目标服务器导入镜像**‌\n\n   ```bash\n   docker load -i <文件名>.tar  # 从 `.tar` 文件恢复镜像 :ml-citation{ref=\"4,5\" data=\"citationList\"}  \n   ```\n\n------\n\n#### ‌**3. 其他注意事项**‌\n\n- ‌**`docker commit` 的局限性**‌\n\n  - 此方法生成的镜像缺乏构建过程的透明性，难以追溯修改历史，不推荐用于生产环境 ‌23。\n  - 推荐使用 `Dockerfile` 构建标准化镜像，确保可重复性和版本控制 ‌23。\n\n- ‌**多镜像打包**‌\n\n  - 若需打包多个镜像到单个文件，可使用 `docker save` 同时指定多个镜像名：\n\n    ```bash\n    docker save -o all-images.tar image1:v1 image2:v2  # 合并导出多个镜像 :ml-citation{ref=\"7\" data=\"citationList\"}  \n    ```\n\n------\n\n### ‌**操作流程示意图**‌\n\n```bash\n运行中容器 → `docker commit` → 新镜像 → `docker save` → .tar 文件 → 传输 → `docker load` → 目标环境  \n```\n\n通过上述步骤，可快速完成运行中容器的镜像打包与迁移。","tags":["docker","镜像","打包"],"categories":["Docker","打包"]},{"title":"docker安装buildx插件","url":"/2025/02/27/docker安装buildx插件/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>docker安装buildx插件，交叉打包</strong></font>\n\n<!--more-->\n\n错误：\n\n```bash\n>>> docker buildx build --platform linux/amd64,linux/arm64 -t xxxx/xxxxx:latest --push .\n# 错误输出：\nunknown flag: --platform\nSee 'docker --help'.\n```\n\n提示无效参数：--platform\n\n#### 解决方案：\n\n```bash\nbrew install docker-buildx   # 安装 buildx\nmkdir -p ~/.docker/cli-plugins     # 创建插件目录\nln -sfn $(which docker-buildx) ~/.docker/cli-plugins/docker-buildx    # 创建软连接到插件目录下\ndocker buildx install    # 安装插件\n```\n\n","tags":["docker","打包","buildx"],"categories":["Docker","错误"]},{"title":"破解cloudflare拦截神器_puppeteer","url":"/2025/02/25/破解cloudflare拦截神器-puppeteer/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>破解cloudflare拦截神器_puppeteer</strong></font>\n\n<!--more-->\n\n### 安装番外：安装node.js环境\n\n#### 安装`nvm`管理器\n\n+ 第1步：mac 安装：\n\n```bash\nbrew install nvm\n```\n\n+ 第2_1步：命令安装：\n\n```bash\n$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash\n或\n$ wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash\n```\n\n+ 第2_2步：国内安装\n\n```bash\n$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash\n或\n$ wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash\n```\n\n+ 第3步：添加环境\n\n```bash\n# 1、这是本地不存在配置文件的时候提示需要添加的配置\nexport NVM_DIR=\"$HOME/.nvm\"\n[ -s \"$NVM_DIR/nvm.sh\" ] && \\. \"$NVM_DIR/nvm.sh\"  # This loads nvm\n\n# 2、这是本地存在配置文件的时候提示需要添加的配置（推荐）\nexport NVM_DIR=\"$HOME/.nvm\"\n[ -s \"$NVM_DIR/nvm.sh\" ] && \\. \"$NVM_DIR/nvm.sh\"  # This loads nvm\n[ -s \"$NVM_DIR/bash_completion\" ] && \\. \"$NVM_DIR/bash_completion\"  # This loads nvm bash_completion\n```\n\n+ 第4步：加载环境：\n\n```bash\nsource ~/.zshrc\n```\n\n+ 第5步：测试安装是否成功\n\n```bash\n$ nvm -v\n或\n$ nvm use system\n```\n\n+ 第6步：`nvm`相关命令\n\n```bash\nnvm install stable\nnvm install <version>     # 安装指定版本 node\nnvm uninstall <version>   # 删除指定版本 node\n\nnvm use <version>         # 切换使用指定的版本 node\nnvm alias default <version>   # 永久版本 - 所有窗口生效指定版本\n\nnvm ls    # 列出所有安装的版本\nnvm ls-remote   # 列出所有远程服务器的版本（官方 node version list）\nnvm current   # 显示当前的版本\nnvm alias <name> <version>   # 给不同的版本号添加别名\nnvm unalias <name>   # 删除已定义的别名\n\nnvm reinstall-packages <version>     # 在当前版本 node 环境下，重新全局安装指定版本号的 npm 包\n```\n\n\n\n### 第一步：安装puppeteer\n\n```bash\nnpm i puppeteer\n```\n\n### 第二步： 安装插件 puppeteer-extra、puppeteer-extra-plugin-stealth\n\n```bash\nnpm install puppeteer-extra puppeteer-extra-plugin-stealth express\n```\n\n### 第三步：使用nodejs获取数据：\n\n```js\nconst puppeteer = require('puppeteer-extra')\nconst StealthPlugin = require('puppeteer-extra-plugin-stealth')\npuppeteer.use(StealthPlugin())\nconst {executablePath} = require('puppeteer')\n\npuppeteer.launch({ headless: false, executablePath: executablePath() }).then(async browser => {\n    const page = await browser.newPage()\n    await page.goto('https://xxx.com')\n\n    // 使用 Promise 来等待\n    await new Promise(resolve => setTimeout(resolve, 2000))  // 等待 2 秒\n    // 获取页面的文本内容\n    const pageContent = await page.evaluate(() => {\n        return document.body.innerText;  // 获取页面的所有文本\n    });\n\n    // 打印页面文本内容\n    console.log(pageContent);\n    await page.screenshot({ path: 'cointracker_home.png', fullPage: true })\n    await browser.close()\n})\n```\n\n### 第四步：当然你也可以把他写成接口\n\n```\n.....\n```\n\n","tags":["逆向","nodejs","后端","puppeteer"],"categories":["逆向","反爬"]},{"title":"mongodb数据库的备份与恢复","url":"/2025/02/23/mongodb数据库的备份与恢复/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Docker下：mongodb数据库的备份与恢复</strong></font>\n\n<!--more-->\n\n## 备份篇：\n\n+ 备份数据库名称：`ttd`\n+ 本地备份容器：`126bf65cd37f`\n\n### 1、进入容器：\n\n```bash\ndocker ps   # 查看正在运行的docker 容器\ndocker exec -it 126bf65cd37f /bin/bash   # 进入ID：126bf65cd37f 的容器\nmongodump --uri=\"mongodb://username:password@localhost:27017/ttd\" --out /path/to/backup/    # 将数据库备份到/path/to/backup/ 文件夹下\n```\n\n### 2、打包备份文件\n\n```bash\ntar -cvf /path/to/ttd.tar /path/to/backup/      # 将/path/to/backup/ 文件夹下的备份数据库  打包到 /path/to/ttd.tar\n```\n\n### 3、复制备份打包文件到宿主机器\n\n```bash\n# 将备份的文件复制到宿主机\ndocker cp 126bf65cd37f:/path/to/ttd.tar /home/mycp/DataBases   # 将打包文件 复制到宿主的/home/mycp/DataBases下\n```\n\n\n\n## 恢复篇：\n\n+ 恢复数据库名称：`ttd`\n+ 本地备份容器：`126bf65cd37f`\n\n### 1、上传压缩包到恢复的宿主机器\n\n```\n这里就不讲怎么恢复了！\n```\n\n### 2、传入docker 机器(上传后的路径：`/home/cdd/DataBases/ttd.tar`)\n\n```bash\nmkdir /DBFiles   # 创建路径，不然可能报错\ndocker cp /home/cdd/DataBases/ttd.tar 8ba9426d45e3:/DBFiles   # 复制到docker机器\n```\n\n### 3、解压缩\n\n```bash\ntar -xvf ttd.tar    # 解压完成会出现一个新的文件夹：ttd\n```\n\n### 4、恢复\n\n+ 避坑1：备份的文件夹中存在 `.json`文件，如果直接用文件夹恢复命令是会报错的\n+ 避坑2：必须要指定`--authenticationDatabase admin` 否则会提示权限\n\n```bash\nmongorestore -h 127.0.0.1:27017 --authenticationDatabase admin -u <username> -p <password> -d <database> /home/cdd/DataBases/ttd/Images.bson\n# 如果没有 .json 文件 可以用下面的命令恢复\nmongorestore --uri=\"mongodb://username:password@localhost:27017\" /home/cdd/DataBases/ttd\n```\n\n","tags":["docker","mongoldb","备份与恢复"],"categories":["docker","数据库"]},{"title":"一套JS可逆加密算法，基于crypto-js","url":"/2025/02/21/一套JS可逆加密算法，基于crypto-js/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>一套JS可逆加密算法，基于crypto-js</strong></font>\n\n<!--more-->\n\n在JavaScript中，你可以使用多种方法来实现可逆加密。\n这里是一个简单的例子，使用的是`crypto-js`库的`AES`加密方法。\n\n首先，你需要安装`crypto-js`库。你可以通过`npm`来安装：\n\n### 安装：\n\n```bash\nnpm install crypto-js\n```\n\n然后，你可以使用以下代码来实现AES加密和解密：\n\n```js\nconst CryptoJS = require('crypto-js');  \n  \nfunction encrypt(text, secretKey) {  \n    const key = CryptoJS.enc.Utf8.parse(secretKey);  \n    const iv = CryptoJS.lib.WordArray.create(new ArrayBuffer(16));  \n    const encrypted = CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(text), key, { iv: iv });  \n    return encrypted.toString();  \n}  \n  \nfunction decrypt(ciphertext, secretKey) {  \n    const key = CryptoJS.enc.Utf8.parse(secretKey);  \n    const iv = CryptoJS.lib.WordArray.create(new ArrayBuffer(16));  \n    const decrypted = CryptoJS.AES.decrypt(ciphertext, key, { iv: iv });  \n    return decrypted.toString(CryptoJS.enc.Utf8);  \n}  \n  \n// 测试代码  \nconst secretKey = 'mySecretKey';  \nconst text = 'Hello, World!';  \nconst encryptedText = encrypt(text, secretKey);  \nconsole.log('Encrypted: ' + encryptedText);  \nconst decryptedText = decrypt(encryptedText, secretKey);  \nconsole.log('Decrypted: ' + decryptedText);\n```\n\n在这个例子中，我们首先导入了`crypto-js`库。然后，我们定义了两个函数：`encrypt`和`decrypt`。\n`encrypt`函数接收一个文本和一个密钥作为参数，并返回加密后的文本。\n`decrypt`函数接收一个密文和一个密钥作为参数，并返回解密后的文本。\n\n注意，这个例子使用了`AES`加密算法，并且使用了相同的密钥进行加密和解密。\n在实际应用中，你应该使用一个安全的密钥管理方法来存储和传输密钥。","tags":["python","逆向","JavaScript"],"categories":["逆向","JavaScript"]},{"title":"ubuntu-设置swap交换空间","url":"/2025/02/17/ubuntu-设置swap交换空间/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>`ubuntu` 设置`swap`交换空间</strong></font>\n\n<!--more-->\n\n在 `Ubuntu` 上设置交换空间（`Swap Space`）可以帮助系统在物理内存不足时使用硬盘空间来存储临时数据。以下是设置交换空间的步骤：\n\n### 步骤 1: 检查当前交换空间\n\n首先，检查当前的交换空间是否已启用：\n\n```\nsudo swapon --show\n```\n\n如果没有输出，表示当前没有启用的交换空间。\n\n### 步骤 2: 创建交换文件\n\n1. 选择交换文件的大小：决定你想要创建的交换文件的大小。例如，假设你想创建一个 `2GB` 的交换文件。\n2. 创建交换文件：使用 `fallocate` 命令创建交换文件：\n\n```\nsudo fallocate -l 2G /swapfile\n```\n\n如果 fallocate 不可用，可以使用 `dd` 命令：\n\n```\nsudo dd if=/dev/zero of=/swapfile bs=1G count=2  \n```\n\n### 步骤 3: 设置交换文件权限\n\n为了安全起见，设置交换文件的权限，使其只能由 `root` 用户访问：\n\n```\nsudo chmod 600 /swapfile\n```\n\n### 步骤 4: 将文件设置为交换空间\n\n使用以下命令将文件设置为交换空间：\n\n```\nsudo mkswap /swapfile\n```\n\n### 步骤 5: 启用交换空间\n\n启用交换空间：\n\n```\nsudo swapon /swapfile\n```\n\n### 步骤 6: 验证交换空间\n\n再次检查交换空间是否已启用：\n\n```\nsudo swapon --show\n```\n\n你应该能看到 `/swapfile` 列在输出中。\n\n### 步骤 7: 设置开机自动挂载\n\n为了在系统重启后自动启用交换空间，需要将其添加到 `/etc/fstab` 文件中：\n\n1. 打开 `/etc/fstab` 文件：\n\n```\nsudo nano /etc/fstab\n```\n\n2. 在文件末尾添加以下行：\n\n```\n/swapfile none swap sw 0 0\n```\n\n保存并退出编辑器（在 `nano` 中，按 `CTRL + X`，然后按 `Y` 确认保存）。\n\n### 步骤 8: 调整交换空间使用策略（可选）\n\n你可以调整系统使用交换空间的策略。默认情况下，`Linux` 系统会在物理内存使用到一定程度后才会使用交换空间。你可以通过调整` vm.swappiness` 参数来改变这一行为：\n\n查看当前的 `swappiness` 值：\n\n```\ncat /proc/sys/vm/swappiness\n```\n\n临时设置 `swappiness` 值（范围 `0-100`，值越低，越不倾向于使用交换空间）：\n\n```\nsudo sysctl vm.swappiness=10\n```\n\n要永久更改 `swappiness` 值，可以编辑 `/etc/sysctl.conf` 文件：\n\n```\nsudo nano /etc/sysctl.conf\n```\n\n在文件中添加或修改以下行：\n\n```\nvm.swappiness=10\n```\n\n保存并退出编辑器。\n\n### 总结\n\n通过以上步骤，你可以在 `Ubuntu` 上成功设置和启用交换空间。这将有助于在物理内存不足时提高系统的稳定性和性能。","tags":["ubuntu","swap","交换空间"],"categories":["系统","ubuntu"]},{"title":"docker-push到harbor错误解决方案","url":"/2025/02/17/docker-push到harbor错误解决方案/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>docker push到`harbor`错误解决方案</strong></font>\n\n<!--more-->\n\n系统信息：\n\n```\nCPU信息: Apple M1\n内存信息: 8 GB, \n系统版本: 14.3.1\n\nDocker version 27.5.1, build 9f9e405801\ncolima version 0.8.1\nruntime: docker\narch: aarch64\nclient: v27.5.1\nserver: v27.4.0\n```\n\n\n\n## 错误1：\n\n```bash\nThe push refers to repository [192.168.31.7:7315/ka/ppds]\nGet \"https://192.168.31.7:7315/ka/ppds/v2/\": http: server gave HTTP response to HTTPS client\n```\n\n#### 解决方案：\n+ 第1步：设置不安全的注册表\n\n```bash\n# 编辑colima默认信息\ncolima start --edit\n\n# 在打开的栏中找到 docker配置\ndocker:\n  insecure-registries:\n    - harbor.jakehu.me:31104\n  registry-mirrors:\n    - docker.registry.huwenxi.com\n```\n\n+ 第2步：开始重启 `colima`\n\n```bash\n# Colima列表\ncolima list\n# 启动Colima\ncolima start\n# 停止Colima\ncolima stop\n# 显示Colima状态信息\ncolima status\n# 通过SSH连接到Colima\ncolima ssh\n```\n\n+ 第3步：查看是否添加成功了\n\n```bash\ndocker system info   # 终端输出的内容中包含 docker.registry.huwenxi.com 那么就是成功的\n```\n\n+ 第4步：验证登录\n\n```bash\ndocker login docker.registry.huwenxi.com\n\n# # 出现下列内容 则添加完成了\n# Username: xxx\n# Password: \n# Login Succeeded\n```\n\n","tags":["docker","错误","私有仓库"],"categories":["docker","harbor"]},{"title":"手把手教你搭建Docker私有仓库Harbor","url":"/2025/02/16/手把手教你搭建Docker私有仓库Harbor/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>手把手教你搭建Docker私有仓库Harbor</strong></font>\n\n本文搬运自：[手把手教你搭建Docker私有仓库Harbor - sowler - 博客园](https://www.cnblogs.com/sowler/p/18242819)\n\n<!--more-->\n\n#### 1、什么是Docker私有仓库\n\nDocker私有仓库是用于存储和管理Docker镜像的私有存储库。Docker默认会有一个公共的仓库Docker Hub，而与Docker Hub不同，私有仓库是受限访问的，只有授权用户才能够上传、下载和管理其中的镜像。这种私有仓库可以部署在本地云环境中，用于组织内部开发、测试和生产环境中的容器镜像管理。保证数据安全性。\n\n#### 2、Docker有哪些私有仓库\n\n**以下是一些常见的Docker私有仓库：**\n\n- **Harbor**：作为一个企业级的Docker Registry服务，Harbor提供了安全、可信赖的镜像存储和管理功能。它支持RBAC权限控制、镜像复制、镜像签名、漏洞扫描等功能。\n- **Docker Trusted Registry (DTR)**：由Docker官方推出的企业级Docker私有仓库服务，与Docker Engine紧密集成，支持高度的安全性和可靠性。\n- **Portus**：一个开源的Docker镜像管理和认证服务，提供用户管理、团队管理、镜像审核等功能，与Docker Registry兼容。\n- **Nexus Repository Manager**：虽然主要是用于构建和管理Java组件，但也可以用作Docker私有仓库。它具有强大的存储管理和权限控制功能。\n- **GitLab Container Registry**：GitLab集成了容器注册表功能，允许您存储、管理和分发Docker镜像。这是GitLab自带的功能，无需额外部署。\n- **AWS Elastic Container Registry (ECR)**：如果使用AWS云服务，可以考虑使用AWS ECR作为私有仓库。它与AWS的其他服务集成紧密，对AWS用户来说是一个方便的选择。\n\n本篇使用Harbor搭建Docker私有仓库。\n\n#### 3、Harbor简介\n\nHarbor是一个开源的企业级Docker Registry服务，它提供了一个安全、可信赖的仓库来存储和管理Docker镜像。Harbor翻译为中文名称为\"庇护；居住;\"。可以理解为是Docker镜像的\"居住环境\"或者是镜像的\"庇护所\"。Harbor最初由VMware公司开发，旨在解决企业级Docker镜像管理的安全和可信任性问题。VMware于2016年发布，在2017年，VMware将Harbor开源，这使得更广泛的社区和组织可以自由地使用和贡献代码。Harbor是一个成熟、功能丰富且安全可靠的企业级Docker Registry服务，为企业容器化应用的部署和管理提供了强大的支持。\n\nHarbor官网地址：[Harbor (goharbor.io)](https://goharbor.io/)\n\nGithub开源地址：https://github.com/goharbor/harbor\n\n#### 4、Harbor下载\n\n##### 4.1、通过Linux命令下载\n\n```sh\nwget https://github.com/goharbor/harbor/releases/download/v2.10.0/harbor-offline-installer-v2.10.0.tgz\n```\n\n##### 4.2、GitHub下载\n\n下载地址：https://github.com/goharbor/harbor/releases 下载离线版本\n\n![img](https://s2.loli.net/2025/02/16/meHfNQrXgctVMnx.png)\n\n下载成功后，把包通过 `xftp` 上传到服务器。\n\n##### 4.3、解压\n\n解压文件\n\n```sh\ntar -zxvf harbor-offline-installer-v2.10.0.tgz \n```\n\n#### 5、启动Harbor\n\n##### 5.1、修改配置文件\n\n复制`harbor.yml.tmpl` 文件并重命名为`harbor.yml`修改此配置文件，需要设置hostname、端口、数据库密码等。\n\n```sh\ncp harbor.yml.tmpl harbor.yml #拷贝\n\nvim harbor.yml\n```\n\n修改配置文件：\n\n```yaml\n#修改hostname的值，如果没有域名就使用本机IP地址\nhostname: 192.168.42.133\n\n#配置启动端口号\n# http related config \nhttp:\n  # port for http, default is 80. If https enabled, this port will redirect to https port\n  port: 5000\n\n# 如果没有申请证书，需要隐藏https\n#https:\n  # https port for harbor, default is 443\n#  port: 443\n  # The path of cert and key files for nginx\n#  certificate: /your/certificate/path\n#  private_key: /your/private/key/path\n\n#启动成功后，admin用户登录密码\n# Remember Change the admin password from UI after launching Harbor.\nharbor_admin_password: AdminHarbor12345\n```\n\n![img](https://s2.loli.net/2025/02/16/uflyIABjz3amckh.png)\n\n##### 5.2、启动\n\n配置文件修改成功后，执行 `install.sh` 脚本进行安装harbor\n\n```sh\n./install.sh \n```\n\n启动报错：\n\n```ABAP\n[Step 0]: checking if docker is installed ...\n\nNote: docker version: 26.1.3\n\n[Step 1]: checking docker-compose is installed ...\n/opt/harbor/common.sh: line 119: docker-compose: command not found\n✖ Failed to parse docker-compose version.\n```\n\n可以看到，该服务器安装的 `docker` 没有安装 `docker-compose` 插件\n\n##### 5.3、安装docker-compose\n\n进入`docker-compose` 官网下载执行文件，地址： https://github.com/docker/compose 下载成功后，把可执行文件加入`Linux` 系统命令目录\n\n```sh\ncp docker-compose-linux-x86_64 /usr/local/bin/\n```\n\n重命名：\n\n```sh\nmv docker-compose-linux-x86_64 docker-compose\n```\n\n授权：\n\n```sh\nchmod +x /usr/local/bin/docker-compose\n```\n\n执行命令查看是否安装成功：\n\n```sh\ndocker-compose --version\n```\n\n如果需要卸载，直接删除即可：\n\n```sh\nrm -f /usr/bin/docker-compose\n```\n\n##### 5.4、再次启动\n\n再次执行 `./install.sh`\n\n![img](https://s2.loli.net/2025/02/16/ilOpYecKCy7wGTZ.png)\n\n提示安装成功。接下来就可以访问Harbor了。访问IP+端口：[http://192.168.42.133:5000](http://192.168.42.133:5000/)\n![img](https://s2.loli.net/2025/02/16/FrRKhnkacDUV8lG.png)\n\n访问成功，由于Harbor是通过docker管理的，所以启动非常方便。如果首页访问成功说明Docker私有仓库已经部署成功了。\n\n#### 6、Harbor Web页面操作说明\n\n默认用户名是admin，密码是启动时设置的密码：`AdminHarbor12345`\n\n![img](https://s2.loli.net/2025/02/16/9SnuUoJsKBzCFpA.png)\n\n登录成功进入主页面了。从系统首页可以看到系统分为三个菜单：项目、日志、系统管理。\n\n##### 6.1、项目\n\n项目管理顾名思义就是用来管理项目的。可以为每一个开发项目创建一个私有项目库，然后把Docker镜像存储到指定的项目中，为每个项目实现项目镜像隔离。创建项目的时候，Harbor提供了公开库（public repository）和私有库（private repository）两种类型的镜像存储空间。\n\n![img](https://s2.loli.net/2025/02/16/F34W9pclPBSkQHa.png)\n\n通过详情信息可以看到：**公开库中的镜像是对所有用户可见和可访问的，任何人都可以查看和拉取其中的镜像。而私有库中的镜像则需要登录才能访问控制，只有被授权的用户或团队才能够查看、拉取和推送镜像。** 可以根据需要创建相关的项目。\n\n![img](https://s2.loli.net/2025/02/16/l1pfKPiZngO9sXW.png)\n\n项目创建成功后，可以点击进入项目。在里面可以为每个项目单独设置不同的配置信息。可以为每一个项目添加成员信息。\n\n![img](https://s2.loli.net/2025/02/16/yBMfu4NG6PHYxdX.png)\n\n角色权限说明：\n\n- **项目管理员（Project Administrator）：**拥有项目的最高权限，可以对项目进行全面管理，包括创建和删除项目、管理项目成员和权限、配置项目属性、查看项目日志等。\n- **维护人员（Maintainer）：**类似于项目管理员，但权限稍低，通常用于协助管理项目，可以进行项目的部分管理操作，如添加和删除镜像、配置镜像的复制和同步规则等。\n- **开发者（Developer）：**具有对项目中镜像仓库的读写权限，可以拉取、推送和删除镜像，以及管理部分项目配置，但不能进行项目管理操作。\n- **访客（Guest）：**只具有对项目中镜像仓库的只读权限，可以查看镜像和元数据，但无法对镜像进行修改或删除操作。通常用于分享项目或镜像给外部团队或用户。\n- **受限访客（Restricted Guest）：**是一种更加受限的访客角色，通常用于提供给外部用户或系统，具有对项目中镜像仓库的只读权限，但可能会限制访问的部分内容或功能。\n\n在右上角显示推送命令，可以通过提示命令进行docker镜像推送。\n\n![img](https://s2.loli.net/2025/02/16/RFEucUsbXL2jYyG.png)\n\n##### 6.2、日志\n\n日志菜单就是记录用户操作日志信息的。\n\n![img](https://s2.loli.net/2025/02/16/B7HKfokDjcG4yNE.png)\n\n##### 6.3、系统管理\n\n系统管理主要用来管理Harbor用户人员信息、镜像仓库的各种配置、权限和系统设置。\n\n![img](https://s2.loli.net/2025/02/16/KfL2ViA7z8JyWvT.png)\n\n#### 7、Docker命令使用私有仓库\n\n##### 7.1、登录\n\n首先登录私有仓库地址：\n\n```sh\ndocker login  -u admin -p AdminHarbor12345 http://192.168.42.133:5000\n```\n\n会报错：\n\n```sh\nWARNING! Using --password via the CLI is insecure. Use --password-stdin.\nError response from daemon: Get \"https://192.168.42.133:5000/v2/\": proxyconnect tcp: dial tcp 192.168.65.7:3128: connect: connection refused\n```\n\ndocker认为这个地址是不安全的，所以需要在docker守护进程配置文件中把该地址加入安全范围。\n\n```sh\n{\n  \"registry-mirrors\": [\"https://ejes884z.mirror.aliyuncs.com\"],\n  \"log-driver\":\"json-file\",\n  \"log-opts\": {\"max-size\":\"1g\", \"max-file\":\"3\"},\n  \"live-restore\": true,\n  \"insecure-registries\": [\"192.168.42.133:5000\"]\n}\n\n# insecure-registries 不安全的注册表配置一些不安全的地址信息，让Docker认为是安全的。多个地址使用 \",\" 分割\n```\n\n加入配置成功后，再次登录。\n\n```sh\nWARNING! Using --password via the CLI is insecure. Use --password-stdin.\nWARNING! Your password will be stored unencrypted in /root/.docker/config.json.\nConfigure a credential helper to remove this warning. See\nhttps://docs.docker.com/engine/reference/commandline/login/#credentials-store\n\nLogin Succeeded\n```\n\n通过输出发现登录成功。认证信息存储在 `~/.docker/config.json` 文件中，只要登录信息存在，登录会一直生效不需要每次推送拉取之前都登录。\n\n##### 7.2、推送\n\n重新命名镜像名称\n\n```sh\ndocker tag 94543a6c1aef 192.168.42.133:5000/blog_project/nginx:1.26.0\n```\n\n推送\n\n```sh\ndocker push 192.168.42.133:5000/blog_project/nginx:1.26.0\n```\n\n查看Harbor仓库，推送成功。\n\n![img](https://s2.loli.net/2025/02/16/rejyKzPso7aNGOw.png)\n\n##### 7.3、拉取\n\n通过另一台服务器，使用 `docker pull`拉取镜像从私有仓库拉取镜像：\n\n```sh\ndocker pull 192.168.42.133:5000/blog_project/nginx:1.26.0\n```\n\n拉取成功\n\n![img](https://s2.loli.net/2025/02/16/VQRZWvfTwSmdIbj.png)\n\n查看下载数，发现已经更新了。\n\n![img](https://s2.loli.net/2025/02/16/kmbMnuydhpYTw5a.png)\n\n#### 8、总结\n\n关于使用Harbor搭建Docker私有仓库就介绍完毕了，如果大家有兴趣可以查看一下其他搭建方式，然后在它们之间进行对比一下看看那种方式更适合。本篇为入门级Harbor的基础使用，其他功能可以自行研究。","tags":["docker","Harbor"],"categories":["docker","部署"]},{"title":"docker使用-docker-compose.yml动态传递变量","url":"/2025/02/15/docker使用-docker-compose-yml动态传递变量/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>docker使用-docker-compose.yml动态传递变量</strong></font>\n\n<!--more-->\n\n### 1. 在 `docker-compose.yml` 中使用环境变量\n\n首先，在 `docker-compose.yml` 文件中，将 `/Users/c33/app/_static` 替换为一个环境变量。例如：\n\nyaml\n\n复制\n\n```bash\nversion: '3'\nservices:\n  app:\n    image: your-image\n    volumes:\n      - ${STATIC_PATH}:/app/_static  # 宿主机${STATIC_PATH}  docker机器/app/_static\n    environment:\n      - STATIC_PATH=${STATIC_PATH}  # 这里定义了一个环境变量 STATIC_PATH，它的值是从外部（宿主机或 .env 文件）传递进来的 ${STATIC_PATH}。\n```\n\n### 2. 在 `.env` 文件中定义环境变量\n\n在 `docker-compose.yml` 文件所在的目录中创建一个 `.env` 文件，并在其中定义 `STATIC_PATH` 变量：\n\n```bash\nSTATIC_PATH=/Users/c33/app/_static\n```\n\n### 3. 运行 `docker-compose up` 时传递环境变量\n\n当你运行 `docker-compose up` 时，Docker Compose 会自动读取 `.env` 文件中的环境变量。如果你想在运行时动态传递不同的路径，可以在命令行中覆盖 `.env` 文件中的值：\n\n```bash\nSTATIC_PATH=/path/to/your/static docker-compose up\n\n# 如果直接使用docker run\ndocker run \\\n  -e STATIC_PATH=/path/to/your/static \\\n  -v /path/to/your/static:/app/_static \\\n  your-image\n```\n\n### 4. 使用 `docker-compose.override.yml`（可选）\n\n如果你有多个环境或配置，可以使用 `docker-compose.override.yml` 文件来覆盖默认的 `docker-compose.yml` 配置。例如：\n\n```bash\nversion: '3'\nservices:\n  app:\n    volumes:\n      - ${STATIC_PATH}:/app/_static\n```\n\n然后在运行 `docker-compose up` 时传递不同的 `STATIC_PATH` 值。\n\n### 总结\n\n通过使用环境变量，你可以轻松地在运行 `docker-compose up` 时动态传递 `/Users/c33/app/_static` 这样的路径。这种方法不仅灵活，而且便于管理不同环境下的配置。","tags":["工具","教程","docker","build"],"categories":["Docker"]},{"title":"docker打包Django项目教程","url":"/2025/02/15/docker打包Django项目教程/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>docker打包Django项目教程</strong></font>\n\n<!--more-->\n\n要将 Django 项目打包为 Docker 镜像，你需要创建一个 Dockerfile，并配置相关的文件和设置。以下是一个基本的步骤指南，帮助你将 Django 项目打包为 Docker 镜像。\n\n### 1. 创建 Django 项目\n\n如果你还没有 Django 项目，可以使用以下命令创建一个新的 Django 项目：\n\n```bash\ndjango-admin startproject myproject\ncd myproject\n```\n\n### 2. 创建 Dockerfile\n\n在 Django 项目的根目录下创建一个名为 Dockerfile 的文件，内容如下：\n\n```bash\n# 使用官方 Python 镜像作为基础镜像\nFROM python:3.9-slim\n\n# 设置工作目录\nWORKDIR /app\n\n# 复制 requirements.txt 文件到容器中\nCOPY requirements.txt .\n\n# 安装依赖  # 这里的 ENVIRONMENT 是个变量，通过启动命令传递， 如果是mac走第一条\npip install --no-cache-dir -r requirements.txt\n# 复制项目文件到容器中\nCOPY . .\n\n# 暴露端口\nEXPOSE 8000\n\n# 运行 Django 开发服务器\nCMD [\"python\", \"manage.py\", \"runserver\", \"0.0.0.0:8000\"]\n```\n\n### 3. 创建 requirements.txt\n\n确保在项目根目录下有一个 requirements.txt 文件，列出所有的依赖项。你可以使用以下命令生成 requirements.txt：\n\n```bash\npip freeze > requirements.txt\n```\n\n### 4. 创建 .dockerignore 文件\n\n为了避免将不必要的文件复制到 Docker 镜像中，可以创建一个 .dockerignore 文件，内容如下：\n\n```bash\n__pycache__\n*.pyc\n*.pyo\n*.pyd\n*.db\n*.sqlite3\n*.log\n*.env\n```\n\n### 5. 构建 Docker 镜像\n\n在项目根目录下，使用以下命令构建 Docker 镜像：\n\n```bash\ndocker build -t mydjangoapp .\n```\n\n### 6. 运行 Docker 容器\n\n构建完成后，可以使用以下命令运行 Docker 容器：\n\n```bash\ndocker run -p 8000:8000 mydjangoapp\n```\n\n这将把容器的 8000 端口映射到主机的 8000 端口。\n\n### 7. 访问 Django 应用\n\n在浏览器中访问 http://localhost:8000，你应该能够看到 Django 的欢迎页面。\n\n### 8. 数据库配置（可选）\n\n如果你的 Django 项目使用数据库（如 PostgreSQL、MySQL 等），你需要在 Dockerfile 中添加数据库的相关配置，并确保数据库服务在容器中运行。你可以使用 Docker Compose 来管理多个服务。\n\n### 9. 使用 Docker Compose（可选）\n\n如果你希望使用 Docker Compose 来管理 Django 和数据库服务，可以创建一个 docker-compose.yml 文件，内容如下：\n\n```bash\nversion: '3.8'\n\nservices:\n  web:\n    image: kamali:latest\n    restart: always\n    ports:\n      - \"8000:8000\"\n    volumes:\n      - /Users/c33/app/_static:/app/_static  # 挂载路径\n    command: python manage.py runserver 0.0.0.0:8000\n    depends_on:  # 删除这一行 可以不用配置数据库\n      - mysql\n\n  mysql: # 数据库配置 mysql 可以不要\n    image: mysql:8.0\n    environment:\n      MYSQL_ROOT_PASSWORD: securepassword\n      MYSQL_DATABASE: myproject\n    volumes:\n      - mysql_data:/var/lib/mysql\n\nvolumes:\n  mysql_data:\n```\n\n然后使用以下命令启动服务：\n\n```bash\ndocker-compose up   # 此命令是控制台运行\ndocker-compose up -d   # 此命令是后台运行\n```\n\n\n\n### 10. 直接以命令运行挂载目录或者文件\n\n```bash\ndocker build -t mydjangoapp .\ndocker run -p 8000:8000 -v /root/settings.json:/app/settings.json mydjangoapp\n# /root/settings.json 宿主机的文件路径\n# /app/settings.json   docker环境路径\n```\n\n","tags":["工具","教程","docker","build"],"categories":["Docker"]},{"title":"docker-打包python项目时标签说明","url":"/2025/02/15/docker-打包python项目时标签说明/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>`docker` 打包`python`项目时标签说明</strong></font>\n\n<!--more-->\n\n### 在 Docker 中一些常见的 Python 镜像标签及其含义：\n\n> #### 1、slim\n>\n> > 描述：精简版镜像，去掉了一些不必要的文件和工具，体积较小，适合用于生产环境。\n> >\n> > 示例：python:3.12-slim\n>\n> #### 2、alpine\n>\n> > 描述：基于 Alpine Linux 的镜像，体积非常小，适合需要极小镜像的场景。由于 Alpine 使用 musl libc 而不是 glibc，某些 Python 库可能需要额外的配置。\n> >\n> > 示例：python:3.12-alpine\n>\n> #### 3. buster / bullseye\n>\n> > 描述：基于 Debian 的镜像，buster 是 Debian 10 的代号，bullseye 是 Debian 11 的代号。这些镜像包含了更多的工具和库，适合需要完整 Debian 环境的应用。\n> >\n> > 示例：python:3.12-buster 或 python:3.12-bullseye\n>\n> #### 4. stretch\n>\n> > 描述：基于 Debian Stretch（Debian 9）的镜像，适合需要较旧版本库的应用。\n> >\n> > 示例：python:3.12-stretch\n>\n> #### 5. windows\n>\n> > 描述：用于 Windows 容器的 Python 镜像，适合在 Windows Server 上运行的应用。\n> >\n> > 示例：python:3.12-windows\n>\n> #### 6. latest\n>\n> > 描述：指向最新版本的 Python 镜像，通常是最新的稳定版本。使用时要注意，可能会导致不兼容问题。\n> >\n> > 示例：python:latest\n>\n> #### 7. buster / bullseye 变体\n>\n> > 描述：除了 slim 和 alpine，你还可以找到其他变体，例如 python:3.12-buster 和 python:3.12-bullseye，这些镜像包含了完整的 Debian 系统，适合需要更多依赖的应用。\n>\n> #### 8. ubuntu\n>\n> > 描述：基于 Ubuntu 的镜像，通常是最新的 LTS（长期支持）版本。这个镜像包含了完整的 Ubuntu 环境，适合需要 Ubuntu 特性和库的应用。\n> >\n> > 示例：python:3.12-ubuntu\n>\n> #### 9. focal\n>\n> > 描述：基于 Ubuntu 20.04 LTS（Focal Fossa）的镜像。适合需要 Ubuntu 20.04 环境的应用。\n> >\n> > 示例：python:3.12-focal\n>\n> #### 10. jammy\n>\n> > 描述：基于 Ubuntu 22.04 LTS（Jammy Jellyfish）的镜像。适合需要 Ubuntu 22.04 环境的应用。\n> >\n> > 示例：python:3.12-jammy\n>\n> #### 11. bionic\n>\n> > 描述：基于 Ubuntu 18.04 LTS（Bionic Beaver）的镜像。适合需要较旧版本 Ubuntu 的应用。\n> >\n> > 示例：python:3.12-bionic\n>\n> #### 12. 具体版本\n>\n> > 描述：你可以指定具体的 Python 版本，例如 python:3.12.1，这将确保你使用的是特定的 Python 版本。\n> >\n> > 示例：python:3.12.1\n\n\n\n### 总结\n\n根据你的需求，可以选择不同的标签来构建 Docker 镜像。slim 和 alpine 适合需要小镜像的场景，而 buster 和 bullseye 则适合需要完整 Debian 环境的应用。选择合适的基础镜像可以帮助你优化应用的性能和体积。","tags":["docker","打包","标签","说明"],"categories":["docker"]},{"title":"ubuntu-强制修改密码为简单密码","url":"/2025/02/15/ubuntu-强制修改密码为简单密码/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>ubuntu 强制修改密码为简单密码</strong></font>\n\n<!--more-->\n\n在 `Ubuntu` 中，出于安全考虑，系统通常会强制要求密码满足一定的复杂性和长度要求。默认情况下，root 密码必须至少包含 8 个字符。但是我们本地测试环境，不需要那么复杂的密码。越简单的密码越容易使用。\n\n这个时候我们可以 使用 临时禁用密码复杂性检查来修改\n\n### 1. 修改 PAM 配置\n\n1. 打开终端。\n2. 编辑 PAM 密码策略配置：\n\n使用以下命令打开 common-password 文件：\n\n```bash\nsudo vim /etc/pam.d/common-password\n```\n\n```bash\n# password\trequisite\t\t\tpam_pwquality.so retry=3  此为修改前的内容\npassword requisite pam_unix.so nullok obscure min=0 max=8  # 此为修改后的内容\npassword\t[success=2 default=ignore]\tpam_unix.so obscure use_authtok try_first_pass yescrypt\npassword\tsufficient\t\t\tpam_sss.so use_authtok\npassword\trequisite\t\t\tpam_deny.so\npassword\trequired\t\t\tpam_permit.so\npassword\toptional\tpam_gnome_keyring.so \n```\n\n","tags":["root","密码"],"categories":["系统","ubuntu"]},{"title":"ubuntu安装配置docker","url":"/2025/02/15/ubuntu安装配置docker/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>ubuntu安装配置docker</strong></font>\n\n<!--more-->\n\n### 1. 更新系统\n\n在 Ubuntu 中打开终端，更新系统：\n\n```bash\nsudo apt update\nsudo apt upgrade\n```\n\n\n\n### 2.  安装 Snap\n\n如果你的系统尚未安装 Snap，可以使用以下命令安装：\n\n```\nsudo apt install snapd\n```\n\n\n\n### 3. 使用 Snap 安装 Docker\n\n使用以下命令通过 Snap 安装 Docker：\n\n```bash\nsudo snap install docker\n```\n\n### 4. 启动 Docker 服务\n\n安装完成后，Docker 服务应该会自动启动。你可以使用以下命令检查 Docker 服务的状态：\n\n```\nsudo systemctl status snap.docker.dockerd\n```\n\n如果服务没有运行，可以使用以下命令启动它：\n\n```\nsudo systemctl start snap.docker.dockerd\n```\n\n\n\n### 4. 配置国内镜像加速器(国外服务器忽略)\n\n+ `vim /etc/docker/daemon.json`\n\n```bash\n{\n\t\"registry-mirrors\": [\n\t\t\"https://docker.mirrors.ustc.edu.cn\",\n\t\t\"https://docker.mirrors.tuna.tsinghua.edu.cn\",\n\t\t\"https://www.daocloud.io/mirror\",\n\t\t\"https://mirror.ccs.tencentyun.com\",\n\t\t\"https://hub-mirror.c.163.com\"\n\t]\n}\n```\n\n### 5. 重启 docker服务\n\n```\nsudo systemctl restart docker\n```\n\n\n\n### 6. 验证 Docker 安装\n\n运行以下命令以验证 Docker 是否安装成功：\n\n```bash\nsudo docker --version\n```\n\n### 7. 运行 Docker Hello World 示例\n\n为了确保 Docker 正常工作，可以运行一个简单的 Hello World 容器：\n\n```bash\nsudo docker run hello-world\n```\n\n如果一切正常，你将看到一条消息，表明 Docker 已成功安装并运行。\n\n### 8. （可选）将用户添加到 Docker 组\n\n如果你希望在不使用 sudo 的情况下运行 Docker 命令，可以将你的用户添加到 Docker 组：\n\n```bash\nsudo usermod -aG docker $USER\n```\n\n添加后，注销并重新登录，或者重启系统以使更改生效。\n\n### 总结\n\n通过 Snap 安装 Docker 是一种简单的方法，适合在 Ubuntu 上快速部署 Docker。","tags":["docker","安装"],"categories":["系统","ubuntu"]},{"title":"ubuntu-共享文件夹_samba","url":"/2025/02/15/ubuntu-共享文件夹-samba/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>ubuntu 共享文件夹 For samba</strong></font>\n\n<!--more-->\n\n在 Ubuntu 中共享文件夹可以通过多种方式实现，最常见的方法是使用 Samba（适用于 Windows 和 Linux 之间的共享）或 NFS（适用于 Linux 之间的共享）。以下是这两种方法的详细步骤。\n\n### 方法 1：使用 Samba 共享文件夹\n\n#### 1. 安装 Samba\n\n首先，确保你的系统已安装 Samba。打开终端并运行以下命令：\n\n```bash\nsudo apt update\nsudo apt install samba\n```\n\n#### 2. 创建共享文件夹\n\n选择一个目录作为共享文件夹，或者创建一个新的文件夹。例如，创建一个名为 shared 的文件夹：\n\n```bash\nmkdir ~/shared\n```\n\n#### 3. 配置 Samba\n\n编辑 Samba 配置文件：\n\n```bash\nsudo nano /etc/samba/smb.conf\n```\n\n在文件的末尾添加以下内容：\n\n```bash\n# 在 [global] 部分中，添加或修改以下设置：  开启全速\n [global]\n   max connections = 100  # 增加并发性能\n   max open files = 10000  # 增加并发性能\n   # 性能优化设置\n   socket options = TCP_NODELAY SO_RCVBUF=8192 SO_SNDBUF=8192\n   max protocol = SMB3\n   min protocol = SMB2\n   \n[MyFiles]\n   path = /home/kate/SambaFiles\n   available = yes\n   valid users = root\n   read only = no\n   browsable = yes\n   public = yes\n   writable = yes\n   create mask = 0755\n   directory mask = 0755\n```\n\n请将 your_username 替换为你的实际用户名。\n\n#### 4. 设置 Samba 用户\n\n为 Samba 设置用户密码：\n\n```bash\nsudo smbpasswd -a your_username\n```\n\n#### 5. 重启 Samba 服务\n\n重启 Samba 服务以使更改生效：\n\n```bash\nsudo systemctl restart smbd\n```\n\n#### 6. 访问共享文件夹\n\n在 Windows 系统中，你可以通过以下方式访问共享文件夹：\n\n1. 打开文件资源管理器。\n\n在地址栏中输入 \\\\your_ubuntu_ip\\SharedFolder，将 your_ubuntu_ip 替换为 Ubuntu 机器的 IP 地址。\n\n输入 Samba 用户名和密码进行访问。\n\n### 方法 2：使用 NFS 共享文件夹\n\nNFS（网络文件系统）适用于 Linux 之间的共享。\n\n#### 1. 安装 NFS\n\n首先，确保你的系统已安装 NFS：\n\n```bash\nsudo apt update\nsudo apt install nfs-kernel-server\n```\n\n#### 2. 创建共享文件夹\n\n选择一个目录作为共享文件夹，或者创建一个新的文件夹。例如，创建一个名为 shared 的文件夹：\n\n```bash\nmkdir ~/shared\n```\n\n#### 3. 配置 NFS\n\n编辑 NFS 配置文件：\n\n```bash\nsudo nano /etc/exports\n```\n\n在文件中添加以下行：\n\n```bash\n/home/your_username/shared *(rw,sync,no_subtree_check)\n```\n\n请将 your_username 替换为你的实际用户名。\n\n#### 4. 重启 NFS 服务\n\n重启 NFS 服务以使更改生效：\n\n```bash\nsudo exportfs -a\nsudo systemctl restart nfs-kernel-server\n```\n\n#### 5. 访问共享文件夹\n\n在另一台 Linux 机器上，你可以通过以下命令挂载 NFS 共享：\n\n```bash\nsudo mount your_ubuntu_ip:/home/your_username/shared /mnt\n```\n\n将 your_ubuntu_ip 替换为 Ubuntu 机器的 IP 地址，/mnt 是你希望挂载的本地目录。\n\n### 总结\n\n通过以上步骤，你可以在 Ubuntu 中共享文件夹。选择 Samba 或 NFS 取决于你的需求和网络环境。如果在配置或使用过程中遇到任何问题，请提供具体的错误信息，以便进一步排查。","tags":["docker","挂载","文件夹共享"],"categories":["系统","ubuntu"]},{"title":"docker-compose部署dockerc程序","url":"/2025/02/07/docker-compose部署dockerc程序/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>`docker-compose` 部署 `dockerc`程序</strong></font>\n\n要在 Docker 中安装 MySQL，并配置为开机自动启动、断线自动重启，并设置日志大小限制为 5MB，你可以按照以下步骤进行操作：\n\n<!--more-->\n\n### 1. 创建 Docker Compose 文件\n\n使用 `Docker Compose` 可以更方便地管理容器的配置。首先，确保你已经安装了 `Docker` 和 `Docker Compose`。\n\n创建一个名为` docker-compose.yml `的文件，并添加以下内容：\n\n```yaml\nversion: '3.8'\n\nservices:\n  mysql:\n    image: mysql:latest\n    restart: always  # 设置容器在退出时自动重启\n    environment:\n      MYSQL_ROOT_PASSWORD: your_root_password  # 设置 MySQL root 用户的密码\n      MYSQL_DATABASE: your_database_name        # 创建一个默认数据库\n      MYSQL_USER: your_username                  # 创建一个用户\n      MYSQL_PASSWORD: your_user_password         # 设置用户密码\n    ports:\n      - \"3306:3306\"  # 映射 MySQL 端口\n    volumes:\n      - mysql_data:/var/lib/mysql  # 持久化数据\n      - ./mysql_logs:/var/log/mysql  # 持久化日志\n\nvolumes:\n  mysql_data:\n```\n\n\n\n### 2. 配置日志大小\n\n要限制 `MySQL` 日志的大小为 `5MB`，你可以在 `MySQL` 配置中添加相关设置。创建一个名为 `my.cnf` 的配置文件，并添加以下内容：\n\n```bash\n[mysqld]\n\n*# 设置日志文件大小限制*\n\nmax_binlog_size = 5M\n```\n\n\n\n### 3. 更新 `Docker Compose` 文件以使用自定义配置\n\n更新 `docker-compose.yml` 文件以使用自定义的 `MySQL` 配置文件：\n\n```yaml\nversion: '3.8'\n\nservices:\n  mysql:\n    image: mysql:latest\n    restart: always  # 设置容器在退出时自动重启\n    environment:\n      MYSQL_ROOT_PASSWORD: your_root_password  # 设置 MySQL root 用户的密码\n      MYSQL_DATABASE: your_database_name        # 创建一个默认数据库\n      MYSQL_USER: your_username                  # 创建一个用户\n      MYSQL_PASSWORD: your_user_password         # 设置用户密码\n    ports:\n      - \"3306:3306\"  # 映射 MySQL 端口\n    volumes:\n      - mysql_data:/var/lib/mysql  # 持久化数据\n      - ./mysql_logs:/var/log/mysql  # 持久化日志\n      - ./my.cnf:/etc/mysql/conf.d/my.cnf  # 使用自定义配置文件\n\nvolumes:\n  mysql_data:\n```\n\n\n\n### 4. 启动 `MySQL` 容器\n\n在包含 `docker-compose.yml` 和 `my.cnf` 文件的目录中，运行以下命令以启动 `MySQL` 容器：\n\n```bash\ndocker-compose up -d\n```\n\n\n\n### 5. 验证 MySQL 容器状态\n\n你可以使用以下命令检查 `MySQL` 容器的状态：\n\n```bash\ndocker ps\n```\n\n\n\n### 6. 查看日志\n\n要查看 `MySQL` 容器的日志，可以使用以下命令：\n\n```bash\ndocker logs <container_id_or_name>\n```\n\n\n\n### 总结\n\n通过以上步骤，你应该能够成功在 `Docker` 中安装 `MySQL`，并配置为开机自动启动、断线自动重启，并设置日志大小限制为 `5MB`。如果你有其他问题或需要进一步的帮助，请告诉我！","tags":["工具","docker","数据库"],"categories":["Docker"]},{"title":"在苹果Silicon芯片（M1/M2/M3）Mac电脑上使用Docker","url":"/2025/02/06/在苹果Silicon芯片（M1-M2-M3）Mac电脑上使用Docker/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>在苹果Silicon芯片（M1/M2/M3）Mac电脑上使用Docker</strong></font>\n\n###### 本文搬运自[在苹果Silicon芯片（M1/M2/M3）Mac电脑上使用Docker | 教程 | Tinkink](https://tutorials.tinkink.net/zh-hans/mac/how-to-use-docker-on-m1-mac.html)\n\n<!--more-->\n\n## 背景和困难\n\n苹果于 2020 年正式发布了搭载自研芯片 Apple Silicon 的电脑，随电脑发布的第一款芯片型号为 M1 。这款芯片的架构由经典的 x86 改为了 ARM 架构。\n\n为了解决 CPU 架构变更带来的软件不兼容问题，苹果在 MacOS 中附带了用了转译 APP 代码的 Rosetta 2 。这个软件可以在运行时将 x86 架构的代码转译为 ARM 架构的代码，从而使得大部分软件无缝地运行在搭载新芯片的 MacOS 上。\n\n尽管大部分的软件已经可以在 Apple Silicon （M1/M2/M3）芯片上正常运行，但有一类特殊的软件却一直无法很顺利地运行——虚拟化软件。这包括虚拟机和 Docker 之类的软件。\n\n经典的虚拟机软件如 VirtualBox 明确表示没有支持计划。而 Parallels Desktop 虽然支持，但价格让人望而生畏。\n\n因为 Docker 在非 Linux 系统中实际上也依赖于一个虚拟化的 Linux 作为 Host，因此在虚拟机没有完善的解决方法时，Docker 也是没有办法顺畅运行的。\n\n## 官方方案\n\nDocker Desktop For Mac 提供了可以在 Apple Silicon 芯片上运行的版本，它使用了 QEMU 来处理不同架构的虚拟化问题。但是它对有一定规模的公司不再免费。因此如果你在一个稍具规模的公司，可能不会选择使用 Docker Desktop For Mac。如果你是个人使用，那么 Docker Desktop For Mac 仍然是一个非常不错的解决方案。\n\n## Lima\n\n[Lima](https://github.com/lima-vm/lima) 是一个免费的开源软件，同样使用 QEMU 来处理不同架构的虚拟化问题。和 Docker Desktop For Mac 不同的是，它的容器软件使用的是 Containerd 而不是 Docker。\n\n> 在容器的发展历史中，一开始只有 Docker ，但随后社区希望容器可以标准化，因此诞生了 CRI 标准。Containerd 是一个这个标准的一种实现，Docker 也同样遵守这个标准。因此 Containerd 与 Docker 在使用时几乎可以兼容。\n\n按照官方教程，使用 Homebrew 安装 lima 之后就可以使用了：\n\n```bash\n# 安装\nbrew install lima\n\n# 启动\nlimactl start\n```\n\n此时就可以使用`nerdctl`来进行 Containerd 的各种操作。\n\n```bash\nlima nerdctl run -d --name nginx -p 80:80 nginx:alpine\n```\n\n可以看到，`lima nerdctl`的使用与`docker`几乎一模一样。使用完成后除了将容器关掉外，还可以将虚拟化环境也关闭，以节约内存：\n\n```bash\nlimactl stop\n```\n\nlima 还可以设置非常多虚拟化的细节，也可以设置多个虚拟环境。更多使用细节可查看官方文档：<(https://github.com/lima-vm/lima>\n\n## Colima\n\n[Colima](https://github.com/abiosoft/colima) 是一个基于 Lima 的封装，同样是免费的开源软件，但是它的容器软件使用的是 Docker。\n\nColima 的安装使用也非常简单：\n\n```bash\n# 如果你没有安装过 docker 客户端，需要先安装\nbrew install docker\n# 安装 colima\nbrew install colima\n```\n\n使用时，只需要使用 `colima` 命令即可：\n\n```bash\ncolima start\n```\n\n待启动完成后，就可以正常使用`docker`命令了，不需要额外进行其它的设置。\n\n使用完成后同样可以将虚拟化环境关闭：\n\n```bash\ncolima stop\n```\n\n## OrbStack\n\n\"OrbStack 是在 macOS 上运行 Docker 容器和 Linux 机器的快速、轻量、简单的方式。您可以将其视为超级 WSL 和 Docker Desktop 的 macOS 版本，所有这些都在一个易于使用的应用程序中。\"（来自官方网站。）\n\nOrbStack 提供了一个 GUI 界面来管理 macOS 上的 Docker 容器和 Linux 机器。以及一个命令行界面。\n\n您可以从官方网站下载：https://orbstack.dev/，或使用 Homebrew 安装：\n\n```bash\nbrew install --cask orbstack\n```\n\n```bash\nRunning `brew update --auto-update`...\n\n...\n\n...\n\n==> Caveats\nOpen the OrbStack app to finish setup.\n\n==> Downloading https://cdn-updates.orbstack.dev/arm64/OrbStack_v0.5.1_985_arm64.dmg\n######################################################################## 100.0%\n==> Installing Cask orbstack\n==> Moving App 'OrbStack.app' to '/Applications/OrbStack.app'\n🍺  orbstack was successfully installed!\n```\n\n只需启动 OrbStack，您现在就可以使用 Docker 了。\n\n![OrbStack 的截图](https://tutorials.tinkink.net/assets/01.screenshot-orbstack.a5020e54.png)\n\n## 小结\n\n- Apple Silicon 芯片的 Mac 设备使用 Docker 不是很容易\n- Docker Desktop For Mac 可用，但是对大中型公司收费\n- Lima & Colima 是免费开源的解决方案\n- OrbStack 是一个 GUI 解决方案","tags":["python","mongodb","django","Centos7","数据库"],"categories":["数据库","mongodb"]},{"title":"nodejs部署后端项目教程","url":"/2024/12/13/nodejs部署后端项目教程/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>nodejs部署后端项目教程(以部署图片压缩接口为例)</strong></font>\n\n<!--more-->\n\n这里我们将使用 Node.js 和 Express 框架来构建后端，并使用 `sharp` 库来进行图片压缩。\n\n首先，确保你已经安装了 Node.js 和 npm。然后，创建一个新的项目目录，并初始化一个新的 Node.js 项目：\n\n```bash\nmkdir image-compressor-backend\ncd image-compressor-backend\nnpm init -y\n```\n\n接下来，安装所需的依赖项：\n\n```bash\nnpm install express sharp multer\n```\n\n然后，创建一个 `server.js` 文件，并添加以下代码来构建后端服务：\n\n```js\nconst express = require('express');\nconst sharp = require('sharp');\nconst multer = require('multer');\nconst path = require('path');\nconst fs = require('fs');\n \nconst app = express();\nconst port = 3001; // 确保与前端通信的端口不同\n \n// 设置 multer 存储配置\nconst storage = multer.memoryStorage();\nconst upload = multer({ storage: storage });\n \n// 处理图片压缩请求\napp.post('/compress', upload.single('image'), async (req, res) => {\n  const file = req.file;\n  if (!file) {\n    return res.status(400).send('No file uploaded.');\n  }\n \n  const quality = parseInt(req.body.quality, 10) || 80; // 默认质量为80%\n  const maxWidth = parseInt(req.body.maxWidth, 10) || 2000;\n  const maxHeight = parseInt(req.body.maxHeight, 10) || 2000;\n \n  try {\n    // 使用 sharp 进行图片压缩\n    const compressedBuffer = await sharp(file.buffer)\n      .resize({ width: maxWidth, height: maxHeight, fit: 'inside', withoutEnlargement: true })\n      .jpeg({ quality: quality })\n      .toBuffer();\n \n    // 设置响应头并发送压缩后的图片\n    res.set({\n      'Content-Type': 'image/jpeg',\n      'Content-Length': compressedBuffer.length,\n    });\n    res.send(compressedBuffer);\n  } catch (error) {\n    console.error('Error compressing image:', error);\n    res.status(500).send('Error compressing image.');\n  }\n});\n \n// 启动服务器\napp.listen(port, () => {\n  console.log(`Server is running at http://localhost:${port}`);\n});\n```\n\n这个后端服务监听在端口 3001 上，并提供了一个 `/compress` 路由来处理图片压缩请求。它使用 `multer` 中间件来处理文件上传，并使用 `sharp` 库来进行图片压缩。\n\n前端代码需要稍作修改以与这个后端服务配合。特别是，`compressFile` 函数需要发送一个请求到后端来压缩图片。这里是一个修改后的 `compressFile` 函数示例：\n\n```python\nimport requests\nfrom PIL import Image\nimport io\n\n# 假设你有一个字典来存储文件名和对应的文件对象\nfiles = {\n    'example.jpg': open('path/to/example.jpg', 'rb')\n}\n\ndef compress_file(file_name):\n    file_data = files.get(file_name)\n    if not file_data:\n        return\n    \n    # 获取质量值（这里假设是从某个地方获取的，比如用户输入）\n    quality = 80  # 示例值，你可以从UI或其他地方获取这个值\n    \n    # 设置最大宽度和高度\n    max_width = 2000\n    max_height = 2000\n    \n    # 创建表单数据\n    form_data = {\n        'image': file_data,\n        'quality': quality,\n        'maxWidth': max_width,\n        'maxHeight': max_height\n    }\n    \n    try:\n        # 发送POST请求\n        response = requests.post('http://localhost:3001/compress', files=form_data)\n        \n        # 检查响应状态码\n        if response.status_code != 200:\n            response.raise_for_status()\n        \n        # 获取压缩后的图像数据\n        compressed_image_data = response.content\n        \n        # 将图像数据保存为文件\n        compressed_file_name = 'compressed-' + file_name\n        with open(compressed_file_name, 'wb') as compressed_file:\n            compressed_file.write(compressed_image_data)\n        \n        # 更新文件字典（如果需要）\n        files[file_name] = {\n            'original': file_data,\n            'compressed': open(compressed_file_name, 'rb')\n        }\n        \n        # 更新文件列表（这个函数需要你根据实际需求实现）\n        update_file_list()\n        \n    except requests.RequestException as e:\n        print(f\"压缩 {file_name} 失败: {e}\")\n\n# 示例调用\ncompress_file('example.jpg')\n\n# 注意：这个函数需要在适当的地方被调用，并且需要确保文件路径和服务器地址是正确的。\n```\n\n请注意，这个示例假设前端和后端运行在同一个域下，或者你已经配置了 CORS（跨源资源共享）来允许前端与后端通信。如果你遇到跨域问题，你可能需要在后端添加适当的 CORS 头。\n\n现在，当你运行后端服务器并使用前端页面上传和压缩图片时，前端会将图片发送到后端的 `/compress` 路由，后端会使用 `sharp` 库进行压缩，并将压缩后的图片发送回前端。前端然后会显示压缩后的图片，并提供下载选项。","tags":["教程","服务器","nodejs","后端"],"categories":["后端","nodejs"]},{"title":"alibaba3 使用Python管理器pyenv安装python3.13","url":"/2024/12/09/alibaba3安装python3-13/","content":"\n\n<font color=#00b2c2 size=5 face=宋体><strong></strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong></strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong></strong></font>\n\n- 使用 `pyenv` 安装 Python 3.12 是一个灵活且方便的方法，它允许你在同一个系统上管理多个 Python 版本。以下是使用 `pyenv` 安装 Python 3.12 的详细步骤：\n\n  ### 1. 安装依赖\n\n  首先，你需要安装一些依赖项，这些依赖项在编译 Python 源代码时是必需的。在 CentOS 7 上，你可以使用 `yum` 来安装这些依赖项：\n\n  ```bash\n  sudo yum install -y gcc zlib-devel bzip2-devel libffi-devel readline-devel sqlite-devel openssl-devel tk-devel xz-devel libffi-devel\n  ```\n\n  ### 2. 安装 pyenv\n\n  接下来，你需要安装 `pyenv`。`pyenv` 是一个用 Bash 编写的脚本，它允许你轻松切换和管理多个 Python 版本。你可以通过以下步骤安装 `pyenv`：\n\n  - 使用 `git` 克隆 `pyenv` 的仓库到你的主目录下（或任何你偏好的位置）：\n\n  ```bash\n  cd ~\n  git clone https://github.com/pyenv/pyenv.git ~/.pyenv\n  ```\n\n  - 将 `pyenv` 初始化脚本添加到你的 shell 配置文件中（如 `~/.bashrc` 或 `~/.bash_profile`）。这将允许你在每个新的 shell 会话中自动加载 `pyenv`：\n\n  ```bash\n  echo 'export PATH=\"$HOME/.pyenv/bin:$PATH\"' >> ~/.bashrc\n  echo 'eval \"$(pyenv init --path)\"' >> ~/.bashrc\n  echo 'eval \"$(pyenv init -)\"' >> ~/.bashrc\n  source ~/.bashrc\n  ```\n\n  ### 3. 安装 Python 3.13\n\n  现在，你可以使用 `pyenv` 来安装 Python 3.13 了：\n\n  ```bash\n  pyenv install 3.13.x  # x 表示小版本号，你可以根据需要安装具体的版本，如 3.13.0\n  ```\n\n  这个命令会从互联网上下载 Python 3.13 的源代码，并在你的系统上编译和安装它。这可能需要一些时间，具体取决于你的网络连接和计算机性能。\n\n  ### 4. 设置全局或本地 Python 版本\n\n  安装完成后，你可以使用以下命令之一来设置全局或本地 Python 版本：\n\n  - 设置全局 Python 版本：\n\n  ```bash\n  pyenv global 3.13.x\n  ```\n\n  这将使 Python 3.12 成为你系统上的默认 Python 版本。\n\n  - 设置当前目录下的 Python 版本（本地版本）：\n\n  ```bash\n  pyenv local 3.13.x\n  ```\n\n  这将在当前目录及其子目录中设置 Python 3.13 为默认版本。当你进入这些目录时，`pyenv` 会自动切换到指定的 Python 版本。\n\n  ### 5. 验证安装\n\n  最后，你可以通过以下命令来验证 Python 3.13 是否已成功安装：\n\n  ```bash\n  python --version\n  ```\n\n  或者，如果你想要确保你正在使用的是通过 `pyenv` 安装的 Python 3.13，你可以使用 `pyenv` 的 `which` 命令来找到 Python 解释器的路径：\n\n  ```bash\n  pyenv which python\n  ```\n\n  如果一切设置正确，这些命令应该会显示 Python 3.13 的版本号或解释器的路径。\n\n  ### 注意事项\n\n  - 在使用 `pyenv` 安装 Python 版本时，确保你的系统已经安装了编译该版本所需的依赖项。\n  - `pyenv` 会在你的主目录下创建一个 `.pyenv` 目录来存储不同版本的 Python。这不会干扰系统默认的 Python 版本。\n  - 如果你在使用 `pyenv` 时遇到任何问题，可以查阅 `pyenv` 的官方文档或在互联网上搜索相关的解决方案。","tags":["docker","赚钱","标签1"],"categories":["主分类","二级分类"]},{"title":"django配置ASGI服务器教程","url":"/2024/12/09/django配置ASGI服务器教程/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>django配置ASGI服务器教程</strong></font>\n\n<!--more-->\n\n# 环境说明：\n\n+ 系统环境：Alibaba3\n\n+ Python版本：`3.13`\n+ Django版本：`5.1.4`\n+ uvicorn版本：`0.32.1`\n\n## 1、安装 **uvicorn** 服务器\n\n```python\npip install django uvicorn\n```\n\n### 2、创建ASGI应用程序\n\n在Django 3.0及更高版本中，Django默认提供了一个`asgi.py`文件，该文件位于与`wsgi.py`相同的位置（通常是项目的主目录下）。这个文件包含了一个ASGI应用程序的实例，你可以直接使用它。\n\n```python\nimport os\nfrom django.core.asgi import get_asgi_application\n\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', '<your_project_name>.settings')  # <your_project_name> 替换成你的项目\napplication = get_asgi_application()\n```\n\n## 3、设置settings.py\n\n```python\n# WSGI_APPLICATION = '<your_project_name>.wsgi.application'   # 同步请求 直接注销掉 我们不需要\nASGI_APPLICATION = '<your_project_name>.asgi.application'   # 异步项目  将 <your_project_name> 替换成你的项目\n```\n\n### 4、 安装并运行ASGI服务器\n\n要运行ASGI应用，你需要安装一个`ASGI`服务器，如`Uvicorn`、`Daphne`或`Hypercorn`。然后，你可以使用这些服务器来启动你的`Django`应用。例如，使用`Uvicorn`启动`Django`应用的命令可能看起来像这样\n\n```python\n# uvicorn your_project_name.asgi:application   # 默认启动  访问地址为  http://127.0.0.1:8000\n\n# 可以自己指定端口\nuvicorn your_project_name.asgi:application --host 0.0.0.0 --port 8035    # 指定所有ip可访问 项目运行端口为 8035\n```\n\n","tags":["python","django","ASGI服务器","异步WEB"],"categories":["python","django"]},{"title":"Python-Mysql异步并发处理数据库","url":"/2024/11/30/Python-Mysql异步并发处理数据库/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Python-Mysql异步并发处理数据库 模版</strong></font>\n\n<!--more-->\n\n\n\n## **安装库：**\n\n```python\n# aiomysql库 # 异步mysql 数据库\n\npip3 install aiomysql\n```\n\n\n\n## **代码：**\n\n\n\n```python\nimport asyncio\nimport aiomysql\nimport hashlib\n\nclass MySQLDatabase:\n    def __init__(self, host, port, user, password, db_name, loop=None, maxsize=20, minsize=1):\n        self.host = host\n        self.port = port\n        self.user = user\n        self.password = password\n        self.db_name = db_name\n        self.loop = loop or asyncio.get_event_loop()\n        self.maxsize = maxsize\n        self.minsize = minsize\n        self.pool = None\n\n    async def create_pool(self):\n        self.pool = await aiomysql.create_pool(\n            host=self.host,\n            port=self.port,\n            user=self.user,\n            password=self.password,\n            db=self.db_name,\n            loop=self.loop,\n            autocommit=True,\n            charset='utf8',\n            maxsize=self.maxsize,\n            minsize=self.minsize,\n        )\n\n    async def fetch_data(self, query, params=None):\n        async with self.pool.acquire() as conn:\n            async with conn.cursor(aiomysql.DictCursor) as cur:\n                await cur.execute(query, params)\n                result = await cur.fetchall()\n                return result\n\n    async def update_data(self, query, params):\n        print(\"正在执行>>> \", params)\n        async with self.pool.acquire() as conn:\n            async with conn.cursor() as cur:\n                await cur.execute(query, params)\n                await conn.commit()\n\n    async def close_pool(self):\n        self.pool.close()\n        await self.pool.wait_closed()\n\n\nTable = \"table\"   # 数据表\n_localhost = \"127.0.0.1\" # 数据库地址\nUsername = \"admin\"  # username\nPassword = \"123456\"  # password\nDB_Name = \"test\"    # 数据库名\n# 使用示例\n\nasync def main():\n    # 数据库配置\n    db = MySQLDatabase(host=_localhost, port=3306, user=Username, password=Password, db_name=DB_Name)\n    \n    # 创建连接池\n    await db.create_pool()\n    \n    # ## 并发 查询多条内容 >>>\n    # # 准备多个查询任务\n    # query_tasks = [db.fetch_data(\"SELECT * FROM your_table WHERE id = %s\", (1,)), db.fetch_data(\"SELECT * FROM your_table WHERE id = %s\", (2,)), # ... 可以添加更多查询任务\n    # ]\n    # # 并发执行查询任务\n    # results = await asyncio.gather(*query_tasks)\n    # for result in results:\n    #     print(\"Fetched Data:\", result)\n    \n    # 查询数据\n    query = f\"SELECT * FROM {Table} WHERE id = %s\"\n    params = (1,)\n    result = await db.fetch_data(query, params)  # params可为空 为空默认查询全部数据\n    # print(\"Fetched Data:\", result)\n    \n    update_tasks = []\n    for item in result:\n      \t# 添加为列表异步执行\n        update_tasks.append(db.update_data(f\"UPDATE {Table} SET title = %s WHERE id = %s\", (\"这是一个测试title\", item[\"id\"])),)\n    \n    \n    ## 异步兵法修改内容\n    # # 准备多个更新任务\n    # update_tasks = [\n    #     db.update_data(\"UPDATE your_table SET column_name = %s WHERE id = %s\", ('new_value1', 1)),\n    #     db.update_data(\"UPDATE your_table SET column_name = %s WHERE id = %s\", ('new_value2', 2))\n    # ]\n    #\n    # # 并发执行更新任务\n    await asyncio.gather(*update_tasks)    # 等待执行所有添加的内容\n    # print(\"All Data Updated\")\n    \n    # 关闭连接池\n    await db.close_pool()\n\n\n# 运行主函数\nasyncio.run(main())\n```","tags":["python","mysql","并发"],"categories":["数据库","mysql"]},{"title":"Centos7-Docker下安装mongodb","url":"/2024/11/11/Centos7-Docker下安装mongodb/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Centos7-Docker下安装mongodb：</strong></font>\n\n<!--more-->\n\n#### Ps：本文参考自：[在centos7上使用 docker安装mongodb挂载宿主机以及创建其数据库的用户名和密码（最新版本） - 流走在黑夜深巷的猫 - 博客园](https://www.cnblogs.com/Da-Mao/p/17804525.html)\n\n# 在centos7上使用 docker安装mongodb挂载宿主机以及创建其数据库的用户名和密码（最新版本）\n\n因为博主在使用docker安装mongodb并挂载时，发现在网上搜了好多都是以前版本的mongodb，并且按照他们操作总是在进入mongodb出问题，博主搞了好久终于弄好了，故写下博客，供有需要的的人参考。博主安装和官网有些区别，想看官网快速搭建的——>[Mongodb官网快速指南]<——(https://www.mongodb.com/docs/manual/tutorial/install-mongodb-community-with-docker/ \"Mongodb官网快速指南\")废话不多说开搞！\n\n### 一、安装mongodb\n\n1.1查看版本(不想看版本的，这一步可以跳过)\n\n```sql\ndocker search mongo\n```\n\n![image](https://s2.loli.net/2024/11/11/n2TSfQMmGd7DAeZ.png)\n1.2拉取mongodb镜像\n\n```shell\n# 默认下载最新版本（也就是latest）\ndocker pull mongo\n# 上面也可以写成\ndocker pull mongo:latest\n\n##上面代码不行，提示你没权限，你就按照提示这上面代码前sudo（使用的账户是root权限）\nsudo docker pull mongo\n```\n\n![image](https://s2.loli.net/2024/11/11/UVOw2SyX7qxeRh6.png)\n1.3.查看本地已下载镜像，并查看是否下载mongo镜像\n\n```bash\ndocker image ls -a\n```\n\n![image](https://s2.loli.net/2024/11/11/aW1Iephz8SDJxXM.png)\n1.4.在宿主机上挂载并运行\n\n```powershell\n# 1.4.1首先创建一个要挂载的文件（这里-p后面的文件地址就写你自己想要创建的）\nmkdir -p /data/docker_volume/mongo/data\n\n# 1.4.2.然后运行容器并挂载\n    ## 需要验证\ndocker run -p 27017:27017 --name mymongo -v /data/docker_volume/mongo/data:/data/db -d mongo --auth\n    ##不需要验证\ndocker run -p 27017:27017 --name mymongo -v /data/docker_volume/mongo/data:/data/db -d mongo\n\n# 如果不限制log输出大小， 会一直写下去，最后系统崩溃.  该命令限制log输出大小为 5M\n#  # 设置日志大小限制为 5MB（5 * 1024 * 1024 字节）\ndocker run --restart=always -p 27017:27017 --name mymongo -v /data/docker_volume/mongo/data:/data/db -e MONGO_LOG_MAX_SIZE=5242880 -d mongo --auth\n\n# Mac下部署需要特殊的文件夹权限\ndocker run --restart=always -p 27017:27017 --name mymongo -v /Users/kamala/Docker/MongoDB/s1/data:/data/db -e MONGO_INITDB_ROOT_USERNAME=admin -e MONGO_INITDB_ROOT_PASSWORD=admin -e MONGO_LOG_MAX_SIZE=5242880 --user 1000:50 -d mongo --wiredTigerCacheSizeGB 1 --auth\n#  1.4.3.查看是否运行\ndocker ps -a\n```\n\n在上面的命令中，几个命令参数的详细解释如下：\n`-p` 映射容器服务的 `27017` 端口到宿主机的 `27017` 端口。外部可以直接通过 宿主机` ip:27017` 访问到 `mongo` 的服务\n`-v `为设置容器的挂载目录，这里是将本机的“`/data/docker_volume/mongo/data`”目录挂载到容器中的`/data/db`中，作为 `mongodb` 的存储目录\n`--name` 为设置该容器的名称\n`-d` 设置容器以守护进程方式运行（后台运行）\n`–auth` 需要验证就加，不需要验证，就去掉。默认`mongodb`是不使用用户认证\n![image](https://s2.loli.net/2024/11/11/BKb3wsrdzVeNmpf.png)\n1.5.设置`mongodb`随`docker`自启动（这一步可加可不加，看你个人)\n\n```sql\ndocker update mymongo --restart=always\n```\n\n注意：这里的`mymongo`是容器的名字（上面1.4.2哪里运行容器`--name`后起的名字），不是镜像的名字。\n\n### 二、创建其数据库的用户名和密码\n\n#### ①如果你不需要设置用户和密码，下面就不用看了，直接可以连接`mongo`了（这种就像是裸奔不安全）\n\n#### ②如果你在上面 容器运行挂载选择需验证方式（在1.4.2处）\n\n2.2.1 首先 登录`mymongo`容器，进入`admin`数据库\n\n```bash\ndocker exec -it mymongo mongosh admin\n```\n\n![image](https://s2.loli.net/2024/11/11/QMvnOdIRasP8ZcC.png)\n2.2.2 然后 按照 2.3.4步骤往下走\n\n#### ③其余的就往下看\n\n2.3.1.进入`mongo`容器\n\n```bash\ndocker exec -it mymongo /bin/bash\n```\n\n![image](https://s2.loli.net/2024/11/11/l7MfPw48DsjXqB5.png)\n注意：这里的mymongo是容器的名字，不是镜像的名字。（忘记容器名字，可使用docker ps -a 查看容器名）\n![image](https://s2.loli.net/2024/11/11/kyrz5UoOGif84u7.png)\n2.3.2.进入`mongosh`中\n\n```bash\n# 进入mongo shell\nmongosh\n```\n\n注：`mongosh 6.0`版本之后使用，`mongo 6.0`版本之前使用，博主就是在这里出问题的，博主安装最新`mongodb`版本，但是使用的是 `mongo` 所以一直出现问题：`bash: mongo: command not found`\n![image](https://s2.loli.net/2024/11/11/x7UL5mqQFgT2ICr.png)\n\n![image](https://s2.loli.net/2024/11/11/qYEI7iGAwlKRrBs.png)\n2.3.3.进入`admin`数据库\n\n```perl\nuse admin\n```\n\n![image](https://s2.loli.net/2024/11/11/PJqHpUT7eV9iX1o.png)\n2.3.4 创建一个用户，`mongodb`默认没有用户\n\n```bash\n# 1.这里创建用户名为root，密码为mongo2023，角色（该用户的权限）为root，数据库为admin（你们按照你们自己的设置）\n# 用户名：root，密码：mongo2023，角色：root，数据库：admin\n\ndb.createUser({user:'root',pwd:'mongo2023',roles:[{role:'root',db:'admin'}]})\n\n\n# 2.认证登录db.auth('用户名','密码')，打印1则代表认证通过\ndb.auth('root','mongo2023')\n```\n\n![image](https://s2.loli.net/2024/11/11/qbLpfzJ9Ue5NWYm.png)\n到这里就完成了创建用户和设置密码，如果要退出 Ctrl+D 或者 exit 退出mongodb\n\n### 三、客户端连接mongodb\n\n如果刚才的安装是在服务器上，想远程连接mongodb还请先查看服务器端口27017放行（对外开放这个端口）\n![image](https://s2.loli.net/2024/11/11/OgdTXcSE5Ip6YGW.png)\n\n","tags":["python","mongodb","django","Centos7","数据库"],"categories":["数据库","mongodb"]},{"title":"http2的安装与使用教程","url":"/2024/10/29/http2的安装与使用教程/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>http2的安装与使用教程：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong></strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong></strong></font>\n\n### <font color=#f26522 size=5 face=宋体><strong>Mac下安装httpx：</strong></font>\n\n#### 报错：\n\n场景：`pip3 install httpx[http2]` 当在Mac中执行此命令时出现 `zsh: no matches found: httpx[http2]`\n\n注意：此问题适用于所有相关场景 `zsh: no matches found: xxx`\n\n#### 解决办法：\n\n> 1、编辑 zprofile 文件\n\n> > vim ~/.zprofile\n>\n> 2、在文件中添加 setopt no_nomatch，然后按ESC保存文件 :wq\n>\n> > setopt no_nomatch\n>\n> 3、重新执行文件\n\n> > source ~/.zprofile \n>\n> 之后可以重新尝试执行命令。\n>\n> #### httpx需要Python3.6+（使用异步请求需要Python3.8+）\n>\n> ```bash\n> pip3 install httpx\n> 或\n> python3 -m pip install httpx\n> ```\n>\n> 如果需要使用HTTP/2，则需要安装http2的相关依赖\n>\n> ```bash\n> pip3 install httpx[http2]\n> python3 -m pip install httpx[http2]\n> ```\n\n### <font color=#00b2c2 size=5 face=宋体><strong>使用教程：</strong></font>\n\n使用 `httpx` 来获取 HTTP/2 的内容时，可以配置 HTTP/2 支持并设置相关参数。`httpx` 是一个支持异步编程和 HTTP/2 协议的 Python 库，使用它可以轻松发出 HTTP/2 请求。\n\n下面是一个示例代码，演示如何使用 `httpx` 来获取 HTTP/2 的内容：\n\n<font color=red size=3 face=宋体><strong>同步使用(测试正常)：</strong></font>\n\n```python\nimport httpx\n\n# 创建一个支持 HTTP/2 的客户端\nwith httpx.Client(http2=True) as client:\n    url = \"https://ev-h.phncdn.com/hls/videos/202309/29/440305311/720P_4000K_440305311.mp4/master.m3u8?validfrom=1730126962&validto=1730134162&ipa=35.241.118.11&hdl=-1&hash=e+p6Imk3TAqllNY8Os/rJvoWk+w=\"\n    \n    # 发送 GET 请求\n    response = client.get(url)\n\n    # 检查响应状态码\n    if response.status_code == 200:\n        # 输出内容或将其保存到文件\n        with open(\"master.m3u8\", \"wb\") as file:\n            file.write(response.content)\n        print(\"m3u8 文件下载成功\")\n    else:\n        print(f\"请求失败，状态码：{response.status_code}\")\n\n```\n\n<font color=red size=3 face=宋体><strong>异步使用(测试正常)：</strong></font>\n\n如果想要异步执行请求，可以使用 `httpx.AsyncClient`，如下所示：\n\n```python\nimport httpx\nimport asyncio\n\nasync def fetch_m3u8():\n    url = \"https://ev-h.phncdn.com/hls/videos/202309/29/440305311/720P_4000K_440305311.mp4/master.m3u8?validfrom=1730126962&validto=1730134162&ipa=35.241.118.11&hdl=-1&hash=e+p6Imk3TAqllNY8Os/rJvoWk+w=\"\n    \n    # 使用 AsyncClient 创建一个支持 HTTP/2 的异步客户端\n    async with httpx.AsyncClient(http2=True) as client:\n        # 异步发送 GET 请求\n        response = await client.get(url)\n\n        # 检查响应状态码\n        if response.status_code == 200:\n            # 输出内容或将其保存到文件\n            with open(\"master.m3u8\", \"wb\") as file:\n                file.write(response.content)\n            print(\"m3u8 文件下载成功\")\n        else:\n            print(f\"请求失败，状态码：{response.status_code}\")\n\n# 运行异步函数\nasyncio.run(fetch_m3u8())\n\n```\n\n上述代码使用了 `httpx` 的 HTTP/2 支持功能，通过设置 `http2=True` 参数来启用。根据需要可以进一步添加自定义的请求头信息、超时设置、代理等参数。\n\n\n\n## 简单使用\n\n**httpx与requests库的基本使用方法几乎是一模一样的**\n\n```python\nimport httpx\nr = httpx.get('https://httpbin.org/get')\nprint(r)  # <Response [200 OK]>\n```\n\n## 类似的，我们也可以使用POST, PUT, DELETE, HEAD和OPTIONS等请求方法，如下\n\n```ini\nr = httpx.post('https://httpbin.org/post', data={'key': 'value'})\nr = httpx.put('https://httpbin.org/put', data={'key': 'value'})\nr = httpx.delete('https://httpbin.org/delete')\nr = httpx.head('https://httpbin.org/get')\nr = httpx.options('https://httpbin.org/get')\n```\n\n## 带有请求头和请求参数的请求\n\n```python\nimport httpx\n \nheaders = {'user-agent': 'my-app/1.0.0'}\nparams = {'key1': 'value1', 'key2': 'value2'}\nurl = 'https://httpbin.org/get'\nr = httpx.get(url, headers=headers, params=params)\nprint(r)\nprint(r.status_code)  # 状态码\nprint(r.encoding)  # 文本编码\nprint(r.text)\nprint(r.json())\n```\n\n结果如下\n\n```python\n<Response [200 OK]>\n200\nascii\n{\n  \"args\": {\n    \"key1\": \"value1\", \n    \"key2\": \"value2\"\n  }, \n  \"headers\": {\n    \"Accept\": \"*/*\", \n    \"Accept-Encoding\": \"gzip, deflate\", \n    \"Host\": \"httpbin.org\", \n    \"User-Agent\": \"my-app/1.0.0\", \n    \"X-Amzn-Trace-Id\": \"Root=1-6139b788-2fd67d5627a5f6de346e154a\"\n  }, \n  \"origin\": \"113.110.227.200\", \n  \"url\": \"https://httpbin.org/get?key1=value1&key2=value2\"\n}\n \n{'args': {'key1': 'value1', 'key2': 'value2'}, 'headers': {'Accept': '*/*', 'Accept-Encoding': 'gzip, deflate', 'Host': 'httpbin.org', 'User-Agent': 'my-app/1.0.0', 'X-Amzn-Trace-Id': 'Root=1-6139b788-2fd67d5627a5f6de346e154a'}, 'origin': '113.110.227.200', 'url': 'https://httpbin.org/get?key1=value1&key2=value2'}\n```\n\n## 请求带有cookies\n\n```dart\nimport httpx\n \nurl = 'http://httpbin.org/cookies'\ncookies = {'color': 'green'}\nr = httpx.get(url, cookies=cookies)\nprint(r.json())  # {'cookies': {'color': 'green'}}\n```\n\n## 设置超时时间\n\n```dart\nimport httpx\n \nr = httpx.get('http://httpbin.org', timeout=0.001)\nprint(r)\n```\n\n超过设置时间则报httpx.ConnectTimeout: timed out\n\n# 高级用法\n\n我们使用上面的请求方式时，httpx每次发送请求都需要建立一个新的连接，然而随着请求的数量增加，整个程序的请求效率就会变得很低。\n\nhttpx提供了Client来解决以上问题，Client是基于HTTP连接池实现的，这意味着当你对一个网站发送多次请求的时候，Client会保持原有的TCP连接，从而提升程序的执行效率。\n\n使用Client发送请求\n创建一个client对象，使用该对象去做相应的请求\n\n```dart\nimport httpx\n \nwith httpx.Client() as client:\n    headers = {'X-Custom': 'value'}\n    r = client.get('https://example.com', headers=headers)\n    print(r.text)\n```\n\n跨请求共享配置\n我们可以将headers、cookies、params等参数放在http.Client()中，在Client下的请求共享这些配置参数\n\n```dart\nimport httpx\n \nheaders1 = {'x-auth': 'from-client'}\nparams1 = {'client_id': '1234'}\nurl = 'https://example.com'\nwith httpx.Client(headers=headers1, params=params1) as client:\n    headers2 = {'x-custom': 'from-request'}\n    params2 = {'request_id': '4321'}\n    r1 = client.get(url)\n    print(r1.request.headers)\n    r2 = client.get(url, headers=headers2, params=params2)\n    print(r2.request.headers)\n```\n\n结果如下\n\n```lisp\nHeaders({'host': 'example.com', 'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.19.0', 'x-auth': 'from-client'})\nHeaders({'host': 'example.com', 'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.19.0', 'x-auth': 'from-client', 'x-custom': 'from-request'})\n```\n\n可以看出，r1的请求头包含{'x-auth': 'from-client'}, r2虽然配置了headers2，但由于里面的headers1和headers2的参数不同，Client会合并这两个headers的参数作为一个新的headers（如果参数相同，则headers2的参数会覆盖headers1的参数）。\n\n## HTTP代理\n\nhttpx可以通过设置proxies参数来使用http代理，我们也可以使用不同的代理来分别处理http和https协议的请求，假设有如下两个代理\n\n```python\nimport httpx\n \nproxies = {\n    'http://': 'http://localhost:8080',  # 代理1\n    'https://': 'http://localhost:8081',  # 代理2\n}\nurl = 'https://example.com'\nwith httpx.Client(proxies=proxies) as client:\n    r1 = client.get(url)\n    print(r1)\n```\n\n上面的代理只是示范，实际场景下请替换成有效的ip代理\n\n**还有一点需要注意的是，httpx的代理参数proxies只能在httpx.Client()中添加，client.get()是没有这个参数的。**\n\n## 超时处理\n\n默认情况下，httpx到处都做了严格的超时处理，默认时间为5秒，超过5秒无响应则报TimeoutException\n\n## 普通请求:\n\n```\nhttpx.get('http://example.com/api/v1/example', timeout=10.0)\n```\n\n## client实例:\n\n```csharp\nwith httpx.Client() as client:\n    client.get(\"http://example.com/api/v1/example\", timeout=10.0)\n```\n\n或者关闭超时处理\n\n## 普通请求:\n\n```\nhttpx.get('http://example.com/api/v1/example', timeout=None)\n```\n\n## client实例:\n\n```fsharp\nwith httpx.Client() as client:\n    client.get(\"http://example.com/api/v1/example\", timeout=None)\n```\n\n## SSL验证\n\n当请求https协议的链接时，发出的请求需要验证所请求主机的身份，因此需要SSL证书来取得服务器的信任后。\n\n如果要使用自定义的CA证书，则可以使用verify参数\n\n```java\nimport httpx\n \nr = httpx.get(\"https://example.org\", verify=\"path/to/client.pem\")\n```\n\n或者你可以完全禁用SSL验证（不推荐）。\n\n```java\nimport httpx\n \nr = httpx.get(\"https://example.org\", verify=False)\n```\n\n异步支持\n默认情况下，httpx使用标准的同步请求方式，如果需要的话，我们也可以使用它提供的异步client来发送相关请求。\n\n使用异步client比使用多线程发送请求更加高效，更能体现明显的性能优势，并且它还支持WebSocket等长网络连接。\n\n异步请求\n使用async/await语句来进行异步操作，创建一个httpx.AsyncClient()对象\n\n```python\nimport asyncio\nimport httpx\n \nasync def main():\n    async with httpx.AsyncClient() as client:  # 创建一个异步client\n        r = await client.get('https://www.example.com/')\n        print(r)\n \n \nif __name__ == '__main__':\n    asyncio.run(main())\n```\n\n## 同步请求与异步请求的比较\n\n我们来尝试使用同步和异步的方法进行请求，对比两种不同的方法的效率情况。\n\n### 同步请求\n\n```python\nimport time\nimport httpx\n \ndef main():\n    with httpx.Client() as client:\n        for i in range(300):\n            res = client.get('https://www.example.com')\n            print(f'第{i + 1}次请求，status_code = {res.status_code}')\n \n \nif __name__ == '__main__':\n    start = time.time()\n    main()\n    end = time.time()\n    print(f'同步发送300次请求，耗时：{end - start}')\n```\n\n同步发送300次请求，耗时：49.65340781211853\n\n### 异步请求\n\n```python\nimport asyncio\nimport time\nimport httpx\n \n \nasync def req(client, i):\n    res = await client.get('https://www.example.com')\n    print(f'第{i + 1}次请求，status_code = {res.status_code}')\n    return res\n \n \nasync def main():\n    async with httpx.AsyncClient() as client:\n        task_list = []  # 任务列表\n        for i in range(300):\n            res = req(client, i)\n            task = asyncio.create_task(res)  # 创建任务\n            task_list.append(task)\n        await asyncio.gather(*task_list)  # 收集任务\n \n \nif __name__ == '__main__':\n    start = time.time()\n    asyncio.run(main())\n    end = time.time()\n    print(f'异步发送300次请求，耗时：{end - start}')\n```\n\n异步发送300次请求，耗时：2.5227813720703125 （由于是异步执行的，所以打印的i值是无序的）\n\n从两个例子可以看出，异步请求明显比同步请求的效率高很多。\n\n以上就是httpx库的基本使用方法，想了解更多可以去 httpx官方文档中查看。","tags":["docker","赚钱","标签1"],"categories":["主分类","二级分类"]},{"title":"在Django中使用MySQL(mysqlclient版本)作为数据库","url":"/2024/10/18/在Django中使用MySQL(mysqlclient版本)作为数据库/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>在Django中使用MySQL(mysqlclient版本)作为数据库</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>1、安装库</strong></font>\n\n```\npip3 install mysqlclient\n```\n\n<font color=#b0171f size=2 face=宋体><strong></strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>2、**配置Django的`DATABASES`设置**：</strong></font>\n在你的Django项目的`settings.py`文件中，找到`DATABASES`设置并修改它以使用MySQL。以下是一个示例配置：\n\n```python\nDATABASES = {  \n    'default': {  \n        'ENGINE': 'django.db.backends.mysql',  \n        'NAME': 'your_database_name',  # 数据库名  \n        'USER': 'your_mysql_username',  # MySQL用户名  \n        'PASSWORD': 'your_mysql_password',  # MySQL密码  \n        'HOST': 'localhost',  # 数据库服务器地址  \n        'PORT': '3306',  # 数据库服务器端口（默认是3306）  \n        'OPTIONS': {  \n            'charset': 'utf8mb4',  \n            'init_command': \"SET sql_mode='STRICT_TRANS_TABLES';\",  \n        }\n    }  \n}\n```\n\n<font color=red size=5 face=宋体><strong>Error：安装`mysqlclient`报错：</strong></font> \n\n官方指引：https://pypi.org/project/mysqlclient/#:~:text=Building%EE%80%80%20mysqlclient%EE%80%81\n\n```python\n# 说明：缺少必要库，所以安装失败\n\nbrew install mysql-client pkg-config\nexport PKG_CONFIG_PATH=\"$(brew --prefix)/opt/mysql-client/lib/pkgconfig\"\npip install mysqlclient\n```\n\n![image-20241018010930611](https://s2.loli.net/2024/10/18/9sefPiSWAyQRV8b.png)\n\n#### 完成安装\n\n![image-20241018011119528](https://s2.loli.net/2024/10/18/5c6oeQdgWvDRCXV.png)","tags":["python","django","数据库"],"categories":["数据库","django"]},{"title":"docker-部署-GitLab私人Git教程","url":"/2024/10/17/docker-部署-GitLab私人Git教程/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>docker 部署GitLab私人Git教程</strong></font>\n\n#### 硬件机器安装：https://blog.csdn.net/m0_63230155/article/details/131952266\n\n说明：ce 表示社区免费版 ，ee 表示企业付费版\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>docker直接运行：</strong></font>\n\n- -d 指定后台运行\n- --hostname 指定主机名\n- --name 指定容器名\n- -p 端口映射 443 https端口 、80 http端口 22 ssh端口\n- --restart always  容器停止后的重启策略: 容器退出时总是重启\n- -v 指定挂载存储卷首先在宿主主机创建对应的目录\n\n```bash\n# 创建本地存储文件夹\nmkdir /mnt/DockerFiles/GitUbuntuServer/gitlab/logs\nmkdir /mnt/DockerFiles/GitUbuntuServer/gitlab/config\nmkdir /mnt/DockerFiles/GitUbuntuServer/gitlab/logs\nmkdir /mnt/DockerFiles/GitUbuntuServer/gitlab/data\n# mkdir /etc/localtime\n\n# 运行容器 \ndocker run --detach --hostname <本机ip地址> -p 3443:443 -p 3080:80 -p 3022:22 --name GitUbuntuServer --restart always -v /etc/localtime:/etc/localtime:ro -v /mnt/DockerFiles/GitUbuntuServer/gitlab/config:/etc/gitlab -v /mnt/DockerFiles/GitUbuntuServer/gitlab/logs:/var/log/gitlab -v /mnt/DockerFiles/GitUbuntuServer/gitlab/data:/var/opt/gitlab -it --privileged gitlab/gitlab-ce\n```\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>WEB访问：</strong></font>\n\n```python\nhttp://<本机ip地址>:<端口>    # 上面部署的3080转容器机的80端口\nhttp://<本机ip地址>:3080\n```\n\n<font color=#f26522 size=4 face=宋体><strong>查看超级用户密码：</strong></font>\n\n```bash\ndocker exec -it gitlab cat /etc/gitlab/initial_root_password\n```\n\n<font color=#f26522 size=4 face=宋体><strong>修改超级用户账户和密码：</strong></font>\n\n```python\n# 进入容器\ndocker exec -it gitlab bash\n# 进入容器内部：\ngitlab-rails console   # 进入gitlab终端\nuser=User.find_by(username:'root')\nuser.password='xxxxxxx'\nuser.save!\nexit\n```\n\n","tags":["docker","ubuntu","服务器","git"],"categories":["docker","服务器部署"]},{"title":"docker-部署ubuntu教程","url":"/2024/10/17/docker-部署ubuntu教程/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>docker 部署ubuntu教程</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>需求：</strong></font>\n\n```bash\n容器名称：GitUbuntuServer\n镜像：ubuntu:latest\n开放端口： 端口编写规则说明:(宿主机端口:容器机端口)    3080:80,3443:443,3022:22,3308:3306,     开放端口组 3800-4000:3800:4000\n重启规则： 停止后马上重启\n网络：bridge\n映射目录： /mnt/DockerFiles/GitUbuntuServer(宿主机目录):/(容器目录)\n控制台交互：伪中断、标准输出、特权模式\n```\n\n<font color=#f26522 size=4 face=宋体><strong>bash创建命令：</strong></font>\n\n```bash\ndocker run -d --name GitUbuntuServer -p 3080:80 -p 3443:443 -p 3022:22 -p 3308:3306 -p 3800-4000:3800-4000 --restart=unless-stopped --network=bridge -v /mnt/DockerFiles/GitUbuntuServer/opt:/opt -v /mnt/DockerFiles/GitUbuntuServer/root:/root -v /mnt/DockerFiles/GitUbuntuServer/home:/home -v /mnt/DockerFiles/GitUbuntuServer/mnt:/mnt -it --privileged  ubuntu:latest\n```\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>开启root远程登录：</strong></font>\n\n```python\ndocker exec -it <imageID> /bin/bash  # 进入容器中断界面\napt-get update   # 更新包管理器\napt-get install openssh-server openssh-client  # 安装 ssh 并启动\n/etc/init.d/ssh start   # 启动ssh\nps -e | grep sshd    # 查看启动进程\n\n# 初始化密码\napt-get install vim  # 安装vim\n\nvim /etc/ssh/sshd_config  # 编辑 sshd_config文件\n# 增加 PermitRootLogin yes ，然后 :wq 保存并推出\nservice ssh restart   # 重启 ssh 服务\npasswd root   # 设置密码\n```\n\n![在这里插入图片描述](https://s2.loli.net/2024/10/17/sDTidA5RMCkl1nz.png)\n","tags":["docker","ubuntu","服务器"],"categories":["docker","服务器部署"]},{"title":"Python-web远程部署Git到服务器教程","url":"/2024/09/20/Python-web远程部署Git到服务器教程/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Python web远程部署Git到服务器教程</strong></font>\n\n<!--more-->\n\n#### 编辑 `gitignore`文件，排除不需要git上传到 `文件` 或者 `文件夹`\n\n```python\n# 范例可上 github上面的免费分享\nhttps://github.com/github/gitignore/blob/main/Python.gitignore\n```\n\n<font color=#f26522 size=4 face=宋体><strong>git仓库的使用</strong></font>\n\n```python\n# 当前仓库：\n   git config user.name “New Username”\n   git config user.email “newemail@example.com”\n\n# 全局仓库\n   git config –global user.name “New Global Username”\n   git config –global user.email “newglobal@email.com”\n\n# 开始初始化 git文件夹\ncd day28 # 进入项目根文件夹\ngit init  # 初始化git项目\ngit remote add origin https://gitee.com/wupeiqi/day28.git      # 配置代指命令，相当变量 origin 就等于仓库地址 https://gitee.com/wupeiqi/day28.git\n\n# 后期经常执行的代码：\ngit add .    # git 添加当前目录下的所有文件\ngit commit -m 'init'   # 这里是说明 可以是修改了什么，更改了什么\ngit checkout -b master   # 在本地创建 master分支\ngit push origin master   # 提交到哪个目录  这里的origin 是个代称\n\ngit push MyMusicAPI master   # 上传到远程仓库\ngit push MyMusicAPI master --force   # 覆盖上传到远程仓库\n\ngit status  # 检测 git \ngit log # 显示版本\n\ngit reset --hard e65ec665eb7b93eb157f5e902570b1a83508953a  # 回滚到某个版本 配合 git log 使用\n# 这里如果推送失败， 可以使用覆盖推送。但是请做好备份在推送\n\n\n# 二次会滚 ，已经会滚消失的内容，可以在会滚回去\n# 这里不能用 git log了 \ngit reflog  # 这里查看已经会滚过的版本好(这里用删除更好理解一点)\n# 这里在使用会滚命令\ngit reset --hard c4d3428   # 这里跟前面会滚是一样的，\n\n\n\n## 分支的操作\ngit branch   # 目前所在分支\ngit branch dev  # 创建 dev分支 但是现在所在分支 依然是主分支 master\ngit checkout dev  # 从当前分支，跳转到 dev 分支\ngit merge bug  # 这里的bug是分支的意思， 如果要将 bug 分支合并到 master 分支，首先需要切换到 master 分支，然后在执行该命令\n\n# 如果分支没有存在的意义，就像bug分支，修复了bug 就没有存在的意义，就可以删除他\ngit branch -d bug  # git 分支操作， -d 删除    其意思为 删除一个名称为 bug 的分支\n\n# git clone https://user:ghp_<GithubToken申请>@<仓库http地址>\ngit clone https://user:ghp_<GithubToken申请>@github.com/xxxxx/xxxxx.git \n```\n\n![image-20240920154221489](https://s2.loli.net/2024/09/20/WjGZpiqay6m8lvt.png)\n\n### eeeor说明：\n\n+ `error: src refspec master does not match any`\n\n  ```python\n  这个错误表明你本地的 Git 仓库中没有找到名为 “master” 的分支。\n  \n  # 创建或切换分支：如果你需要 “master” 分支，但本地不存在，你可以使用 git checkout -b master 创建一个新的 “master” 分支，或者如果你想要的是 “main” 分支，确保你的本地和远程仓库都使用 “main”。\n  \n  git checkout -b master\n  ```\n\n  \n\n##### `git log` 后会显示分页：\n\n```python\n# 要退出 git log 的分页器视图，你可以按下以下键：\n\t按 q 键：这是 less 分页器的默认退出键。\n# \t按 Ctrl+C 或 Ctrl+D：这些按键在许多情况下也可以中断和退出当前的分页器。\n\n# 或者设置全局禁用 log分页\ngit config --global core.pager cat\n\n```\n\n\n\n#### rebase 提交记录的合并\n\n```python\ngit rebase -i HEAD~3   # 表示从当前分支，当前版本 向前合并最近 3 条记录\ngit rebase -i <版本号>  # 表示从当前分支，当前版本 向前合并最近 到 该版本号的所有版本\ngit merge    # 合并远程仓库的提交记录 与本地合并\n```\n\n","tags":["django","web","服务器","部署","git"],"categories":["git","服务器部署"]},{"title":"基于rockylinux:9-构建-docker镜像-运行django项目","url":"/2024/09/13/基于rockylinux-9-构建-docker镜像-运行django项目/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>基于rockylinux:9 构建 docker镜像 运行django项目</strong></font>\n\n<!--more-->\n\n#### 创建 `requirements.txt`\n\n+ ```python\n  pip freeze > requirements.txt\n  \n  # 备注：在linux下 可兼容的环境版本如下：\n  # asgiref==3.8.1\n  # backports.zoneinfo==0.2.1\n  # Django==4.2.13\n  # django-simpleui==2024.8.28\n  # pip==24.2\n  # setuptools==41.2.0\n  # simpleui==3.9\n  # sqlparse==0.5.1\n  # typing_extensions==4.12.2\n  ```\n\n  ","tags":["docker"],"categories":["docker","构建与部署"]},{"title":"如何正确选择-Rocky-Linux-Docker-镜像","url":"/2024/09/13/如何正确选择-Rocky-Linux-Docker-镜像/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>如何正确选择 RockyLinux Docker镜像</strong></font>\n\n<!--more-->\n\n#### 镜像选择指南:\n\n+ 如果需要一个通用的基础环境，可以选择 `rockylinux/rockylinux:9`。 \n+ 如果需要一个轻量化但不至于极简的环境，可以选择 `rockylinux/rockylinux:9-minimal`。 \n+ 如果需要一个包含系统服务的更完整环境，可以选择 `rockylinux/rockylinux:9-ubi-init`。 \n+ 如果需要一个极简和高效的环境，适用于微服务架构，可以选择 `rockylinux/rockylinux:9-ubi-micro`。 \n\n---\n\n</br>\n\n`Rocky Linux Docker` 镜像采用了与 Red Hat 相同的镜像命名方式，其中：\n\n+ `UBI` 代表通用基础镜像（Universal Base Image）。\n+ `Micro` 代表微服务（Microservices）。\n+  `init` 代表初始化（initialization），实际上支持多服务**（Multi-service）**。 \n+ `minimal` 代表最小化安装。 \n+ 没有后缀的镜像即为标准版本。\n\n---\n\n</br>\n\n具体来说，这些镜像中安装的服务和组件有所不同。更详细的信息可以参阅以下资源： \n\n+ 有关 `rockylinux/rockylinux:9-ubi-micro` 和 `rockylinux/rockylinux:9-ubi-init` 的更多信息，请参考 [`GitHub – rocky-linux/sig-cloud-instance-images`](https://github.com/rocky-linux/sig-cloud-instance-images)。\n+ 有关 `rockylinux/rockylinux:9` 和 `rockylinux/rockylinux:9-minimal` 的详细内容，请参考 [`repo-info/repos/rockylinux at master · docker-library/repo-info`](https://github.com/docker-library/repo-info/tree/master/repos/rockylinux)。\n\n通过理解这些差异，您可以根据需要选择最合适的镜像用于生产环境。 本文作者： 木子 Rocky Linux 中文社区欢迎您 https://www.rockylinux.cn\n\n---\n\n</br>\n\n通过理解这些差异，您可以根据需要选择最合适的镜像用于生产环境。\n\n![image-20240913105958458](https://s2.loli.net/2024/09/13/uPiR8obD4BcEjIs.png)\n\n> 目前 `Rocky Linux` 官方正在将 `Dockerhub` 镜像仓库地址由 `docker.io/library/rockylinux` 切换成 `docker.io/rockylinux/rockylinux` 这个，所以后续镜像建议直接从 `docker.io/rockylinux/rockylinux` 下载。\n\n---\n\n</br>\n\n备注：本文节选自[如何正确选择 Rocky Linux Docker 镜像 – Rocky Linux](https://www.rockylinux.cn/notes/how-to-choose-rocky-linux-docker-images-correctly.html)","tags":["docker"],"categories":["docker","构建与部署"]},{"title":"远程修改-ESXI-8.0-管理ip地址","url":"/2024/08/18/远程修改-ESXI-8-0-管理ip地址/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**远程修改 ESXI 8.0 管理ip地址**</strong></font>\n\n<!--more-->\n\n###  **场景：**\n\n适用于不方便在设备边操作而又需要修改管理地址的场景。\n\n适用于不方便外接显示器的场景。\n\n### **注意：**\n\n生产环境一定确定好网络配置信息否则可能会因为网络配置不正确导致无法正常访问。\n\n### **步骤：**\n\n#### 1.开启SSH远程访问\n\n启用安全 `Shell`（也就是 `EXSi` 可以被 `SSH` 访问的功能）\n\n![img](https://s2.loli.net/2024/08/18/jXvEum9nVrO1aq8.png)\n\n#### 2.\n\n+ 使用 `SecureCRT SSH2` 连接 `ESXi` 主机，现在使用 `dcui` 并没有任何反应，在 `Session` 标签栏右键点击 `Disconnect` 。\n+ 这里我测试用 `Finalshell` 也是完全没问题的\n\n```bash\nThe time and date of this login have been sent to the system logs.\n\nWARNING:\n   All commands run on the ESXi shell are logged and may be included in\n   support bundles. Do not provide passwords directly on the command line.\n   Most tools can prompt for secrets or accept them from standard input.\n\nVMware offers supported, powerful system administration tools.  Please\nsee www.vmware.com/go/sysadmintools for details.\n\nThe ESXi Shell can be disabled by an administrative user. See the\nvSphere Security documentation for more information.\n[root@localhost:~] \n[root@localhost:~] dcui \n```\n\n#### 3.连接到SSH\n\n+ 如果是使用 `Finalshell` 则可省略此步骤\n+ 在 `Session` 标签栏右键点击 `Session Option` 修改 `Terminal` 类型为 `Xterm` 后重新 `SSH2` 连接\n\n![img](https://s2.loli.net/2024/08/18/e7AEdlkaJ4ghpPt.png)\n\n#### **4.使用 `dcui` 工具**\n\n+ 再次使用 `dcui` 工具，这时已经可以进入 `EXSi` 的系统管理界面。\n\n![img](https://s2.loli.net/2024/08/18/MvdVH8r7BLy1Kfs.png)\n\n#### 5.登录到控制中心\n\n+ 点击 `F2` 进行 `Customize System` 输入用户名、密码进入\n\n![img](https://s2.loli.net/2024/08/18/zO1Ehr7yvmHFgcC.png)\n\n#### 6.修改管理IP地址\n\n+ 选择 `Configure Management Network`\n\n![img](https://s2.loli.net/2024/08/18/eyDBxsMbLrXRgHI.png)\n\n#### 7.选择 `IPv4 Configuration`\n\n![img](https://s2.loli.net/2024/08/18/Z45nGUCewczAKby.png)\n\n#### 8.配置静态IP地址，然后点击回车\n\n![img](https://s2.loli.net/2024/08/18/2m6uOn3w5T8WjUh.png)\n\n#### 9.点击 `Esc` 选择 `Yes` 应用配置并且重启管理网络\n\n![img](https://s2.loli.net/2024/08/18/8M4Ichq1xCzebUs.png)\n\n#### 10.此时已近可以用修改后的IP地址登录管理ESXi主机\n\n![img](https://s2.loli.net/2024/08/18/OrPAf7l54TLonhd.png)","tags":["标签1"],"categories":["主分类","二级分类"]},{"title":"VMware-ESXI-8.0.2-部署教程","url":"/2024/08/18/VMware-ESXI-8-0-2-部署教程/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>ESXi 8.0虚拟机必备知识与保姆级安装过程</strong></font>\n\n<!--more-->\n\n今天我们开始进入软路由的安装，本篇先介绍如何安装ESXi 8.0虚拟机。iKuai 和 openWrt 的内容放在下一篇。参考了不少大佬的经验，综合下来，打造软路由的话 ESXi 和 PVE 用的比较多，ESXi 稳定性更好，PVE 硬件兼容性好些。\n\n> - 虚拟机（Virtual Machine）指通过软件模拟的具有完整硬件系统功能的、运行在一个完全隔离环境中的完整计算机系统。在实体计算机中能够完成的工作在虚拟机中都能够实现。通过将多台虚拟机放置在一台计算机上，可以仅在一台物理`服务器`或 “主机” 上运行多个操作系统和应用。\n> - ESXi，是 VMWare vSphere Hypervisor 套件之下重要组件。是一款一款优秀的 `服务器` 级别的虚拟机。前身是 ESX，依赖 Linux 源码，后来抛弃 Linux 源码做成了 ESXi。整个产品商用气息浓重，界面清晰易用，但硬件兼容性较差（主要面向服务器），没什么扩展性，ESXi 不依赖于任何操作系统，直接安装在裸机上，它本身就可以看作一个操作系统，然后可以在它上面安装其他系统。\n> - PVE，全称 Proxmox Virtual Environment，是基于 Debian 的 Linux 系统，虚拟机内核为 KVM。硬件兼容性优秀。界面功能不强，很多操作要靠命令行，但扩展能力几乎是无限的。\n\n楼主决定在工控主机内安装ESXi 8.0虚拟机，然后再虚拟机内安装iKuai作为主路由，OpenWrt 作为旁路由，说实话，楼主没有多拨和流控的需求，这样做主要是为了将网络隔离开，iKuai只负责PPOE拨号DHCP功能，其他的都交给openWrt。大家都知道openWrt插件丰富，平时折腾的比较多，经常会出现断网的情况，这样就可以放心折腾了。\n\n### 1.网络拓扑\n\n首先先大致规划一下家里的网络拓扑，因为家里原来用的是华硕的AC88U，像NAS、打印机这些静态IP地址的配置都是192.168.50.XX，这次折腾就懒得改了，索性直接以这个IP段，后面就不用再去重新配置了。大家也可以将50换成其他自己常用的。\n\n> - iKuai ：192.168.50.1账号:admin\n> - OpenWrt：192.168.50.2 账号:root\n> - ESXi：192.168.50.3 账号:root\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/ezEgCaiTGR9MF7O.jpg)\n\n## 一、制作ventoy镜像安装工具\n\n### 1.下载[Ventoy](https://www.ventoy.net/cn/download.html)启动盘制作工具\n\n首先准备一个空闲的U盘，用Ventoy 一键制作USB启动盘。打开[ventoy](https://www.ventoy.net/cn/download.html)下载安装， Ventoy 是开源软件，下载使用都是免费的，直接去官网或者 GitHub 页面下载即可。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/SDo6ZdRtqrGhsLK.png)\n\n在PC上安装，并运行Ventoy 软件，程序会自动检测当前 USB 设备。如果插入了多个U盘注意识别，别搞错了，造成数据丢失。点击安装开始制作：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/9ZzPNC3DuoXp1nd.png)\n\n可以看到 U 盘已经被重命名为 Ventoy。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/S43jzeL1iwXh2kU.png)\n\n打开磁盘管理，可以看到 U 盘被细分为 2 个大分区，Ventoy 分区为活动分区，exFAT 文件系统，用于存放 ISO 文件，exFAT 文件系统也能更好的跨平台使用。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/rKlfvE2Dz5j8Mkn.png)\n\nVentoy 的系统分区里其实还有一个只有 1MB 的空间，存有 Legacy BIOS 模式下的启动文件，可见对于老旧设备来说，Ventoy 一样兼容。\n\n<img src=\"https://s2.loli.net/2024/08/18/a3bKdMACDoVXlwI.png\" alt=\"ESXi 8.0虚拟机必备知识与保姆级安装过程\" style=\"zoom:50%;\" />\n\n格式化未NTFS，用于存放 ISO 文件的分区 ，支持 exFAT、FAT32、NTFS、UDF、XFS、Ext2、Ext3、Ext4。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/VmsEYBK7Or9nqL2.png)\n\n直接下载需要安装的系统镜像放到 U 盘里就可以了。如果U盘够大的话，一些常用的镜像和工具都可以放到里面，以后各个系统装机都可以使用。不管是各版本的 Windows 系统还是 PE 系统甚至是 ubuntu 系统，只要想加载就直接将镜像文件拖入到Ventoy文件夹内即可。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/QwWfCriepYRgDhB.png)\n\n## 二、下载 ESXi 8.0\n\n### 1. 直链下载镜像\n\n`VMWare` 被博通收购后，私人已经无法像原来一样轻松的下载了，这里是我传到网盘的镜像，如果觉得不安全，可以自己去找其他的镜像。\n\n`ESXi 8.0`下载传送门：[点击下载](https://bd.bcebos.com/v1/xly-icafe/vmware-vmvisor-installer-8.0u3-24022510.x86_64-20240818021845-hszvto.iso)  <font color=red size=3 face=宋体><strong>不支持螃蟹网卡</strong></font>\n\n`ESXi 6.7`下载传送门：[点击下载](https://bd.bcebos.com/v1/xly-icafe/vmware-esxi-6.7.0-20191204001-rtl8111-20240824033216-q1ikk9.iso)  <font color=red size=3 face=宋体><strong>已经封装螃蟹网卡`RTL8111`系列</strong></font>\n\n### 2.下载镜像\n\n去[官网下载](https://customerconnect.vmware.com/evalcenter?p=vsphere-eval-8)，下载前，先注册一个 VMWare 的 customer connect 账号，注册登录完毕后，就可以下载 60 天试用版的 ESXI8.0 了，后面使用密钥激活一下即可，网上神秘代码很多，一搜一堆，这个就不多说了。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/d83LvRzqSxi7FCM.png)\n\n下载镜像文件，目前最新的版本是8.0-20513097\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/MUbAl4dumzVXH6B.png)\n\n## 2.查询网卡驱动\n\n趁着下载的功夫，我们现在[vmware硬件支持（VMware Compatibility Guide)](https://www.vmware.com/resources/compatibility/search.php?deviceCategory=io&details=1&partner=46&releases=589&keyword=226&deviceTypes=6&page=1&display_interval=10&sortColumn=Partner&sortOrder=Asc)，查询一下网卡的驱动情况，Intel Corporation i226/ i225网卡都是支持免驱的。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/XmJeNf46poAwjbE.png)\n\n如果网卡不支持，可以去[【ESXi 的社区网络驱动程序】](https://flings.vmware.com/community-networking-driver-for-esxi#requirements)下载网卡驱动。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/8ks5QmDqduPrSEK.png)\n\n将下载好的镜像拷入Ventoy，ventoy镜像安装工具制作完成。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/OKziTC38BWLjr2P.png)\n\n## 三、安装ESXi8.0\n\n将工控机连接好`显示器`、键盘、鼠标。鼠标和键盘最好是有线的，插上 U 盘，准备开机。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/37IldGvqAFh1VSr.jpg)\n\n### 1.主板设置\n\n开机按 del/esc 进入BIOS设置，进入 BIOS 后，首先打开处理器的虚拟化（即 VT-x）。\n\nVT-x是 intel 运用 Virtualization 虚拟化技术中的一个指令集。提供 X86 平台的硬件辅助虚拟化解决方案。能够将单台电脑软件环境分割为多个独立分区，每个分区均可以按照需要模拟电脑的一项技术。将多种系统整合到一台服务器或电脑中，使同一个物理平台能够同时运行多个同类或不同类的操作系统，以分别作为不同业务和应用的支撑平台。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/j94TUgxhfQMA5mD.jpg)\n\n#### ①打开VT-d：\n\n英特尔定向 I/O 虚拟化技术 (VT-d) 是英特尔虚拟化技术 (VT) 的扩展，它向硬件提供虚拟化解决方案协助。英特尔 VT-d 能帮助用户提高系统的安全性和可靠性，并改善 I/O 设备在虚拟化环境中的性能。这些都从本质上帮助 IT 管理人员通过减少潜在的停机时间而降低总拥有成本；并通过更充分地利用数据中心资源而增大生产性吞吐量。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/rEDcuVwaGo7gLNh.jpg)\n\n#### ②打开AES：\n\n**AES 指令集：**高级加密标准指令集（英特尔高级加密标准新指令，简称 AES-NI）是一个 x86 指令集架构的扩展，用于 Intel 和 AMD 微处理器，由 Intel 在 2008 年 3 月提出。该指令集的目的是改进应用程序使用 高级加密标准（AES）执行加密和解密的速度，可以提高出国留学的速度。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/WnuyfaMBZqvLCH6.jpg)\n\n#### ④开启睿频加速技术\n\n在 CPU 技术设置选项中，找到 “Intel Turbo Mode Tech” 选项，有的主板可能会显示 “Intel Turbo Boost Tech”。至于 C-STATE就先不开了。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/KoWrmX9pyfSUGik.jpg)\n\nC-STATE 是 CPU 的电源管理功能，它会根据 CPU 的负载来管理 CPU 的能耗，和睿频加速技术结合，在运行单线程应用时，C-STATE 会关闭或降低其他核心的能耗，把这些能源加到执行程序的核心上提高CPU的执行效率。\n\nC-STATE的模式从 C0 开始，C0 表示 “正常” 的 CPU 运行模式（CPU 已 100% 激活）。C 后的数字越大，表示 CPU 进入休眠模式的程度越深。换言之，关闭的电路和时钟信号越多，完全唤醒 CPU 进入 C0 模式需要的时间越长。\n\n| Mode（模式） | 姓名               | 作用                                                         | CPU                                                          |\n| ------------ | ------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| C0           | 操作状态           | CPU 完全打开                                                 | 所有 CPU                                                     |\n| C1           | 停止               | 通过软件停止 CPU 内部主时钟；总线接口单元和 APIC 仍然保持全速运行 | 486DX4 及以上                                                |\n| C1E          | 增强型停止         | 通过软件停止 CPU 内部主时钟并降低 CPU 电压；总线接口单元和 APIC 仍然保持全速运行 | 所有 socket 775 CPU                                          |\n| C1E          | —                  | 停止所有 CPU 内部时钟                                        | Turion 64、65-nm Athlon X2 和 Phenom CPU                     |\n| C2           | 停止授予           | 通过硬件停止 CPU 内部主时钟；总线接口单元和 APIC 仍然保持全速运行 | 486DX4 及以上                                                |\n| C2           | 停止时钟           | 通过硬件停止 CPU 内部和外部时钟                              | 仅限 486DX4、Pentium、Pentium MMX、K5、K6、K6-2、K6-III      |\n| C2E          | 扩展的停止授予     | 通过硬件停止 CPU 内部主时钟并降低 CPU 电压；总线接口单元和 APIC 仍然保持全速运行 | Core 2 Duo 和更高版本（仅限 Intel）                          |\n| C3           | 睡眠               | 停止所有 CPU 内部时钟                                        | Pentium II、Athlon 以上支持，但 Core 2 Duo E4000 和 E6000 上不支持 |\n| C3           | 深度睡眠           | 停止所有 CPU 内部和外部时钟                                  | Pentium II 以上支持，但 Core 2 Duo E4000、E6000 和 Turion 64 上不支持 |\n| C3           | AltVID             | 停止所有 CPU 内部时钟和降低 CPU 电压                         | AMD Turion 64                                                |\n| C4           | 更深入的睡眠       | 降低 CPU 电压                                                | Pentium M 以上支持，但 Core 2 Duo E4000、E6000 和 Turion 64 上不支持 |\n| C4E/C5       | 增强的更深入的睡眠 | 大幅降低 CPU 电压并关闭内存高速缓存                          | Core Solo、Core Duo 和 45-nm 移动版 Core 2 Duo 支持          |\n| C6           | 深度电源关闭       | 将 CPU 内部电压降低至任何值，包括 0 V                        | 仅 45-nm 移动版 Core 2 Duo 支                                |\n\n### 2.设置USB启动\n\n在BOOT里把U盘设置为第一启动项。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/p4xezHrG2oyPTbs.jpg)\n\n### 3.删除硬盘分区\n\n重启开机后，即可进入 Ventoy 界面，U 盘内保存的系统镜像都在列表中，选择要安装的镜像文件即可，选择启动WinPE64，按Enter键进入PE。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/A1dl3YmgTFMhOcS.jpg)\n\n进到PE后，用分区工具把软路由硬盘分区全部删除(注意不要删错)，这里有个大坑，如果硬盘存在分区的话，很可能造成无法安装的bug，尤其是对于拆机的硬盘来说，一定要将上面的分区及隐藏分区全部删掉。\n\n### 4.加载ESXi8.0镜像\n\n删除之后，重启电脑，选择ESXi启动安装：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/3wJcm8RZdFfS42q.jpg)\n\n### 5.修改ESXI的默认空间\n\n在读秒阶段，快速按下Shift+O，调出命令行，来修改ESXI的默认空间大小：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/4BrZG7qwXT5aMLo.jpg)\n\n在下面命令行输入：autoPartotionOSDataSize=20480。命令注意区分大小写，我这里将默认空间设置为20GB。硬盘空间不足的话推荐设置8192(8GB)即可，大家可以根据自己的情况进行设定：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/I6PyV7ZKoxeuvtQ.jpg)\n\n回车，开始跑码：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/hJvFHy7wsaBjRN1.jpg)\n\n还在跑码，等待跑码完成\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/xJyKqmpC4Dk7XbZ.jpg)\n\n继续跑码，不用管，等着就行：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/9yNumCapzt1ciXs.jpg)\n\n跑码：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/JUsjgb92yWV8FaM.jpg)\n\n跑码：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/YmLF7tk5y1qJdv6.jpg)\n\n这一步 **Starting service vmtoolsd** 的加载时间会比较长，一定要耐心等待，不是死机了。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/V52oXGlrmwFixy4.png)\n\n一直等待到出现如下界面，选择 Continue，按回车，继续下一步：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/SxNzKIF8BV3Z5yT.jpg)\n\n同意 VMWARE 的条款，按F11，继续下一步：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/cr4RNepH83LzEWZ.jpg)\n\n### 6.选择安装位置\n\n接下来会扫描此计算机上的所有存储器(硬盘)，等待扫描结果：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/JULE2dcfpZFnGPl.png)\n\n选择安装位置，可以看到有两个盘，一个NVMe的`固态硬盘`和U盘，用键盘上下键调整，选择第一个安装在固态硬盘。一定要看好，不要安装错位置。选择好了回车继续：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/gCadXqHT4GwUluJ.jpg)\n\n选择键盘布局，回车继续下一步：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/LVqEvxXRIjnlT8J.jpg)\n\n### 7.设置登录密码\n\n弹出密码输入页，这里输入密码，需要输入两遍，输入第一遍之后，按table键切换到第二行输入第二遍确认密码，输入一定要慢一点，因为不显示输入的密码，很容易输错，密码需要大小写带数字。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/TE6542fiqQNjcrk.png)\n\n输入完毕后，回车进行下一步：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/gaOhdtKGcBpwMbE.jpg)\n\n弹出确认安装位置选项，看一下安装位置有没有问题，没选错，按F11继续安装：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/o8Iys9mJt2XFgvV.jpg)\n\n等待加载完成：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/6RshOaS1TwQzFjE.jpg)\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/3tl6HCDhwVUzNL4.jpg)\n\n到这里拔掉U盘，之后按回车，重启。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/mB3Iq62eGbgDnMw.png)\n\n回车继续：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/e5LXlnhj7Gpa1T8.jpg)\n\n重启后开始跑码：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/hBKytFj1DQ2IvcA.jpg)\n\n等待跑码完成：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/XDugv6xW4dtzoeA.jpg)\n\n继续等待：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/2TRGZ7PgKEFL3xV.jpg)\n\n继续加载，下方的安装指示条可以看到安装的进度，全程不用管：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/D1T6wodjOimGUsa.jpg)\n\n有以下画面表示已经安装成功，按F2可进入管理后台，F12是关闭或者重启：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/43hvyJnjNPUaK7X.jpg)\n\n## 四、ESXI虚拟机设置\n\n按F2，弹出登录页面，输入刚才设定的密码。回车，进入ESXI管理后台。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/L2Xxtkfyv1g7SCQ.jpg)\n\n可以看到第一项是修改密码，第三项是设置网络。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/sfn38gUa6Oq4kXD.jpg)\n\n### 1.设置网口\n\n键盘上下键选择第三项，修改网络配置，回车进入：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/OTn5FbpkrslR4XY.jpg)\n\n选择第一项，设置网口：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/3xRF8avAcdmTGUq.jpg)\n\n上下键选择你要用来管理ESXI的网口，这里有些工程机的网口是错乱的，可以通过插拔`网线`来确定是不是正确。如果不正确的话，需要通过后面在web端设置进行接口对应。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/TfsNH94EU6mRziv.jpg)\n\n经过插拔网线，四个接口的顺序和ESXi系统显示的网口是一一对应的。选择etho接口作为管理口。通过键盘上下键，移动黑色条框，按空格确定选项。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/BPsJhVCHWKgqowp.jpg)\n\n回车保存，自动退回到【网络配置】页面：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/dqBWaRbfijKk4Vc.png)\n\n### 2.设置IPV4选项\n\n选择设置IPV4选项：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/XJzwYv7sU5p8LlP.jpg)\n\n键盘上下键，移动黑色条框到第三项，可以看到第三项前面的括号里有个圆圈(○)，按空格确定选项。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/huUHeZcIk73zEAd.png)\n\n设置下面三个选项【IPV4 Address(ESXI管理地址)】、【Subnet Mask(子网掩码)】、【Default Gateway(默认网关)】：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/ieIX7rZVFEgyLYc.jpg)\n\n> - IPV4 Address【ESXI管理地址】：192.168.50.3\n> - Subnet Mask【子网掩码】：255.255.255.0\n> - Default Gateway【默认网关】：192.168.50.1\n\n这个管理地址是后面我们在web端进行访问的地址，千万不要和ikuai以及openwrt冲突。Default Gateway【默认网关】就设置为主路由的网管即可。我以ikuai作为主路由。这里就直接将网关设置为主路由ikuai的地址了。按回车保存：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/mi3RnKMa65ozXG1.jpg)\n\n退出来之后，在页面右上角就看到我们设置的信息了，按ESC，退出：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/v5gJUxmIz3X8Rsi.jpg)\n\n在弹出的页面，按Y，并自动重启网络：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/JfkPXqziR2hp4EN.png)\n\n网络重启完后，可以看到，已经设置成功了，按ESC，回到首页：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/tIjaskAhu1cvb2p.jpg)\n\n返回首页之后，也可以看到已经设置完成：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/ejlu21p6PR3JHKc.jpg)\n\n## 五、连接ESXi 8.0网页端设置\n\n### 1.给电脑分配IP\n\n我们将网线一头插到软路由的eth0口，另外一端插到电脑上，因为ESXi没有DHCP(Dynamic Host Configuration Protocol, 动态主机配置协议) 功能，没办法给电脑自动分配IP地址，这里要手动修改一下：\n\n打开控制面板—网络和internet——更改适配器选项\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/WHpdmoRX8rMLQC7.png)\n\n这时候电脑显示未识别的网络：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/HbPASEBytlfsQkZ.png)\n\n右击网络-【属性】：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/7RbiLTzWVodX9rw.png)\n\n双击IPV4协议，在弹出的属性内，填入相同的IP段：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/39MnYgJUWZLExyj.png)\n\n### 2.访问web端\n\n打开浏览器，在浏览器内输入：192.168.50.3访问，用账户名：root和前面安装系统时设置的密码登录：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/JKUhf6awWBvYskd.png)\n\n弹出的页面选择不加入改进计划，确认下一步：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/yeTHEFB4gYUMLbo.png)\n\n### 3.激活\n\n在【管理】——【许可】看下激活状态，进来之后可以看到系统分配的60天的密钥：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/7MT1E6nvSDokajf.png)\n\n然后点分配许可证，输入密钥激活即可：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/UEth1AeSxq5BLCc.png)\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/HWM3VgiOlD1rLRw.png)\n\n## 六、开启直通网卡\n\n选择【管理】-【硬件】-【PCI设备】，查看可以直通的网卡，这里网卡的顺序就是按照我们物理接口的etho、eth1、eth2、eth3顺序来的，第一个网卡千万不要直通，也就是我们前面设置的ESXi管理口，不要设置直通。如果把管理口也做了直通，ESXI 重启后 WEB 管理界面就进入不去了。\n\n### **直通的好处？**\n\n直通是指虚拟化时将硬件管理权、使用权完全交给一个虚拟出的系统(使用这个网卡的虚拟机)，不经过虚拟系统的虚拟封装，以直接以原生方式使用硬件，达到最高性能。直通的效率更好，因为直接直通给了虚拟机使用，硬件使用中产生的数据不会再经过ESXI进行二次处理，可以节约一部分系统性能，不直通的话虚拟机在运行中会占用更多的cpu。\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/f4c2VZomaDSPnYe.png)\n\n选择要直通的设备，然点击切换直通，将三个网卡的直通全部开启：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/yQ8SrRYDLqZzPV3.png)\n\n看到网卡直通状态变为活动后，就是直通开通成功了，这样后面我们安装路由虚拟机时，直接添加PCl设备就可以直通了，同时注意内存设置全部保留。这个放到安装ikuai和openwrt时具体再讨论：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/qvpz93PYN8CstSu.png)\n\n## 七、设置网络\n\n在网络内对虚拟机VM Network进行设置，选择【编辑设置】——安全内的混杂模式、mac地址改变、伪传输都改为接受：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/JLYzVI145RaEFMC.png)\n\n## 八、修改电源模式\n\n一定要电源模式改为高性能，否则会`路由器`会自动限制性能，百度网盘，迅雷等软件下载速度会限制在10MB/S。\n\n选择【管理】-【硬件】-【电源管理】-【更改策略】-高性能：\n\n![ESXi 8.0虚拟机必备知识与保姆级安装过程](https://s2.loli.net/2024/08/18/bEJdFVg6R1vIH4Y.png)\n\n## 小结：\n\n本期的经验分享就到这里结束了，本期主要是安装ESXi8.0虚拟机和基本的配置，在安装过程中碰到的一些问题写出来分享给大家，下一步就可以安装路由虚拟机了，后面我们来安装ikuai及openwrt，继续折腾。","tags":["标签1"],"categories":["主分类","二级分类"]},{"title":"Docker部署网心云赚钱","url":"/2024/08/15/Docker部署网心云赚钱/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Docker部署网心云赚钱：</strong></font>\n\n<!--more-->\n\n### 1 、宝塔中一键安装 Docker\n\n### 2、拉取网心云 docker镜像\n\n+ 传送门：[官方教程地址](https://help.onethingcloud.com/7cb4/2c7f)\n+ x86镜像直链下载：[点击下载]()\n\n```bash\ndocker pull  images-cluster.xycloud.com/wxedge/wxedge:latest\n```\n\n### 3、一键部署脚本命令：\n\n```bash\n# 创建路径\nmkdir /xunlei\nmkdir /xunlei/storage\n\n# 一键运行\ndocker run  --name wxedge1 --privileged -itd -v /xunlei/storage/storage2:/storage:rw --net=host --hostname xunlei_wxedge --restart unless-stopped images-cluster.xycloud.com/wxedge/wxedge\n\n# docker 网心云多开\ndocker run  --name wxedge2 --privileged -itd -v /xunlei/storage/storage2:/storage:rw --net=host -e LISTEN_ADDR=\"0.0.0.0:18887\" --hostname xunlei_wxedge --restart unless-stopped images-cluster.xycloud.com/wxedge/wxedge\n# 多开 需要指定访问ip：\n-e LISTEN_ADDR=\"0.0.0.0:18887\"\n```\n\n \n\n### 3.1、创建一个新网桥：\n\n```bash\ndocker network create --driver bridge --subnet 192.168.1.0/16 --gateway 192.168.1.0 tj_student\n# 命令解释：\n# create ： 创建\n# –driver bridge ：指定连接模式为桥接\n# –subnet：指定网段\n# –gateway：指定网关\n# tj_student ： 网桥的名称\n\n# 删除指定的网桥：\ndocker network rm 网桥名称\n```\n\n运行容器的时候就需要指定你所创建的网桥名\n\n```bash\ndocker run -d --name=nettest -p 80:80 nginx --net tj_student\n```\n\ndocker 创建自定义网桥 - 最大的好处是，可以隔离项目，同一个项目的应用访问可以用容器名连接\n\n### 4、开发宝塔面板的 `18888` 访问端口\n\n+ 打开浏览器访问 `http://IP:18888`\n\n![image-20240815233554731](https://s2.loli.net/2024/08/15/Y3xd14jv28NAqoI.png)","tags":["docker","网心云","赚钱"],"categories":["docker","网心云"]},{"title":"docker-安装青龙面板","url":"/2024/08/09/docker-安装青龙面板/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>docker 安装青龙面板</strong></font>\n\n<!--more-->\n\n### 解决国内无法拉取镜像的问题：\n\n+ 编辑 `/etc/docker/daemon.json` 没有就创建\n\n```json\n{\n    \"registry-mirrors\": [\n        \"https://docker.m.daocloud.io\",\n        \"https://dockerproxy.com\",\n        \"https://docker.mirrors.ustc.edu.cn\",\n        \"https://docker.nju.edu.cn\"\n    ]\n}\n```\n\n\n\n### 开始部署 `青龙面板`\n\n```bash\n# 拉取镜像\ndocker pull whyour/qinglong\n# 创建青龙面板需要的路径\nmkdir /www\nmkdir /www/qinglong\n\n# 运行青龙面板\ndocker run -itd -v /www/qinglong/config:/ql/config -v /www/qinglong/log:/ql/log -v /www/qinglong/db:/ql/db -v /www/qinglong/repo:/ql/repo -v /www/qinglong/raw:/ql/raw -v /www/qinglong/scripts:/ql/scripts -v /www/qinglong/jbot:/ql/jbot -p 10825:5700 --name qinglong --hostname qinglong --restart unless-stopped whyour/qinglong\n```\n\n","tags":["工具","docker","青龙面板","赚钱计划"],"categories":["Docker"]},{"title":"Arm版-ubuntu-安装-Docker教程","url":"/2024/08/09/Arm版-ubuntu-安装-Docker教程/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Arm版 ubuntu 安装 Docker教程</strong></font>\n\n<!--more-->\n\n如果你想要使用阿里云的Docker源而不是官方的Docker源，你需要修改`add-apt-repository`命令中的URL。阿里云的Docker源可能会提供更快的下载速度，特别是对于位于中国的用户。\n\n以下是使用阿里云Docker源的步骤：\n\n1. **添加阿里云的Docker GPG密钥**：\n\n```bash\ncurl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -\n```\n\n1. **设置Docker存储库**：\n\n这里你需要替换官方的Docker源URL为阿里云的源URL。注意，阿里云的源可能不包含`[arch=arm64]`这样的架构标识，因为阿里云会根据你访问的源自动提供适合你架构的软件包。\n\n```bash\nsudo add-apt-repository \"deb [arch=arm64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable\"\n```\n\n但是，通常阿里云源会自动处理架构问题，所以你可能不需要指定`[arch=arm64]`。如果不确定，可以先尝试不加架构标识：\n\n```bash\nsudo add-apt-repository \"deb http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable\"\n```\n\n1. **更新软件包索引并安装Docker**：\n\n```bash\nsudo apt-get update  \nsudo apt-get install -y docker-ce docker-ce-cli containerd.io\n```\n\n1. **启动Docker服务**：\n\n```bash\nsudo systemctl start docker  \nsudo systemctl enable docker\n```\n\n1. **测试Docker安装**：\n\n```bash\nbash复制代码\n\ndocker --version\n```\n\n确保在运行这些命令之前，你的系统已经是最新的，并且你已经卸载了任何旧版本的Docker。如果你遇到任何问题，检查你的网络连接，以及确保你使用的命令和源URL是最新的。","tags":["工具","docker","ubuntu","arm"],"categories":["Docker"]},{"title":"内存小于-1G，宝塔面板-9.0.0-无法安装-mysql-解决方法","url":"/2024/08/08/内存小于-1G，宝塔面板-9-0-0-无法安装-mysql-解决方法/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>内存小于 1G，宝塔面板`9.0.0`无法安装`mysql`解决方法</strong></font>\n\n<!--more-->\n\n宝塔官方限制了内存小于`1G`无法安装`mysql`\n\n<font color=#00b2c2 size=5 face=宋体><strong>解决方法：</strong></font>\n\n找到路径：`/www/server/panel/class` 下的 `panelPlugin.py`\n\n![image-20240808124006141](https://s2.loli.net/2024/08/09/XxNRyJokGCQa6e9.png)\n\n定位到>>> 关键字 `limit_list` 将如下注释掉即可\n\n![image-20240808123340813](https://s2.loli.net/2024/08/08/WutVP8LYhXv9rxN.png)","tags":["标签1"],"categories":["主分类","二级分类"]},{"title":"NanoPi-R2s-SD卡系统设置Swap内存","url":"/2024/08/07/NanoPi-R2s-SD卡系统设置Swap内存/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>NanoPi R2s SD卡系统设置Swap内存</strong></font>\n\n<!--more-->\n\n一直报错：\n\n```tex\nubuntu swapon failed: Invalid argument\n```\n\n<font color=#b0171f size=3 face=宋体><strong>问题溯源：</strong></font>\n\n```\n该问题是因为 sd卡系统中的存储空间在 根目录下，并且没有单独分区（是否还有其他原因，未曾证实）\n```\n\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>解决方案：</strong></font>\n\n### 1：压缩 根目录 `/` 下的 `2G` 空间出来，供虚拟内存使用\n\n此处你需要安装 `ubuntu desktop` 系统，使用 其中的 `磁盘工具` 来操作\n\n假设你已经设置后了一个单独的分区出来，接下来可以正式的开始设置 `swap`\n\n### 2：查看系统是否存在虚拟内存\n\n```bash\nfree -h\n```\n\n![img](https://s2.loli.net/2024/08/07/DytMjlnGBgEAQHS.png)\n\n### **3：检查可用空间**\n\n```bash\ndf -h\n```\n\n挂载在 / 上的 **/dev/sda** 文件系统将是系统的硬盘驱动器。\n\n### 4: **创建交换文件**\n\n在这里，我使用 **fallocate** 命令为 1GB RAM 服务器创建一个 1GB 的交换空间作为示例\n\n```bash\nsudo dd if=/dev/mmcblk0p10 of=/swap/swapfile bs=1M count=1024   # 这里如果存在/dev/mmcblk0p10设备， 则设置/swap/swapfile为交换空间 大小为1G\n```\n\n### 5：**在Ubuntu上启用交换文件**\n\n```bash\nsudo chmod 600 /swap/swapfile      # 设置权限\nsudo mkswap /swap/swapfile   # 标记交换空间\nsudo swapon /swap/swapfile   # 使用交换空间\n```\n\n### 6：**创建永久交换空间**\n\n编辑 /etc/rc.local\n\n```bash\n#!/bin/sh -e\n#\n# rc.local\n#\n# This script is executed at the end of each multiuser runlevel.\n# Make sure that the script will \"exit 0\" on success or any other\n# value on error.\n#\n# In order to enable or disable this script just change the execution\n# bits.\n#\n# By default this script does nothing.\n\n# Generate the SSH keys if non-existent\nif [ ! -f /etc/ssh/ssh_host_rsa_key ]\nthen\n        # else ssh service start in dpkg-reconfigure will fail\n        systemctl stop ssh.socket||true\n        dpkg-reconfigure openssh-server\nfi\n\nif [ -f /usr/bin/gpio ]; then\n    setcap cap_sys_rawio+ep /usr/bin/gpio\nfi\n\nif [ -e /dev/mem ]; then\n    chmod g+w /dev/mem\nfi\n\nmount /dev/mmcblk0p10 /swap\nsleep 5\nsudo swapon /swap/swapfile\n\nexit 0\n\n```","tags":["ubuntu","虚拟内存"],"categories":["折腾","nanopi"]},{"title":"虚拟机安装Windows-11提示不符合最低系统要求的解决方法","url":"/2024/08/02/虚拟机安装Windows-11提示不符合最低系统要求的解决方法/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>虚拟机安装Windows-11提示不符合最低系统要求的解决方法</strong></font>\n\n<!--more-->\n\n在虚拟机上安装`win11`的时候，到选择语言这一步时，不要继续，先做下面的操作\n\n（没有截图，已经成功装完了嘿嘿）\n\n1.按`Shift+F10`打开命令行，然后输入`regedit`，打开注册表\n\n2.然后找到`HAKEY_LOCOL_MACHINE`——`SYSTEM`——`Setup`，自己建一个项命名为`LabConfig`\n\n3.然后在这个`LabConfig`项中右键，添加`DWORD (32 is) `值，下面5个都要加，按这样命名\n\n```\nBypassCPUCheck\nBypassRAMCheck\nBypassSecureBootCheck\nBypassStorageCheck\nBypassTPMCheck\n```\n\n4.每个值数值为1，选中这个值然后修改为1就行，很简单，写完不用管，自动保存了（别人的图）\n\n![img](https://s2.loli.net/2024/08/02/F8Qzc6ptiVbyslU.png)\n\n5.再继续选择语言，然后继续安装，到选择`win11`版本的时候就不会提示不符合了，搞定~","tags":["教程"],"categories":["虚拟机","安装解决"]},{"title":"python-繁体转简体教程","url":"/2024/07/13/python-繁体转简体教程/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>python 繁体转简体教程</strong></font>\n\n<!--more-->\n\n在Python中，将繁体中文转换为简体中文可以通过多种方式实现，但一个常见且有效的方法是使用第三方库，如`opencc-python-reimplemented`或`hanlp`。这里，我将演示如何使用`opencc-python-reimplemented`库来实现这一功能。\n\n首先，你需要安装`opencc-python-reimplemented`库。你可以通过pip来安装它：\n\n```bash\npip install opencc-python-reimplemented\n```\n\n安装完成后，你可以使用以下代码将繁体中文转换为简体中文：\n\n```python\nfrom opencc import OpenCC  \n  \n# 初始化转换器，将繁体转为简体  \ncc = OpenCC('t2s')  # 使用繁体到简体的转换配置文件  注意：这里添加t2s 即可  不是t2s.json\n  \n# 示例文本  \ntraditional_text = '這是繁體中文的示例文本。'  \n  \n# 转换  \nsimplified_text = cc.convert(traditional_text)  \n  \nprint(simplified_text)  # 输出: 这是简体中文的示例文本。\n```\n\n注意：上面的`t2s.json`是`opencc`库内置的转换配置文件之一，用于从繁体中文转换到简体中文。`OpenCC`是一个非常强大的库，支持多种语言转换配置，包括但不限于繁体到简体、简体到繁体、以及多种方言之间的转换。\n\n此外，`hanlp`也是一个功能强大的自然语言处理库，它提供了更广泛的语言处理功能，包括繁简转换。但是，对于简单的繁简转换任务，`opencc-python-reimplemented`可能是更轻量级和直接的选择。\n\n最后，请注意，由于语言的复杂性和多样性，自动转换工具可能无法完美处理所有情况，特别是在处理一些专有名词、人名、地名或特定语境下的词汇时。因此，在使用自动转换工具时，最好进行人工校对以确保准确性。","tags":["繁体转简体"],"categories":["python","字符转换"]},{"title":"go-内存泄漏导致TCP连接数量巨大","url":"/2024/07/07/go-内存泄漏导致TCP连接数量巨大/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>go 内存泄漏导致TCP连接数量巨大</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>由第三方库导致的内存泄漏：</strong></font>\n\n**库：** github.com/wangluozhe/requests\n\n**特点：** 该库支持JA3、http2 ... 写法与Python的requests类似，所以很适合从python转go\n\n**导致内容泄漏的原因：**\n\n该库会在异步请求中，特别是爬取 **`m3u8`** 文件下的 **`TS`**文件的时候，会导致**`TCP`**不关闭。最终导致程序一直奔溃\n\n<font color=#00b2c2 size=5 face=宋体><strong>判定 TCP 错误：</strong></font>\n\n```bash\ncat /proc/39114/limits\ncat /proc/39114/net/sockstat      # 查看 sockstat 连接数量\n\n\nps -ef|grep M3U8GetTs\n```\n\n","tags":["go","错误处理","内存泄漏"],"categories":["go","错误处理"]},{"title":"requests-支持Ja3指纹修改的golang请求库","url":"/2024/07/03/requests-支持Ja3指纹修改的golang请求库/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>requests：支持Ja3指纹修改的golang请求库</strong></font>\n\n<!--more-->\n\n随着Python的验证限制越来越多，网络请求被限制得很严重，想要修改指纹等信息，requests库显得力不从心\n\n**于是转战Go**\n\n\n\n**requests支持以下新特性：**\n\n- 支持http2，默认以http2进行连接，连接失败后会进行退化而进行http1.1连接\n- 支持JA3指纹修改\n- 支持http2+JA3指纹\n- 支持在使用代理的基础上修改JA3指纹\n\n**下载requests库**:\n\n```bash\ngo get github.com/wangluozhe/requests\n```\n\n**项目地址：https://github.com/wangluozhe/requests**:\n\n\n\n### **http2：请求**\n\n```bash\nfunc request(_url string) (string, map[string]string) {\n\treq := url.NewRequest()\n\theaders := &http.Header{\n\t\t\"User-Agent\":                []string{\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/112.0\"},\n\t\t\"accept\":                    []string{\"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8\"},\n\t\t\"accept-language\":           []string{\"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2\"},\n\t\t\"accept-encoding\":           []string{\"gzip, deflate, br\"},\n\t\t\"upgrade-insecure-requests\": []string{\"1\"},\n\t\t\"sec-fetch-dest\":            []string{\"document\"},\n\t\t\"sec-fetch-mode\":            []string{\"navigate\"},\n\t\t\"sec-fetch-site\":            []string{\"none\"},\n\t\t\"sec-fetch-user\":            []string{\"?1\"},\n\t\t\"te\":                        []string{\"trailers\"},\n\t\thttp.PHeaderOrderKey: []string{\n\t\t\t\":method\",\n\t\t\t\":path\",\n\t\t\t\":authority\",\n\t\t\t\":scheme\",\n\t\t},\n\t\thttp.HeaderOrderKey: []string{\n\t\t\t\"user-agent\",\n\t\t\t\"accept\",\n\t\t\t\"accept-language\",\n\t\t\t\"accept-encoding\",\n\t\t\t\"upgrade-insecure-requests\",\n\t\t\t\"sec-fetch-dest\",\n\t\t\t\"sec-fetch-mode\",\n\t\t\t\"sec-fetch-site\",\n\t\t\t\"sec-fetch-user\",\n\t\t\t\"te\",\n\t\t},\n\t}\n\treq.Headers = headers\n\treq.Ja3 = \"771,4865-4866-4867-49195-49199-49196-49200-52393-52392-49171-49172-156-157-47-53,0-23-65281-10-11-35-16-5-13-18-51-45-43-27-21,29-23-24,0\"\n\th2s := &transport.H2Settings{\n\t\tSettings: map[string]int{\n\t\t\t\"HEADER_TABLE_SIZE\": 65536,\n\t\t\t//\"ENABLE_PUSH\":            0,\n\t\t\t//\"MAX_HEADER_LIST_SIZE\":   262144,\n\t\t\t//\"MAX_CONCURRENT_STREAMS\": 1000,\n\t\t\t\"INITIAL_WINDOW_SIZE\": 131072,\n\t\t\t\"MAX_FRAME_SIZE\":      16384,\n\t\t},\n\t\tSettingsOrder: []string{\n\t\t\t\"HEADER_TABLE_SIZE\",\n\t\t\t\"INITIAL_WINDOW_SIZE\",\n\t\t\t\"MAX_FRAME_SIZE\",\n\t\t},\n\t\tConnectionFlow: 12517377,\n\t\tHeaderPriority: map[string]interface{}{\n\t\t\t\"weight\":    42,\n\t\t\t\"streamDep\": 13,\n\t\t\t\"exclusive\": false,\n\t\t},\n\t\tPriorityFrames: []map[string]interface{}{\n\t\t\t{\n\t\t\t\t\"streamID\": 3,\n\t\t\t\t\"priorityParam\": map[string]interface{}{\n\t\t\t\t\t\"weight\":    201,\n\t\t\t\t\t\"streamDep\": 0,\n\t\t\t\t\t\"exclusive\": false,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"streamID\": 5,\n\t\t\t\t\"priorityParam\": map[string]interface{}{\n\t\t\t\t\t\"weight\":    101,\n\t\t\t\t\t\"streamDep\": 0,\n\t\t\t\t\t\"exclusive\": false,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"streamID\": 7,\n\t\t\t\t\"priorityParam\": map[string]interface{}{\n\t\t\t\t\t\"weight\":    1,\n\t\t\t\t\t\"streamDep\": 0,\n\t\t\t\t\t\"exclusive\": false,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"streamID\": 9,\n\t\t\t\t\"priorityParam\": map[string]interface{}{\n\t\t\t\t\t\"weight\":    1,\n\t\t\t\t\t\"streamDep\": 7,\n\t\t\t\t\t\"exclusive\": false,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"streamID\": 11,\n\t\t\t\t\"priorityParam\": map[string]interface{}{\n\t\t\t\t\t\"weight\":    1,\n\t\t\t\t\t\"streamDep\": 3,\n\t\t\t\t\t\"exclusive\": false,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"streamID\": 13,\n\t\t\t\t\"priorityParam\": map[string]interface{}{\n\t\t\t\t\t\"weight\":    241,\n\t\t\t\t\t\"streamDep\": 0,\n\t\t\t\t\t\"exclusive\": false,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t}\n\th2ss := transport.ToHTTP2Settings(h2s)\n\treq.HTTP2Settings = h2ss\n\tr, err := requests.Get(_url, req)\n\n\terrMessage := map[string]string{}\n\tif err != nil {\n\t\terrMessage = map[string]string{\"status\": \"false\", \"errMessage\": \"获取内容错误\"}\n\t\t//fmt.Println(err)\n\t}\n\tif r.StatusCode != 200 {\n\t\terrMessage = map[string]string{\"status\": \"false\", \"errMessage\": \"状态响应错误\"}\n\t} else {\n\t\terrMessage = map[string]string{\"status\": \"true\", \"errMessage\": \"获取内容成功\"}\n\t}\n\t//fmt.Println(r.Request.Headers)\n\t//fmt.Println(\"url:\", r.Url)\n\t//fmt.Println(\"headers:\", r.Headers)\n\t//fmt.Println(\"text:\", r.Text)\n\treturn r.Text, errMessage\n}\n```\n\n","tags":["go","视频","爬虫"],"categories":["go","爬虫"]},{"title":"golang-获取mp4-视频时长信息","url":"/2024/07/03/golang-获取mp4-视频时长信息/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>golang 获取mp4 视频时长信息：</strong></font>\n\n<!--more-->\n\n本文参考自：https://www.cnblogs.com/Akkuman/p/12371838.html\n\n主要原理是根据MP4文档格式取到moov结构，然后获取时长\n\n```go\npackage main\n\nimport (\n\t\"bytes\"\n\t\"encoding/binary\"\n\t\"fmt\"\n\t\"io\"\n\t\"os\"\n\t\"path/filepath\"\n)\n\n// BoxHeader 信息头\ntype BoxHeader struct {\n\tSize       uint32\n\tFourccType [4]byte\n\tSize64     uint64\n}\n\nfunc main() {\n\tfile, err := os.Open(os.Args[1])\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\tduration, err := GetMP4Duration(file)\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\tfmt.Println(filepath.Base(os.Args[1]), duration)\n}\n\n// GetMP4Duration 获取视频时长，以秒计\nfunc GetMP4Duration(reader io.ReaderAt) (lengthOfTime uint32, err error) {\n\tvar info = make([]byte, 0x10)\n\tvar boxHeader BoxHeader\n\tvar offset int64 = 0\n\t// 获取moov结构偏移\n\tfor {\n\t\t_, err = reader.ReadAt(info, offset)\n\t\tif err != nil {\n\t\t\treturn\n\t\t}\n\t\tboxHeader = getHeaderBoxInfo(info)\n\t\tfourccType := getFourccType(boxHeader)\n\t\tif fourccType == \"moov\" {\n\t\t\tbreak\n\t\t}\n\t\t// 有一部分mp4 mdat尺寸过大需要特殊处理\n\t\tif fourccType == \"mdat\" {\n\t\t\tif boxHeader.Size == 1 {\n\t\t\t\toffset += int64(boxHeader.Size64)\n\t\t\t\tcontinue\n\t\t\t}\n\t\t}\n\t\toffset += int64(boxHeader.Size)\n\t}\n\t// 获取moov结构开头一部分\n\tmoovStartBytes := make([]byte, 0x100)\n\t_, err = reader.ReadAt(moovStartBytes, offset)\n\tif err != nil {\n\t\treturn\n\t}\n\t// 定义timeScale与Duration偏移\n\ttimeScaleOffset := 0x1C\n\tdurationOffest := 0x20\n\ttimeScale := binary.BigEndian.Uint32(moovStartBytes[timeScaleOffset : timeScaleOffset+4])\n\tDuration := binary.BigEndian.Uint32(moovStartBytes[durationOffest : durationOffest+4])\n\tlengthOfTime = Duration / timeScale\n\treturn\n}\n\n// getHeaderBoxInfo 获取头信息\nfunc getHeaderBoxInfo(data []byte) (boxHeader BoxHeader) {\n\tbuf := bytes.NewBuffer(data)\n\tbinary.Read(buf, binary.BigEndian, &boxHeader)\n\treturn\n}\n\n// getFourccType 获取信息头类型\nfunc getFourccType(boxHeader BoxHeader) (fourccType string) {\n\tfourccType = string(boxHeader.FourccType[:])\n\treturn\n}\n\n\n```\n\n<font color=#f26522 size=4 face=宋体><strong>获取到的时间为 `秒`, 如果想要换成 `h:m:s`，格式需要转换一下：</strong></font>\n\n```go\nfunc GetMP4Time(filePath string) string {\n\tfile, err := os.Open(filePath)\n\t//file, err := os.Open(os.Args[1])\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\tduration, err := GetMP4Duration(file)\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\tfmt.Println(filepath.Base(filePath), duration)\n\n\td := time.Duration(duration) * time.Second\n\th := d / time.Hour\n\td -= h * time.Hour\n\tm := d / time.Minute\n\td -= m * time.Minute\n\ts := d / time.Second\n\n\t// 使用strconv.Itoa或fmt.Sprintf将整数转换为字符串\n\t// 这里为了简洁，直接使用fmt.Sprintf\n\treturn fmt.Sprintf(\"%02d:%02d:%02d\", h, m, s)\n}\n```\n\n","tags":["go","视频","爬虫"],"categories":["go","爬虫"]},{"title":"centos7-yum-update-更新错误","url":"/2024/07/02/centos7-yum-update-更新错误/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>centos7 `yum update` 更新错误：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>错误：</strong></font>\n\n```\n已加载插件：fastestmirror\nDetermining fastest mirrors\nCould not retrieve mirrorlist http://mirrorlist.centos.org/?release=7&arch=x86_64&repo=os&infra=stock error was\n14: curl#6 - \"Could not resolve host: mirrorlist.centos.org; 未知的错误\"  --看起来这个错误报的很明显了\n \n \n One of the configured repositories failed (未知),\n and yum doesn't have enough cached data to continue. At this point the only\n safe thing yum can do is fail. There are a few ways to work \"fix\" this:\n \n     1. Contact the upstream for the repository and get them to fix the problem.\n \n     2. Reconfigure the baseurl/etc. for the repository, to point to a working\n        upstream. This is most often useful if you are using a newer\n        distribution release than is supported by the repository (and the\n        packages for the previous distribution release still work).\n \n     3. Run the command with the repository temporarily disabled\n            yum --disablerepo=<repoid> ...\n \n     4. Disable the repository permanently, so yum won't use it by default. Yum\n        will then just ignore the repository until you permanently enable it\n        again or use --enablerepo for temporary usage:\n \n            yum-config-manager --disable <repoid>\n        or\n            subscription-manager repos --disable=<repoid>\n \n     5. Configure the failing repository to be skipped, if it is unavailable.\n        Note that yum will try to contact the repo. when it runs most commands,\n        so will have to try and fail each time (and thus. yum will be be much\n        slower). If it is a very temporary problem though, this is often a nice\n        compromise:\n \n            yum-config-manager --save --setopt=<repoid>.skip_if_unavailable=true\n \nCannot find a valid baseurl for repo: base/7/x86_64\n```\n\n<font color=red size=4 face=宋体><strong>原因：</strong></font>\n\n```\nhttp://mirrorlist.centos.org 无法访问导致的，貌似这个地址已经不能访问了\n```\n\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>解决办法：</strong></font>\n\n+ 1、添加DNS\n\n  ```python\n  vim /etc/resolv.conf\n  \n  # 添加\n  nameserver 114.114.114.114    # --插入这一行, 或者换成百度, google的都行　\n  ```\n\n+ 2、替换`阿里源`\n\n  ```python\n  cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak\n  wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\n  yum clean all\n  yum makecache #创建本地缓存\n  yum list\n  ```\n\n+ 3、`CentOS-CR.repo` 更换阿里源\n\n  ```python\n  vim /etc/yum.repos.d/CentOS-CR.repo\n  \n  # 原始内容：\n  [base]  \n  name=CentOS-$releasever - Base  \n  mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=os&infra=$infra  \n  # baseurl=http://mirror.centos.org/centos/$releasever/os/$basearch/  \n  gpgcheck=1  \n  gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial\n  \n  \n  \n  # 更换成如下内容\n  [base]\n  name=CentOS-$releasever - Base - Aliyun\n  baseurl=http://mirrors.aliyun.com/centos/$releasever/os/$basearch/\n  gpgcheck=1\n  gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial\n  ```\n\n+ 4、清除 `yum`缓存\n\n  ```bash\n  sudo yum clean all  \n  sudo yum makecache  \n  sudo yum update\n  ```","tags":["系统","运维","错误"],"categories":["linux","错误"]},{"title":"Django-ORM-存储JSON数据","url":"/2024/06/26/Django-ORM-存储JSON数据/","content":"\n## <font color=#00b2c2 size=5 face=宋体><strong>Django ORM 存储JSON数据</strong></font>\n\n<!--more-->\n\n在`Django`模型中，如果你想要一个字段能够接受一个列表（例如，一个图片URL的列表），你需要考虑数据库的设计如何能够支持这种结构。数据库通常不支持直接存储Python列表这样的复杂数据类型，但你可以使用几种方法来模拟这种行为。\n\n`以下是一些方法，你可以根据你的需求来选择：`\n\n### **使用JSONField**（Django 3.1+）\n\n如果你的Django版本是3.1或更高，你可以使用`JSONField`来存储JSON数据，包括列表。\n\n```python\nfrom django.db import models  \nfrom django.contrib.postgres.fields import JSONField  \n  \nclass MyModel(models.Model):  \n    list_image = JSONField(null=True, blank=True)  # 假设你想存储图片URL的列表\n```\n\n然后你可以这样使用它：\n\n```python\ninstance = MyModel.objects.create(list_image=['url1.com', 'url2.com'])\n```\n\n### **使用CharField或TextField并手动序列化/反序列化**\n\n如果你不想使用`JSONField`，或者你的Django版本较旧，你可以将列表转换为JSON字符串（使用`json.dumps`），然后将其存储在`CharField`或`TextField`中。读取时，你需要使用`json.loads`将其转换回Python列表。\n\n```python\nimport json  \nfrom django.db import models  \n  \nclass MyModel(models.Model):  \n    list_image = models.TextField(null=True, blank=True)  # 假设你想存储图片URL的列表的JSON字符串  \n  \n    def get_image_list(self):  \n        if self.list_image:  \n            return json.loads(self.list_image)  \n        return []  \n  \n    def set_image_list(self, image_list):  \n        self.list_image = json.dumps(image_list)  \n  \n# 使用时  \ninstance = MyModel()  \ninstance.set_image_list(['url1.com', 'url2.com'])  \ninstance.save()  \n  \n# 读取时  \nimage_list = instance.get_image_list()\n```\n\n### **使用关联模型**\n\n如果你想要建立更复杂的关联（例如，每个图片都有自己的元数据），你可以创建一个关联模型来表示这种关系。\n\n```python\nfrom django.db import models  \n  \nclass Image(models.Model):  \n    url = models.URLField()  \n    # 其他字段，如标题、描述等  \n  \nclass MyModel(models.Model):  \n    images = models.ManyToManyField(Image)\n```\n\n这样，你可以将多个`Image`对象与`MyModel`对象关联起来，并使用Django的ORM来查询和管理这些关联。\n\n\n\n<font color=red size=3 face=宋体><strong>根据你的具体需求，选择最适合你的方法。如果你只是想简单地存储一个图片URL的列表，并且不需要复杂的查询或关系，那么使用`JSONField`或手动序列化/反序列化可能是最简单的选择。如果你需要更复杂的关联或查询功能，那么使用关联模型可能是更好的选择。</strong></font>\n\n","tags":["python","django","数据库"],"categories":["数据库","django"]},{"title":"在Django中使用MySQL作为数据库","url":"/2024/06/26/在Django中使用MySQL作为数据库/","content":"\n## <font color=#00b2c2 size=5 face=宋体><strong>在Django中使用MySQL作为数据库：</strong></font>\n\n<!--more-->\n\n在Django中使用MySQL作为数据库，你需要遵循以下步骤来设置你的`DATABASES`配置：\n\n1. **安装MySQL客户端库**：\n   对于Python，你需要安装一个MySQL客户端库，如`mysqlclient`或`PyMySQL`。`mysqlclient`是Django官方推荐的，但它在某些系统上可能难以安装。`PyMySQL`是一个纯Python实现的MySQL客户端，可以作为`mysqlclient`的替代。\n\n   使用pip安装`PyMySQL`（如果你选择使用它）：\n\n   ```bash\n   pip install PyMySQL\n   ```\n   \n   对于`mysqlclient`，安装方法取决于你的操作系统和Python版本。\n\n2. **配置Django的`DATABASES`设置**：\n   在你的Django项目的`settings.py`文件中，找到`DATABASES`设置并修改它以使用MySQL。以下是一个示例配置：\n\n   ```python\n   DATABASES = {  \n       'default': {  \n           'ENGINE': 'django.db.backends.mysql',  \n           'NAME': 'your_database_name',  # 数据库名  \n           'USER': 'your_mysql_username',  # MySQL用户名  \n           'PASSWORD': 'your_mysql_password',  # MySQL密码  \n           'HOST': 'localhost',  # 数据库服务器地址  \n           'PORT': '3306',  # 数据库服务器端口（默认是3306）  \n           'OPTIONS': {  \n               'charset': 'utf8mb4',  \n               'init_command': \"SET sql_mode='STRICT_TRANS_TABLES';\",  \n           },  \n           # 如果你使用的是PyMySQL，你需要添加以下行来告诉Django使用它  \n           # 'OPTIONS': {  \n           #     'init_command': \"SET sql_mode='STRICT_TRANS_TABLES';\",  \n           #     'read_default_file': '/path/to/my.cnf',  # 可选，指向你的MySQL配置文件  \n           #     'charset': 'utf8mb4',  \n           #     'use_unicode': True,  \n           # },  \n           # 'TEST': {  \n           #     'CHARSET': 'utf8mb4',  \n           #     'COLLATION': 'utf8mb4_unicode_ci',  \n           # },  \n       }  \n   }\n   ```\n\n   注意：如果你选择使用`PyMySQL`作为客户端，并且Django版本在3.0之前，你可能需要在`__init__.py`文件中添加一些代码来让Django知道使用`PyMySQL`：\n\n   ```python\n   # 在你的Django应用的__init__.py文件中  \n   import pymysql  \n   pymysql.install_as_MySQLdb()\n   ```\n\n   对于Django 3.0及更高版本，Django默认支持`PyMySQL`，但你可能需要在`DATABASES`设置中添加一个`'NAME': 'mysql.connector.django'`来指定使用它（取决于你是否通过第三方包安装了额外的MySQL连接器）。\n\n3. **创建数据库**：\n   在MySQL中，你需要手动创建数据库（除非你的Django项目在迁移时设置了自动创建）。你可以使用MySQL命令行工具或图形界面工具（如phpMyAdmin、MySQL Workbench等）来创建数据库。\n\n4. **运行迁移**：\n   在Django项目中，使用以下命令来创建和管理数据库表：\n\n   ```bash\n   python manage.py makemigrations  \n   python manage.py migrate\n   ```\n\n   这些命令将基于你的模型（在`models.py`文件中定义）来创建或修改数据库表。\n\n5. **测试连接**：\n   在Django shell或视图中尝试查询数据库以确保连接正常。\n\n6. **（可选）配置MySQL用户权限**：\n   确保你为Django应用创建的MySQL用户有足够的权限来访问和修改数据库。","tags":["python","django","数据库"],"categories":["数据库","django"]},{"title":"OpenVPN-Access-Server-安装与配置、使用","url":"/2024/06/24/OpenVPN-Access-Server-安装与配置、使用/","content":"\n## <font color=#00b2c2 size=5 face=宋体><strong>OpenVPN Access Server 安装与配置、使用：</strong></font>\n\n<!--more-->\n\n### <font color=red size=4 face=宋体><strong>官方安装教程：[传送门](https://as-portal.openvpn.com/instructions/cloud-image)</strong></font>\n\n<font color=red size=4 face=宋体><strong>破解文件：[baidu下载](https://bd.bcebos.com/v1/xly-icafe/pyovpn-2.0-py3.6-20240625053307-h7bdew.egg)、[蓝奏云下载](https://wwwqe.lanzoul.com/ipk2K22n558b)</strong></font>  (下载完成后更名为：`pyovpn-2.0-py3.6.egg`)\n\n![image-20240625033359487](https://s2.loli.net/2024/06/25/xEVmAwib8N2cutl.png)\n\n### <font color=#f26522 size=4 face=宋体><strong>Centos7 安装：</strong></font>\n\n```python\n# 要安装 Access Server，请使用官方存储库。以 root 权限登录 Linux 系统，然后输入以下命令以添加存储库并安装软件包“openvpn-as”。客户端捆绑包将自动安装。\n\nyum -y install centos-release-scl-rh\nyum -y install https://as-repository.openvpn.net/as-repo-centos7.rpm\n\n# yum 查看软件包支持的所有版本\nyum list openvpn-as --showduplicates | sort -r   # <openvpn-as> 为软件版本\n\n# 安装指定版本 openvpn-as\n# yum -y install openvpn-as   # 这是直接安装最新版本的 openvpn Access Server 但是测试破解的软件为 2.11.2 python3.6\nyum install openvpn-as-2.11.2_72c0e923-CentOS7      # 安装软件为 <openvpn-as.x86_64> 去掉 <.x86_64> 加上 <2.11.2_72c0e923-CentOS7>\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>ubuntu 24 x86 安装：</strong></font>\n\n```python\n# 要安装 Access Server，请使用官方存储库。以 root 权限登录 Linux 系统，然后输入以下命令以添加存储库并安装软件包“openvpn-as”。客户端捆绑包将自动安装。\n\napt update && apt -y install ca-certificates wget net-tools gnupg\n\nwget https://as-repository.openvpn.net/as-repo-public.asc -qO /etc/apt/trusted.gpg.d/as-repository.asc\n\necho \"deb [arch=amd64 signed-by=/etc/apt/trusted.gpg.d/as-repository.asc] http://as-repository.openvpn.net/as/debian noble main\">/etc/apt/sources.list.d/openvpn-as-repo.list\napt update && apt -y install openvpn-as\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>Debian 12 安装：</strong></font>\n\n```python\n# 要安装 Access Server，请使用官方存储库。以 root 权限登录 Linux 系统，然后输入以下命令以添加存储库并安装软件包“openvpn-as”。客户端捆绑包将自动安装。\n\napt update && apt -y install ca-certificates wget net-tools gnupg\n\nwget https://as-repository.openvpn.net/as-repo-public.asc -qO /etc/apt/trusted.gpg.d/as-repository.asc\n\necho \"deb [arch=amd64 signed-by=/etc/apt/trusted.gpg.d/as-repository.asc] http://as-repository.openvpn.net/as/debian bookworm main\">/etc/apt/sources.list.d/openvpn-as-repo.list\n\n# 查看 openvpn-as 可安装版本\napt list -a openvpn-as\n# 或者 \napt-cache madison openvpn-as\n\napt update && apt -y install openvpn-as\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>Red Hat 9 安装：</strong></font>\n\n```python\n# 要安装 Access Server，请使用官方存储库。以 root 权限登录 Linux 系统，然后输入以下命令以添加存储库并安装软件包“openvpn-as”。客户端捆绑包将自动安装。\n\nyum -y remove openvpn-as-yum\nyum -y install https://as-repository.openvpn.net/as-repo-rhel9.rpm\nyum -y install openvpn-as\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>在 Docker 上安装：</strong></font>\n\n```python\n# 1、拉取docker镜像\ndocker pull openvpn/openvpn-as\n\n# 2、运行镜像\n# 将 <path to data> 替换为用于存储 Access Server 配置文件的首选文件路径。\ndocker run -d \\\n  --name=openvpn-as --cap-add=NET_ADMIN \\\n  -p 943:943 -p 443:443 -p 1194:1194/udp \\\n  -v <path to data>:/openvpn \\\n  openvpn/openvpn-as\n\n# 3、打开 Web 界面\n# 您可以在 https://HOST-IP:943/admin\n# 中找到 Web 界面\n# 用户名是 openvpn\n# 您可以使用以下命令在 docker 日志中找到自动生成的密码：\ndocker logs -f openvpn-as\n```\n\n<font color=red size=4 face=宋体><strong>备注：如果以上都无法满足你，请根据传送门 跳转自官方教程进行安装</strong></font>\n\n\n\n#### 安装完成 会显示类似如下的内容：\n\n```\n\n+++++++++++++++++++++++++++++++++++++++++++++++\nAccess Server 已成功安装在 /usr/local/openvpn_as\n配置日志文件已写入 /usr/local/openvpn_as/init.log\n\nAccess Server Web UI 可在此处获得：\n管理 UI：https://192.168.102.130:943/admin\n客户端 UI：https://192.168.102.130:943\n以“openvpn”身份登录，使用“RR4ImyhwbFFq”继续\n（可以在管理 UI 上更改密码）\n+++++++++++++++++++++++++++++++++++++++++++++++\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>开放端口：</strong></font>\n\n```\n80 tcp    # 网站访问端口\n443 tcp   # 网站ssl访问端口(openvpn 也会用到)\n943 tcp   # openvpn access server  网页访问端口\n945 tcp\t  # openvpn access server  网页访问端口\n1194 udp\t# openvpn access server  流量转发端口\n```\n\n#### 支持的破解软件版本 openvpn Access Server 2.11.2\n\n![image-20240625051029802](https://s2.loli.net/2024/06/25/aKCBEwGd9eOPzNI.png)\n\n#### 设置无密码连接openvpn\n\n![image-20240624223442179](https://s2.loli.net/2024/06/25/EarR84ZKyGiWNHk.png)\n\n![image-20240624223747805](https://s2.loli.net/2024/06/25/mk2PACIst5QM31p.png)\n\n![image-20240624224101676](https://s2.loli.net/2024/06/25/5fJHuCLNoMPiqsD.png)\n\n![image-20240624224511569](https://s2.loli.net/2024/06/25/wlko6WFguryPtxN.png)\n\n<font color=#00b2c2 size=5 face=宋体><strong>相关命令：</strong></font>\n\n下面附2.10.3及以上版本密码重置教程，这个和以前不一样，有默认密码了。\n重置默认 openvpn 帐户管理权限\n\n`注意`：如果您当前没有使用最新版本的 Access Server 2.10.3，我们建议您阅读旧版本的说明。\n\n管理帐户，默认称为openvpn，可以是操作系统中的引导帐户，也可以是 Access Server 本身的内部本地身份验证系统中的管理帐户。我们建议使用本地帐户，这是自 Access Server 2.10 版以来的默认帐户。\n\n这些是常见的管理用户登录问题：\n\n您丢失了用户名和/或密码。\n该帐户与已失效的外部身份验证系统相关联。\n该帐户上设置了拒绝登录标志。\n有 MFA 要求，您丢失了密钥。\n该帐户在多次登录失败后（暂时）被锁定。\n您可以在 Access Server 的命令行上以 root 用户身份执行以下命令，以创建或重置用户名为openvpn的本地管理员帐户。它考虑了上述所有情况，并应为您提供一个本地openvpn管理帐户，您可以使用该帐户登录到 Admin Web UI。\n\n`使用指定密码创建/重置openvpn管理本地帐户：`\n\n```bash\ncd /usr/local/openvpn_as/scripts \n./sacli --user \"openvpn\" --key \"prop_superuser\" --value \"true\" UserPropPut \n./sacli --user \"openvpn\" --key \"user_auth_type\" --value \" local\" UserPropPut \n./sacli --user \"openvpn\" --new_pass=<PASSWORD> SetLocalPassword \n./sacli start\n```\n`如果帐户需要，请禁用拒绝登录标志并重置 MFA：`\n\n```bash\n./sacli --user \"openvpn\" --key \"prop_deny\" --value \"false\" UserPropPut \n./sacli --user \"openvpn\" --key \"prop_google_auth\" UserPropDel \n./sacli --user \"openvpn\" --lock 0 GoogleAuthRegen \n./sacli start\n```\n\n`重置密码锁定策略以防万一它被触发：`\n\n```bash\n./sacli --key \"vpn.server.lockout_policy.reset_time\" --value \"1\" ConfigPut \n./sacli start \nsleep 2 \n./sacli --key \"vpn.server.lockout_policy.reset_time\" ConfigDel \n./sacli start\n```\n\n尝试使用openvpn和您指定的密码再次登录到 Admin Web UI 。\n关于单用户多并发登陆的问题，我在WEB页面打开了多会话，但是没有用，我在官方看到的方案，但是没有成功，以下是官方回复：\n\n配置数据库中每个用户多个会话设置的实际配置参数是“vpn.server.duplicate_cn”。\n\n`您可以在命令行上以 root 用户身份手动设置它；`\n\n```bash\n/usr/local/openvpn_as/scripts/sacli --key \"vpn.server.duplicate_cn\" --value \"true\" ConfigPut\n/usr/local/openvpn_as/scripts/sacli start\n```\n\n`可以用false关闭，true开启它在。如果你删除它，它会变成默认值，我相信这是真的；`\n\n```bash\n/usr/local/openvpn_as/scripts/sacli --key \"vpn.server.duplicate_cn\" ConfigDel\n/usr/local/openvpn_as/scripts/sacli start\n```\n\n","tags":["代理","梯子"],"categories":["工具","魔法工具"]},{"title":"gin-框架中间件","url":"/2024/06/13/gin-框架中间件/","content":"\n### <font color=#00b2c2 size=5 face=宋体><strong>gin 框架中间件相关方法：</strong></font>\n\n<!--more-->\n\n```go\nc.Next()    // 向下执行嵌套方法\nc.Abort()   // 退出当前执行函数 >>> 例如鉴权失败，不给拿数据...\n```\n\n\n\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>gin 框架中间件运行逻辑：</strong></font>\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"github.com/gin-gonic/gin\"\n\t\"net/http\"\n)\n\nfunc func1(c *gin.Context) {\n\tfmt.Println(\"func1\")\n}\n\nfunc func2(c *gin.Context) {\n\tfmt.Println(\"func2 before\")\n\tc.Next()\n\tfmt.Println(\"func2 after\")\n}\n\nfunc func3(c *gin.Context) {\n\tfmt.Println(\"func3\")\n}\n\nfunc func4(c *gin.Context) {\n\tfmt.Println(\"func4\")\n\tfunc2(c)\n\tfmt.Println(\"func4 结束\")\n}\n\nfunc func5(c *gin.Context) {\n\tfmt.Println(\"func5\")\n}\n\nfunc main() {\n\tr := gin.Default()\n\tr.GET(\"/hello\", func(c *gin.Context) {\n\t\tc.String(http.StatusOK, \"OK\")\n\t})\n\n\tshopGroup := r.Group(\"/shop\", func1, func2)\n\n\tshopGroup.Use(func3)\n\t{\n\t\tshopGroup.GET(\"/index\", func4, func5)\n\t}\n\n\tr.Run(\":8000\")\n}\n\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>访问 /shop/index 返回打印状态：</strong></font>\n\n```\nfunc1\nfunc2 before\nfunc3\nfunc4\nfunc2 before\nfunc5\nfunc2 after\nfunc4 结束\nfunc2 after\n[GIN] 2024/06/13 - 00:58:14 | 200 |      38.125µs |       127.0.0.1 | GET      \"/shop/index\"\n```\n\n\n\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>gin 框架中间值的传递>>：</strong></font>\n\n访问：127.0.0.1:8000/shop/index\n\n+ 经过`func4` 中定义的 `name`  >>> 然后我们在 `func5`中调用其值\n+ 值的注意的是 在`1.18版本中 go`是需要做类型转换的，但是在` go 1.21` 就不需要了，中间有个时间差， 应该是`gin框架更新机制`\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"github.com/gin-gonic/gin\"\n\t\"net/http\"\n)\n\nfunc func1(c *gin.Context) {\n\tfmt.Println(\"func1\")\n}\n\nfunc func2(c *gin.Context) {\n\tfmt.Println(\"func2 before\")\n\tc.Next()\n\tfmt.Println(\"func2 after\")\n}\n\nfunc func3(c *gin.Context) {\n\tfmt.Println(\"func3\")\n\t//c.Abort()\n}\n\nfunc func4(c *gin.Context) {\n\tfmt.Println(\"func4\")\n\tc.Set(\"name\", \"大头\")\n}\n\nfunc func5(c *gin.Context) {\n\tfmt.Println(\"func5\")\n\tv, ok := c.Get(\"name\")\n\tif ok {\n\t\tfmt.Println(v)\n\t}\n\t// 在 go 1.18 之前 需要做类型转换  但是在1.21 版本中 ，我发现 不用转换，直接打印页没有问题\n\t//if ok {\n\t//\tvStr := v.(string)\n\t//\tfmt.Println(vStr)\n\t//}\n}\n\nfunc main() {\n\tr := gin.Default()\n\tr.GET(\"/hello\", func(c *gin.Context) {\n\t\tc.String(http.StatusOK, \"OK\")\n\t})\n  \n\tshopGroup := r.Group(\"/shop\", func1, func2)\n\tshopGroup.Use(func3)\n\t{\n\t\tshopGroup.GET(\"/index\", func4, func5)\n\t}\n\tr.Run(\":8000\")\n}\n```\n\n打印结果：\n\n```\nfunc1\nfunc2 before\nfunc3\nfunc4\nfunc5\n大头\nfunc2 after\n[GIN] 2024/06/13 - 01:21:15 | 200 |      85.875µs |       127.0.0.1 | GET      \"/shop/index\"\n```\n\n","tags":["go","web","中间件"],"categories":["go","go_gin"]},{"title":"go-for循环的奇怪用法","url":"/2024/06/12/go-for循环的奇怪用法/","content":"\n#### <font color=#00b2c2 size=5 face=宋体><strong>for 循环 》遍历技巧1：</strong></font>\n\n<!--more-->\n\n##### 正常遍历：\n\n```go\nfor i:=0; i<len(t); i++{\n\t//循环体\n}\n```\n\n##### 奇怪，但是好用的方法(来自gin框架)：\n\n```go\n// 声明两个变量 i=0  tl=len(t), 然后就可以进行循环了，这样做的目的，只进行一次 t长度的计算。后续可以不用动态的计算t的值\nfor i,tl := 0, len(t); i<tl; i++ {\n\t//循环体\n}\n```\n\n","tags":["go","奇淫技巧","循环"],"categories":["go","奇淫技巧"]},{"title":"go-交叉编译教程","url":"/2024/06/12/go-交叉编译教程/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Go Mod命令：</strong></font>\n\n<!--more-->\n\n```go\ngo mod tidy      // 查漏补缺 go.mod下的库配置，如果存在导入但是却没有库 .. 会自动安装\n```\n\n\n\n## <font color=#00b2c2 size=5 face=宋体><strong>Go 的跨平台交叉编译：</strong></font>\n\n### Mac 下编译 Linux 和 Windows 64位可执行程序：\n\n```bash\n# 编译当前程序为 linux 64位 可执行文件\nCGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build\n\n# 编译当前程序为 windows 64位 可执行文件\nCGO_ENABLED=0 GOOS=windows GOARCH=amd64 go build\n```\n\n\n\n### **Linux 下编译 Mac 和 Windows 64位可执行程序：**\n\n```bash\n# 编译当前程序为 Mac 64位 可执行文件\nCGO_ENABLED=0 GOOS=darwin GOARCH=amd64 go build\n\n# 编译当前程序为 windows 64位 可执行文件\nCGO_ENABLED=0 GOOS=windows GOARCH=amd64 go build\n```\n\n### Windows 下编译 Mac 和 Linux 64位可执行程序：\n\n```bash\n# 编译当前程序为 Mac 64位 可执行文件\nSET CGO_ENABLED=0\nSET GOOS=darwin\nSET GOARCH=amd64\ngo build\n\n# 编译当前程序为 linux 64位 可执行文件\nSET CGO_ENABLED=0\nSET GOOS=linux\nSET GOARCH=amd64\ngo build\n```\n\n\n\n---\n\n<br>\n\n<font color=#00b2c2 size=5 face=宋体><strong>交叉编译支持可选参数：</strong></font>\n\n> `GOOS`：目标平台的操作系统（`darwin`、`freebsd`、`linux`、`windows`）\n>\n> `GOARCH`：目标平台的体系架构（`386`、`amd64`、`arm`）\n\n<font color=red size=5 face=宋体><strong>**交叉编译不支持 CGO 所以要禁用它**</strong></font>\n\nwindows下面 powershell不行，要cmd","tags":["教程","go","编译"],"categories":["go","编译教程"]},{"title":"在CentOS-7上安装Go-1.22","url":"/2024/06/11/在CentOS-7上安装Go-1-22/","content":"\n## <font color=#00b2c2 size=5 face=宋体><strong>在CentOS 7上安装Go 1.22：</strong></font>\n\n<!--more-->\n\n### 在CentOS 7上安装Go 1.22.2的步骤如下：\n\n#### 一、准备工作\n\n1. 确保你的`CentOS 7`系统已经更新到最新状态，可以通过以下命令进行更新：\n\n   ```bash\n   sudo yum update\n   ```\n\n2. 检查系统是否已安装`Go`的旧版本，如果有，则先卸载：\n\n   ```bash\n   sudo yum remove golang\n   ```\n\n#### 二、下载并安装Go 1.22.2\n\n1. 访问Go的官方网站或使用提供的下载链接来获取`Go 1.22.2`的`Linux-amd64`版本。你可以直接通过`wget`命令下载：\n\n   ```bash\n   cd /usr/local/src  \n   wget https://golang.google.cn/dl/go1.22.2.linux-amd64.tar.gz\n   ```\n\n2. 解压下载的Go压缩包到`/usr/local`目录下：\n\n   ```bash\n   sudo tar -zxvf go1.22.2.linux-amd64.tar.gz -C /usr/local/\n   ```\n\n   这将把Go的安装文件解压到`/usr/local/go`目录下。\n\n#### 三、配置环境变量\n\n1. 打开`/etc/profile`文件，并在文件末尾添加以下配置：\n\n   ```bash\n   export GOROOT=/usr/local/go  \n   export PATH=$PATH:$GOROOT/bin  \n   export GOPATH=/opt/go  # 或者你可以设置为其他目录，作为你的工作区  \n   export PATH=$PATH:$GOPATH/bin\n   ```\n\n2. 应用更改：\n\n   ```bash\n   source /etc/profile\n   ```\n\n   或者使用`su -`命令重新登录shell会话。\n\n#### 四、验证安装\n\n1. 在终端中输入`go version`来检查Go的版本：\n\n   ```bash\n   go version\n   ```\n\n   如果安装成功，你应该看到类似于`go version go1.22.2 linux/amd64`的输出。\n\n#### 五、解决依赖下载速度过慢的问题（可选）\n\n如果你的网络环境中Go依赖包的下载速度过慢，你可以设置`GOPROXY`环境变量来使用国内的代理服务器，如`Goproxy.cn`：\n\n```bash\ngo env -w GO111MODULE=on  \ngo env -w GOPROXY=https://goproxy.cn,direct\n```\n\n这样设置后，Go的依赖包将会从指定的代理服务器下载，通常会有更快的下载速度。\n\n以上就是在`CentOS 7`上安装`Go 1.22.2`的详细步骤。请注意，Go的最新版本可能已经更新，但上述步骤对于安装任何版本的Go都是通用的，只需将版本号替换为你要安装的版本即可。","tags":["教程","安装","go"],"categories":["go","安装"]},{"title":"centos7-配置连接-OpenVPN教程","url":"/2024/06/11/centos7-配置连接-OpenVPN教程/","content":"\n## <font color=#00b2c2 size=5 face=宋体><strong>CentOS连接OpenVPN教程（Linux下OpenVPN客户端配置教程）</strong></font>\n\n<!--more-->\n\n一般来说，提供Web服务的Linux服务器是很少需要连接`OpenVPN`的，但是个人`Linux`计算机在很多时候就需要连接`OpenVPN`了。比如以`Linux`为开发环境，需要连接公司的`OpenVPN`等等。\n\n本文将以`CentOS`系统为例，介绍在终端下连接远程`OpenVPN`服务的方法。\n\n### 1，安装`OpenVPN`\n\n首先需要安装`OpenVPN`客户端。一般来说直接使用`yum`即可（在`Debian`系中是`apt-get`）。执行如下命令安装：\n\n```bash\n[root@www ~]# yum install openvpn\n```\n\n稍等片刻将自动安装好`openvpn`需要的软件包。安装完成后，应该出现`/etc/openvpn/`文件夹。\n\n### 2，配置OpenVPN\n\n作为客户端，`OpenVPN`并没有特定的配置文件，而是由服务器提供方给出一个配置文件。\n\n对于认证，`OpenVPN`提供了两种认证方法：基于用户名/密码的认证与SSL证书认证。用户名/密码的认证方法无法（或较难）限制一个账号同时连接多个客户端，而采用证书，则可保证同一证书同一时间只能有一个客户端连接。当然，这些都是由服务器端决定的，不需要客户端进行选择。\n首先将`OpenVPN`服务器提供商发给你的配置文件解压，并将所有文件都复制到 `/etc/openvpn/`中。\n这些文件中至少包含一个`.ovpn`文件；如果服务器需要证书认证，则应该还存在另外三个证书文件。\n\n**看懂`OpenVPN`配置格式。下面是一个`.ovpn`配置示例：**\n\n```\nclient\ndev tap\nproto tcp-client\nremote 192.168.135.75 1194\nresolv-retry infinite\nnobind\nmute-replay-warnings\nredirect-gateway\nca /etc/ca.crt\ncert /etc/client.crt\nkey /etc/client.key\ncomp-lzo\nverb 4\n```\n\n一般来说，红色的内容可能需要你进行修改。将红色的内容修改成这三个文件的实际位置。然后保存即可。\n\n### **3，连接OpenVPN**\n\n在配置好.ovpn文件后，执行\n\n```bash\nopenvpn /etc/***.ovpn\n```\n\n即可连接服务器了。注意，上面的参数应该换成你的配置文件实际位置。\n此时，终端会回显很多连接日志。如果连接不成功，则可以通过这些日志来确定出错位置。如果要断开，只需要通过`Ctrl+C`强制终止即可。\n上面的命令在实际中并不方便，因为它要占用一个独立的终端。在测试成功后，使用以下命令即可在后台连接`OpenVPN`：\n\n```bash\nopenvpn /etc/***.ovpn > /dev/null &\n```\n\n值得称赞的是，`openvpn`非常智能，在连接异常中断、无法连接服务器、断网的情况下，它会自动重连。因此，如果希望开机即自动连接`OpenVPN`，或者是`VPN`常年在线，则可将上述命令行加入\n\n```bash\n/etc/rc.local\n```\n\n中。注意，命令末尾的&符号不能省略，否则将可能阻塞系统的正常启动。","tags":["代理","梯子"],"categories":["工具","魔法工具"]},{"title":"go-json优雅的取值","url":"/2024/06/10/go-json优雅的取值/","content":"\n### go 语言中 对于json优雅的取值\n\n<!--more-->\n\ngo语言中对于json的取值很不方便，需要不停的 类型判断，键的判断...\n\n其实把 程序本来就是帮助人服务的，弄那么复杂 实在是有点难受，不过呢。 难受的不是我一个，以下就是其他难受的人做出来的第三方库。`gjson`\n\n#### 安装 `gjson`\n\n```bash\ngo get -u github.com/tidwall/gjson\n```\n\n#### 使用教程：\n\n使用 GJSON 来从一个包含数组的 JSON 字符串中提取数组中的字典（在 JSON 中通常称为对象）或数组中的某个对象的特定字段是非常简单的。假设你有一个如下的 JSON 字符串\n\n```json\n{  \n  \"users\": [  \n    {\"name\": \"Alice\", \"age\": 25},  \n    {\"name\": \"Bob\", \"age\": 30},  \n    {\"name\": \"Charlie\", \"age\": 35}  \n  ]  \n}\n```\n\n如果你想获取 `users` 数组中的第一个用户的 `name` 字段，你可以这样做：\n\n```go\npackage main  \n  \nimport (  \n    \"fmt\"  \n    \"github.com/tidwall/gjson\"  \n)  \n  \nfunc main() {  \n    jsonStr := `{\"users\": [{\"name\": \"Alice\", \"age\": 25},{\"name\": \"Bob\", \"age\": 30},{\"name\": \"Charlie\", \"age\": 35}]}`  \n  \n    // 获取 users 数组中的第一个对象的 name 字段  \n    name := gjson.Get(jsonStr, \"users.0.name\")  \n    fmt.Println(\"Name:\", name.String()) // 输出: Name: Alice  \n  \n    // 如果你想要遍历整个 users 数组并打印每个用户的 name  \n    users := gjson.Get(jsonStr, \"users.#\") // # 表示数组中的所有元素  \n    users.ForEach(func(key, value gjson.Result) bool {  \n        fmt.Println(\"User name:\", value.Get(\"name\").String())  \n        return true // 返回 true 以继续迭代，返回 false 则停止  \n    })  \n}\n```\n\n在这个例子中，`users.0.name` 是一个路径，它指定了我们要从 JSON 字符串中提取的数据的位置。这里的 `0` 是数组的索引，用于指定我们要获取的第一个对象。\n\n`gjson.Get(jsonStr, \"users.#\")` 使用了 `#` 通配符来获取数组中的所有元素。然后，我们使用 `ForEach` 方法遍历这些元素，并打印出每个用户的 `name` 字段。\n\n注意，`gjson.Result` 类型有一个 `String()` 方法用于将结果转换为字符串，但也有其他方法，如 `Int()`, `Bool()`, `Float()`, `Array()`, `Map()` 等，用于处理不同类型的值。如果路径不存在或值不是预期的类型，这些方法通常会返回零值或空值，并不会导致 panic。","tags":["go","基础","json"],"categories":["go","基础"]},{"title":"go-异步等待操作,和python有一丢丢相似","url":"/2024/06/08/go-异步等待操作-和python有一丢丢相似/","content":"\n### go-异步等待操作,和python有一丢丢相似\n\n<!--more-->\n\n为了限制并发执行的goroutines数量，您可以使用一个带缓冲的通道作为信号量（semaphore）。信号量通道中的元素数量表示当前可以运行的并发任务数。通过向该通道发送和接收空结构体 `struct{}`，您可以控制同时运行的任务数量。\n\n以下是如何修改您的代码以限制最大并发数为3的示例：\n\n```go\npackage main  \n  \nimport (  \n\t\"fmt\"  \n\t\"time\"  \n)  \n  \nfunc asyncOperation(resultChan chan<- string, id int, sem chan struct{}) {  \n\t// 获取一个信号量，表示开始一个任务  \n\tsem <- struct{}{}  \n  \n\tdefer func() {  \n\t\t<-sem // 任务结束时释放信号量  \n\t}()  \n  \n\t// 模拟异步操作，比如网络请求或数据处理  \n\tfmt.Println(\"进来执行任务了\", id)  \n\ttime.Sleep(2 * time.Second) // 假设操作需要2秒钟  \n\tresult := fmt.Sprintf(\"异步操作结果 %d\", id)  \n\tresultChan <- result // 将结果发送到channel  \n}  \n  \nfunc main() {  \n\tconst numOperations = 20  \n\tresults := make([]string, numOperations)  \n\tresultChan := make(chan string) // 创建一个用于接收结果的channel  \n\tsem := make(chan struct{}, 3)   // 创建一个信号量通道，最大并发数为3  \n  \n\t// 启动所有异步操作goroutines  \n\tfor i := 0; i < numOperations; i++ {  \n\t\tgo asyncOperation(resultChan, i+1, sem)  \n\t}  \n  \n\t// 收集所有异步操作的结果  \n\tfor i := 0; i < numOperations; i++ {  \n\t\t// 从channel接收结果，这会阻塞直到结果可用  \n\t\tresults[i] = <-resultChan  \n\t\tfmt.Println(\"异步操作完成:\", results[i])  \n\t}  \n  \n\t// 所有结果都收集完毕后，可以继续后续处理  \n\tfmt.Println(\"所有异步操作已完成。\")  \n}\n```\n\n在这个修改后的代码中，我添加了一个名为 `sem` 的信号量通道，其缓冲大小为3，表示最多允许3个goroutines同时运行。在 `asyncOperation` 函数中，每个goroutine在开始执行任务前会先向 `sem` 通道发送一个空结构体，以获取一个信号量。任务完成后，它会从 `sem` 通道中接收一个空结构体来释放信号量，从而允许其他等待的goroutines开始执行。\n\n这样，您就可以确保在任何时候最多只有3个goroutines在并发执行，从而避免过度消耗系统资源。\n\n\n\n### 执行结果：\n\n```\n/usr/local/go/bin/go build -o /private/var/folders/dq/j9svchmn5hdcpr4r4yckxhjr0000gn/T/GoLand/___go_build_test_02_go /code/GolandProjects/test/test_02.go #gosetup\n/private/var/folders/dq/j9svchmn5hdcpr4r4yckxhjr0000gn/T/GoLand/___go_build_test_02_go\n进来执行任务了 13\n进来执行任务了 3\n进来执行任务了 2\n进来执行任务了 20\n进来执行任务了 1\n进来执行任务了 11\n进来执行任务了 12\n进来执行任务了 4\n异步操作完成: 异步操作结果 3\n异步操作完成: 异步操作结果 12\n异步操作完成: 异步操作结果 1\n异步操作完成: 异步操作结果 20\n异步操作完成: 异步操作结果 11\n异步操作完成: 异步操作结果 2\n异步操作完成: 异步操作结果 13\n进来执行任务了 5\n进来执行任务了 7\n进来执行任务了 10\n进来执行任务了 8\n进来执行任务了 9\n进来执行任务了 6\n进来执行任务了 17\n异步操作完成: 异步操作结果 6\n异步操作完成: 异步操作结果 10\n异步操作完成: 异步操作结果 8\n异步操作完成: 异步操作结果 9\n异步操作完成: 异步操作结果 4\n异步操作完成: 异步操作结果 5\n异步操作完成: 异步操作结果 7\n进来执行任务了 14\n进来执行任务了 16\n进来执行任务了 15\n进来执行任务了 19\n进来执行任务了 18\n异步操作完成: 异步操作结果 17\n异步操作完成: 异步操作结果 18\n异步操作完成: 异步操作结果 16\n异步操作完成: 异步操作结果 15\n异步操作完成: 异步操作结果 19\n异步操作完成: 异步操作结果 14\n所有异步操作已完成。\n\n进程 已完成，退出代码为 0\n\n```\n\n","tags":["go","异步","http","request"],"categories":["go","异步"]},{"title":"go-异步请求范例","url":"/2024/06/08/go-异步请求范例/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>go-异步请求范例：</strong></font>\n\n<!--more-->\n\n`github.com/mozillazg/request` 是一个 Go 语言的 HTTP 客户端库，它提供了简单易用的 API 来发送 HTTP 请求。然而，这个库本身并不直接支持异步操作。在 Go 中，异步操作通常通过使用 goroutine 来实现。\n\n如果你想使用 `mozillazg/request` 库进行异步操作，你可以将 HTTP 请求的发送包装在一个 goroutine 中。下面是一个简单的示例，展示了如何使用 goroutine 来异步发送 HTTP 请求：\n\n```go\npackage main  \n  \nimport (  \n\t\"fmt\"  \n\t\"github.com/mozillazg/request\"  \n\t\"sync\"  \n)  \n  \nfunc main() {  \n\tvar wg sync.WaitGroup  \n  \n\turls := []string{  \n\t\t\"https://example.com\",  \n\t\t\"https://httpbin.org/get\",  \n\t\t\"https://api.example.com/data\",  \n\t}  \n  \n\tfor _, url := range urls {  \n\t\twg.Add(1)  \n\t\tgo func(url string) {  \n\t\t\tdefer wg.Done()  \n\t\t\tresp, err := request.Get(url)  \n\t\t\tif err != nil {  \n\t\t\t\tfmt.Printf(\"Error fetching URL %s: %s\\n\", url, err)  \n\t\t\t\treturn  \n\t\t\t}  \n\t\t\tfmt.Printf(\"Fetched URL %s with status code: %d\\n\", url, resp.StatusCode)  \n\t\t}(url)  \n\t}  \n  \n\twg.Wait() // 等待所有 goroutine 完成  \n}\n```\n\n在上面的示例中，我们使用了 `sync.WaitGroup` 来等待所有的 goroutine 完成。对于 `urls` 切片中的每个 URL，我们启动了一个新的 goroutine 来异步发送 HTTP GET 请求。当所有请求都完成后，`wg.Wait()` 会返回，主函数继续执行并退出。\n\n请注意，由于 HTTP 请求是异步发送的，因此响应的处理也需要在相应的 goroutine 中完成，以避免竞态条件。\n\n另外，如果你发现 `mozillazg/request` 库不满足你的异步需求，你也可以考虑使用 Go 标准库中的 `net/http` 包来手动管理异步 HTTP 请求，或者使用其他支持异步操作的 HTTP 客户端库，如 `github.com/valyala/fasthttp`。\n\n还要注意的是，`mozillazg/request` 库可能不是最流行或最维护的 Go HTTP 客户端库。更常用的库包括 Go 标准库的 `net/http` 客户端或第三方库如 `github.com/go-resty/resty/v2`。在选择库时，请考虑库的活跃度、社区支持和功能集。","tags":["go","异步","http","request"],"categories":["go","异步"]},{"title":"go-获取变量的类型","url":"/2024/06/08/go-获取变量的类型/","content":"\n### <font color=#00b2c2 size=5 face=宋体><strong>go-获取变量的类型：</strong></font>\n\n<!--more-->\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"github.com/mozillazg/request\"\n\t\"net/http\"\n\t\"reflect\"\n)\n\nfunc main() {\n\tc := new(http.Client)\n\treq := request.NewRequest(c)\n\n\treq.Headers = map[string]string{\n\t\t\"Accept-Encoding\": \"gzip,deflate,sdch\",\n\t\t\"Accept\":          \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\",\n\t}\n\ttypeOfX := reflect.TypeOf(req.Headers)\n\n\tfmt.Println(typeOfX)\n}\n\n// 最终打印结果 : map[string]string\n\n```\n\n","tags":["go","基础"],"categories":["go","基础"]},{"title":"goquery的使用-类似于Python的lxml库","url":"/2024/06/08/goquery的使用-类似于Python的lxml库/","content":"\n### <font color=#00b2c2 size=5 face=宋体><strong>goquery的使用-类似于Python的lxml库：</strong></font>\n\n<!--more-->\n\n```go\n// goquery 常规用法\n\n// strings.NewReader(html)：将字符串html转换为一个Reader接口，这样goquery可以从这个字符串中读取HTML内容。\n// goquery.NewDocumentFromReader(...)：使用goquery库从提供的Reader接口中解析HTML，并创建一个新的goquery文档对象。这个函数返回两个值，第一个是解析后的文档对象，第二个是可能出现的错误。在这里，错误值被忽略（使用_）。\ndom, _ := goquery.NewDocumentFromReader(strings.NewReader(html))\n\n// om.Find(\"tr\")：在解析后的HTML文档中查找所有的<tr>元素。\n// EachWithBreak(...)：对找到的每一个<tr>元素执行一个函数。这个函数可以返回一个布尔值来决定是否继续迭代。如果返回false，则停止迭代。\ndom.Find(\"tr\").EachWithBreak(func(i int, s *goquery.Selection) bool {\n  \n  // s.Find(\"a\")：在当前<tr>元素内查找所有的<a>标签。\n  // .Eq(0)：选择第一个找到的<a>标签。\n  // .Text()：获取该<a>标签的文本内容，并将其赋值给_title。\n   _title := s.Find(\"a\").Eq(0).Text()\n  \n  // s.Find(\"td\")：在当前<tr>元素内查找所有的<td>元素。\n  // .Eq(2)：选择第三个<td>元素（索引从0开始）。\n  // .Text()：获取该<td>元素的文本内容，并将其赋值给_author。\n   _author := s.Find(\"td\").Eq(2).Text()\n  \n  //判断当前<tr>元素中的标题（<a>标签的文本）是否等于name，并且作者（第三个<td>元素的文本）是否等于author\n   if _title == name && _author == author {\n     \n     // 获取当前<tr>元素中第一个<a>标签的href属性。url是属性的值，exists是一个布尔值，表示该属性是否存在。\n      url, exists := s.Find(\"a\").Eq(0).Attr(\"href\")\n     \n     // 如果href属性不存在，则执行括号内的代码。但注意，这里的逻辑可能有些问题，因为当href不存在时，程序会记录一个致命错误并退出，这可能不是预期的行为。通常，我们可能只想跳过当前循环或记录一个非致命的错误。\n      if !exists {\n         Err = nil\n         log.Fatal(exists)\n      }\n     \n     // 如果找到了匹配的标题和作者，且<a>标签有href属性，则将url赋值给targetUrl\n      targetUrl = url\n   }\n  //在EachWithBreak的回调函数结束时返回true，表示继续迭代下一个<tr>元素。如果想在某个条件下停止迭代，可以返回false\n   return true\n})\n```\n\n","tags":["goquery","html解析"],"categories":["go","爬虫"]},{"title":"go-发起网络请求","url":"/2024/06/08/go-发起网络请求/","content":"\n### <font color=#00b2c2 size=5 face=宋体><strong>go-发起网络请求：</strong></font>\n\n<!--more-->\n\n```go\npackage main\n\nimport (\n\t\"github.com/mozillazg/request\"\n\t\"log\"\n\t\"net/http\"\n)\n\nfunc main() {\n\t// request请求库常规用法，用来发起请求，获取响应\n\tc := new(http.Client)     //new 初始化一个 新的 http.Client 实例 分配个 变量 c\n\treq := request.NewRequest(c)   // request.NewRequest 创建一个新的http请求\n  \n  // 添加头部信息\n\treq.Headers = map[string]string{\n\t\t\"Accept-Encoding\": \"gzip,deflate,sdch\",\n\t\t\"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\",\n\t}\n\treq.Data = map[string]string{\n\t\t\"searchkey\": name,\n\t}\n\turl := \"https://www.xbiquge.la/modules/article/waps.php\"\n\tresp, _ := req.Post(url)\n\tdefer resp.Body.Close() // 不要忘记关闭响应体\n\n\thtml, err := resp.Text()\n\tif err != nil {\n\t\tErr = err\n\t\tlog.Fatal(err)\n\t}\n\tprintln(html)\n}\n```\n\n### 添加头部信息第二种方式：\n\n第一种方式在上面的代码中\n\n```go\n// 用set的方法 设置头部信息\npackage main\n\nimport (\n\t\"github.com/mozillazg/request\"\n\t\"log\"\n\t\"net/http\"\n)\n\nfunc main() {\n\t// request请求库常规用法，用来发起请求，获取响应\n\tc := new(http.Client)     //new 初始化一个 新的 http.Client 实例 分配个 变量 c\n\treq := request.NewRequest(c)   // request.NewRequest 创建一个新的http请求\n  \n  // 添加头部信息  Header.Set 方法会自动处理头部的键，使其符合 HTTP 标准\n  req.Header.Set(\"Accept-Encoding\", \"gzip,deflate,sdch\")  \n  req.Header.Set(\"Accept\", \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\")\n}\n```\n\n### 另外：如果一个键中存在多个值，上面的方法就不实用了，需要用下面的方法添加(发起网络请求的那个不限制)\n\n```go\n// 用set的方法 设置头部信息\npackage main\n\nimport (\n\t\"github.com/mozillazg/request\"\n\t\"log\"\n\t\"net/http\"\n)\n\nfunc main() {\n\t// request请求库常规用法，用来发起请求，获取响应\n\tc := new(http.Client)     //new 初始化一个 新的 http.Client 实例 分配个 变量 c\n\treq := request.NewRequest(c)   // request.NewRequest 创建一个新的http请求\n  \n  // 添加头部信息  Header.Set 方法会自动处理头部的键，使其符合 HTTP 标准\n  req.Header.Set(\"Accept\", \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\")\n  \n  // 这样就在 Accept-Encoding 中同时添加了 三个值\n  req.Header.Add(\"Accept-Encoding\", \"gzip\")  \n  req.Header.Add(\"Accept-Encoding\", \"deflate\")  \n  req.Header.Add(\"Accept-Encoding\", \"sdch\")\n}\n```","tags":["web"],"categories":["go","爬虫"]},{"title":"新一代自动化抓取Playwright","url":"/2024/06/03/新一代自动化抓取Playwright/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>新一代自动化抓取Playwright：</strong></font>\n\n<!--more-->\n\n替代selenium\n\n# 安装\n\n## 介绍\n\nPlaywright 是专门为满足端到端测试的需求而创建的。Playwright 支持所有现代渲染引擎，包括 Chromium、WebKit 和 Firefox。在 Windows、Linux 和 macOS、本地或 CI 上进行测试，无头或使用本机移动仿真进行头测试。\n\n[Playwright 库](https://playwright.dev/python/docs/library)可用作通用浏览器自动化工具，提供一组强大的 API 来自动化 Web 应用程序，适用于同步和异步 Python。\n\n本简介介绍了 Playwright Pytest 插件，这是编写端到端测试的推荐方法。\n\n**您将学习**\n\n- [如何安装 Playwright Pytest](https://playwright.dev/python/docs/intro#installing-playwright-pytest)\n- [如何运行示例测试](https://playwright.dev/python/docs/intro#running-the-example-test)\n\n## 安装 Playwright Pytest\n\nPlaywright 建议使用官方的 [Playwright Pytest 插件](https://playwright.dev/python/docs/test-runners)来编写端到端测试。它提供上下文隔离，开箱即用地在多个浏览器配置上运行。\n\n首先安装 Playwright 并运行示例测试以查看其运行情况。\n\n- PyPI的\n- 蟒蛇\n\n```bash\nconda config --add channels conda-forge\nconda config --add channels microsoft\nconda install playwright\n```\n\n\n\n安装所需的浏览器：\n\n```bash\nplaywright install\n```\n\n\n\n## 添加示例测试\n\n使用以下代码在当前工作目录或子目录中创建一个遵循前缀约定的文件，例如 。请确保测试名称也遵循前缀约定。`test_``test_example.py``test_`\n\ntest_example.py\n\n```py\nimport re\nfrom playwright.sync_api import Page, expect\n\ndef test_has_title(page: Page):\n    page.goto(\"https://playwright.dev/\")\n\n    # Expect a title \"to contain\" a substring.\n    expect(page).to_have_title(re.compile(\"Playwright\"))\n\ndef test_get_started_link(page: Page):\n    page.goto(\"https://playwright.dev/\")\n\n    # Click the get started link.\n    page.get_by_role(\"link\", name=\"Get started\").click()\n\n    # Expects page to have a heading with the name of Installation.\n    expect(page.get_by_role(\"heading\", name=\"Installation\")).to_be_visible()\n```\n\n\n\n## 运行示例测试\n\n默认情况下，测试将在 chromium 上运行。这可以通过 [CLI 选项](https://playwright.dev/python/docs/running-tests)进行配置。测试在无外设模式下运行，这意味着在运行测试时不会打开浏览器 UI。测试结果和测试日志将显示在终端中。\n\n```bash\npytest\n```\n\n\n\n## 更新剧作家\n\n若要将 Playwright 更新到最新版本，请运行以下命令：\n\n```bash\npip install pytest-playwright playwright -U\n```\n\n\n\n## 系统要求\n\n- Python 3.8 或更高版本。\n- Windows 10+、Windows Server 2016+ 或适用于 Linux 的 Windows 子系统 （WSL）。\n- MacOS 12 Monterey、MacOS 13 Ventura 或 MacOS 14 Sonoma。\n- Debian 11、Debian 12、Ubuntu 20.04 或 Ubuntu 22.04。","tags":["自动化","Playwright"],"categories":["python","Playwright"]},{"title":"python-Django项目通过编译为.pyc-形式发布","url":"/2024/06/03/python-Django项目通过编译为-pyc-形式发布/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>python Django项目通过编译为.pyc 形式发布：</strong></font>\n\n<!--more-->\n\n\n\n## 一、批量编译代码\n\n创建compile_pyc.py，代码如下：\n\n```python\nimport os\nimport sys\nimport shutil\nfrom py_compile import compile\n\ndef clean(path):\n    for parent, dirname, filename in os.walk(path):\n        for dir in dirname:\n            if dir == '__pycache__':\n                try:\n                    fullname = os.path.join(parent, dir)\n                    shutil.rmtree(fullname)\n                    print(\"Success clean Folder:%s\" % fullname)\n                except Exception as e:\n                    print(\"Can't clean Folder:%s, reason:%s\" % (fullname, e))\n\ndef compile_pyc(path):\n    for parent, dirname, filename in os.walk(path):\n        for cfile in filename:\n            fullname = os.path.join(parent, cfile)\n            if cfile[-3:] == '.py':\n                try:\n                    if compile(fullname):\n                        if cfile != 'settings.py' and cfile != 'wsgi.py':\n                            os.remove(fullname) #删除原文件，保留settings.py和wsgi.py\n                        print(\"Success compile and remove file:%s\" % fullname)\n                    else:\n                        print(\"Can't compile file:%s,The original file has been retained\" % fullname)\n                except Exception as e:\n                    print(\"Can't compile file:%s, reason:%s\" % (fullname, e))\n\ndef move(path):\n    for parent, dirname, filename in os.walk(path):\n        for c_file in filename:\n            fullname = os.path.join(parent, c_file)\n            if c_file[-4:] == '.pyc':\n                try:\n                    parent_path = os.path.dirname(parent)\n                    shutil.move(fullname, parent_path)\n                    print('update the dir of file successfully')\n                except Exception as e:\n                    print(\"Can't move file:%s, reason:%s\" % (fullname, e))\n\ndef replace_name(path):\n    for parent, dirname, filename in os.walk(path):\n        for c_file in filename:\n            fullname = os.path.join(parent, c_file)\n            if c_file[-4:] == '.pyc':\n                try:\n                    cfile_name = ''\n                    cfile_list = c_file.split('.')\n                    version = sys.version_info\n                    replace_name = 'cpython-' + str(version[0])+str(version[1])\n                    for i in range(len(cfile_list)):\n                        if cfile_list[i] == replace_name:\n                            continue\n                        cfile_name += cfile_list[i]\n                        if i == len(cfile_list) - 1:\n                            continue\n                        cfile_name += '.'\n                    shutil.move(fullname, os.path.join(parent, cfile_name))\n                    print('update the name of the file successfully')\n                except Exception as e:\n                    print(\"Can't remove file:%s, reason:%s\" % (fullname, e))\n\nif __name__ == '__main__':\n    if len(sys.argv) == 3:\n        cmd = sys.argv[1]\n        path = sys.argv[2]\n        if os.path.exists(path) and os.path.isdir(path):\n            if cmd == 'clean':\n                clean(path)\n            elif cmd == 'move':\n                move(path)\n            elif cmd == 'replace_name':\n                replace_name(path)\n            elif cmd == 'compile_pyc':\n                compile_pyc(path)\n            elif cmd == 'compile':\n                clean(path)\n                compile_pyc(path)\n                move(path)\n                replace_name(path)\n                clean(path)\n            else:\n                print('没有该命令')\n        else:\n            print(\"Not an directory or Direcotry doesn't exist!\")\n    else:\n        print(\"在命令行中使用以下命令:\")\n        print(\"\\tpython3 compile_pyc.py compile_pyc PATH\\t\\t#生成pyc文件\")\n        print(\"\\tpython3 compile_pyc.py move PATH\\t\\t#移动所有pyc文件至原位置\")\n        print(\"\\tpython3 compile_pyc.py replace_name PATH\\t\\t#修改文件名文件\")\n        print(\"\\tpython3 compile_pyc.py clean PATH\\t\\t#清除当前项目中所有的__pycache__文件夹及以内文件\")\n        print(\"\\tpython3 compile_pyc.py compile PATH\\t\\t#一键编译pyc\")\n\n\n```\n\n## 二、运行命令\n\n逐步运行以下命令\n\n```bash\npython3 compile_pyc.py clean <PATH> #清除当前项目中所有的__pycache__文件夹及以内文件\npython3 compile_pyc.py compile_pyc <PATH> #生成.pyc文件，并删除源文件\npython3 compile_pyc.py move <PATH> #将.pyc文件移动到原py文件目录下\npython3 compile_pyc.py replace_name <PATH> #去掉.pyc文件名中的版本号\npython3 compile_pyc.py clean <PATH>\n```\n\n或者直接运行以下一条命令就可以\n\n```bash\npython3 compile_pyc.py compile <PATH>\n```\n\n## 三、注意\n\n保留了`settings.py`和`wsgi.py`这两个文件，方便改变配置，以及之后的`uwsgi`部署\n\n多次运行，.pyc会移动错乱，保证只移动在`__pycache__`下的.pyc文件，修改move代码\n\n```python\ndef move(path):\n    for parent, dirname, filename in os.walk(path):\n        for c_file in filename:\n            fullname = os.path.join(parent, c_file)\n            if os.path.basename(parent) == '__pycache__':\n                if c_file[-4:] == '.pyc':\n                    try:\n                        parent_path = os.path.dirname(parent)\n                        shutil.move(fullname, parent_path)\n                        print('update the dir of file successfully')\n                    except Exception as e:\n                        print(\"Can't move file:%s, reason:%s\" % (fullname, e))\n```\n\n","tags":["django","编译","pyc","加密"],"categories":["python","编译"]},{"title":"Centos7安装Python3和升级SQLite高版本","url":"/2024/06/01/Centos7安装Python3和升级SQLite高版本/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>概要：</strong></font>\n\n<!--more-->\n\n编写此文是因为在Linux上跑Django项目时报错：sqlite3.NotSupportedError: deterministic=True requires SQLite 3.8.3 or highe（此时已经安装了python3）。查询之后发现是因为centos上的sqlite3版本过低导致。\n去验证一下：在centos上进入python，可以看到`sqlite3`的版本为`3.7.17`。\n\n```bash\nPython 3.8.12 (default, Jun 21 2019, 00:36:41)\n[GCC 4.8.5 20150623 (Red Hat 4.8.5-36)] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import sqlite3\n>>> sqlite3.sqlite_version\n'3.7.17'\n>>> exit()\n```\n\n### 原因已经找到，下面开始执行。\n\n因为sqlite3是在python3安装时进行连接的，我的云服务器已经安装过了，所以需要卸载，如果还没有安装python3的，可以跳过这一步。\n\n注：此处仅删除python3，尽量别删除原装的python2.7.5，因为centos7有一些命令是依赖2.7.5的。\n\n```\nwhereis python3 |xargs rm -frv   # 此为强制删除，也可以使用yum命令删除\n```\n\n### 二、下载、编译、安装新版`SQLite`\n\n#### 1.下载新版sqlite\n\n注：此处给两种下载方法，都可以使\n\n（1）下载前需要建立一个文件夹，用于放置压缩包。此处选择/home为主目录，可以根据自身习惯更改下载存储地址。\n\n```\nmkdir /root/sqlite3\n```\n\n#### 2.使用wget下载\n\n到SQLite官网的下载页面：https://sqlite.org/download.html 这里是最新的版本。\n\n![在这里插入图片描述](https://s2.loli.net/2024/06/01/cZBAPEHd2DfwgSm.png)\n\n源码有两个文件，选择第二个（`sqlite-autoconf-3420000.tar.gz`），因为这个有配置文件。复制其链接，然后在终端执行：\n\n```bash\ncd /home/tools/sqlite3  #切换到下载路径\nwget https://www.sqlite.org/2024/sqlite-autoconf-3460000.tar.gz  #执行下载\n```\n\n等待下载完毕即可\n\n### 3.本地下载，再上传到云服务器\n\n还是这个网址：https://sqlite.org/download.html ，然后点击（sqlite-autoconf-3420000.tar.gz）直接下载到Windows本地\n\n然后通过electerm的sftp直接上传到/home/tools/sqlite3\n\n上传方式不一，自行选择（Xshell或者Winscp都可)\n### 4.解压\n\n```bash\ntar -zxvf sqlite-autoconf-3420000.tar.gz \n```\n\n解压后可以看到有新的文件夹：sqlite-autoconf-3420000，进入该目录进行sqlite3的编译和安装。\n\n![在这里插入图片描述](https://s2.loli.net/2024/06/01/QRNo3wVPsOFUBeq.png)\n\n```bash\ncd sqlite-autoconf-3420000\n```\n\n### 2.编译和安装\n\n```bash\n# （1）新建安装目录（根据自己习惯选择安装路径）\nmkdir /usr/local/sqlite3.42\n# （2）编译\n./configure --prefix=/usr/local/sqlite3.42/\n# 固定语法，‘–prefix’后接安装路径。结束时提示：Complete!即可\n\n# （3）安装\nmake clean   # 清除缓存\nmake && make install  # 安装\n```\n\n提示：Successfully…即可，否则清除缓存后，重新编译\n\n以上述方式安装后，会把编译好的二进制文件安装到`/usr/local/sqlite3.42/lib`， 把头文件`sqlite3.h sqlite3ext.h`安装到`/usr/local/sqlite3.42/include`，我们需要知道这两个路径。\n\n#### （4）建立软连接（快捷方式）\n\n```bash\ncd /usr/bin   # 切换到bin路径\nls -la sqlite*  # 查看sqlite已经存在的软连接\n若提示：ls: cannot access sqlite*: No such file or directory。则还未建立软连接，直接执行下面的代码，建立软连接即可\nln -s /usr/local/sqlite3.42/bin/sqlite3 /usr/bin/sqlite3\n```\n\n注：其中`/usr/local/sqlite3.42/bin/sqlite3`为sqlite3的安装路径下的bin路径中的sqlite3，`/usr/bin/sqlite3`为固定位置\n\n若显示\n\n![在这里插入图片描述](https://s2.loli.net/2024/06/01/DKIgqOE1vpbc8sk.png)\n\n需要先删除该软连接，再新建\n\n```bash\nrm -rf sqlite3   # 删除\nln -s /usr/local/sqlite3.42/bin/sqlite3 /usr/bin/sqlite3   # 新建\nls -la sqlite*  # 查看软连接\nsqlite3 --version  # 查看版本\n```\n\n最终效果为\n\n![在这里插入图片描述](https://s2.loli.net/2024/06/01/zeOsb495yZ2nRmH.png)\n\n##### （5）配置系统lib库\n\n```bash\necho \"/usr/local/sqlite3.42/lib\" > /etc/ld.so.conf.d/sqlite3.conf\nldconfig\n```\n\n### 三、下载、编译和安装Python3\n\n#### 1.下载\n\n下载方法和sqlite3的下载相似。本文安装的python3.8.12版本，官网地址为：https://www.python.org/ftp/python/3.8.12/\n\n```bash\nmkdir /home/tools/python3    # 新建下载存储路径\ncd /home/tools/python3    # 切换到存储路径\nwget https://www.python.org/ftp/python/3.8.12/Python-3.8.12.tar.xz  # 使用wget直接下载\n```\n\n同样的，也可以在本地下载之后，通过ftp上传。\n\n```bash\ntar -zxvf Python-3.8.12.tgz  # 解压\n```\n\n解压之后可以看到多了一个文件夹，直接切换过去\n\n![在这里插入图片描述](https://s2.loli.net/2024/06/01/XrVREg3cFvqDQLl.png)\n\n```\ncd Python-3.8.12/\n```\n\n#### 2.编译安装\n\n##### （1）安装\n\n编译安装之前建议在/usr/local路径下建立安装路径（根据自身习惯选择）\n\n```bash\nmkdir /usr/local/python3\n```\n\n原本python3的编译为下面的方法，但是，没有加参数的默认安装，python会自动导入原版本的sqlite3.7.17，\n\n```bash\ncd /home/tools/python/Python-3.8.12/   # 切换到解压后的路径\n./configure --prefix=/usr/local/python3  # 编译，‘--prefix’后接安装路径\nmake clean   # 清除缓存\nmake && make install   # 安装 \n```\n\n将上述代码修改为:\n\n```bash\ncd /home/tools/python/Python-3.8.12/   # 切换到解压后的路径\n# 编译，‘--prefix’后接安装路径，其中LD_RUN_PATH和LDFLAGS为sqlite3的二进制文件位置路径，CPPFLAGS是头文件的位置路径。上面安装sqlite3时已经提到。\nLD_RUN_PATH=/usr/local/sqlite3.42/lib/ ./configure LDFLAGS=\"-L/usr/local/sqlite3.42/lib\" CPPFLAGS=\"-I/usr/local/sqlite3.42/include\"  --prefix=/usr/local/python3/ --enable-shared --with-ssl\n\nLD_RUN_PATH=/usr/local/sqlite3.42/lib/ make  # 编译时将sqlite3的二进制文件路径添加到动态链接库的搜索路径中\nmake clean   # 清除缓存\nmake && make install  # 安装\n```\n\n##### （2）建立软连接（快捷方式）\n\n建立方法与sqlite3的软连接建立方式相同\n\n```bash\nls -la python*   # 查看python已存在的软连接\n```\n\n一般情况下，如果是新建立的系统，会存在以下三个软连接\n\n![在这里插入图片描述](https://s2.loli.net/2024/06/01/2FJ7YEy9gHd56N8.png)\n\n以上软连接不做更改（因为很多系统命令会依赖python2.7），直接新建一个python3的软连接即可\n\n```\nln -s /usr/local/python3/bin/python3 /usr/bin/python3\n```\n\n最终效果\n\n至此，sqlite3和python3已经安装并且连接好了，可进行如下验证\n\n![在这里插入图片描述](https://s2.loli.net/2024/06/01/KkVGCsJPiF1hAwR.png)\n\n```bash\n[root@iZf8z170cg4zcnds9u2p10Z bin]# python3   # 进入python3\nPython 3.8.12 (default, Jun  5 2023, 16:00:05) \n[GCC 4.8.5 20150623 (Red Hat 4.8.5-44)] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import sqlite3\n>>> sqlite3.sqlite_version\n'3.42.0'\n>>>exit()\n```\n\n可以看到，其中python版本为3.8.12，并且python3内的sqlite3版本为3.42.0，升级成功\n","tags":["python","django","SQLite","error"],"categories":["python","django"]},{"title":"django获取请求进来的ip","url":"/2024/05/31/django获取请求进来的ip/","content":"\n## <font color=#00b2c2 size=5 face=宋体><strong>django获取请求进来的IP</strong></font>\n\n<!--more-->\n\n你可以创建一个中间件来检查请求的IP地址是否在白名单中。如果不在，就拒绝访问。\n\n```python\nfrom django.http import HttpResponseForbidden  \n  \nclass WhiteListMiddleware:  \n    def __init__(self, get_response):  \n        self.get_response = get_response  \n        # 这里设置你的白名单IP地址  \n        self.white_list = ['127.0.0.1', '192.168.1.100']  \n  \n    def __call__(self, request):  \n        if request.META['REMOTE_ADDR'] not in self.white_list:  \n            return HttpResponseForbidden('Access Forbidden')  \n        response = self.get_response(request)  \n        return response\n```\n\n然后，在`settings.py`中添加这个中间件：\n\n```python\nMIDDLEWARE = [  \n    # ... 其他中间件 ...  \n    'path.to.your.WhiteListMiddleware',  # 替换为中间件的实际路径  \n    # ... 可能还有其他中间件 ...  \n]\n```\n\n","tags":["django","请求"],"categories":["python","django"]},{"title":"element-使用dialog查看图片、视频-dialog大小自适应","url":"/2024/05/28/element-使用dialog查看图片、视频-dialog大小自适应/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>element-使用dialog查看图片、视频-dialog大小自适应</strong></font>\n\n<!--more-->\n\n长 > 宽 设置弹窗最大宽度为370，否则为600 ，可以根据需要修改。\n\n效果图如下：\n\n![img](https://s2.loli.net/2024/05/28/MnJ5G2LwWNI4fiU.png)\n\n![img](https://s2.loli.net/2024/05/28/auTUMco1FINqWfB.png)\n\n```html\n<el-dialog title=\"图片查看\" :visible.sync=\"dialogBigImgVisible\" :width=\"dialogWidth\">\n\t<img :src=\"bigImgSrc\" @load=\"onLoadImg\" :width=\"boxWidth\"/>\n</el-dialog>\n \n<el-dialog title=\"视频查看\" :visible.sync=\"dialogBigImgVisible\" :width=\"dialogWidth\">\n    <video controls @canplay=\"onLoadVideo\" :width=\"boxWidth\">\n         <source :src=\"videoSrc\" />\n    </video>\n</el-dialog>\n```\n\n```javascript\nvar app = new Vue({\n    \tel: \"#app\",\n        data: function(){\n            return {\n                dialogBigImgVisible: true,\n\t\t\t\tbigImgSrc: \"\",\n                boxWidth: \"\",\n                dialogWidth: \"\"\n            }\n        },\n        methods:{\n            onLoadImg: function (e) {\n                var img = e.target;\n                var width = 0;\n                if (img.fileSize > 0 || (img.width > 1 && img.height > 1)) {\n                  width = img.width;\n                }\n                if ((img.height > img.width) &&  width > 370) {\n                    width = 370\n                } else if (width > 600) {\n                    width = 600\n                }\n                this.boxWidth= width + 'px';\n                this.dialogWidth = width + 40 + 'px';\n            },\n            onLoadVideo: function (e) {\n                var video = e.target;\n                var width = 0;\n                if (video.fileSize > 0 || (video.videoWidth > 1 && video.videoHeight >             1)) {\n                  width = video.videoWidth;\n                }\n                if ((video.videoHeight > video.videoWidth) &&  width > 370) {\n                    width = 370\n                } else if (width > 600) {\n                    width = 600\n                }\n                this.boxWidth = width + 'px';\n                this.dialogWidth = width + 40 + 'px';\n            },\n        }\n})\n```\n\n","tags":["Element-UI","前后混编"],"categories":["前端","Element-UI"]},{"title":"pyinstaller打包的django项目、以及运行方式","url":"/2024/05/28/pyinstaller打包的django项目、以及运行方式/","content":"\n## <font color=#00b2c2 size=5 face=宋体><strong>pyinstaller打包的django项目、以及运行方式</strong></font>\n\n<!--more-->\n\n本文摘选自https://www.jb51.net/python/2901751ol.htm\n\n\n\n### 1、环境：Python3.8与Django3.2.1\n\n### 2、安装pyinstaller\n\n使用命令`pip install -i https://pypi.tuna.tsinghua.edu.cn/simple pyinstaller`\n\n此处使用了清华大学的镜像网站\n\n### 3、打包成exe\n\n若想要打包的项目为单独的py文件，则使用`pyinstaller-F xxx.py`’打包\n\n若想要打包的项目为一个的文件夹，则使用`pyi-makespec -D manage.py`生成spec文件，执行成功后，会显示如下信息，表示可以去构建可执行文件了\n\n```bash\nnow run pyinstaller.py to build the executable\n```\n\n在目录下面会生成一个 manage.spec的文件，我们可以打开看一下内容：\n\n![](https://s2.loli.net/2024/05/28/AESdcMtfVY9iXHK.png)\n\n然后运行`pyinstaller manage.spec`命令，生成打包的exe文件\n\n打包程序的运行方式： 在manage.exe的位置打开cmd,输入`manage runserver ip:port --noreload`运行服务即可\n\n### 4、新建直接运行的程序\n\n新建一个run.py文件\n\n```python\nimport os\nos.system('manage.exe runserver 8000 --noreload')\ninput()\n```\n\n`pyinstaller -F run.py `在dist目录下得到一个run.exe，双击运行run.exe 就能运行django项目。\n\n## 问题一：运行服务是会提示No module named XXX\n\n这是因为Django有些module不会自动收集，需要手动添加\n\n解决方法：在manage.spec文件中修改hiddenimports=[]为hiddenimports=[‘users’,‘users.apps’,‘sql_server.pyodbc.compiler’]，提示缺少什么module就在此处添加什么。（但是很恶心人的是每次只会提示一个错误，需要一直修改manage.spec文件，然后重新打包）\n\n## 问题二：打开网页出现TemplateDoesNotExist 错误\n\n解决方法：根据错误的提示消息，把项目中的模板文件templates拷贝到相应的位置，刷新页面即可。（如把templates放到manage文件夹里）\n\n到此这篇关于Django项目打包完整步骤以及可能出现的问题的文章就介绍到这了,更多相关Django项目打包步骤内容请搜索脚本之家以前的文章或继续浏览下面的相关文章希望大家以后多多支持脚本之家！","tags":["python","django","打包","运行方式","pyinstaller"],"categories":["python","django"]},{"title":"ORM-操作与生成","url":"/2024/05/26/ORM-操作与生成/","content":"\n\n\n<font color=#f26522 size=5 face=宋体><strong>使用Django admin路径：</strong></font>\n\n<!--more-->\n\n```bash\npython3 manage.py createsuperuser   # 创建admin账户密码\n```\n\n## <font color=#00b2c2 size=5 face=宋体><strong>生成配置：</strong></font>\n\n```python\npython3 manage.py makemigrations\npython3 manage.py migrate    # 将所有配置在默认的 default库 中生成\npython3 manage.py migrate --database=user   # 将所有的配置在 user库 下生成\npython3 manage.py migrate app01 --database=default    # 将app01 下的配置 在default库下生成\n\npython3 manage.py makemigrations app01   # 这里不指定app01 就不会在app01下生成配置\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>保持现有数据，重新生成配置：</strong></font>\n\n```python\npython3 manage.py makemigrations app01   # 这里不指定app01 就不会在app01下生成配置\npython3 manage.py showmigrations   # 查看库中已经生成配置 `所有表`\npython3 manage.py migrate --fake app01 zero   # 这里的 pay 就是你要重置的 app\n\n# 重置完成，在重新生成\npython3 manage.py makemigrations app01   # 重写生成app01下的配置\npython3 manage.py migrate --fake-initial app01   # 非常重要\npython3 manage.py migrate app01   # 在数据库中生成表\n```\n\n\n\n## <font color=#00b2c2 size=5 face=宋体><strong>在视图函数 views中，插入数据库：</strong></font>\n\n```python\n\n# 导入模块 该模块位于app下单 models\nfrom app01 import models\n\nmodels.User.objects.create(title=\"小李子\", id=1, age=18)   # 插入函数 models.xxx.objects.create()\n\n# 传入字典解包\npost_data = {\"title\":\"小李子\", \"age\",18}  # 定义传入数据库的字典\ninstance = models.User(**post_data)  # 开始解包\ninstance.save()  # 保存到数据库\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>在视图函数 views中，查询数据库：</strong></font>\n\n```python\nfind_sql_data = models.User.objects.all()   # 获取当前数据表中的所有数据\nfind_sql_data = models.User.objects.create(name=\"Apple\")   # 查询 name=Apple的数据\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<font color=#00b2c2 size=5 face=宋体><strong></strong></font>","tags":["python","django","ORM"],"categories":["python","django-ORM"]},{"title":"django-后台管理模板-simpleui-的配置教程","url":"/2024/05/25/django-后台管理模板-simpleui-的配置教程/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>django 后台管理模板 simpleui 的配置教程</strong></font>\n\n<!--more-->\n\n## 1、将静态资源文件夹克隆到本地\n\n项目根目录下的 setting配置\n\n```python\nimport os   # 导入os包，\nSTATIC_ROOT = os.path.join(BASE_DIR, \"static\")   # 设置static根目录\n\n# 开始执行克隆到本地 资源命令\npython3 manage.py collectstatic  # bash命令\n```\n\n","tags":["simpleui","后台","模版"],"categories":["python","django"]},{"title":"execjs的使用教程","url":"/2024/05/25/execjs的使用教程/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>Js逆向库：execjs的使用教程</strong></font>\n\n<!--more-->\n\n## 1、安装\n\n```python\npip3 install PyExecJS\n```\n\n\n\n## 2、运行：\n\n```python\nimport execjs  # 导入包\n\ndef _run_js(Str_start, keys):\n    code = \"\"\"\n        function decrypt(word, keys) {   // 此处定义了一个js函数\n        const CryptoJS = require('crypto-js');  // 导入 crypto-js 加密、解密模块\n        const decrypted = CryptoJS.AES.decrypt(word, keys);  # 开始解密\n        const plaintext = JSON.parse(decrypted.toString(CryptoJS.enc.Utf8))   # 最后将解密的内容，转换成json格式\n        return plaintext   # 返回解密完成的数据 ==>> Json_string(调用函数)\n        }\n    \"\"\"\n\n    decrypt_ = execjs.compile(code)   # 加载 js 代码\n    Json_string = decrypt_.call(\"decrypt\", Str_start, keys)  # 用call 方法 传入已经加载的js内容，并且传入 实参\n    return Json_string  # 返回解密后的内容\n\nstring_ = \"xxxxxxx\"  # 这里是你需要解密的内容\nkeys = \"xxxxx\"   # 这里是解密用到的key\n_run_js(string_, keys)  # 调用解密函数开始解密\n```\n\n","tags":["Js","execjs"],"categories":["逆向","Js"]},{"title":"【爬虫】巧用-js2py-（附带bug解决）","url":"/2024/05/25/【爬虫】巧用-js2py-（附带bug解决）/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>【爬虫】巧用-js2py-（附带bug解决）：</strong></font>\n\n<!--more-->\n\n本文搬运自CSDN：[传送阵](https://blog.csdn.net/sc_lilei/article/details/100122347)\n\n项目地址： https://github.com/PiotrDabkowski/Js2Py\n\n项目介绍：（根据github）此项目完全用Python编写，支持Python2/3。可以在Python中执行JS代码，并获取JS对象值。\n\n目前支持ES5，ES6仍在测试中。\n\n一句话解释：一个纯Python的JS解释器。\n\n推荐指数：四颗星  （博主用过其他的库如execjs, pyv8，多多少少都没有这个库的功能完备）\n\n## 安装：\n\n```python\npip3 install js2py\n```\n\n本文主要介绍js2py的EvalJs对象，因为它是功能最完备的。\n\n\n\n## 1. 执行简单的JS代码\n\n```python\nimport js2py\njs = \"\"\"\n    a =1 \n    b =1\n    function f(x){\n        return x*x\n    }\n    \"\"\"\nctx = js2py.EvalJs()  # 初始化context对象\nctx.execute(js)  # 执行js\nprint(ctx.a)  # >>1   获取js变量\nprint(ctx.f(9))  # >>81  执行js函数\n```\n\n说明：EvalJs对象支持在同一个上下文中执行多次多段js代码，并能通过属性的方式获取js变量，非常好用。\n\n## **2. Python与JS对象交互**\n\n```python\nimport js2py\njs = \"\"\"\n    function f(arg1, arg2){\n        return arg1+arg2\n    }\n    end = f(a,b)\n    \"\"\"\nctx = js2py.EvalJs(context={'a':1, 'b':2})  # 初始化context对象,通过字典形式传入python对象与js交互\nctx.execute(js)  # 执行js\nprint(ctx.end)  # 3\n```\n\n## **3. 在JS代码中引入外部JS库(需要安装nodejs环境)**\n\n```python\nimport js2py\njs = \"\"\"var path = require('path')\n        p=path.join('/foo/bar', 'file')\n        \"\"\"\nctx = js2py.EvalJs(enable_require=True)  # 开启require功能\nctx.execute(js)  # 执行js\nprint(ctx.p)  # /foo/bar/file\njs = \"\"\"p = p+p\"\"\"\nctx.execute(js)  # 执行js\nprint(ctx.p)  # /foo/bar/file/foo/bar/file\n```\n\n关于require在js2py中使用有个bug，会在最后说明。\n\n## **4. Python与JS混编**\n\n```python\nCryptoJS = js2py.require('crypto-js')\ndata = [{'id':1}, {'id':2}]\nJSON = js2py.eval_js('JSON')\n \nciphertext = CryptoJS.AES.encrypt(JSON.stringify(data), 'secret key 123')\nbytes = CryptoJS.AES.decrypt(ciphertext.toString(), 'secret key 123')\ndecryptedData = JSON.parse(bytes.toString(CryptoJS.enc.Utf8)).to_list()\n \nprint(decryptedData)  # [{'id':1}, {'id':2}]\n```\n\n## 5. 最后\n\n在对js2py这个库的摸索使用中，发现了不少的问题(bug)，发现作者最后一次处理issue是在2018年11月了，超过20个issue未处理，博主也把遇到的问题提了两个上去，不知道能不能收到回复。\n\n博主修复的bug：在windows 10 上使用这个库执行带有require语句的JS代码时遇到的错误\n\n```python\nCould not link required node_modules\n```\n\n**解决**：经过反复测试与检查，发现是subprocess库在windows上执行shell命令有bug。具体是这样，在Python包安装路径下的js2py/node_import.py的17行有以下代码：\n\n```python\nassert subprocess.call(\n        'cd %s;npm install babel-core babel-cli babel-preset-es2015 babel-polyfill babelify browserify browserify-shim'\n        % repr(DIRNAME),\n        shell=True,\n        cwd=DIRNAME) == 0, 'Could not link required node_modules'\n```\n\n其实这里作者的cd命令是多余的，因为cwd参数已经指定了命令的执行路径，无需再cd进入路径。\n\n除了这里，还要修改这个文件第79行，一样的问题。\n\n最后友情提醒，如果你的环境不能科学上网，你最好修改一下npm的源：\n\n```python\n npm config set registry https://registry.npm.taobao.org\n```\n\n避免网络问题导致不必要的麻烦，因为执行的JS代码依赖外部库时，这个库会在后台执行npm install操作(仅一次)。\n\n**其他：**\n\n因为博主也是搞爬虫的，所有有时会用到这样的库，这次就做一下完整的记录，助己助人。\n\n本博客欢迎留言 :) ","tags":["Js","js2py"],"categories":["逆向","Js"]},{"title":"网站克隆工具-httrack","url":"/2024/05/24/网站克隆工具-httrack/","content":"\n\n\n## <font color=#00b2c2 size=5 face=宋体><strong>网站克隆工具-httrack：</strong></font>\n\n<!--more-->\n\n本文搬运自[kali-网站克隆工具-httrack_kali克隆网站-CSDN博客](https://blog.csdn.net/qq_32393893/article/details/105049728)\n\n<font color=#f26522 size=4 face=宋体><strong>以下为 kali命令，如果是mac的同学，请自行使用`brew` 替换 `apt-get`即可</strong></font>\n\nHTTrack是一款网站克隆工具，主要用户克隆网站。渗透测试人员可以将目标网站克隆到本地进行查看，包含了所有的页面和离线文件，是可以进行社会工程学攻击，是钓鱼网站的利器。\n\n### 1，安装 \n\n**`sudo apt-get isntall httarck`**\n\n![](https://s2.loli.net/2024/05/24/NputOms3gJha7IB.png)\n\n<font color=#b0171f size=3 face=宋体><strong>（如果已经安装了，就会像上图这样）</strong></font>\n\n### 2，新建一个文件夹放置下载的网站\n\n**`mkdir site`**\n\n![](https://s2.loli.net/2024/05/24/jcJ4LeKEPmY87bi.png)\n\n### 3，切换到新建的文件夹中\n\n**`cd site`**\n\n### 4，启动httrack\n\n**`httrack`**\n\n### 5，进行设置\n\n![](https://s2.loli.net/2024/05/24/Phwa4YpE8u32LVJ.png)\n\n### 6，已经将网站保存在本地了\n\n![](https://s2.loli.net/2024/05/24/CigUqDpQuRf1VvJ.png)\n\n","tags":["工具","克隆","网站"],"categories":["工具","网站"]},{"title":"selenium-获取请求日志-获取获取Ajax请求的url","url":"/2024/05/22/selenium-获取请求日志-获取获取Ajax请求的url/","content":"\n\n\n## 创建 selenium：\n\n<!--more-->\n\n```python\n# 导入包\nfrom selenium import webdriver   \nfrom selenium.webdriver.chrome.options import Options\n\n# 初始化 ChromeOptions 对象\nchrome_options = Options()\n\n# 设置需要的选项\nchrome_options.add_argument(\"--start-maximized\")\nchrome_options.add_argument(\"--disable-infobars\")\n\n# 创建 WebDriver 实例\ndriver = webdriver.Chrome(options=chrome_options)\n\ndriver.get(url)  # 请求url地址\nprint(driver.current_url)   # 获取请求的 url 地址\nprint(driver.page_source)   # 打印当前页面文本\ndriver.implicitly_wait(3)   # 等待selenium加载完成js内容\ndriver.close()  # 退出程序\n```\n\n\n\n## selenium下 options配置的常用参数：[参考自`温一壶清酒`](https://www.cnblogs.com/hong-fithing/p/12796602.html)\n\n```python\noptions.add_argument('--disable-infobars')  # 禁止策略化\noptions.add_argument('--no-sandbox')  # 解决DevToolsActivePort文件不存在的报错\noptions.add_argument('window-size=1920x3000')  # 指定浏览器分辨率\noptions.add_argument('--disable-gpu')  # 谷歌文档提到需要加上这个属性来规避bug\noptions.add_argument('--incognito')  # 隐身模式（无痕模式）\noptions.add_argument('--disable-javascript')  # 禁用javascript\noptions.add_argument('--start-maximized')  # 最大化运行（全屏窗口）,不设置，取元素会报错\noptions.add_argument('--hide-scrollbars')  # 隐藏滚动条, 应对一些特殊页面\noptions.add_argument('blink-settings=imagesEnabled=false')  # 不加载图片, 提升速度\noptions.add_argument('--headless')  # 浏览器不提供可视化页面. linux下如果系统不支持可视化不加这条会启动失败\noptions.binary_location = r\"C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe\"  # 手动指定使用的浏览器位置\noptions.add_argument('lang=en_US') # 设置语言\noptions.add_argument('User-Agent=Mozilla/5.0 (Linux; U; Android 8.1.0; zh-cn; BLA-AL00 Build/HUAWEIBLA-AL00) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.132 MQQBrowser/8.9 Mobile Safari/537.36')\noptions.add_argument('--headless')  # 浏览器不提供可视化页面\nprefs = {\"\":\"\"}\nprefs[\"credentials_enable_service\"] = False\nprefs[\"profile.password_manager_enabled\"] = False\nchrome_option_set.add_experimental_option(\"prefs\", prefs) # 屏蔽'保存密码'提示框\n```\n\n## 【测试】selenium拦截Ajax（XHR）等异步请求数据：[参考自`冰冷的希望`](https://blog.csdn.net/qq_39147299/article/details/132236245)\n\n#### 1.说明\n\n在爬取某个网站的时候遇到加密参数，由于js代码经过混淆编译不好破解，所以采用`selenium`的方式获取参数，但是我们获取selenium的数据基本上都是基于页面的，对于网站发起的异步请求，我们可以从日志中提取\n\n#### 2.设置driver参数\n\n我们首先要通过Option对象（比如说ChromeOptions）设置监控浏览器日志，旧版本的Selenium是通过DesiredCapabilities设置的，下面是新版本的写法\n\n```python\nfrom selenium.webdriver import Chrome, ChromeOptions\nfrom selenium.webdriver.chrome.service import Service\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions\nfrom selenium.webdriver.support.wait import WebDriverWait\n\noptions = ChromeOptions()\noptions.add_argument(\"--no-sandbox\")\noptions.add_argument(\"--allow-running-insecure-content\")\noptions.add_argument(\"--ignore-certificate-errors\")\noptions.add_argument(\"--disable-single-click-autofill\")\noptions.add_argument(\"--disable-autofill-keyboard-accessory-view[8]\")\noptions.add_argument(\"--disable-full-form-autofill-ios\")\noptions.add_experimental_option('perfLoggingPrefs', {'enableNetwork': True,'enablePage': False,})\noptions.set_capability(\"goog:loggingPrefs\", {'browser': 'ALL','performance': 'ALL',})\noptions.set_capability(\"goog:perfLoggingPrefs\", {'enableNetwork': True,'enablePage': False,'enableTimeline': False})\n\n```\n\n#### 3.请求网页\n\n现在`实例化`一个driver，发起一个网页请求，我这里使用`WebDriverWait`显式等待的方式等待某个元素出现，你也可以隐式等待或者直接sleep，如果你不等待，异步请求还没加载完就开始获取，你可能会拿不到想要的数据\n\n```python\nservice = Service(executable_path=executable_path)\ndriver = Chrome(service=service, options=options)\ndriver.execute_cdp_cmd(\"Page.addScriptToEvaluateOnNewDocument\",\n                       {\"source\": \"\"\"Object.defineProperty(navigator, 'webdriver', {get: () => undefined})\"\"\"})\ndriver.get(page_url)\nwait = WebDriverWait(driver, 15, 0.5)\ntry:\n    wait.until(expected_conditions.presence_of_element_located((By.CLASS_NAME, \"item \")))\nexcept Exception as e:\n    print(\"WebDriverWait.until timeout error: {}\".format(e))\nhtml = driver.execute_script(\"return document.documentElement.outerHTML\")\n\n```\n\n#### 4.处理日志\n访问一下driver的`log_types`属性可以获取到所有日志类型，遍历它，通过`get_log()`方法获取对应的日志，之后再过滤出自己想要的日志就行。\n\n比如说，我这里是过滤出所有`Network.requestWillBeSent`的日志，即发送异步请求的数据，因为我需要该请求的请求头，如果是响应类型的日志（`Network.responseReceived`），它只包含响应头。具体支持的类型可以参考[谷歌devtools的文档](https://chromedevtools.github.io/devtools-protocol/tot/Network/)\n\n如果需要过滤出Ajax（XHR）请求，可以根据日志的params里的type进行判断，也可以通过它判断\n\n```python\nsign_dict = dict()  # 用来存储自己想要的数据\nfor log_type in driver.log_types:\n    perf_list = driver.get_log(log_type)\n    for row_log in perf_list:\n        try:\n            log_json = json.loads(row_log['message'])\n            message_log = log_json['message']\n        except Exception as e:\n            print(e)\n            continue\n        if message_log.get('method') != 'Network.requestWillBeSent':\n            continue\n        if message_log.get(\"params\", {}).get(\"type\", \"\").upper() != \"XHR\":\n            continue\n        headers = message_log['params'].get('request', {}).get('headers')\n        if not headers:\n            continue\n        x_sign = headers.get('X-Sign')\n        if not x_sign:\n            continue\n        x_app_id = headers.get('X-AppID')\n        x_ts = headers.get('X-Ts')\n        print(\"success:\", x_sign, x_app_id, x_ts)\n        req_url = message_log['params'].get('request', {}).get('url')\n        key = os.path.split(req_url.split(\"?\")[0])[1]\n        sign_dict[key] = {\"X-AppID\": x_app_id, \"X-Sign\": x_sign, \"X-Ts\": x_ts}\n\n```\n\n注意，如果你想要响应体，`Network.responseReceived`类型的日志的`response`字段是没有响应体的，你需要通过`params`字段里的`requestId`获取，参考代码如下\n\n```python\nres_body_dict = dict()\nfor log_type in driver.log_types:\n    perf_list = driver.get_log(log_type)\n    for row_log in perf_list:\n        try:\n            log_json = json.loads(row_log['message'])\n            message_log = log_json['message']\n        except Exception as e:\n            print(e)\n            continue\n        if message_log.get('method') != 'Network.responseReceived':\n            continue\n        if message_log.get(\"params\", {}).get(\"type\", \"\").upper() != \"XHR\":\n            continue\n        request_id = message_log['params'].get(\"requestId\")\n        if not request_id:\n            continue\n        req_url = message_log['params'].get('response', {}).get('url')\n        key = os.path.split(req_url.split(\"?\")[0])[1]\n        content = driver.execute_cdp_cmd('Network.getResponseBody', {'requestId': request_id})\n        body = None\n        try:\n            body = json.loads(content[\"body\"])\n        except Exception as e:\n            print(\"get_unisat_data_by_selenium() json loads error: {}, content:{}\".format(e, content))\n        res_body_dict[key] = body\n\n```\n\n#### 5.完整代码\n\n上面的完整参考代码如下\n\n```python\nimport json\nimport os.path\n\nfrom selenium.webdriver import Chrome, ChromeOptions\nfrom selenium.webdriver.chrome.service import Service\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions\nfrom selenium.webdriver.support.wait import WebDriverWait\n\n\ndef get_selenium_driver(executable_path=r\"E:\\webdriver\\chromedriver.exe\"):\n    options = ChromeOptions()\n    options.add_argument(\"--no-sandbox\")\n    options.add_argument(\"--allow-running-insecure-content\")\n    options.add_argument(\"--ignore-certificate-errors\")\n    options.add_argument(\"--disable-single-click-autofill\")\n    options.add_argument(\"--disable-autofill-keyboard-accessory-view[8]\")\n    options.add_argument(\"--disable-full-form-autofill-ios\")\n    options.add_experimental_option('perfLoggingPrefs', {\n        'enableNetwork': True,\n        'enablePage': False,\n    })\n    options.set_capability(\"goog:loggingPrefs\", {\n        'browser': 'ALL',\n        'performance': 'ALL',\n    })\n    options.set_capability(\"goog:perfLoggingPrefs\", {\n        'enableNetwork': True,\n        'enablePage': False,\n        'enableTimeline': False\n    })\n    service = Service(executable_path=executable_path)\n    driver = Chrome(service=service, options=options)\n    driver.execute_cdp_cmd(\"Page.addScriptToEvaluateOnNewDocument\",\n                           {\"source\": \"\"\"Object.defineProperty(navigator, 'webdriver', {get: () => undefined})\"\"\"})\n\n    return driver\n\n\ndef get_sign_by_selenium(page_url):\n    driver = get_selenium_driver()\n    driver.execute_cdp_cmd(\"Page.addScriptToEvaluateOnNewDocument\",\n                           {\"source\": \"\"\"Object.defineProperty(navigator, 'webdriver', {get: () => undefined})\"\"\"})\n    driver.get(page_url)\n    wait = WebDriverWait(driver, 15, 0.5)\n    try:\n        wait.until(expected_conditions.presence_of_element_located((By.CLASS_NAME, \"item \")))\n    except Exception as e:\n        print(\"WebDriverWait.until timeout error: {}\".format(e))\n    # html = driver.execute_script(\"return document.documentElement.outerHTML\")\n    # with open(r\"C:\\Users\\admin\\Desktop\\test\\test.html\", \"w\") as f:\n    #     f.write(html)\n    # time.sleep(10)\n    sign_dict = dict()\n    for log_type in driver.log_types:\n        perf_list = driver.get_log(log_type)\n        for row_log in perf_list:\n            try:\n                log_json = json.loads(row_log['message'])\n                message_log = log_json['message']\n            except Exception as e:\n                print(e)\n                continue\n            if message_log.get('method') != 'Network.requestWillBeSent':\n                continue\n            if message_log.get(\"params\", {}).get(\"type\", \"\").upper() != \"XHR\":\n                continue\n            headers = message_log['params'].get('request', {}).get('headers')\n            if not headers:\n                continue\n            x_sign = headers.get('X-Sign')\n            if not x_sign:\n                continue\n            x_app_id = headers.get('X-AppID')\n            x_ts = headers.get('X-Ts')\n            print(\"success:\", x_sign, x_app_id, x_ts)\n            req_url = message_log['params'].get('request', {}).get('url')\n            key = os.path.split(req_url.split(\"?\")[0])[1]\n            sign_dict[key] = {\"X-AppID\": x_app_id, \"X-Sign\": x_sign, \"X-Ts\": x_ts}\n    return sign_dict\n\n\ndef get_unisat_data_by_selenium(page_url):\n    driver = get_selenium_driver()\n    driver.execute_cdp_cmd(\"Page.addScriptToEvaluateOnNewDocument\",\n                           {\"source\": \"\"\"Object.defineProperty(navigator, 'webdriver', {get: () => undefined})\"\"\"})\n    driver.get(page_url)\n    wait = WebDriverWait(driver, 15, 0.5)\n    try:\n        wait.until(expected_conditions.presence_of_element_located((By.CLASS_NAME, \"item \")))\n    except Exception as e:\n        print(\"WebDriverWait.until timeout error: {}\".format(e))\n    res_body_dict = dict()\n    for log_type in driver.log_types:\n        perf_list = driver.get_log(log_type)\n        for row_log in perf_list:\n            try:\n                log_json = json.loads(row_log['message'])\n                message_log = log_json['message']\n            except Exception as e:\n                print(e)\n                continue\n            if message_log.get('method') != 'Network.responseReceived':\n                continue\n            if message_log.get(\"params\", {}).get(\"type\", \"\").upper() != \"XHR\":\n                continue\n            request_id = message_log['params'].get(\"requestId\")\n            if not request_id:\n                continue\n            req_url = message_log['params'].get('response', {}).get('url')\n            key = os.path.split(req_url.split(\"?\")[0])[1]\n            content = driver.execute_cdp_cmd('Network.getResponseBody', {'requestId': request_id})\n            body = None\n            try:\n                body = json.loads(content[\"body\"])\n            except Exception as e:\n                print(\"get_unisat_data_by_selenium() json loads error: {}, content:{}\".format(e, content))\n            res_body_dict[key] = body\n    return res_body_dict\n\n\nif __name__ == '__main__':\n    url = \"https://unisat.io/brc20?q=bc1pkmnh3nj89uns3yp2mtqqxjns65vy6ca6n5jvp4s8ua8nke69cnjs987vtp\"\n    print(\"get_sign_by_selenium(url):\", get_sign_by_selenium(url))\n    # print(\"get_unisat_data_by_selenium(url):\", get_unisat_data_by_selenium(url))\n\n\n```\n\n","tags":["python","selenium","自动化"],"categories":["python","selenium"]},{"title":"django-Session的配置与使用","url":"/2024/05/16/django-Session的配置与使用/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>django Session的配置与使用</strong></font>\n\n<!--more-->\n\n```python\n# 所有的 session 默认配置是在源码中的 conf/global_settings.py\n############\n# SESSIONS #\n############\n\n以下内容存储位置，任选其一即可：即 SESSION_ENGINE 的配置只能选一个\n# # session 相关数据存储位置 ： 数据库\nSESSION_ENGINE = \"django.contrib.sessions.backends.db\"\n\n# session 相关数据存储位置 ： 文件\nSESSION_ENGINE = \"django.contrib.sessions.backends.file\"\nSESSION_FILE_PATH = \"None\"   # 如果要存储到文件中，需要先创建文件夹 相对路径(也可以绝对路径)\n\n# # 存储到缓存\nSESSION_ENGINE = \"django.contrib.sessions.backends.cache\"\nSESSION_CACHE_ALIAS = \"default\"\n\n# # 存储到 缓存 + 数据库\nSESSION_ENGINE = \"django.contrib.sessions.backends.cached_db\"\nSESSION_CACHE_ALIAS = \"default\"\n\n# 如果存储到 cookie中，需要配置下面所有项目\nSESSION_COOKIE_NAME = \"sessionid\"\nSESSION_COOKIE_AGE = 60 * 60 * 24 * 7 * 2  # 生存时间\nSESSION_COOKIE_DOMAIN = None  # 域名\nSESSION_COOKIE_SECURE = False\nSESSION_COOKIE_PATH = \"/\"\nSESSION_COOKIE_HTTPONLY = True\nSESSION_COOKIE_SAMESITE = \"Lax\"\nSESSION_SAVE_EVERY_REQUEST = False\nSESSION_EXPIRE_AT_BROWSER_CLOSE = False\n\n# 序列号 session信息\nSESSION_SERIALIZER = \"django.contrib.sessions.serializers.JSONSerializer\"\n```\n\n\n\n+ 路由：\n\n```python\nurlpatterns = [\n    #    path('admin/', admin.site.urls),\n    path('x1/', x1, name=\"x1\"),\n    path('x2/', x2, name=\"x2\"),\n]\n```\n\n```python\nfrom django.urls import path\nfrom apps.app01 import views\nfrom django.shortcuts import HttpResponse\n\n# 访问 /x1 设置session 属性\n# session 的设置\ndef x1(request):\n    request.session['id'] = 999\n    request.session[\"name\"] = \"wupeiqi\"\n    request.session[\"age\"] = 25\n    return HttpResponse(\"x1\")\n\n# 访问 x2 校验 session\n# session的读取\ndef x2(request):\n    print(request.session.get(\"id\"))\n    print(request.session.get(\"name\"))\n    print(request.session.get(\"age\"))\n    \n    # del request.session[\"id\"]   # 删除 session 相关信息  >>> 如果二次访问，浏览器会报错  推荐下面方法使用\n    request.session.clear()   # 清除session 相关数据\n    \n    return HttpResponse(\"x2\")\n\n# 路由关系\nurlpatterns = [\n    path('x1/', x1, name=\"x1\"),\n    path('x2/', x2, name=\"x2\"),\n]\n```\n\n","tags":["python","django"],"categories":["python","django"]},{"title":"django-Cookie的配置与使用","url":"/2024/05/16/django-Cookie的配置与使用/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>django Cookie的配置与使用</strong></font>\n\n<!--more-->\n\n![image-20240516012934469](https://s2.loli.net/2024/05/16/x6nONyUZvAWq9c7.png)\n\n+ 路由：\n\n```python\nurlpatterns = [\n    #    path('admin/', admin.site.urls),\n    path('x1/', x1, name=\"x1\"),\n    path('x2/<int:v1>/', x2, name=\"x2\"),\n]\n```\n\n```python\ndef x1(request):\n    print(\"视图.x1\")\n\n    obj = HttpResponse(\"x1\", status=201, reason=\"OK\")\n    obj[\"name\"] = \"xiao zhu pei qi\"\n\n    # 设置 cookie\n    obj.set_cookie(\"v1\", \"hello world\")   # 会在set_cookie 中跟一个字符串\n    \n    # 设置cookie 过期时间 一：\n     obj.set_cookie(\"v2\", \"user\", max_age=10)  # 当前cookie v2=user 在10秒过期\n      \n    # 设置cookie 过期时间 二：\n    ctime = datetime.datetime.now() + datetime.timedelta(seconds=10)   # 设置时间戳 加减\n    obj.set_cookie(\"v3\", \"root\", expires=ctime)  # 当前cookie v3=root 在10秒过期\n\n    return obj\n```\n\n![image-20240516005846278](https://s2.loli.net/2024/05/16/5BzWNUVlPk3h7uo.png)\n\n```python\ndef x2(request, v1):\n    # 获取cookie视图函数\n    print(request.COOKIES)\n    return HttpResponse(\"x2\")\n```\n\n![image-20240516010145709](https://s2.loli.net/2024/05/16/ncOxQNVTfrBUuY4.png)\n\n<font color=#00b2c2 size=5 face=宋体><strong>django 独有的签名与校验：</strong></font>\n\n```python\ndef x1(request):\n    print(\"视图.x1\")\n\n    obj = HttpResponse(\"x1\", status=201, reason=\"OK\")\n    obj[\"name\"] = \"xiao zhu pei qi\"\n    obj.set_signed_cookie(\"info\", \"xiaoguang\")  # django 独有签名算法，防止请求被人修改\n    return obj\n\n\ndef x2(request):\n    # 获取cookie视图函数\n    print(request.COOKIES)\n    xx = request.get_signed_cookie(\"info\")\n    print(xx)\n    return HttpResponse(\"x2\")\n\nurlpatterns = [\n    path('x1/', x1, name=\"x1\"),\n    path('x2/', x2, name=\"x2\"),\n]\n\n```\n\n**校验与签名字符比对**\n\n![校验与签名字符比对](https://s2.loli.net/2024/05/16/k9NWcslPfen4vrY.png)\n","tags":["python","django"],"categories":["python","django"]},{"title":"django-中间件的配置与使用","url":"/2024/05/15/django-中间件的配置与使用/","content":"\n <font color=#00b2c2 size=5 face=宋体><strong>中间件的运行流程图：</strong></font>\n\n<!--more-->\n\n![image-20230716091532551](https://s2.loli.net/2024/05/15/Gre7voNmpj3wb1u.png)\n\n#### 1.编写类\n\n1.1 在项目根目录创建 `utils`\n\n![image-20240515182654186](https://s2.loli.net/2024/05/15/LRYxDcgPUG5lTK2.png)\n\n1.2 在`utils` 下的 `md.py` 中创建类。可以写在任意的目录：自定义的类、继承一个类**（推荐）**\n\n```python\nfrom django.utils.deprecation import MiddlewareMixin\n\nclass KeLaMiddleware(MiddlewareMixin):\n\n    def process_request(self, request):\n        # request是请求相关所有的数据\n        pass\n\n    def process_view(self, request, view, *args, **kwargs):\n        # request是请求相关所有的数据； view是试图函数； 路由参数*args, **kwargs\n        pass\n\n    def process_response(self, request, response):\n        # request是请求相关所有的数据\n        # response是试图函数返回的那个对象（封装了要返回到用户浏览器的所有数据）\n        return response\n```\n\n#### 2.注册\n\n```python\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n    \"utils.md.KeLaMiddleware\"\n]\n# 动态导入 + 反射\n```\n\n#### 3.测试\n\n```python\nfrom django.utils.deprecation import MiddlewareMixin\n\n\nclass KeLaMiddleware(MiddlewareMixin):\n\n    def process_request(self, request):\n        print(\"KeLa.process_request\")\n\n    def process_view(self, request, view, *args, **kwargs):\n        print(\"KeLa.process_view\",view, *args, **kwargs)\n\n    def process_response(self, request, response):\n        print(\"KeLa.process_response\")\n        return response\n```\n\n```python\nfrom django.contrib import admin\nfrom django.urls import path\nfrom django.shortcuts import HttpResponse\n\n\ndef x1(request):\n    print(\"视图.x1\")\n    return HttpResponse(\"x1\")\n\n\ndef x2(request, v1):\n    print(\"视图.x2\", v1)\n    return HttpResponse(\"x2\")\n\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('x1/', x1),\n    path('x2/<int:v1>/', x2),\n]\n```\n\n```python\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n    \"utils.md.KeLaMiddleware\"\n]\n```\n\n#### 4.问题\n\n- 中间件的功能好像有点像装饰器【底层源码闭包】\n\n- 基于中间件可以做什么？\n\n  - 根据请求周期，对 request 进行赋值，后续方便进行调用。\n\n  - 根据请求周期，对业务逻辑代码进行自定义，决定是否可以继续向后\n\n    - return None，继续向后走\n\n    - return HttpResponse对象\n\n      ```\n      return HttpResponse(\"...\")\n      return render(\"...\")        ->   HttpResponse(\"...\")\n      return JsonReponse(\"...\")   ->   HttpResponse(\"...\")\n      ```\n\n  - 根据请求周期，对返回给用户浏览器的数据进行自定义：删除内容、增加、cookie、响应头...\n\n\n\n- 这个中间件和nginx  apache这样的**中间件**概念一样吗？比如做前置代理，做https\n\n  ```\n  Django中间件  /  拦截器  / RequestHanler\n  ```\n\n- 中间件可以跨语言调用吗？比如别人不是用python 写的，但是可以给我们的django 项目用？\n\n  ```\n  Django中间件\n  \t...\n  架构中间件：\n  \tDjango + redis（C语言）\n  ```\n\n- 中间件只要两层,不要中间那个process.riew行不行,是不是有些特定场合需要返回最后一层\n\n  ```\n  ...\n  ```\n\n- 那Django内置的中间件完成了些什么功能？\n\n  ```\n  ...\n  ```\n\n  \n\n### 1.1.2 “不正常”\n\n![image-20230716091818839](https://s2.loli.net/2024/05/16/m93EMl6sKOvVNJ1.png)\n\n如果用户向我的网站请求时，如果访问URL：\n\n- /x1/\n- /x2/\n- /x3/ ，比如携带凭证token，有凭证继续，无凭证返回无权访问。\n\n```\nhttp://127.0.0.1:8000/x2/12/\nhttp://127.0.0.1:8000/x2/12/?xxx=123\n\nhttp://127.0.0.1:8000/x3/?token=12938791923981723123\n```\n\n```python\nfrom django.utils.deprecation import MiddlewareMixin\nfrom django.shortcuts import HttpResponse\n\n\nclass KeLaMiddleware(MiddlewareMixin):\n\n    def process_request(self, request):\n        # request.path_info\n        # print(request.path_info,\"KeLa.process_request\")\n        if request.path_info == \"/x3/\":\n            token = request.GET.get('token')\n            if token == \"12938791923981723123\":\n                return\n            else:\n                return HttpResponse(\"无权访问\")\n```\n\n\n\n\n\n如果用户向我的网站请求时，如果访问URL：\n\n- /x1/\n\n- /x2/  ，比如携带凭证token，有凭证继续，无凭证返回无权访问。\n\n  ```\n  x2/<int:v1>/', x2\n  \n  http://127.0.0.1:8000/x1/10/\n  http://127.0.0.1:8000/x1/20/\n  http://127.0.0.1:8000/x1/11/\n  ```\n\n- /x3/\n\n```python\nclass KeLaMiddleware(MiddlewareMixin):\n\n    def process_request(self, request):\n        # request.path_info\n        # print(request.path_info,\"KeLa.process_request\")\n        # 以x2开头 或 正则   /x2/1111/   /x2/10/\n        # if request.path_info == \"/x2/\":\n        if request.path_info.startswith(\"/x2/\"):    # 判断是不是以 /x2/开头\n            token = request.GET.get('token')\n            if token == \"12938791923981723123\":\n                return \n            else:\n                return HttpResponse(\"无权访问\")\n```\n\n```python\nclass KeLaMiddleware(MiddlewareMixin):\n\n    def process_view(self, request, view, *args, **kwargs):\n        # request.path_info\n        # print(request.path_info,\"KeLa.process_request\")\n        url_name = request.resolver_match.url_name\n        if url_name == \"x2\":\n            token = request.GET.get('token')\n            if token == \"12938791923981723123\":\n                return\n            else:\n                return HttpResponse(\"无权访问\")\n```\n\n\n\n关于自定义prcess_response，一般用于对请求要返回的数据进行修改。\n\n```python\nclass KeLaMiddleware(MiddlewareMixin):\n\n    def process_response(self, request, response):\n        response[\"xx\"] = \"wupeiqi\"\n        return response\n```\n\n## 1.2 使用（几乎不用）\n\n- 编写类，在类型定义：process_request、process_view、process_response、process_exception、process_template_response\n\n  ```\n  process_exception，视图函数有异常，处理出现异常时\n  process_template_response，对于视图函数返回内容渲染扩展。\n  \t- 在视图函数中如果返回的对象内部有一个render方法且可以被调用执行\n  \t- process_template_response返回response参数（返回值）\n  \t- 在自定义的MyReponse的render方法中必须返回HttpRespose\n  ```\n\n- 中间件注册，在settings中的配置。\n\n\n\n```python\nclass KeLaMiddleware(MiddlewareMixin):\n\n    def process_exception(self, request, exception):\n        print(request)\n        print(exception, type(exception))\n        return HttpResponse(\"错误了\")\n```\n\n\n\n\n\n```python\ndef x1(request):\n    print(\"视图.x1\")\n    return HttpResponse(\"x1\")\n```\n\n\n\n\n\n```python\nclass MyHttpResponse:\n    def __init__(self, body):\n        self.body = body\n\n    def render(self):\n        return HttpResponse(self.body)  # 真正的返回\n\n\ndef x1(request):\n    print(\"视图.x1\")\n    return MyHttpResponse(\"x1\")\n```\n\n```python\nclass KeLaMiddleware(MiddlewareMixin):\n\n    def process_template_response(self, request, response):\n        return response\n```\n\n\n\n\n\n----\n\n```python\ndef x1(request):\n    print(\"视图.x1\")\n    return HttpResponse(\"源代码-x1\")\n\n\ndef x2(request, v1):\n    return HttpResponse(\"源代码-x2\")\n\n\ndef x3(request):\n    return HttpResponse(\"源代码-x3\")\n```\n\n---\n\n```python\nclass MyHttpResponse:\n    def __init__(self, body):\n        self.body = body\n\n    def render(self):\n        return HttpResponse(self.body)\n\n\ndef x1(request):\n    print(\"视图.x1\")\n    return MyHttpResponse(\"x1\")\n\n\ndef x2(request, v1):\n    return MyHttpResponse(\"x2\")\n\n\ndef x3(request):\n    return MyHttpResponse(\"x3\")\n\n```\n\n```python\nclass KeLaMiddleware(MiddlewareMixin):\n\n    def process_template_response(self, request, response):\n        response.body = f\"源代码-{response.body}\"\n        return response\n```\n\n## 1.3 源码\n\n### 1.关于请求\n\n![image-20230716111119343](https://s2.loli.net/2024/05/16/yoCPvtDnTzM9Wxr.png)\n\n```python\nfrom wsgiref.simple_server import make_server\n\n\ndef run_server(environ, start_response):\n    # 只要请求到来，就会走这里的代码\n    # 1.根据请求 environ 进行后续业务处理\n    # 2.返回内容。。。\n    start_response('200 OK', [('Content-Type', 'text/html')])\n    return [bytes('<h1>Hello, web!</h1>', encoding='utf-8'), ]\n\n\nif __name__ == '__main__':\n    httpd = make_server('127.0.0.1', 8000, run_server)  # # 有请求到来时，执行  obj(environ, start_response)\n    httpd.serve_forever()\n```\n\n\n\n```python\nfrom wsgiref.simple_server import make_server\n\nclass Handler:\n    \n    def __init__(self):\n        # 做一些初始化动作\n        self.name = \"wupeiqi\"\n        \n\t\n    def __call__(self,environ, start_response):\n        # 根据初始化的动作，去执行...\n        # ...\n        start_response('200 OK', [('Content-Type', 'text/html')])\n    \treturn [bytes('<h1>Hello, web!</h1>', encoding='utf-8'), ]\n\n\nif __name__ == '__main__':\n    obj = Handler() # 执行 \n    httpd = make_server('127.0.0.1', 8000, obj)  # 有请求到来时，执行 obj(environ, start_response)\n    httpd.serve_forever()\n```\n\n![image-20230716112505648](https://s2.loli.net/2024/05/16/RmezGMnuCr9qySw.png)\n\n\n\n### 2.启动Django项目`WSGIHandler.__init__` \n\n![image-20230716121612821](https://s2.loli.net/2024/05/16/w9fpduBPR5yjJ1s.png)\n\n![image-20230716121637108](https://s2.loli.net/2024/05/16/vDkNrwV5Hu4sQoT.png)\n\n\n\n\n\n### 3.请求到来`WSGIHandler.__call__` \n\n流程：中间件的执行、路由匹配、视图函数的执行。\n\n\n\n### 小结\n\n- 1.7.x源码，底层实现，是基于好几个列表。\n\n- 4.x源码，\n\n  ```\n  函数的作用域 + 闭包 + 装饰器\n  面向对象 + __call__方法\n  ```\n\n  ```\n  # 核心\n  # handler = SecurityMiddleware对象\n  #             __call__\n  #                process_request\n  #                get_reponse = SessionMiddleware对象\n  #                process_response \n  #                              __call__\n  #                                   process_request \n  #                                   get_reponse = CommonMiddleware对象\n  #                                   process_response\n  #                                                 __call__\n  #                                                     process_request\n  #                                                     get_reponse = KeLaMiddleware对象\n  #                                                     process_response\n  ```\n\n  \n\n### 答疑\n\n- 没悟透，不需要吾、只需要懂【不需要背+建立】\n- 有些难\n  - 入门，听懂+能用（全家桶）\n  - 文档，用法没有源码。\n  - 源码，到底是怎么实现的功能（不修改、扩展）【*】\n- 感觉听懂了，但又不清楚，这是不是**学源码**的正常情况，看B站视频写程序都很简单，也容易懂\n- 课下还是得自己分析分析，一定会忘记\n\n","tags":["python","django","中间件"],"categories":["python","django"]},{"title":"Django-的国际化与本地化详解","url":"/2024/05/13/Django-的国际化与本地化详解/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>Django 的国际化与本地化详解</strong></font>\n\n<!--more-->\n\n概要\n随着全球化的发展，为 Web 应用提供多语言支持变得日益重要。Django 作为一个功能强大的 Web 框架，提供了一套完整的国际化（i18n）和本地化（l10n）工具，使得开发多语言应用变得简单。本文将详细介绍 Django 中的国际化和本地化机制，并通过丰富的示例来展示如何实现。\n\n---\n\n#### 1. 国际化与本地化基础\n\n+ **国际化（i18n）**：指的是设计软件产品以便轻松适配不同语言和地区，而无需进行重大的改动。\n+ **本地化（l10n）**：指的是根据特定语言和地区的需要，将国际化的产品进行具体适配的过程。\n\n#### 2. 配置 Django 项目进行国际化和本地化\n\n首先，需要在 Django 项目的 `settings.py` 文件中启用国际化和本地化相关的设置。\n\n```python\n# settings.py\n# 启用国际化\nUSE_I18N = True\n# 启用本地化\nUSE_L10N = True\n# 设置默认语言\nLANGUAGE_CODE = 'en-us'\n# 设置支持的语言\nLANGUAGES = [\n    ('en', 'English'),\n    ('zh-hans', 'Simplified Chinese'),\n]\n# 设置国际化翻译文件的路径\nLOCALE_PATHS = [os.path.join(BASE_DIR, 'locale')]\n```\n\n#### 3. 创建和编译翻译文件\n\nDjango 使用 GNU gettext 工具管理翻译。首先，需要创建翻译文件：\n\n```python\ndjango-admin makemessages -l zh_hans\n```\n\n这将为简体中文创建一个翻译文件。然后，可以在生成的 `.po` 文件中添加翻译。\n\n```python\n# locale/zh_hans/LC_MESSAGES/django.po\n \nmsgid \"Welcome\"\nmsgstr \"欢迎\"\n```\n\n编译翻译文件：\n\n```python\ndjango-admin compilemessages\n```\n\n#### 4. 在模板中使用国际化\n\n在 Django 模板中，使用 `{% trans %}` 标签来标记需要翻译的字符串。\n\n```html\n<!-- templates/my_template.html -->\n \n{% load i18n %}\n<p>{% trans \"Welcome\" %}</p>\n```\n\n#### 5. 在 Python 代码中使用国际化\n\n在 Python 代码中，使用 `gettext` 函数来标记和翻译字符串。\n\n```python\nfrom django.utils.translation import gettext as _\n \ndef my_view(request):\n    message = _(\"Welcome\")\n    # ...\n```\n\n#### 6. 本地化日期和时间\n\nDjango 还提供了本地化日期和时间的功能。在模板中，可以使用 `{% localize %}` 标签。\n\n```html\n{% load l10n %}\n \n{% localize on %}\n    {{ my_date }}\n{% endlocalize %}\n```\n\n#### 7. 中间件和 URL 配置\n\n为了根据用户的语言偏好动态切换语言，可以使用 Django 的 `LocaleMiddleware`。\n\n```python\n# settings.py\n \nMIDDLEWARE = [\n    # ...\n    'django.middleware.locale.LocaleMiddleware',\n    # ...\n]\n```\n\n同时，可以在 URL 中添加语言前缀来支持不同语言的页面。\n\n```python\n# urls.py\n \nfrom django.conf.urls.i18n import i18n_patterns\nfrom . import views\n \nurlpatterns = i18n_patterns(\n    path('welcome/', views.welcome, name='welcome'),\n    # ...\n)\n```\n\n#### 8. 测试多语言功能\n\n在开发过程中，需要确保各种语言的正确显示和切换。可以通过修改浏览器的语言设置来测试不同语言环境下的显示效果。\n\n#### 结论\n\n通过 Django 的国际化和本地化功能，可以有效地为应用添加多语言支持，满足不同地区用户的需求。虽然这个过程可能涉及到复杂的配置和大量的翻译工作，但 Django 提供的工具和框架使这一过程变得更加可管理和高效。\n\n\n\n\n\n\n\n\n\n\n<font color=#f26522 size=4 face=宋体><strong></strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong></strong></font>\n\n","tags":["python","django"],"categories":["python","django"]},{"title":"django的创建与配置","url":"/2024/05/13/django的创建与配置/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Django 纯净版的创建：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=5 face=宋体><strong>使用Django admin路径：</strong></font>\n\n```bash\npython3 manage.py createsuperuser   # 创建admin账户密码\n```\n\n<font color=#f26522 size=5 face=宋体><strong>安装Django环境：</strong></font>\n\n```bash\n# 安装virtualenv\npip3 install virtualenv\n\n# 创建python环境文件夹\npython3 -m venv django_venv     # (bash 运行结果，会在当前文件夹创建一个django_venv的文件夹)\n\n# source /bin/activate\nsource ./django_venv/bin/activate\n# 备注：如果进入虚拟环境成功，在命令行前面会有一个小括号\n\n# 进入成功后，安装django环境\npip3 install django #国外服务器下载\npip3 install django==2.2     #  指定安装django版本2.2\npip3 install django -i https://pypi.douban.com/simple   #  国内豆瓣源加速连接\n\n# 创建网站项目工程\n# django-admin startproject <网站工程名>\ndjango-admin startproject mysite\n\n# 开启python—django网站服务\npython3 manage.py runserver   # 以默认的方式启动django服务\npython3 manage.py runserver 0.0.0.0:8000  # 命令行模式\n\nnohup python3 manage.py runserver 0.0.0.0:8000 > manage.log 2>&1 &   # 进程模式\n\n# python manage.py startapp <子应用名称>\npython manage.py startapp index  # 创建了一个名叫 的文件夹\n```\n\n<font color=#f26522 size=5 face=宋体><strong>settings：配置</strong></font>\n\n+ 如果使用默认的sqlite数据库：\n\n```bash\n# 在虚拟环境下使用：\npython3 manage.py makemigrations\npython3 manage.py migrate\n```\n\n\n```python\nfrom pathlib import Path\nBASE_DIR = Path(__file__).resolve().parent.parent\nSECRET_KEY = 'django-insecure-p5t$3q2@12loakok_!**=^+c2h+fpgw#ca=zl$@in)(^=tcv^f'\nDEBUG = True\nALLOWED_HOSTS = []\nINSTALLED_APPS = [\n    # 'django.contrib.admin',     #  纯净版django  # django 内置后台管理，简单数据库的增删改查\n    # 'django.contrib.auth',      #  纯净版django 剔除  # 用户登录和认证权限\n    # 'django.contrib.contenttypes',   #  纯净版django 剔除  # 复杂表结构关系\n    # 'django.contrib.sessions',    #  纯净版django 剔除  # 如果项目中有登录成功 让用户可以访问\n    # 'django.contrib.messages',    #  纯净版django 剔除  # 消息展示，依赖Session\n    'django.contrib.staticfiles',   # 静态资源处理，图片、css、js等\n]\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    # 'django.contrib.sessions.middleware.SessionMiddleware',   # 纯净版django 剔除\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    # 'django.contrib.auth.middleware.AuthenticationMiddleware',   # 纯净版django 剔除\n    # 'django.contrib.messages.middleware.MessageMiddleware',   # 纯净版django 剔除\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n]\nROOT_URLCONF = 'Dome_Datou.urls'\nTEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [],\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                # 'django.contrib.auth.context_processors.auth',   # 纯净版django 剔除\n                # 'django.contrib.messages.context_processors.messages',    # 纯净版django 剔除\n            ],\n        },\n    },\n]\nWSGI_APPLICATION = 'Dome_Datou.wsgi.application'\n# >>>  python3 manage.py makemigrations\n# >>>  python3 manage.py migrate\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': BASE_DIR / 'db.sqlite3',\n    }\n}\nAUTH_PASSWORD_VALIDATORS = [\n    {\n        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',\n    },\n]\n\n# LANGUAGE_CODE = 'en-us'    # 设置 英文\nLANGUAGE_CODE = 'zh-hans'    # 设置中文\n# TIME_ZONE = 'UTC'\nTIME_ZONE = 'Asia/Shanghai'  # 亚洲上海\n# 启用国际化\nUSE_I18N = True\n# 启用本地化\n# USE_L10N = True\nUSE_TZ = True\nSTATIC_URL = 'static/'\nDEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'\n\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>urls：配置</strong></font>\n\n```python\nfrom django.contrib import admin\nfrom django.urls import path\n\nurlpatterns = [\n    # path('admin/', admin.site.urls),\n]\n\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>Django 多App的创建：</strong></font>\n\n+ 1、在根目录下创建目录：`apps`\n\n  ```bash\n  # 创建apps\n  # 以下命令 在项目根目录下运行 就是在有 manage.py文件的那个路径\n  mkdir apps  # 创建apps文件夹\n  \n  # 创建即将创建的 app名称文件夹\n  mkdir apps/app01\n  \n  # 创建app01\n  python3 manage.py startapp app01 apps/app01   # 在apps/app01 中创建app01程序\n  \n  \n  # 创建即将创建的 app名称文件夹\n  mkdir apps/www\n  \n  # 创建app01\n  python3 manage.py startapp www apps/www   # 在apps/www 中创建www程序\n  ```\n\n+ 修改app下面 apps.py中的配置文件\n\n![修改apps中的配置](https://s2.loli.net/2024/05/14/jGvOfcRNmyKuEnk.png)\n\n+ 在settings中组册app\n\n  ```python\n  INSTALLED_APPS = [\n      # 'django.contrib.admin',     #  纯净版django  # django 内置后台管理，简单数据库的增删改查\n      # 'django.contrib.auth',      #  纯净版django 剔除  # 用户登录和认证权限\n      # 'django.contrib.contenttypes',   #  纯净版django 剔除  # 复杂表结构关系\n      # 'django.contrib.sessions',    #  纯净版django 剔除  # 如果项目中有登录成功 让用户可以访问\n      # 'django.contrib.messages',    #  纯净版django 剔除  # 消息展示，依赖Session\n      'django.contrib.staticfiles',   # 静态资源处理，图片、css、js等\n      'apps.app01.apps.App01Config'\n  ]\n  ```\n\n  ![image-20240514014804221](https://s2.loli.net/2024/05/14/goejlnG4syaN6ri.png)\n\n<font color=#00b2c2 size=5 face=宋体><strong>路由：配置</strong></font>\n\n+ 路由分发配置：\n\n  + 访问url：http://127.0.0.1:8000/web/user/\n\n  + 主路由：\n\n    ```python\n    from django.urls import path, re_path, include\n    urlpatterns = [\n        path(\"web/\", include(\"apps.www.urls\"))\n    ]\n    ```\n\n  + 子路由（apps/www）：\n\n    ```python\n    from django.urls import path\n    from apps.www import views\n    \n    urlpatterns = [\n        path(\"user/\", views.user)\n    ]\n    ```\n\n  + 视图配置：\n\n    ```python\n    from django.http import HttpResponse\n    # Create your views here.\n    def user(request):\n        return HttpResponse(\"创建用户名成功 >>> \")\n    ```\n\n+ 路由中 `name`的使用 => 反向生成网址，登录成功 => 跳转页面：\n\n  ```python\n  from apps.app01 import views\n  # 自定义请求 添加模块\n  from django.urls import URLPattern, ResolverMatch\n  from django.urls.resolvers import RoutePattern, RegexPattern     # RoutePattern：普通路由， 正则路由： RegexPattern\n  \n  \n  class MyURLPattern(URLPattern):\n      def resolve(self, path):\n          match = self.pattern.match(path)\n          if match:\n              new_path, args, captured_kwargs = match\n              # Pass any default args as **kwargs.\n              kwargs = {**captured_kwargs, **self.default_args}\n              return ResolverMatch(\n                  self.callback,\n                  args,\n                  kwargs,\n                  self.pattern.name,\n                  route=str(self.pattern),\n                  captured_kwargs=captured_kwargs,\n                  extra_kwargs=self.default_args,\n              )\n  \n  \n  class MyRoutePattern(RoutePattern):\n      def match(self, path):\n          match = self.regex.search(path)\n          if match:\n              # RoutePattern doesn't allow non-named groups so args are ignored.\n              kwargs = match.groupdict()\n              for key, value in kwargs.items():\n                  converter = self.converters[key]\n                  try:\n                      kwargs[key] = converter.to_python(value)\n                  except ValueError:\n                      return None\n              return path[match.end():], (), kwargs\n          return None\n  urlpatterns = [\n    MyURLPattern(MyRoutePattern(\"login/<str:v1>\", name=\"n1\", is_endpoint=True), views.login, None, \"n1\"),   # 等价于 path('login/', views.login, name=\"n1\"),\n  ]\n  ```\n\n  ```python\n  def login(request, v1):\n    \turl = reverse('n1', kwargs={\"v1\": v1})   # kwargs={\"<路由中的键>\": <用户传递进来的v1>}\n      print(url) # /login/sdad\n      return HttpResponse(\"欢迎登录！\")\n  ```\n\n+ `urls.py` 配置:\n\n  ```python\n  from django.contrib import admin\n  from django.urls import path, re_path\n  from apps.app01 import views\n  \n  # 自定义请求 添加模块\n  from django.urls import URLPattern, ResolverMatch\n  from django.urls.resolvers import RoutePattern, RegexPattern     # RoutePattern：普通路由， 正则路由： RegexPattern\n  \n  # 重写 URLPattern\n  class MyURLPattern(URLPattern):\n      def resolve(self, path):\n          match = self.pattern.match(path)\n          if match:\n              new_path, args, captured_kwargs = match\n              # Pass any default args as **kwargs.\n              kwargs = {**captured_kwargs, **self.default_args}\n              return ResolverMatch(\n                  self.callback,\n                  args,\n                  kwargs,\n                  self.pattern.name,\n                  route=str(self.pattern),\n                  captured_kwargs=captured_kwargs,\n                  extra_kwargs=self.default_args,\n              )\n  \n  # 重写 RoutePattern\n  class MyRoutePattern(RoutePattern):\n      def match(self, path):\n          match = self.regex.search(path)\n          if match:\n              # RoutePattern doesn't allow non-named groups so args are ignored.\n              kwargs = match.groupdict()\n              for key, value in kwargs.items():\n                  converter = self.converters[key]\n                  try:\n                      kwargs[key] = converter.to_python(value)\n                  except ValueError:\n                      return None\n              return path[match.end():], (), kwargs\n          return None\n  \n  urlpatterns = [\n      # 默认后台登录页面， 一般不用(自己重写)\n      # path('admin/', admin.site.urls),\n  \n      # http://127.0.0.1:8000/login/    # 默认地址 无传参\n      # http://127.0.0.1:8000/login/?a1=1&a2=2   # 默认传递两个参数 ： a1=1   a2=2\n      MyURLPattern(MyRoutePattern(\"login/\", name=None, is_endpoint=True), views.login, None, None),\n      # path('login/', views.login),\n  \n      # http://127.0.0.1:8000/info/2222/\n      # http://127.0.0.1:8000/info/2222/?a1=1&a2=2\n      # path(\"info/<int:v1>/\", views.info),\n      MyURLPattern(MyRoutePattern(\"info/<int:v1>/\", name=None, is_endpoint=True), views.info, None, None),\n  \n      # http://127.0.0.1:8000/info/2222/\n      # http://127.0.0.1:8000/info/2222/?a1=1&a2=2\n      # path(\"xx/<path:v2>/\", views.s_path),\n      MyURLPattern(MyRoutePattern(\"xx/<path:v2>/\", name=None, is_endpoint=True), views.s_path, None, None),\n  \n      # # http://127.0.0.1:8000/xx/f9aa6e73-c310-8aab-a36c-e9758d8c4a1d/\n      # path(\"xx/<uuid:v3>/\", views.uuid),\n      MyURLPattern(MyRoutePattern(\"xx/<uuid:v3>/\", name=None, is_endpoint=True), views.uuid, None, None),\n  \n      # # http://127.0.0.1:8000/other/11/kanoc/\n      # path(\"other/<int:v1>/<str:v2>/\", views.other),\n      MyURLPattern(MyRoutePattern(\"other/<int:v1>/<str:v2>/\", name=None, is_endpoint=True), views.other, None, None),\n  \n      # 要使用 re_path 要引入文件  from django.urls import path, re_path\n      # # http://127.0.0.1:8000/yy/2024-05-14/\n      # re_path(r'yy/(\\d{4})-(\\d{2})-(\\d{2})', views.yy),\n      MyURLPattern(RegexPattern(r'yy/(\\d{4})-(\\d{2})-(\\d{2})', name=None, is_endpoint=True), views.yy, None, None),\n  ```\n\n+ `views.py` 配置:\n\n```python\nfrom django.shortcuts import render\nfrom django.http import HttpResponse\n\n\n# Create your views here.\n\n# path('login/', views.login),\ndef login(request):\n    print(request.GET)\n    # # 如果 http://127.0.0.1:8000/login/?a1=1&a2=2\n    # # 则：\n    # a1 = request.GET.get('a1')   # 获取 a1的值\n    # a2 = request.GET.get('a2')   # 获取 a2的值\n    # print(a1)\n    # print(a2)\n    return HttpResponse(\"欢迎登录！\")\n\n# path(\"info/<int:v1>/\", views.info)\n# http://127.0.0.1:8000/info/2222/\ndef info(request, v1):\n    print(v1)  # 结果 ：2222\n    print(request.GET)\n    return HttpResponse(\"欢迎登录！\")\n\n# path(\"xx/<path:v2>/\", views.s_path),\n# http://127.0.0.1:8000/xx/user/ps/ja/\ndef s_path(request, v2):\n    print(v2)  # 结果 ：user/ps/ja\n    print(request.GET)\n    return HttpResponse(\"欢迎登录！\")\n\n# path(\"xx/<uuid:v3>/\", views.uuid)\n# http://127.0.0.1:8000/xx/f9aa6e73-c310-8aab-a36c-e9758d8c4a1d/\ndef uuid(request, v3):\n    print(v3)  # 结果 ：f9aa6e73-c310-8aab-a36c-e9758d8c4a1d\n    print(request.GET)\n    return HttpResponse(\"欢迎登录！\")\n\n# path(\"other/<int:v1>/<str:v2>/\", views.uuid),\n# http://127.0.0.1:8000/other/11/kanoc/\ndef other(request, v1, v2):\n    print(v1, v2)  # 结果 ：11    kanoc\n    print(request.GET)\n    return HttpResponse(\"欢迎登录！\")\n\n# 此路由 为正则匹配路由， 要使用则正匹配路由 需要在路由配置文件中 引入模块 from django.urls import path, re_path\n# re_path(r'yy/(\\d{4})-(\\d{2})-(\\d{2})', views.other)\n# http://127.0.0.1:8000/yy/2024-05-14/\n\ndef yy(request, v1, v2, v3):\n    print(v1, v2, v3)  # 结果 ：2024 05 14\n    print(request.GET)\n    return HttpResponse(\"欢迎登录！\")\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong> URL-CBV：写法</strong></font>\n\n+ cbv写法 django会自动定位到 请求到方法，不用自己单独的去判断`post` 、`get`...\n\n![image-20240514215331327](https://s2.loli.net/2024/05/14/M7szuLmA42P1Kkw.png)\n\n```python\nfrom django.urls import path\nfrom apps.CBV import views\n\nurlpatterns = [\n    path(\"cbv/\", views.CBV.as_view())\n]\n```\n\n```python\nfrom django.shortcuts import render\nfrom django.http import HttpResponse\nfrom django.views import View\n\n# Create your views here.\n\nclass CBV(View):\n    def get(self, request):\n        return HttpResponse(\"The CBV get\")\n\n    def post(self, request):\n        return HttpResponse(\"The CBV post\")\n```\n\n\n\n<font color=#00b2c2 size=5 face=宋体><strong> URL-CBV：取值</strong></font>\n\n```python\nfrom django.urls import path, re_path\nfrom apps.CBV import views\n\nurlpatterns = [\n    path(\"cbv/<int:v1>\", views.CBV.as_view()),    # 传递的 v1 会放到 self.kwargs\n    re_path(\"cbv/(\\d+)/\", views.CBV.as_view()),    # 传递的 参数 会放到 self.args\n    re_path(\"cbv/(?P<v1>\\d+)/\", views.CBV.as_view())    # 传递的 参数 会放到 self.kwargs\n]\n```\n\n\n\n```python\nfrom django.shortcuts import render\nfrom django.http import HttpResponse\nfrom django.views import View\nclass CBV(View):\n    def get(self, request, v1):\n       # 非命名的方式 传递的参数，会放到 self.args 命名的参数，会放到self.kwargs\n        print(self.request, self.args, self.kwargs) \n        return HttpResponse(\"The CBV get\")\n    def post(self, request):\n        return HttpResponse(\"The CBV post\")\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>ORM：配置</strong></font>\n\n+ 新建app：\n\n```python\npython3 manage.py startapp app01 # 在当前目录下 创建一个叫 app01的文件夹\n```\n\n+ settings 中组册app目录：\n\n```python\n\nINSTALLED_APPS = [\n    # 'django.contrib.admin',     #  纯净版django  # django 内置后台管理，简单数据库的增删改查\n    # 'django.contrib.auth',      #  纯净版django 剔除  # 用户登录和认证权限\n    # 'django.contrib.contenttypes',   #  纯净版django 剔除  # 复杂表结构关系\n    # 'django.contrib.sessions',    #  纯净版django 剔除  # 如果项目中有登录成功 让用户可以访问\n    # 'django.contrib.messages',    #  纯净版django 剔除  # 消息展示，依赖Session\n    'django.contrib.staticfiles',   # 静态资源处理，图片、css、js等\n    'app01.apps.App01Config'    # 添加app\n]\n```\n\n+ models.py 配置:\n\n```python\nfrom django.db import models\n# Create your models here.\nclass UserInfo(models.Model):\n    username = models.CharField(verbose_name=\"用户名\", max_length=32)\n    password = models.CharField(verbose_name=\"密码\", max_length=64)\n\n```\n\n+ 读取models 生成相应本地配置：\n\n```python\n1、>>> python3 manage.py makemigrations   # 生成配置  \n2、>>> python3 manage.py migrate  # 载入配置\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>返回数据：</strong></font>\n\n```python\nfrom django.http import HttpResponse, JsonResponse\nfrom django.shortcuts import render, redirect\n\nreturn HttpResponse(\"The CBV get\")   # 返回字符串\nreturn JsonResponse({\"status\": True, \"name\": \"小蘑菇\"}, json_dumps_params={\"ensure_ascii\": False})   # 返回中文 而非 ascii 码\nreturn render(request, \"demo.html\")   # 返回html 页面\nreturn redirect(\"https://www.baidu.com\", permanent=False)   # 返回 302 临时重定向\nreturn redirect(\"https://www.baidu.com\", permanent=True)  # 返回 301 永久重定向\n```\n\n","tags":["python","django"],"categories":["python","django"]},{"title":"安装文档","url":"/2024/05/12/安装文档/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>安装文档：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>一：安装Redis</strong></font>\n\n```bash\nwget http://download.redis.io/releases/redis-3.2.8.tar.gz\ntar -xzvf redis-3.2.8.tar.gz\ncd redis-3.2.8\nmake\nmake install\nvim redis.conf\n```\n\n> 修改以下配置（不要配置认证）\n>\n> ```bash\n> daemonize yes\n> loglevel warning\n> logfile \"/var/log/redis.log\"\n> bind 你的服务器ip地址\n> # 例如： bind 127.0.0.1 192.168.88.201\n> ```\n>\n> ```bash\n> cd ../\n> mv redis-3.2.8 /usr/local/redis\n> /usr/local/redis/src/redis-server /usr/local/redis/redis.conf\n> ```\n>\n> \n\n<font color=#f26522 size=4 face=宋体><strong>二：安装MySQL</strong></font>\n\n```bash\nvim /etc/my.cnf\n\n\n[mysqld]\ncharacter_set_server = utf8\n\n# 添加以上字段\n/etc/init.d/mysqld restart     \t#centos 6\nsystemctl start mysqld.service \t#centos 7\nmysql -uroot -p  \t\t\t\t#初始密码为空，直接回车就行\nmysql> create database opsmanage DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;\nmysql> grant all privileges on opsmanage.* to root@'%' identified by 'password';\nmysql>\\q\n```\n\n<font color=#f26522 size=4 face=宋体><strong>二：安装python3.8</strong></font>\n\n```bash\nsudo yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel libffi-devel gdbm-devel db4-devel libpcap-devel xz-devel make zlib zlib-dev openssl-devel sqlite-devel bzip2-devel libffi libffi-devel gcc gcc-c++ wget\n\n# 拉取 python3.8.1\nwget https://www.python.org/ftp/python/3.8.1/Python-3.8.1.tgz\n\n# 解压压缩包\ntar -zxvf Python-3.8.1.tgz\n\n# 进入文件夹\ncd Python-3.8.1\n\n# 配置安装位置\n# ./configure prefix=/usr/local/python3\n./configure --prefix=/usr/local/python3 --enable-shared --with-ssl\n\n# 如果编译过，就需要清空缓存\nmake clean  # 清空缓存 （重要）\n\n# 安装\nmake && make install\n\n#添加python3的软链接 \nln -s /usr/local/python3/bin/python3.8 /usr/bin/python3 \n\n#添加 pip3 的软链接 \nln -s /usr/local/python3/bin/pip3.8 /usr/bin/pip3\n\n# # 所在动态库在 /usr/local/python3/lib 中\ncp /usr/local/python3/lib/libpython3.8.a /usr/lib64/\ncp /usr/local/python3/lib/libpython3.8.so /usr/lib64/\ncp /usr/local/python3/lib/libpython3.8.so.1.0 /usr/lib64/\ncp /usr/local/python3/lib/libpython3.so /usr/lib64/\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n<font color=#b0171f size=2 face=宋体><strong></strong></font>\n\n","tags":["安装文档"],"categories":["安装文档"]},{"title":"收藏-常用脚本","url":"/2024/05/11/收藏-常用脚本/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>收藏-常用脚本：</strong></font>\n\n<!--more-->\n\n[Python、Go 打包运行代码 ](https://blog.teadan.com/2024/04/02/Python、Go 打包运行代码/)\n\n[python-虚拟环境包(requirements.txt)的导出与安装 ](https://blog.teadan.com/2024/03/20/python-虚拟环境包(requirements.txt)的导出与安装/)\n\n[Nginx跨域解决方案 ](https://blog.teadan.com/2023/03/20/Nginx跨域解决方案/)\n\n[Django_学习笔记 ](https://blog.teadan.com/2023/05/22/Django-学习笔记/)\n\n[关于Jet Brains历史版本获取 ](https://blog.teadan.com/2023/03/20/关于Jet-Brains历史版本获取/)\n\n[django-跨域支持配置 ](https://blog.teadan.com/2024/03/20/django-跨域支持配置/)\n\n[宝塔部署Django进程守护Supervisor](https://blog.teadan.com/2023/03/20/宝塔部署Django进程守护Supervisor/)\n\n[pip-更换源 ](https://blog.teadan.com/2024/05/01/pip-更换源/)\n\n[必备工具-代码类 ](https://blog.teadan.com/2024/04/24/必备工具-代码类/)\n\n[一键搞定多层跳板访问目标机器 ](https://blog.teadan.com/2024/04/13/一键搞定多层跳板访问目标机器/)\n\n[Shadowsocks 一键安装脚本（四合一） ](https://blog.teadan.com/2024/01/25/Shadowsocks-一键安装脚本（四合一）/)\n\n[必备工具 ](https://blog.teadan.com/2023/07/11/必备工具/)\n\n[centos测网速脚本 ](https://blog.teadan.com/2023/06/13/centos测网速脚本/)\n\n[python 时间格式返回值 ](https://blog.teadan.com/2023/05/27/python-时间格式返回值/)\n\n[ThreadPoolExecutor多线程返回值 ](https://blog.teadan.com/2023/03/20/ThreadPoolExecutor多线程返回值/)\n\n[V2ray官方一键安装脚本(2021/10) ](https://blog.teadan.com/2023/03/20/V2ray官方一键安装脚本-2021-10/)\n\n[m3u8下载协议不在白名单 ](https://blog.teadan.com/2023/03/20/m3u8下载协议不在白名单/)\n","tags":["收藏","常用脚本"],"categories":["工具"]},{"title":"Linux-CentOS-定时运行脚本配置的方法","url":"/2024/05/11/Linux-CentOS-定时运行脚本配置的方法/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>Linux CentOS 定时运行脚本配置的方法:</strong></font>\n\n<!--more-->\n\n本文来自于：[Linux CentOS 定时运行脚本配置的方法-腾讯云开发者社区-腾讯云 (tencent.com)](https://cloud.tencent.com/developer/article/1720864)\n\n很多时候我们有希望[服务器](https://cloud.tencent.com/act/pro/promotion-cvm?from_column=20065&from=20065)定时去运行一个脚本来触发一个操作，比如使用七牛的工具上传，如果同步文件里面有新增加一个文件，这个时候我们可以提供定时脚本去完成我们需要的同步命令(七牛的qrsbox工具是自动会同步的，只需要在同步文件夹里面增加一个文件就会自动监听上传)。\n\n\n\n---\n\n<br>\n\n---\n\n\n\n**1.安装crontab**\n\n```bash\n[root@CentOS ~]# yum install vixie-cron\n[root@CentOS ~]# yum install crontabs\n```\n\nvixie-cron软件包是cron的主程序；\n\ncrontabs软件包是用来安装、卸装、或列举用来驱动 cron 守护进程的表格的程序。\n\n\n\n---\n\n<br>\n\n---\n\n\n\n**\n\n**2.开启crontab服务**\n\n```bash\nservice crond start //启动服务\n```\n\n用以下的方法启动、关闭这个cron服务：\n\n+ service crond start //启动服务\n\n+ service crond stop //关闭服务\n\n+ service crond restart //重启服务\n\n+ service crond reload //重新载入配置\n\n+ 查看crontab服务状态：service crond status\n\n+ 手动启动crontab服务：service crond start\n\n+ 查看crontab服务是否已设置为开机启动，执行命令：ntsysv\n\n---\n\n<br>\n\n---\n\n\n\n**加入开机自动启动:** \n\nchkconfig –level 35 crond on\n\n另外顺带介绍下ntsysv和chkconfig命令：\n\n关于ntsysv命令是类图形界面管理模式来设置开机启动，需要先安装才可以使用，yum install -y ntsysv安装好之后只需要运行一个ntsysv即可出现一个类似图像化的管理界面。\n\n上下键：可以在中间的方框当中，在各个服务之间移动；\n\n空格键：可以用来选择你所需要的服务，[*]表示开起启动；\n\ntab键：可以在方框、OK、Cancel之间移动；\n\n[F1]键：可以显示该服务的说明。\n\n关于chkconfig命令行的形式设置是否开机自启动或者查询某个服务6个开机级别的运行情况。\n\n\n\n---\n\n<br>\n\n---\n\n\n\n**设置开机自动启动crond服务:** \n\n[root@CentOS ~]# chkconfig crond on\n\n查看各个开机级别的crond服务运行情况\n\n[root@CentOS ~]# chkconfig –list crond\n\ncrond 0:关闭 1:关闭 2:启用 3:启用 4:启用 5:启用 6:关闭\n\n可以看到2、3、4、5级别开机会自动启动crond服务\n\n\n\n---\n\n<br>\n\n---\n\n\n\n**取消开机自动启动crond服务:** \n\n[root@CentOS ~]# chkconfig crond off\n\n\n\n---\n\n<br>\n\n---\n\n\n\n**3.设置需要执行的脚本** \n\n新增调度任务可用两种方法：\n\n1)、在命令行输入: crontab -e 然后添加相应的任务，wq存盘退出。\n\n2)、直接编辑/etc/crontab 文件，即vi /etc/crontab，添加相应的任务。\n\n`crontab -e配置是针对某个用户的，而编辑/etc/crontab是针对系统的任务`\n\n查看调度任务\n\n`crontab -l //列出当前的所有调度任务`\n\n`crontab -l -u jp //列出用户jp的所有调度任务`\n\n删除任务调度工作\n\n`crontab -r //删除所有任务调度工作`\n\n直接编辑 vim /etc/crontab ,默认的文件形式如下：\n\n```bash\nSHELL=/bin/bash\nPATH=/sbin:/bin:/usr/sbin:/usr/bin\nMAILTO=root\nHOME=/\n\n# For details see man 4 crontabs\n\n# Example of job definition:\n# .---------------- minute (0 - 59)\n# | .------------- hour (0 - 23)\n# | | .---------- day of month (1 - 31)\n# | | | .------- month (1 - 12) OR jan,feb,mar,apr ...\n# | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat\n# | | | | |\n# * * * * * user-name command to be executed\n```\n\n**这个文本解释的已经比较直观了，其中** \n\n星号（*）：代表所有可能的值，例如month字段如果是星号，则表示在满足其它字段的制约条件后每月都执行该命令操作。\n\n逗号（,）：可以用逗号隔开的值指定一个列表范围，例如，“1,2,5,7,8,9”\n\n中杠（-）：可以用整数之间的中杠表示一个整数范围，例如“2-6”表示“2,3,4,5,6”\n\n正斜线（/）：可以用正斜线指定时间的间隔频率，例如“0-23/2”表示每两小时执行一次。同时正斜线可以和星号一起使用，例如*/10，如果用在minute字段，表示每十分钟执行一次。\n\n这里举几个例子，基本涵盖了常见的一些情况：\n\n\n\n---\n\n<br>\n\n---\n\n\n\n**实例1**\n\n```bash\n5   *    *      *   *   ls     指定每小时的第5分钟执行一次ls命令\n30   5    *      *   *   ls     指定每天的 5:30 执行ls命令\n30   7    8      *   *   ls     指定每月8号的7：30分执行ls命令\n30   5    8      6   *   ls     指定每年的6月8日5：30执行ls命令\n30   5    8      6   *   ls     指定每年的6月8日5：30执行ls命令\n30   6    *      *   0   ls     指定每星期日的6:30执行ls命令\n30   3   10,20     *   *   ls     每月10号及20号的3：30执行ls命令\n25   8-11  *      *   *   ls     每天8-11点的第25分钟执行ls命令\n*/15  *    *      *   *   ls     每15分钟执行一次ls命令\n30   6   */10     *   *   ls     每个月中，每隔10天6:30执行一次ls命令\n22   4    *      *   *   root   run-parts   /etc/cron.daily\n#每天4：22以root身份执行/etc/cron.daily目录中的所有可执行文件，run-parts参数表示，执行后面目录中的所有可执行文件。\n```\n\n\n\n---\n\n<br>\n\n---\n\n\n\n**实例2**\n\n```bash\n#每晚的21:30 重启apache\n30 21 * * * /usr/local/etc/rc.d/lighttpd restart\n#每月1、10、22日的4 : 45重启apache\n45 4 1,10,22 * * /usr/local/etc/rc.d/lighttpd restart\n#每周六、周日的1 : 10重启apache\n10 1 * * 6,0 /usr/local/etc/rc.d/lighttpd restart\n#每天18 : 00至23 : 00之间每隔30分钟重启apache\n0,30 18-23 * * * /usr/local/etc/rc.d/lighttpd restart\n#每星期六的11 : 00 pm重启apache\n0 23 * * 6 /usr/local/etc/rc.d/lighttpd restart\n#晚上11点到早上7点之间，每隔一小时重启apache\n0 23-7/1 * * * /usr/local/etc/rc.d/lighttpd restart\n#每一小时重启apache\n0 */1 * * * /usr/local/etc/rc.d/lighttpd restart\n#每月的4号与每周一到周三的11点重启apache\n0 11 4 * mon-wed /usr/local/etc/rc.d/lighttpd restart\n#一月一号的4点重启apache\n0 4 1 jan * /usr/local/etc/rc.d/lighttpd restart\n#每半小时同步一下时间\n0/30 * * * * /usr/sbin/ntpdate 210.72.145.44\n```\n\n\n\n---\n\n<br>\n\n---\n\n\n\n**注意** \n\n\\* *1 * * * 命令表示是每小时之内的每一分钟都执行。\n\n必须指定在每个小时的第几分钟执行，也就是说第一个*号必须改成一个数值。\n\n因为*号表示的就是每一分钟。\n\n另外小时位的/1和没有区别，都是每小时一次。\n\n如果是设置*/2，实际上是能被2整除的小时数而不是从定时设置开始2小时后执行，比如9点设的到10点就会执行。\n\n\n\n---\n\n<br>\n\n---\n\n\n\n**最后可能会遇到下面这个问题**\n\nroot用户下 输入 crontab -l 显示\n\nno crontab for root 例如：\n\n[root@CentOS ~]# crontab -l\n\nno crontab for root\n\n这个问题非常简单，同样在 root 用户下输入 crontab -e\n\n按 Esc 按： wq 回车\n\n在输入 crontab -l 就没有问题了\n\n主要原因是由于这个liunx服务器 第一次使用 crontab ，还没有生成对应的文件导致的，执行了 编辑（crontab -e）后 就生成了这个文件\n\n以上这篇Linux CentOS 定时运行脚本配置的方法就是小编分享给大家的全部内容了，希望能给大家一个参考。\n","tags":["定时脚本"],"categories":["运维"]},{"title":"pip-更换源","url":"/2024/05/01/pip-更换源/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>pip 更换源：</strong></font>\n\n<!--more-->\n\n## 使用全局配置，建议使用豆瓣\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>阿里源：</strong></font>\n\n```bash\npip3.8 config set global.index-url https://mirrors.aliyun.com/pypi/simple\npip3.8 config set install.trusted-host mirrors.aliyun.com\n```\n\n<font color=#f26522 size=4 face=宋体><strong>如豆瓣：</strong></font>\n\n```bash\npip config set global.index-url http://pypi.douban.com/simple/\npip config set install.trusted-host pypi.douban.com\n```\n\n<font color=#f26522 size=4 face=宋体><strong>一、清华源：</strong></font>\n\n```bash\npip install xxx -i https://pypi.tuna.tsinghua.edu.cn/simple/\n```\n\n<font color=#f26522 size=4 face=宋体><strong>二、阿里源：</strong></font>\n\n```bash\npip install xxx -i https://mirrors.aliyun.com/pypi/simple\n```\n\n<font color=#f26522 size=4 face=宋体><strong>三、中科大源：</strong></font>\n\n```bash\npip install xxx -i https://pypi.mirrors.ustc.edu.cn/simple/\n```\n\n<font color=#f26522 size=4 face=宋体><strong>四、豆瓣源：</strong></font>\n\n```bash\npip install xxx -i http://pypi.douban.com/simple/\n```\n","tags":["基础","pycharm","源"],"categories":["python"]},{"title":"nginx+nginx-rtmp-module+ffmpeg-搭建流媒体-点播-服务器","url":"/2024/04/24/nginx-nginx-rtmp-module-ffmpeg-搭建流媒体-点播-服务器/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>一、nginx编译安装 `nginx-rtmp-module`</strong></font>\n\n<!--more-->\n\n```bash\n# 项目地址：https://github.com/arut/nginx-rtmp-module\n# git clone https://github.com/arut/nginx-rtmp-module.git\nwget https://github.com/arut/nginx-rtmp-module/archive/refs/heads/master.zip\n\n# 复制下载的文件copy到 \n/www/server/nginx-rtmp-module\n\n# 进入宝塔nginx 安装bash文件目录\ncd  /www/server/panel/install/\n\n# 修改文件，添加模块 nginx.sh\n--add-module=/www/server/nginx-rtmp-module\n\n# 安装命令\nbash nginx.sh install 1.21\n```\n\n![img](https://s2.loli.net/2024/04/24/K12IrgkMCOUqoTl.png)\n\n![未命名 5](https://s2.loli.net/2024/04/24/dVAwjsRSQJniZPC.png)\n\n\n\n# 使用nginx搭建音视频点播服务——基于HLS协议\n\n+ 本文参考自https://blog.csdn.net/SeeDoubleU/article/details/121805174\n\n<font color=#f26522 size=5 face=宋体><strong>1 音视频技术：</strong></font>\n\n+ 1.1 流媒体\n  + 在网络上传输音、视频等多媒体信息，主要有下载和流式传输两种方案。下载的方式对于体积较大的音、视频数据而言，在使用前下载整个媒体文件耗时很大；流媒体（streaming media）传输提供了一种低延时的方式来避免这个问题，流媒体技术是指将多媒体数据压缩后，经过网络分段发送，在网上即时传输音、视频数据供用户播放的一种技术。\n\n+ 1.2 点播与直播\n  + 点播（VOD，video on demand）即根据用户需求播放，音视频内容一般已经存放在服务器上了，不同于先下载再播放，点播要求即点即播，各大音视频网站（喜马拉雅、优酷、爱奇艺等）提供的服务就是VOD服务。\n  + 直播（Live）需要对音视频内容实时录制，在录制同时以“流”的形式推送到服务器，服务器在收到用户的播放请求后，会将媒体流传输到用户的播放器进行播放，并对延迟有较高的要求，各大直播平台（斗鱼、虎牙等）提供的服务就是直播服务。\n\n+ 1.3 HLS流媒体协议\n  + HLS（HTTP Live Streaming）自适应码率流媒体传输协议，来自Apple公司，该协议基于Http协议，HLS诞生之初旨在能够从iPhone中删除flash，如今已成为使用最广泛的协议。HLS的优缺点也比较明显。\n\n+ HLS的优点：\n\n  + > Html5能够直接支持HLS，有浏览器就能播放，不需要安装额外的app，不用考虑防火墙或者代理问题；HLS也支持最新的H.265编解码器，H.265编码的质量要比H.264高很多。\n    >\n    > HLS的缺点：\n    >\n    > ​\t因为HLS基本是采用了点播切片的方式实现的直播，在直播上相对于其它协议有较高的延迟（5~8秒延迟）。\n\n`除了HLS协议之外，相关的协议还有RTP/RTCP、RTSP、RTMP、MSS、DASH、HDS、WEBRTC、RIST、SRT等……它们都有各自的优缺点。`\n\n+ HLS的原理：\n  + 首先将一个完整音视频分成多个ts格式音视频文件切片，并生成m3u8索引文件，用户下载m3u8索引文件，通过m3u8文件中每段ts切片的索引地址来播放具体的ts切片，在m3u8中可以指定播放相关的参数。\n\n+ 1.4 CDN\n  + CDN（Content Delivery Network）内容分发网络，是为了改善网络服务质量而产生的，它是构建在现有网络基础之上的智能虚拟网络，通过负载均衡、内容分发、调度等完成资源就近获取的目标。\n  + CDN的基本原理是采用各种缓存服务器，将这些缓存服务器分布到用户访问相对集中的地区或网络中，在用户访问网站时，利用全局负载技术将用户的访问指向距离最近的工作正常的缓存服务器上，由缓存服务器直接响应用户请求，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率，CDN网络的诞生大大地改善了互联网的服务质量。\n  + 在互联网上的流媒体服务为了实现更优质的用户体验，一般都需要经过CDN节点进行内容分发。点播、直播技术的选择需要考虑大环境下主流CDN服务供应商能够提供的服务支持，各家对协议的支持也不一样（像阿里云CDN支持RTMP输入，RTMP、FLV、HLS输出），点播需要考虑输出，直播需要考虑输入与输出两端。\n\n</br>\n\n---\n\n</br>\n\n#### <font color=#f26522 size=5 face=宋体><strong>2 搭建点播服务（音视频同理）：</strong></font>\n\n+ #### 2.1 nginx服务器\n\n  + nginx是一个代理服务器，首先需要在Linux上搭建nginx服务，具体的流程可以参考[nginx的安装流程](https://blog.csdn.net/SeeDoubleU/article/details/121727292)[1](https://blog.csdn.net/SeeDoubleU/article/details/121805174#fn1)，搭建视频点播服务器会用到nginx-vod-[module](https://so.csdn.net/so/search?q=module&spm=1001.2101.3001.7020)模块，按照安装流程添加该模块到nginx中，搭建点播服务使用的具体环境如下：\n\n```bash\n系统版本：CentOS Linux release 7.9 2009(Core)\nnginx版本：1.20.1\nnginx-vod-module版本：1.28\n```\n\n+ #### 2.2 nginx-vod-module模块\n\n  + > nginx-vod-module模块是基于nginx来提供VOD（video on demand）服务的第三方模块，它支持基于DASH、HDS、HLS、MSS的点播服务搭建。\n    >\n    > nginx-vod-module下载地址：https://github.com/kaltura/nginx-vod-module/archive/refs/tags/1.28.tar.gz\n    >\n    > 在nginx进行安装配置的过程中，需要使用`--add-module=`选项来添加第三方模块一起进行编译，相关的步骤可以参考模块的github网址：\n    >\n    > nginx-vod-module的github网址：https://github.com/kaltura/nginx-vod-module\n    >\n    > 在配置nginx进行编译的时候使用的配置参数如下：\n    >\n    > ```bash\n    > ./configure --prefix=/web/webserver/nginx-vod-hls --with-http_stub_status_module --with-http_gzip_static_module --with-http_gunzip_module --with-file-aio --with-threads --with-cc-opt=“-O3” --with-http_ssl_module --with-openssl-opt=enable --with-http_mp4_module --with-stream --add-module=…/nginx-vod-module-master\n    > ```\n    >\n    > 配置中主要是附加了一些常规模块，打开了一些配置开关，其中：\n    >\n    > ```\n    > –with-file-aio 异步io支持，强烈推荐，只在local、mapped模式下\n    > –with-threads (nginx 1.7.11+) 支持使用线程池异步打开文件(要求在nginx.conf中配置vod_open_file_thread_pool)，只在local、mapped模式下\n    > –with-cc-opt=“-O3” 附加编译器优化，减少视频解析和帧处理的耗时\n    > ```\n    >\n    > 配置、编译、安装都完成之后，即可在nginx的配置文件中使用nginx-vod-module模块提供的关键字了。\n\n+ #### 2.3 配置nginx点播服务\n\n+ ##### 2.3.1 local模式\n\n+ 2.3.1.1 常规配置\n\n在nginx的配置文件中，添加对应的location配置：\n\n```bash\nlocation /vod {\n    vod hls; # 协议使用hls模式\n    vod_mode local; # 访问模式指定为local模式\n    \n    vod_align_segments_to_key_frames on; # 每个切片以关键帧开头\n    vod_manifest_segment_durations_mode accurate; # 精确显示每个切片的长度\n    \n    # 解决浏览器跨域问题\n    add_header Access-Control-Allow-Headers '*';\n    add_header Access-Control-Expose-Headers 'Server,range,Content-Length,Content-Range';\n    add_header Access-Control-Allow-Methods 'GET, HEAD, OPTIONS';\n    add_header Access-Control-Allow-Origin '*';\n\n    alias /media; # 视频文件路径\n}\n```\n\n```\nnginx.conf文件修改后，nginx需要reload才能生效配置。\n```\n\n在服务器上对应的视频文件目录结构：\n\n```txt\n/media/example0001.mp4\n```\n\nURL播放地址（假设nginx配置在ip为192.168.192.128的地址上）：\n\n```txt\nhttp://192.168.192.128/vod/example0001.mp4/index.m3u8\n```\n\n使用相应的html5播放器或者本地播放器打开，即可观看该地址的视频点播。若使用本地播放器，推荐使用[VLC media player](https://www.videolan.org/vlc/)。\n\n```bash\n#EXTM3U\n#EXT-X-TARGETDURATION:17\n#EXT-X-ALLOW-CACHE:YES\n#EXT-X-PLAYLIST-TYPE:VOD\n#EXT-X-VERSION:3\n#EXT-X-MEDIA-SEQUENCE:1\n#EXTINF:10.000,\nhttp://192.168.192.128/vod/example0001.mp4/seg-1-v1-a1.ts\n#EXTINF:10.000,\nhttp://192.168.192.128/vod/example0001.mp4/seg-2-v1-a1.ts\n#EXTINF:10.000,\nhttp://192.168.192.128/vod/example0001.mp4/seg-3-v1-a1.ts\n……\n……\n……\n#EXTINF:7.760,\nhttp://192.168.192.128/vod/example0001.mp4/seg-347-v1-a1.ts\n#EXT-X-ENDLIST\n```\n\n通过对nginx进行配置可以控制m3u8文件的生成规则，以此来控制切片的大小、状态等播放相关的属性，具体可以查看nginx-vod-module模块的[文档](https://github.com/kaltura/nginx-vod-module/blob/master/README.md)[2](https://blog.csdn.net/SeeDoubleU/article/details/121805174#fn2)。\n\n+ 2.3.1.2 local模式下的多码率自适应\n\n> 使用常规配置，仅更改访问的URL播放地址即可支持多码率自适应功能，HLS根据用户当前可用带宽的大小自适应匹配对应码率的视频。\n>\n> 在服务器上对应的视频文件目录结构(后缀low表示同一视频的低清晰度版本)：\n\n```\n/media/example0001.mp4\n/media/example0001_low.mp4\n```\n\nURL播放地址：\n\n```\nhttp://192.168.192.128/vod/example,0001,0001_low,.mp4.urlset/master.m3u8\n```\n\n多码率自适应其实是多个URL组合的结构，上述master.m3u8表示以下2个index.m3u8的组合：\n\n> ```\n> http://192.168.192.128/vod/example0001.mp4/index.m3u8\n> http://192.168.192.128/vod/example0001_low.mp4/index.m3u8\n> ```\n\nnginx-vod-module会根据master指定的多个视频自动计算配置适合的带宽，master.m3u8文件的内容如下：\n\n```\n#EXTM3U\n#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=613135,RESOLUTION=1280x720,FRAME-RATE=25.000,CODECS=\"avc1.640029,mp4a.40.2\"\nhttp://192.168.192.128/vod_json/mapped.json/index-f1-v1-a1.m3u8\n#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=226233,RESOLUTION=760x428,FRAME-RATE=25.000,CODECS=\"avc1.42c01e,mp4a.40.2\"\nhttp://192.168.192.128/vod_json/mapped.json/index-f2-v1-a1.m3u8\n\n#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=193615,RESOLUTION=1280x720,CODECS=\"avc1.640029\",URI=\"http://192.168.192.128/vod_json/mapped.json/iframes-f1-v1-a1.m3u8\"\n#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=58630,RESOLUTION=760x428,CODECS=\"avc1.42c01e\",URI=\"http://192.168.192.128/vod_json/mapped.json/iframes-f2-v1-a1.m3u8\"\n```\n\nindex后面跟随的v1表示第一条视频轨道，a1表示第一条音轨。\n\n+ 2.3.1.3 local模式下的字幕\n\n可以为视频添加字幕，支持srt等格式，不过最终在流媒体中显示成webvtt格式。\n\n在服务器上对应的字幕文件目录结构：\n\n```bash\n/media/example0001.srt\n```\n\nURL播放地址：（与多码率自适应的URL地址规则相同）\n\n```\nhttp://192.168.192.128/vod/,example0001.mp4,example0001.srt,.urlset/master.m3u8\n```\n\n+ ##### 2.3.2 mapped模式\n\n> mapped模式使用json文件来对视频进行配置，可以把附加在URL中的各种参数放在对应的json文件里进行配置。\n\n+ 2.3.2.1 常规配置\n\n在nginx的配置文件中，添加对应的location配置：\n\n```bash\nlocation /vod_json {\n    vod hls; # 协议使用hls模\n    vod_mode mapped; # 访问模式指定为mapped模式\n\n    vod_align_segments_to_key_frames on; # 每个切片以关键帧开头\n    #vod_manifest_segment_durations_mode accurate; # 精确显示每个切片的长度\n    \n    # 解决浏览器跨域问\n    add_header Access-Control-Allow-Headers '*';\n    add_header Access-Control-Expose-Headers 'Server,range,Content-Length,Content-Range';\n    add_header Access-Control-Allow-Methods 'GET, HEAD, OPTIONS';\n    add_header Access-Control-Allow-Origin '*';\n\n    alias /media/cjcwgl; # 视频文件路径\n}\n```\n\n`发现一个Bug：在mapped模式下配置vod_manifest_segment_durations_mode参数会导致m3u8的最后一个切片的#EXTINF时长异常地长。`\n\n在服务器上对应的视频文件目录结构：\n\n```bash\n/media/cjcwgl/hdh/cwgl0101.mp4\n```\n\njson文件路径为：\n\n```\n/media/cjcwgl/simple.json\n```\n\nsimple.json文件的内容：\n\n```bash\n{\n    \"sequences\": [\n        {\n            \"clips\": [\n                {\n                    \"type\": \"source\",\n                    \"path\": \"/media/cjcwgl/hdh/cwgl0101.mp4\"\n                }\n            ]\n        }\n    ]\n}\n\n```\n\nURL播放地址：\n\n```\nhttp://192.168.192.128/vod_json/simple.json/index.m3u8\n```\n\n+ 2.3.2.2 mapped模式下的多码率自适应\n\n在服务器上对应的视频文件目录结构（hdh目录下为高清版本，hdk目录下为普通版本）：\n\n```\n/media/cjcwgl/hdh/cwgl0101.mp4\n/media/cjcwgl/hdk/cwgl0101.mp4\n```\n\njson文件路径为：\n\n```\n/media/cjcwgl/mapped.json\n```\n\nmapped.json文件的内容：\n\n```bash\n{\n    \"sequences\": [\n        {\n            \"clips\": [\n                {\n                    \"type\": \"source\",\n                    \"path\": \"/media/cjcwgl/hdh/cwgl0101.mp4\"\n                }\n            ]\n        },\n        {\n            \"clips\": [\n                {\n                    \"type\": \"source\",\n                    \"path\": \"/media/cjcwgl/hdk/cwgl0101.mp4\"\n                }\n            ]\n        }\n    ]\n}\n\n```\n\njson文件修改后，重新访问URL即可生效配置，不需要对nginx进行reload。\n\nURL播放地址：\n\n```\nhttp://192.168.192.128/vod_json/mapped.json/master.m3u8\n```\n\n+ 2.3.2.3 HLS协议的多码率自适应逻辑\n\nHLS的多码率自适应逻辑是依据前一个ts切片的下载速度来作为是否切换码率的依据。\n\n示例：\n\n```bash\n#EXTM3U\n#EXT-X-STREAM-INF:……BANDWIDTH=700000\nhttp://……/index-f1-v1-a1.m3u8\n#EXT-X-STREAM-INF:……BANDWIDTH=1300000\nhttp://……/index-f2-v1-a1.m3u8\n#EXT-X-STREAM-INF:……BANDWIDTH=2300000\nhttp://……/index-f3-v1-a1.m3u8\n\n```\n\n  上述master.m3u8包含三个码率500K，900K和1400K相应的index.m3u8，在播放视频的时候， 第一个切片取的是master.m3u8中排在首位的index.m3u8中的首个ts切片。\n  当配置了码率自适应之后， 在每次下载完一个ts切片的时候，会依据该切片的下载速度的80%来决定是否要切换码率， 如果当前切片的下载速度分别为：\n1M = 那么其80%速度为 800K， 低于1300K， 那么下一个切片会下载500K码率；\n2M = 其80%速度为 1600K， 高于1300K低于2300K， 下一个切片会下载1300K码率；\n3M = 其80%速度为 2400K， 高于2300K， 下一个切片会下载2300K码率。\n\n+ 2.3.2.3 mapped模式下的字幕\n\n在mapped模式下添加字幕相当于将字幕做为一个clips加入视频中，做法与多码率自适应相同。\n\n在服务器上对应的字幕文件目录结构：\n\n```bash\n/media/cjcwgl/hdh/cwgl0101.srt\n```\n\njson文件路径为：\n\n```bash\n/media/cjcwgl/mapped.json\n```\n\nmapped.json文件的内容：\n\n```bash\n{\n    \"sequences\": [\n        {\n            \"clips\": [\n                {\n                    \"type\": \"source\",\n                    \"path\": \"/media/cjcwgl/hdh/cwgl0101.mp4\"\n                }\n            ]\n        },\n        {\n            \"clips\": [\n                {\n                    \"type\": \"source\",\n                    \"path\": \"/media/cjcwgl/hdk/cwgl0101.srt\"\n                }\n            ]\n        }\n    ]\n}\n\n```\n\njson文件修改后，重新访问URL即可生效配置，不需要对nginx进行reload。\n\nURL播放地址不需要修改：\n\n```\nhttp://192.168.192.128/vod_json/mapped.json/master.m3u8\n```\n\n+ 2.3.2.4 mapped模式下的倍速播放\n\n在服务器上对应的视频文件目录结构：\n\n```\n/media/cjcwgl/hdh/cwgl0101.mp4\n```\n\njson文件路径为：\n\n```\n/media/cjcwgl/mapped2.json\n```\n\nmapped2.json文件的内容：\n\n```\n{\n    \"sequences\": [\n        {\n        \"clips\": [\n            {\n                \"type\": \"rateFilter\",\n                \"rate\": 2.0,\n                \"source\": {\n                    \"type\": \"source\",\n                    \"path\": \"/media/cjcwgl/hdh/cwgl0101.mp4\"\n                    }\n                }\n            ]\n        }\n    ]\n}\n\n```\n\nURL播放地址：\n\n```\nhttp://192.168.192.128/vod_json/mapped2.json/index.m3u8\n```\n\n如果倍速播放的各种配置都正确，但是无法播放，在./logs/error.log中显示filter no supported的相关信息，则很有可能是缺少libavcodec与libavfilter库的支持。\n\n+ 2.3.2.5 安装ffmpeg提供libavcodec、libavfilter库支持\n\n如果在点播服务中需要支持倍速输出、视频与音轨的分离等操作，需要额外的库libavcodec与libavfilter的支持，它们都基于ffmpeg，通过安装ffmpeg可提供相关的库支持，步骤如下：\n\n安装libfdk-aac：\n\n> 安装包获取地址：https://github.com/mstorsjo/fdk-aac/releases\n> 安装包名：fdk-aac-2.0.1.tar.gz\n> 解压：tar -zxvf fdk-aac-2.0.1.tar.gz\n> 进目录：cd fdk-aac-2.0.1\n> 生成配置：./autogen.sh\n>\n> > 如果出现错误：“./autogen.sh:行2: autoreconf: 未找到命令”，需要先安装autoconf、automake、libtool：\n> > 在centos7.9下可以使用yum安装：\n> > yum install autoconf automake libtool\n> > 在centos6.5下如果使用yum无法成功安装，则需要进行手动安装：\n> >\n> > > 安装autoconf\n> > > 下载：wget http://mirrors.kernel.org/gnu/autoconf/autoconf-2.65.tar.gz\n> > > 解压：tar -xzvf autoconf-2.65.tar.gz\n> > > 进目录：cd autoconf-2.65\n> > > 配置：./configure\n> > >\n> > > > 可能在autocon的安装过程中还需要perl，安装perl：\n> > > > 下载：wget https://www.cpan.org/src/5.0/perl-5.34.0.tar.gz\n> > > > 解压：tar -xzvf perl-5.34.0.tar.gz\n> > > > 进目录：cd perl-5.34.0\n> > > > 配置：./Configure -des -Dprefix=/usr/local/perl\n> > > > 编译：make\n> > > > 安装：make install\n> > >\n> > > 重新进行配置：./configure\n> > > 编译：make\n> > > 安装：make install\n> > >\n> > > 安装automake\n> > > 下载：wget http://mirrors.kernel.org/gnu/automake/automake-1.11.tar.gz\n> > > 解压：tar -xzvf automake-1.11.tar.gz\n> > > 进目录：cd automake-1.11\n> > > 配置：./configure\n> > > 编译：make\n> > > 安装：make install\n> > >\n> > > 安装libtool\n> > > 下载：wget http://mirrors.kernel.org/gnu/libtool/libtool-2.2.6b.tar.gz\n> > > 解压：tar -xzvf libtool-2.2.6b.tar.gz\n> > > 进目录：cd libtool-2.2.6b\n> > > 配置：./configure\n> > > 编译：make\n> > > 安装：make install\n> >\n> > \n>\n> 重新生成配置：`./autogen.sh`\n> 配置：`./configure --enable-shared`\n> 编译：`make`\n> 安装：`make install`\n\n安装ffmpeg：\n\n> 安装包获取地址：https://ffmpeg.org/download.html#releases\n> 安装包：ffmpeg-4.4.tar.gz\n> 配置：`./configure --enable-shared --enable-libfdk-aac`\n>\n> > 如果出现提示：“nasm/yasm not found or too old.”，需安装nasm或者yasm其中之一：\n> > 在centos7.9下的可以使用yum进行安装：\n> > yum install nasm\n> > 在centos6.5下如果无法使用yum安装，则需要手动安装：\n> > 下载：wget https://www.nasm.us/pub/nasm/releasebuilds/2.13.03/nasm-2.13.03.tar.gz\n> > 解压：tar -xvf nasm-2.13.03.tar.gz\n> > 进目录：cd nasm-2.13.03\n> > 配置：./configure\n> > 编译：make\n> > 安装：make install\n> >\n> > 如果出现警告：“WARNING: using libfdk without pkg-config”，则需要配置PKG_CONFIG_PATH如下：\n> > export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig\n> > 查看是否配置成功：\n> > echo $PKG_CONFIG_PATH\n>\n> 然后重新配置：`./configure --enable-shared --enable-libfdk-aac`\n> 编译：`make`\n> 安装：`make install`\n\n注：\n\n> 如果需要ffmpeg支持libx264视频编码，需要安装配置时加入`--enable-libx264 --enable-gpl`选项，步骤如下：\n>\n> > 安装libx264：\n> > 下载地址：https://code.videolan.org/videolan/x264/-/tree/stable\n> > ./configure --enable-shared\n> > make\n> > make install\n>\n> 如果需要ffmpeg支持drawtext水印滤镜功能，需要安装配置时加入`--enable-libfreetype --enable-libfontconfig --enable-libfribidi`选项，步骤如下：\n>\n> > 安装freetype：\n> > yum install freetype freetype-devel\n> > 安装fontconfig\n> > yum install fontconfig fontconfig-devel\n> > 安装fribidi\n> > yum install fribidi fribidi-devel\n>\n> –enable-libfdk-aac --enable-nonfree 提供fdk-aac音频编码支持\n> –enable-libx264 --enable-gpl 提供libx264视频编码支持\n> –enable-libfreetype 提供drawtext滤镜支持\n> –enable-libfontconfig 提供drawtext滤镜里的多种字体支持\n> –enable-libfribidi 进一步提升对drawtext滤镜的支持(字体变形)\n\n配置共享动态库：\n\n> 编辑配置文件命令：`vi /etc/ld.so.conf`\n> 在末尾加入库路径：`/usr/local/lib`\n> 使配置生效命令：`ldconfig`\n\n配置环境变量：\n\n> 编辑文件：`vi /etc/profile`\n> 在末尾加入：`export PATH=\"/usr/local/lib:$PATH\"`\n> 使配置文件生效：`source /etc/profile`\n\n测试ffmpeg是否安装成功：\n\n> 在命令行执行：`ffmpeg`\n> 如果安装成功，会出现如下信息：\n>\n> ```\n> ffmpeg version 4.4 Copyright (c) 2000-2021 the FFmpeg developers\n>   built with gcc 4.8.5 (GCC) 20150623 (Red Hat 4.8.5-44)\n>   configuration: --enable-shared --enable-libfdk-aac\n>   libavutil      56. 70.100 / 56. 70.100\n>   libavcodec     58.134.100 / 58.134.100\n>   libavformat    58. 76.100 / 58. 76.100\n>   libavdevice    58. 13.100 / 58. 13.100\n>   libavfilter     7.110.100 /  7.110.100\n>   libswscale      5.  9.100 /  5.  9.100\n>   libswresample   3.  9.100 /  3.  9.100\n> Hyper fast Audio and Video encoder\n> usage: ffmpeg [options] [[infile options] -i infile]... {[outfile options] outfile}...\n> \n> ```\n>\n> 信息中显示libavcodec与libavfilter库的相关版本。\n\n安装成功ffmpeg之后，就有了libavcodec与libavfilter库支持，此时需要重新编译nginx，这样才能把这两个库编译进nginx，即重新执行nginx的configure->make->make install三个步骤。\n\n在`./configure ……`配置过程中，如果nginx能够正确找到libavcodec与libavfilter库，则会显示如下信息片段：\n\n```\n……\nchecking for libavcodec ... found\nchecking for libswscale ... found\nchecking for libavfilter ... found\n……\n\n```\n\n配置成功后，进行编译`make`，最后安装`make install`，至此已经成功在nginx中添加了libavcodec与libavfilter库支持。\n\n> 在安装之前如果nginx已经在运行中，需要先`./nginx -s stop`，否则可能出现文件占用的问题。\n\n##### 2.3.3 内容加密\n\n通过搭建点播/直播服务器并对外提供付费内容服务是大多数视频平台的核心业务，为了防止付费内容被复制转发，都会通过一些加密技术来对内容进行保护。\n  下面使用一个上游php服务器对当前的点播服务提供秘钥，以此来对点播内容进行加密保护，提供加密服务的服务器需要能够处理php脚本，可以参考使用nginx服务器搭建php环境。上游的php服务主要有两个功能，对外提供加密秘钥以及解密秘钥。\n2.3.3.1 加密秘钥\n\nHLS中的加密秘钥是以json格式表示的：\n\n```\n[\n    {\n        \"key\": \"GzoNU9Dfwc//Iq3/zbzMUw==\",\n        \"key_id\": \"GzoNU9Dfwc//Iq3/zbzMUw==\"\n    }\n]\n\n```\n\n> 对HLS而言，key是必须的，key_id并没有意义，但是模块由于兼容问题所以需要key_id，因为别的协议（DASH）需要它，而iv是可选的，表示偏移量。\n\n在php服务器上配置的加密秘钥请求地址为：http://192.168.192.182/base64key/base64key.php，脚本文件base64key.php的实际内容如下：（为了方便，直接使用明文）\n\n```\n<?php\n$str = '[{\"key\": \"GzoNU9Dfwc//Iq3/zbzMUw==\",\"key_id\": \"GzoNU9Dfwc//Iq3/zbzMUw==\"}]';\necho $str;\n?>\n\n```\n\n确保对加密秘钥请求地址的访问能够得到加密秘钥即可。\n\n2.3.3.2 解密秘钥\n\nHLS的解密秘钥是加密秘钥经过简单的base64解码之后的字符串，无可读性，经常是一串乱码：\n\n```\n: S�����\"��ͼ�S\n```\n\n在php服务器上配置的解密秘钥请求地址为：http://192.168.192.182/decodeKey.php，脚本文件decodeKey.php的实际内容如下：\n\n```\n<?php\nheader('Access-Control-Allow-Origin:*'); // 运行跨域\nheader('Access-Control-Allow-Methods:OPTIONS, GET, POST'); // 允许option，get，post请求\nheader('Access-Control-Allow-Headers:x-requested-with'); // 允许x-requested-with请求头\n\n$str = 'GzoNU9Dfwc//Iq3/zbzMUw==';\necho base64_decode($str);\n?>\n\n```\n\n2.3.3.3 location配置\n\n配置完上游的php秘钥服务器之后，需要在nginx的配置中添加加密的方式、加密秘钥地址、解密秘钥地址，并启用加密。\n\n> 这里的加密使用DRM方式，需要分别配置加密地址和解密地址；如果使用seed直接在本机生成秘钥的方式，会自动生成加密和解密秘钥。\n\n```\n# hls直播，local模式 + DRM加密\n# http://192.168.192.128/vod/example.mp4/index.m3u8\nlocation /vod {\n    vod hls; # 开启vod模块\n    vod_mode local; # 访问模式指定为local\n    vod_align_segments_to_key_frames on; # 每个切片以关键帧开头\n    vod_manifest_segment_durations_mode accurate; # 精确显示每个切片的长度\n\n    # 直接使用种子生成key，进行加密（加密方式一）\n    # vod_hls_encryption_method aes-128; # 加密算法\n    # vod_secret_key \"1234567890123456\"; # 用于生成加密密钥的种子seed，自动生成加密秘钥和解密秘钥\n\n    # 使用drm加密（加密方式二）\n    vod_hls_encryption_method aes-128; # 加密算法\n    vod_drm_enabled on; # 使用drm方式提供key\n    vod_drm_upstream_location /base64key; # 上游服务器地址\n    vod_drm_request_uri /base64key.php; # 获取加密密钥，base64编码后的可读json格式\n    vod_hls_encryption_key_uri http://192.168.192.182/decodeKey.php; # 获取解密密钥，无base64编码的乱码格式\n\n    add_header Access-Control-Allow-Headers '*';\n    add_header Access-Control-Expose-Headers 'Server,range,Content-Length,Content-Range';\n    add_header Access-Control-Allow-Methods 'GET, HEAD, OPTIONS';\n    add_header Access-Control-Allow-Origin '*';\n\n    alias /media;\n}\n\n# 上游服务器配置，存储drm信息\nlocation /base64key { # location路径需要与服务器的文件夹路径一致\n    #proxy_set_header Host $host;\n    #proxy_set_header X-Real-IP $remote_addr;\n    #proxy_set_header X-Forwarder-For $proxy_add_x_forwarded_for;\n    proxy_pass http://192.168.192.182;\n}\n\n```\n\n在播放端不需要进行额外的更改，即可正常播放视频，但此时的视频在传输过程中已是加密状态。\n\n> 播放的媒体内容经过DRM，虽然示例中在播放上看起来并没有什么不同的感觉，但下载保存的内容切片如果不经过DRM的验证则是无法播放的。\n\n##### 2.3.4 完整的nginx.conf文件\n\nnginx的完整配置文件，`/nginx安装路径/conf/nginx.conf`：\n\n```\n#user root;\nworker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    sendfile        on;\n\n    keepalive_timeout  65;\n\n    server {\n        listen       80;\n        server_name  localhost;\n\n        autoindex on;\n\n        location /vod {\n            vod hls; # 开启vod模块\n            vod_mode local; # 访问模式指定为local\n            \n            vod_align_segments_to_key_frames on; # 每个切片以关键帧开头\n            vod_manifest_segment_durations_mode accurate; # 精确显示每个切片的长度\n\n            # 直接使用种子生成key，进行加密（加密方式一）\n            # vod_hls_encryption_method aes-128; # 加密算法\n            # vod_secret_key \"1234567890123456\"; # 用于生成加密密钥的种子seed，自动生成加密秘钥和解密秘钥\n\n            # 使用drm加密（加密方式二）\n            vod_hls_encryption_method aes-128; # 加密算法\n            vod_drm_enabled on; # 使用drm方式提供key\n            vod_drm_upstream_location /base64key; # 上游服务器地址\n            vod_drm_request_uri /base64key.php; # 获取加密密钥，base64编码后的可读json格式\n            vod_hls_encryption_key_uri http://192.168.192.182/decodeKey.php; # 获取解密密钥，无base64编码的乱码格式\n\n            add_header Access-Control-Allow-Headers '*';\n            add_header Access-Control-Expose-Headers 'Server,range,Content-Length,Content-Range';\n            add_header Access-Control-Allow-Methods 'GET, HEAD, OPTIONS';\n            add_header Access-Control-Allow-Origin '*';\n\n            alias /media;\n        }\n        # 上游服务器配置，存储drm信息\n        location /base64key { # location路径需要与服务器的文件夹路径一致\n            #proxy_set_header Host $host;\n            #proxy_set_header X-Real-IP $remote_addr;\n            #proxy_set_header X-Forwarder-For $proxy_add_x_forwarded_for;\n            \n            proxy_pass http://192.168.192.182;\n        }\n\n        location /vod_json {\n            vod hls;\n            vod_mode mapped;\n\n            vod_align_segments_to_key_frames on; # 每个切片以关键帧开头\n            \n            add_header Access-Control-Allow-Headers '*';\n            add_header Access-Control-Expose-Headers 'Server,range,Content-Length,Content-Range';\n            add_header Access-Control-Allow-Methods 'GET, HEAD, OPTIONS';\n            add_header Access-Control-Allow-Origin '*';\n\n            alias /media/cjcwgl;\n        }\n\n        location /data {\n            alias /media;\n        }\n\n        location / {\n            root   html;\n            index  index.html index.htm;\n        }\n\n        #error_page  404              /404.html;\n\n        # redirect server error pages to the static page /50x.html\n        #\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n    }\n}\n\n```\n\n### 3 关于nginx-vod-module模块\n\n  模块里还有很多功能，比如加密传输、数据缓存、代理上游服务等，但文档里只提供了几个基本的例子，遇到问题的话可以在github的[issues](https://github.com/kaltura/nginx-vod-module/issues)[3](https://blog.csdn.net/SeeDoubleU/article/details/121805174#fn3)里寻找相应的问题。\n\nnginx安装流程: https://blog.csdn.net/SeeDoubleU/article/details/121727292 ↩︎\n\nnginx-vod-module文档: https://github.com/kaltura/nginx-vod-module/blob/master/README.md ↩︎\n\ngithub issues: https://github.com/kaltura/nginx-vod-module/issues ↩︎\n","tags":["ffmpeg","nginx","流媒体点播"],"categories":["视频编辑"]},{"title":"必备工具-代码类","url":"/2024/04/24/必备工具-代码类/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>必备工具（代码类）：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>SCP命令：[本文参考自](https://blog.csdn.net/CHNIM/article/details/134813154)</strong></font>\n\n```bash\n# 1. 基本语法\n# scp [选项] 源文件/目录 目标路径\n# 选项：\n#\t\t-r：递归复制，用于复制目录。\n# \t-P：指定SSH端口号。\n# \t-i：指定身份文件（私钥文件）。\n# \t-v：详细模式，显示详细的调试信息。\n\n# 从 远程 ==> 本地\nscp root@192.168.1.33:/root/requirements.txt /root/requirements.txt\n\n# 从 本地 ==> 远程\nscp /root/requirements.txt root@192.168.1.33:/root/requirements.txt\n\n# 从 远程 ==> 远程  \nscp root@192.168.1.33:/root/requirements.txt root@172.16.73.130:/root\n\n# 使用端口和指定私钥\nscp -P 2222 -i /path/to/private_key.pem localfile.txt user@remote:/path/to/destination/\n\n# 递归复制目录\nscp -r sourcedir user@remote:/path/to/destination/\n#3. 注意事项\n# \t如果目标路径是目录，文件将会被复制到该目录中。\n# \t如果目标路径包含文件名，文件将被复制并重命名为指定的文件名。\n# \t使用递归选项 -r 可以复制整个目录及其内容。\n# \t如果目标路径中包含空格，应该使用引号将其括起来。\n# \t要连接到非标准SSH端口，可以使用 -P 选项。\n# \t使用 -i 选项可以指定用于身份验证的私钥文件。\n```\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>Python pip可用包查看：</strong></font>\n\n```bash\npip3 list  # 查看已经安装的包\n\npip3 index versions <包名>   # 查看服务器上 当前系统可以用所有包  例如：pip3 index versions requests\n```\n\n","tags":["必备工具","代码类"],"categories":["工具"]},{"title":"python操作MinIO","url":"/2024/04/23/python操作MinIO/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**python操作minio**</strong></font>\n\n<!--more-->\n\n## 前言\n\npython版本：3.7\n\nminio版本：5.0.5\n\n```\n# 使用pip安装\npip install minio\n\n# 使用源码安装\ngit clone https://github.com/minio/minio-py\ncd minio-py\npython setup.py install\n```\n\n参考文档：\n\n快速入门：https://docs.min.io/cn/python-client-quickstart-guide.html\n\n完整文档：https://docs.min.io/cn/python-client-api-reference.html\n\nAPI示例：https://github.com/minio/minio-py/tree/master/examples\n\n\n\n## 初始化MinIO Client\n\n```python\nfrom minio import Minio\nfrom minio.error import ResponseError\n\nminioClient = Minio(endpoint='play.min.io',\n                  access_key='Q3AM3UQ867SPQQA43P2F',\n                  secret_key='zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG',\n                  secure=True)\n```\n\n## 操作存储桶\n\n### 创建一个存储桶\n\nmake_bucket(bucket_name, location=’us-east-1’) -> None\n\n```python\ntry:\n    minioClient.make_bucket(bucket_name=\"mybucket\", location=\"us-east-1\")\nexcept MaxRetryError as err:\n    print(\"connect minio server fail, %s\" % err)\n    raise\nexcept ResponseError as err:\n    print(\"minio server response fail, %s\" % err)\n    raise\nexcept (BucketAlreadyOwnedByYou, BucketAlreadyExists) as err:\n    pass\nexcept InvalidBucketError as err:\n    print(err)\nexcept Exception as err:\n    print(err)\n```\n\n### 列出所有的存储桶\n\nlist_buckets() -> list\n\n```python\ntry:\n    buckets = minioClient.list_buckets()\n    for bucket in buckets:\n        print(bucket.name, bucket.creation_date)\nexcept MaxRetryError as err:\n    print(\"connect minio server fail, %s\" % err)\n    raise\nexcept ResponseError as err:\n    print(\"minio server response fail, %s\" % err)\n    raise\nexcept Exception as err:\n    print(err)\n```\n\n### 检查存储桶是否存在\n\nbucket_exists(bucket_name) -> bool\n\n```python\ntry:\n    result = minioClient.bucket_exists(bucket_name=\"mybucket\")\n    print(result)\nexcept MaxRetryError as err:\n    print(\"connect minio server fail, %s\" % err)\n    raise\nexcept ResponseError as err:\n    print(\"minio server response fail, %s\" % err)\n    raise\nexcept InvalidBucketError as err:\n    print(err)\nexcept Exception as err:\n    print(err)\n```\n\n### 删除存储桶\n\nremove_bucket(bucket_name) -> None\n\n```python\ntry:\n    minioClient.remove_bucket(bucket_name=\"mybucket\")\nexcept MaxRetryError as err:\n    print(\"connect minio server fail, %s\" % err)\n    raise\nexcept ResponseError as err:\n    print(\"minio server response fail, %s\" % err)\n    raise\nexcept InvalidBucketError as err:\n    print(err)\nexcept NoSuchBucket as err:\n    print(err)\nexcept Exception as err:\n    print(err)\n```\n\n### 列出存储桶中所有对象\n\nlist_objects(bucket_name, prefix=None, recursive=False) -> Iterator\n\n```python\ntry:\n    objects = minioClient.list_objects(\"mybucket\")\n    for obj in objects:\n        print(obj.bucket_name, obj.object_name.encode('utf-8'), obj.is_dir,\n              obj.size, obj.etag, obj.last_modified, obj.content_type,\n              obj.metadata)\nexcept MaxRetryError as err:\n    print(\"connect minio server fail, %s\" % err)\n    raise\nexcept ResponseError as err:\n    print(\"minio server response fail, %s\" % err)\n    raise\nexcept InvalidBucketError as err:\n    print(err)\nexcept Exception as err:\n    print(err)\n```\n\n### 列出存储桶中未完整上传的对象\n\nlist_incomplete_uploads(bucket_name, prefix, recursive=False) -> Iterator\n\n```python\ntry:\n    # List all object paths in bucket that begin with my-prefixname.\n    uploads = minioClient.list_incomplete_uploads('mybucket', \n                                                  prefix='my-prefixname',\n                                                  recursive=True)\n    for obj in uploads:\n        print(obj.bucket_name, obj.object_name, obj.upload_id, obj.size)\nexcept MaxRetryError as err:\n    print(\"connect minio server fail, %s\" % err)\n    raise\nexcept ResponseError as err:\n    print(\"minio server response fail, %s\" % err)\n    raise\nexcept InvalidBucketError as err:\n    print(err)\nexcept Exception as err:\n    print(err)\n```\n\n### 获取存储桶的当前策略\n\nget_bucket_policy(bucket_name, prefix) -> Policy枚举\n\n```\n# Get current policy of all object paths in bucket that begin with my-prefixname.\npolicy = minioClient.get_bucket_policy('mybucket',\n                                       'my-prefixname')\nprint(policy)\n```\n\n### 给指定的存储桶设置存储桶策略\n\nset_bucket_policy(bucket_name, prefix, policy) -> Policy枚举\n\n```python\n# Set policy Policy.READ_ONLY to all object paths in bucket that begin with my-prefixname.\nminioClient.set_bucket_policy('mybucket',\n                              'my-prefixname',\n                              Policy.READ_ONLY)\n```\n\n### 获取存储桶上的通知配置\n\nget_bucket_notification(bucket_name) -> dict\n\n```python\n# Get the notifications configuration for a bucket.\nnotification = minioClient.get_bucket_notification('mybucket')\n# If no notification is present on the bucket:\n# notification == {}\n```\n\n### 给存储桶设置通知配置\n\nset_bucket_notification(bucket_name, notification) ->\n\n### 删除存储桶上配置的所有通知\n\nremove_all_bucket_notification(bucket_name)\n\n### 监听存储桶上的通知，可以额外提供前缀、后缀和时间类型来进行过滤\n\nlisten_bucket_notification(bucket_name, prefix, suffix, events)\n\n```python\n# Put a file with default content-type.\nevents = minioClient.listen_bucket_notification('my-bucket', 'my-prefix/',\n                                                '.my-suffix',\n                                                ['s3:ObjectCreated:*',\n                                                 's3:ObjectRemoved:*',\n                                                 's3:ObjectAccessed:*'])\nfor event in events:\n    print event\n```\n\n## 操作对象\n\n### 下载一个对象\n\nget_object(bucket_name, object_name, request_headers=None)\n\n```python\n# Get a full object.\ntry:\n    data = minioClient.get_object('mybucket', 'myobject')\n    with open('my-testfile', 'wb') as file_data:\n        for d in data.stream(32*1024):\n            file_data.write(d)\nexcept ResponseError as err:\n    print(err)\n```\n\n### 下载一个对象的指定区间的字节数组\n\nget_partial_object(bucket_name, object_name, offset=0, length=0, request_headers=None)\n\n```python\n# Offset the download by 2 bytes and retrieve a total of 4 bytes.\ntry:\n    data = minioClient.get_partial_object('mybucket', 'myobject', 2, 4)\n    with open('my-testfile', 'wb') as file_data:\n        for d in data:\n            file_data.write(d)\nexcept ResponseError as err:\n    print(err)\n```\n\n### 下载并将文件保存到本地\n\nget_object(bucket_name, object_name, file_path, request_headers=None)\n\n```python\n# Get a full object and prints the original object stat information.\ntry:\n    print(minioClient.fget_object('mybucket', 'myobject', '/tmp/myobject'))\nexcept ResponseError as err:\n    print(err)\n```\n\n### 拷贝对象存储服务上的源对象到一个新对象\n\ncopy_object(bucket_name, object_name, object_source, copy_conditions=None, metadata=None)\n\n```python\nimport time\nfrom datetime import datetime\nfrom minio import CopyConditions\n\ncopy_conditions = CopyConditions()\n# Set modified condition, copy object modified since 2014 April.\nt = (2014, 4, 0, 0, 0, 0, 0, 0, 0)\nmod_since = datetime.utcfromtimestamp(time.mktime(t))\ncopy_conditions.set_modified_since(mod_since)\n\n# Set unmodified condition, copy object unmodified since 2014 April.\ncopy_conditions.set_unmodified_since(mod_since)\n\n# Set matching ETag condition, copy object which matches the following ETag.\ncopy_conditions.set_match_etag(\"31624deb84149d2f8ef9c385918b653a\")\n\n# Set matching ETag except condition, copy object which does not match the following ETag.\ncopy_conditions.set_match_etag_except(\"31624deb84149d2f8ef9c385918b653a\")\n\n# Set metadata\nmetadata = {\"test-key\": \"test-data\"}\n\ntry:\n    copy_result = minioClient.copy_object(\"mybucket\", \"myobject\",\n                                          \"/my-sourcebucketname/my-sourceobjectname\",\n                                          copy_conditions,metadata=metadata)\n    print(copy_result)\nexcept ResponseError as err:\n    print(err)\n```\n\n### 添加一个新的对象到对象存储服务\n\nput_object(bucket_name, object_name, data, length, content_type=’application/octet-stream’, metadata=None)\n\n```python\nimport os\n# Put a file with default content-type, upon success prints the etag identifier computed by server.\ntry:\n    with open('my-testfile', 'rb') as file_data:\n        file_stat = os.stat('my-testfile')\n        print(minioClient.put_object('mybucket', 'myobject',\n                               file_data, file_stat.st_size))\nexcept ResponseError as err:\n    print(err)\n\n# Put a file with 'application/csv'.\ntry:\n    with open('my-testfile.csv', 'rb') as file_data:\n        file_stat = os.stat('my-testfile.csv')\n        minioClient.put_object('mybucket', 'myobject.csv', file_data,\n                    file_stat.st_size, content_type='application/csv')\nexcept ResponseError as err:\n    print(err)\n```\n\n### 通过文件上传到对象中\n\nfput_object(bucket_name, object_name, file_path, content_type=’application/octet-stream’, metadata=None)\n\n```python\n# Put an object 'myobject' with contents from '/tmp/otherobject', upon success prints the etag identifier computed by server.\ntry:\n    print(minioClient.fput_object('mybucket', 'myobject', '/tmp/otherobject'))\nexcept ResponseError as err:\n    print(err)\n\n# Put on object 'myobject.csv' with contents from\n# '/tmp/otherobject.csv' as 'application/csv'.\ntry:\n    print(minioClient.fput_object('mybucket', 'myobject.csv',\n                             '/tmp/otherobject.csv',\n                             content_type='application/csv'))\nexcept ResponseError as err:\n    print(err)\n```\n\n### 获取对象的元数据\n\nstat_object(bucket_name, object_name)\n\n```python\n# Fetch stats on your object.\ntry:\n    print(minioClient.stat_object('mybucket', 'myobject'))\nexcept ResponseError as err:\n    print(err)\n```\n\n### 删除一个对象\n\nremove_object(bucket_name, object_name)\n\n```python\n# Remove an object.\ntry:\n    minioClient.remove_object('mybucket', 'myobject')\nexcept ResponseError as err:\n    print(err)\n```\n\n### 删除存储桶中的多个对象\n\nremove_objects(bucket_name, objects_iter)\n\n```python\n# Remove multiple objects in a single library call.\ntry:\n    objects_to_delete = ['myobject-1', 'myobject-2', 'myobject-3']\n    # force evaluation of the remove_objects() call by iterating over\n    # the returned value.\n    for del_err in minioClient.remove_objects('mybucket', objects_to_delete):\n        print(\"Deletion Error: {}\".format(del_err))\nexcept ResponseError as err:\n    print(err)\n```\n\n### 删除一个未完整上传的对象\n\nremove_incomplete_upload(bucket_name, object_name)\n\n```python\n# Remove an partially uploaded object.\ntry:\n    minioClient.remove_incomplete_upload('mybucket', 'myobject')\nexcept ResponseError as err:\n    print(err)\n```\n\n## Presigned操作\n\n### 生成一个用于HTTP GET操作的presigned URL\n\npresigned_get_object(bucket_name, object_name, expiry=timedelta(days=7))\n\n```python\nfrom datetime import timedelta\n\n# presigned get object URL for object name, expires in 2 days.\ntry:\n    print(minioClient.presigned_get_object('mybucket', 'myobject', expires=timedelta(days=2)))\n# Response error is still possible since internally presigned does get bucket location.\nexcept ResponseError as err:\n    print(err)\n```\n\n### 生成一个用于HTTP PUT操作的presigned URL\n\npresigned_put_object(bucket_name, object_name, expires=timedelta(days=7))\n\n```python\nfrom datetime import timedelta\n\n# presigned Put object URL for an object name, expires in 3 days.\ntry:\n    print(minioClient.presigned_put_object('mybucket',\n                                      'myobject',\n                                      expires=timedelta(days=3)))\n# Response error is still possible since internally presigned does get\n# bucket location.\nexcept ResponseError as err:\n    print(err)\n```\n\n### 允许给POST操作的presigned URL设置策略条件\n\npresigned_post_policy(PostPolicy)\n","tags":["python","django","基础","MinIO"],"categories":["MinIO"]},{"title":"Python利用Minio-API实现文件上传下载、删除等操作","url":"/2024/04/23/Python利用Minio-API实现文件上传下载、删除等操作/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>Python利用Minio API实现文件上传下载、删除等操作：</strong></font>\n\n<!--more-->\n\n#### <font color=#00b2c2 size=5 face=宋体><strong>**pip安装minio**</strong></font>\n\n#### **2、文件目录**\n\n![img](https://img-blog.csdnimg.cn/20201205142832860.png)\n\nImportError: cannot import name '[Minio](https://so.csdn.net/so/search?q=Minio&spm=1001.2101.3001.7020)'\n\n![img](https://img-blog.csdnimg.cn/20201205142907370.png)\n\npip3 install minio 还是报错ImportError错误。\n\n原因是建的文件夹名与pytnon文件minio包重名了，qaq。。。\n\n#### **3、连接Minio文件存储服务器**\n\n```python\n#!/usr/bin/python\n# -*- coding: UTF-8 -*-\n\"\"\"\n@author:ZSW\n@file:MinioConfig.py\n@time:2020/12/04\n\"\"\"\n \nfrom minio import Minio\n \n# 使用endpoint、access key和secret key来初始化minioClient对象。\nminioClient = Minio('192.168.18.26:9000',\n                    access_key='minioadmin',\n                    secret_key='minioadmin',\n                    secure=False)\n```\n\n#### 4、Python操作存储桶(文件夹)\n\n```python\n#!/usr/bin/python\n# -*- coding: UTF-8 -*-\n\"\"\"\n@author:ZSW\n@file:MinioBucketBase.py\n@time:2020/12/04\n\"\"\"\n \nfrom minio_learn.MinioConfig import minioClient\nfrom minio.error import ResponseError\n \n \nclass Bucket:\n    # 创建桶(调用make_bucket来创建一个存储桶) make_bucket函数\n    \"\"\"\n    注：创建桶命名限制：小写字母，句点，连字符和数字是\n    唯一允许使用的字符（使用大写字母、下划线等命名会报错），长度至少应为3个字符\n    \"\"\"\n    def create_bucket(self):\n        try:\n            if minioClient.bucket_exists(bucket_name='pictures'):  # bucket_exists：检查桶是否存在\n                print(\"该存储桶已经存在\")\n            else:\n                minioClient.make_bucket(\"pictures\")\n                print(\"存储桶创建成功\")\n        except ResponseError as err:\n            print(err)\n \n    # 列出所有的存储桶 list_buckets函数\n    def get_bucket_list(self):\n        try:\n            buckets = minioClient.list_buckets()\n            for bucket in buckets:\n                print(bucket.name, bucket.creation_date)  # 获取桶的名称和创建时间\n        except ResponseError as err:\n            print(err)\n \n    # 删除存储桶\n    def get_remove_bucket(self):\n        try:\n            minioClient.remove_bucket(\"pictures\")\n            print(\"删除存储桶成功\")\n        except ResponseError as err:\n            print(err)\n \n    # 列出存储桶中所有对象  或者使用 list_objects_v2也可\n    def get_bucket_files(self):\n        try:\n            objects = minioClient.list_objects('testfiles', prefix=None,\n                                               recursive=True)   # prefix用于过滤的对象名称前缀\n            for obj in objects:\n                print(obj.bucket_name, obj.object_name.encode('utf-8'), obj.last_modified,\n                      obj.etag, obj.size, obj.content_type)\n        except ResponseError as err:\n            print(err)\n \n    # 列出存储桶中未完整上传的对象\n    def get_list_incomplete_uploads(self):\n        try:\n            uploads = minioClient.list_incomplete_uploads('testfiles',\n                                                          prefix=None,\n                                                          recursive=True)\n            for obj in uploads:\n                print(obj.bucket_name, obj.object_name, obj.upload_id, obj.size)\n        except ResponseError as err:\n            print(err)\n \n    # 获取存储桶的当前策略\n    def bucket_policy(self):\n        try:\n            policy = minioClient.get_bucket_policy('testfiles')\n            print(policy)\n        except ResponseError as err:\n            print(err)\n \n    # # 给指定的存储桶设置存储桶策略\n    # def get_set_bucket_policy(self):\n    #     try:\n    #         minioClient.set_bucket_policy('testfiles', policy.READ_ONLY)\n    #     except ResponseError as err:\n    #         print(err)\n \n    # 获取存储桶上的通知配置\n    def bucket_notification(self):\n        try:\n            # 获取存储桶的通知配置。\n            notification = minioClient.get_bucket_notification('testfiles')\n            print(notification)\n            # 如果存储桶上没有任何通知：\n            # notification  == {}\n        except ResponseError as err:\n            print(err)\n \n    # 给存储桶设置通知配置\n    def set_bucket_notification(bucket_name, notification):\n        pass\n \n    # 删除存储桶上配置的所有通知\n    def remove_all_bucket_notifications(bucket_name):\n        try:\n            minioClient.remove_all_bucket_notifications('mybucket')\n        except ResponseError as err:\n            print(err)\n \n    # 监听存储桶上的通知\n    def listen_bucket_notification(bucket_name, prefix, suffix, events):\n        pass\n \n \nif __name__ == '__main__':\n    Bucket().bucket_notification()\n```\n\n#### 5、Python操作文件对象\n\n```python\n#!/usr/bin/python\n# -*- coding: UTF-8 -*-\n\"\"\"\n@author:ZSW\n@file:MinioObjectBase.py\n@time:2020/12/04\n\"\"\"\n \nfrom minio_learn.MinioConfig import minioClient\nfrom minio.error import ResponseError\nimport os\n \n \nclass Object:\n \n    # 从桶中下载一个对象txt、csv文件都可以\n    def load_object(self):\n        try:\n            data = minioClient.get_object('testfiles', 'long_lat.csv')\n            with open('./load_files/long_lat.csv', 'wb') as file_data:\n                for d in data.stream(32 * 1024):\n                    file_data.write(d)\n            print(\"Sussess\")\n        except ResponseError as err:\n            print(err)\n \n    # 下载一个对象的指定区间的字节数组\n    def load_partial_object(self):\n        try:\n            data = minioClient.get_partial_object('testfiles', '123.txt', 2, 8)\n            with open('./load_files/123_new.txt', 'wb') as file_data:\n                for d in data:\n                    file_data.write(d)\n            print(\"Sussess\")  # 部分出现乱码\n        except ResponseError as err:\n            print(err)\n \n    # 下载并将文件保存到本地\n    def fget_object(self):\n        try:\n            print(minioClient.fget_object('testfiles', '123.txt', './load_files/123_new1.txt'))\n        except ResponseError as err:\n            print(err)\n \n    # 拷贝对象存储服务上的源对象到一个新对象\n    # 注：该API支持的最大文件大小是5GB\n    # 可通过copy_conditions参数设置copy条件\n    # 经测试copy复制28M的文件需要663ms; 1.8G的压缩包需要53s\n    def get_copy_object(self):\n        try:\n            copy_result = minioClient.copy_object(\"pictures\", \"123.jpg\",\n                                                  \"/testfiles/123.jpg\"\n                                                  )\n            print(copy_result)\n        except ResponseError as err:\n            print(err)\n \n    # 添加一个新的对象到对象存储服务\n    \"\"\"\n    单个对象的最大大小限制在5TB。put_object在对象大于5MiB时，自动使用multiple parts方式上传。\n    这样，当上传失败时，客户端只需要上传未成功的部分即可（类似断点上传）。\n    上传的对象使用MD5SUM签名进行完整性验证。\n    \"\"\"\n    def upload_object(self):\n        # 放置一个具有默认内容类型的文件，成功后将打印服务器计算出的etag标识符\n        try:\n            with open('./picture_files/123.txt', 'rb') as file_data:\n                file_stat = os.stat('./picture_files/123.txt')\n                print(minioClient.put_object('pictures', '123.txt',\n                                             file_data, file_stat.st_size))\n            print(\"Sussess\")\n        except ResponseError as err:\n            print(err)\n        # 放一个文件'application/csv'\n        try:\n            with open('./picture_files/long_lat.csv', 'rb') as file_data:\n                file_stat = os.stat('./picture_files/long_lat.csv')\n                minioClient.put_object('pictures', 'long_lat.csv', file_data,\n                                       file_stat.st_size, content_type='application/csv')\n            print(\"Sussess\")\n        except ResponseError as err:\n            print(err)\n \n    # 通过文件上传到对象中\n    def fput_object(self):\n        try:\n            print(minioClient.fput_object('pictures', '234.jpg', './picture_files/234.jpg'))\n            print(\"Sussess\")\n        except ResponseError as err:\n            print(err)\n        try:\n            print(minioClient.fput_object('pictures', 'long_lat.csv',\n                                          './picture_files/long_lat.csv',\n                                          content_type='application/csv'))\n            print(\"Sussess\")\n        except ResponseError as err:\n            print(err)\n \n    # 获取对象的元数据\n    def stat_object(self):\n        try:\n            print(minioClient.stat_object('pictures', '123.txt'))\n        except ResponseError as err:\n            print(err)\n \n    # 删除对象\n    def remove_object(self):\n        try:\n            minioClient.remove_object('pictures', '234.jpg')\n            print(\"Sussess\")\n        except ResponseError as err:\n            print(err)\n \n    # 删除存储桶中的多个对象\n    def remove_objects(self):\n        try:\n            objects_to_delete = ['123.txt', 'long_lat.csv']\n            for del_err in minioClient.remove_objects('testfiles', objects_to_delete):\n                print(\"Deletion Error: {}\".format(del_err))\n            print(\"Sussess\")\n        except ResponseError as err:\n            print(err)\n \n    # 删除一个未完整上传的对象\n    def remove_incomplete_upload(self):\n        try:\n            minioClient.remove_incomplete_upload('testfiles', '123.jpg')\n            print(\"Sussess\")\n        except ResponseError as err:\n            print(err)\n \n \nif __name__ == '__main__':\n    Object().remove_incomplete_upload()\n```\n\n#### 6、Python Presigned操作\n\n```python\nfrom minio_learn.MinioConfig import minioClient\nfrom minio.error import ResponseError\nfrom datetime import timedelta\n \n \nclass Presigned:\n \n    # 生成一个用于HTTP GET操作的presigned URL \n    def presigned_get_object(self):\n        # 预先获得的对象名称的获取对象URL，将在2天后过期\n        try:\n            print(minioClient.presigned_get_object('testfiles', '123.jpg', expires=timedelta(days=7)))\n            print(\"Sussess\")\n        # 由于内部预定位确实会获得存储桶位置，因此仍然可能出现响应错误\n        except ResponseError as err:\n            print(err)\n \n    # 生成一个用于HTTP PUT操作的presigned URL\n    def presigned_put_object(self):\n        try:\n            print(minioClient.presigned_put_object('testfiles',\n                                                   '123.txt',\n                                                   expires=timedelta(days=7)))\n            print(\"Sussess\")\n        except ResponseError as err:\n            print(err)\n \n    # 允许给POST操作的presigned URL设置策略条件。这些策略包括比如，\n    # 接收对象上传的存储桶名称，名称前缀，过期策略\n    def presigned_post_policy(self, PostPolicy):\n        pass\n \n \nif __name__ == '__main__':\n    Presigned().presigned_put_object()\n```\n","tags":["python","django","基础","MinIO"],"categories":["MinIO"]},{"title":"mac-arm安装windows11教程","url":"/2024/04/20/mac-arm安装windows11教程/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>Parallels Desktop 19 for Mac虚拟机 19.1.0一键激活版</strong></font>\n\n<!--more-->\n\n<video src=\"https://macz-down.mac89.com/video/202308/ParallelsDesktop19.mp4\" preload=\"metadata\" controls=\"\" style=\"display: inline-block; min-width: 100%; height: 295px;\"></video>\n\n<font color=red size=4 face=宋体><strong>百度超级下载：</strong></font>[点击下载](https://bd.bcebos.com/v1/xly-icafe/ka91908c0b1971a9-20240420212243-mm0dsp.dmg)\n\n`parallels`默认自带的各种系统，都是开箱即用的，不得不点赞。它们的默认用户名都是：`parallels`，密码都是：`Passw0rd!`。很有黑客风格的密码，对吧？注意：第一个`p`是大写，中间的`o`，不是字母`o`，是数字`0`。\n\n[安装软件遇到提示损坏，打不开，报错，来自xx不明的开发者？点我查看解决方法](https://www.macz.com/news/1.html)\n\nParallels Desktop是一款功能强大的虚拟机软件，它允许用户在Mac电脑上同时运行Windows、Linux和其他操作系统。Parallels Desktop提供了直观易用的界面，使用户可以轻松创建、配置和管理虚拟机。\n该软件具有快速启动和关闭虚拟机的能力，让用户能够迅速切换不同操作系统之间。它还支持与主机操作系统的无缝集成，使得在虚拟机和主机之间共享文件和剪贴板变得非常方便。\nParallels Desktop还提供了强大的性能优化功能，包括智能调整资源分配、硬件加速和多线程处理，以确保虚拟机的运行效果最佳。此外，软件还支持高级网络设置和云服务的集成，使用户能够轻松访问和管理远程服务器和应用程序。\n另外，Parallels Desktop还支持在Mac电脑上运行Windows游戏，并且为游戏提供了专门的游戏模式，以提供更好的性能和流畅度。\n总而言之，Parallels Desktop是一款功能全面、易于使用的虚拟机软件，它为用户提供了在Mac电脑上同时运行多个操作系统的便利，无论是开发者、专业人士还是普通用户，都能从中受益。\n\n**系统要求13.0以上**\n\n**拖放到桌面的InjectLib-m[AI](https://www.macz.com/z/s_10.html)n文件夹不可修改，不可删除，每次退出Parallels Desktop后，使用Parallels_启动器一键启动，可能会遇到启动时间较长，请耐心等待。**\n\n[![img](https://jpg.mac89.com/pic/202310/23104352_e2c27a95c5.jpeg)](https://jpg.mac89.com/pic/202310/23104352_e2c27a95c5.jpeg)\n\n<font color=#f26522 size=4 face=宋体><strong>Parallels Desktop  Mac破解版安装说明</strong></font>\n\n打开下载好的安装包，双击 开始安装PD\n\n[![img](https://jpg.mac89.com/pic/202308/26115947_d8bb084a41.png)](https://jpg.mac89.com/pic/202308/26115947_d8bb084a41.png)\n\n软件许可界面，取消左下角勾选，点击【接受】，如图：\n\n![img](https://jpg.mac89.com/pic/202308/23084200_6d4bd99e4a.jpeg)\n\n输入用户密码后确认，开始安装虚拟机\n\n![img](https://jpg.mac89.com/pic/202308/23084209_62daf94933.jpeg)\n\n安装完成后，Parallels Desktop 19自动启动\n\n![img](https://jpg.mac89.com/pic/202308/23081119_400096f272.jpeg)\n\n自动打开应用界面可以在线下载安装推荐的Windows系统，或者选择”其他选项“自定义安装\n\n![img](https://jpg.mac89.com/pic/202308/23081137_296a9a8bc6.jpeg)\n\n在线安装，虚拟机会自动下载并安装win11镜像无需任何操作\n\n![img](https://jpg.mac89.com/pic/202308/23081245_df7b14d254.png)\n\n选择”其他选项“，可以安装自己下载好的离线win镜像，点击【安装Windows】，点击”继续“如图：\n\n![img](https://jpg.mac89.com/pic/202308/23081337_9e7b9d7388.png)\n\n系统会自动为您识别本次Windows系统，点击【继续】，如图：\n\n![img](https://jpg.mac89.com/pic/202201/10100429_1c4a1d7116.jpeg)\n\n点击【继续】，如图:\n\n![img](https://jpg.mac89.com/pic/202201/10100443_72ded57513.jpeg)\n\n选择您需要安装的系统版本，\n\n![img](https://jpg.mac89.com/pic/202201/10100527_6e4ff5a428.jpeg)\n\n需要选择足够空间的磁盘，然后点击”创建“进行安装，如图：\n\n![img](https://jpg.mac89.com/pic/202201/10100546_880d64db12.jpeg)\n\n正在创建系统，如图：\n\n![img](https://jpg.mac89.com/pic/202201/10100616_d9eac657ba.jpeg)\n\nWindows系统安装完成！\n\n![img](https://jpg.mac89.com/pic/202201/10100643_8665b6c4a1.jpeg)\n\n初次进入win系统，会弹窗提示安装Parallels Tools，此为必要的驱动安装程序，等待安装。\n\n![img](https://jpg.mac89.com/pic/202308/23081836_b1e8cab053.jpeg)\n\n完成后选择重新启动\n\n![img](https://jpg.mac89.com/pic/202308/23081941_5e600d5cbb.jpeg)\n\n<font color=#b0171f size=3 face=宋体><strong>再次进入Win11系统后，选择退出win，关闭Parallels Desktop 19</strong></font>\n\n将InjectLib-mAIn文件夹  和 Parallels_启动器 拖放到桌面（此文件要常驻桌面，不可删除）\n\n![img](https://jpg.mac89.com/pic/202308/23082115_11ecfa4e86.png)\n\n打开桌面的InjectLib-mAIn文件夹，双击包内的“启动”\n\n![img](https://jpg.mac89.com/pic/202308/23082127_517bbf782c.png)\n\n<font color=#b0171f size=3 face=宋体><strong>13系统：在安装证书前，打开系统偏好设置----隐私与安全性---安全磁盘访问权限----添加终端并开启，以便安装证书可运行执行。开发者工具 和 App管理 也添加一下 终端权限</strong></font>\n\n![img](https://jpg.mac89.com/pic/202211/07123025_8f6638d76f.png)\n\n输入用户登录密码，直接输入(这里不显示数字)，\n\n![img](https://jpg.mac89.com/pic/202308/23082207_212ed2d595.png)\n\n出现的扫描提示不是Parallels Desktop，直接回车，\n\n![img](https://jpg.mac89.com/pic/202306/12101412_ba0c1bb72c.jpeg)\n\n如下图，出现扫描提醒Parallels Desktop， 输入一个“y”,回车\n\n![img](https://jpg.mac89.com/pic/202308/23082256_95766a9649.png)\n\n输入密码后 回车，开始执行破解，得到以下显示，即破解成功\n\n![img](https://jpg.mac89.com/pic/202306/12101314_0dc3c959c5.png)\n\n退出终端，双击桌面的Parallels_启动器，即可一键启动虚拟机（建议每次退出Parallels Desktop后，使用启动器一键启动）\n\n![img](https://jpg.mac89.com/pic/202308/23082420_e938b3aa5e.png)\n\n打开pd菜单的偏好设置，<font color=#b0171f size=3 face=宋体><strong>**关掉自动更新和检查更新，以及高级选项中的所有勾选**</strong></font>\n\n![img](https://jpg.mac89.com/pic/202308/23082545_79afc734a2.png)\n\n![img](https://jpg.mac89.com/pic/202212/14094626_e88f2bf8f2.png)\n\n\n<font color=#f26522 size=4 face=宋体><strong>Parallels Desktop 19 for Mac新增功能</strong></font>\n\n为macOS Sonoma 14做好准备\nParallels Desktop 19完全支持macOS Sonoma 14，既可以作为Mac上的主要操作系统，也可以在虚拟机中运行，因此您可以在新操作系统可用时升级Mac计算机。您将在下面看到有关macOS Sonoma具体改进的更多详细信息。\n外观和感觉\n添加反映最新设计准则的新应用程序图标；\n添加了重新设计的对话框和警报，以便更容易地与应用程序交互；\n在打开存档和打包的虚拟机之前添加确认对话框；\n恢复到快照时，在警告对话框中添加“不再显示”复选框。\nMac上的Windows\n与Mac集成：允许使用Mac的Touch ID登录到Windows 10或Windows 11虚拟机。您的Windows帐户凭据安全存储在macOS钥匙链中，受Touch ID保护，仅在此Mac上可用。\n图形：在Windows中添加了对OpenGL 4.1版本的支持，使您能够运行ArcGIS CityEngine 2023、Vectorworks Vision 2023、VariCAD、Deswik.CAD等。此版本还提高了ArcGIS Pro软件的性能。\n打印：在macOS Sonoma上，Parallels Desktop 19现在使用Internet打印协议（IPP）从Windows进行打印，该协议与硬件支持的功能具有更好的兼容性。\n键盘：在Microsoft Edge中，Command+W现在关闭一个选项卡，而不是退出应用程序。\nLinux\n增加了对几个最新Linux发行版的支持，包括Ubuntu 22.04.2、Fedora 38、Debian 12、CentOS 9等；\n支持在带有Apple Silicon的Mac计算机上安装和运行Arm版本的CentOS 9 Stream。\nmacOS（作为虚拟机）\n增加了在苹果硅上暂停和恢复macOS虚拟机的功能；\n在macOS Ventura 13及更新版本上，添加了使用“新建”对话框从I[ps](https://www.macz.com/z/s_554.html)W映像在苹果硅Mac上安装macOS虚拟机的功能；\n在macOS Ventura 13及更新版本上，增加了对“滚动和缩放”多点触摸手势的支持；\n在macOS Sonoma 14及更新版本上，支持基于虚拟机窗口大小的动态虚拟机分辨率调整。\n\n![img](https://jpg.mac89.com/pic/202308/22172343_edb2c7c546.jpeg)\n\n![img](https://jpg.mac89.com/pic/202308/22172343_edb2c7c546.jpeg)\n\n<font color=#f26522 size=4 face=宋体><strong>Parallels Desktop 19 for Mac停用功能</strong></font>\n\n从Parallels Desktop 19中删除了什么\n根据参与Parallels客户体验计划的用户的统计，一些产品功能很少使用或根本没有使用。我们决定要么停止支持并从Parallels Desktop中删除它们，要么专注于常用功能和进一步的增强。\nmacOS 10.14、10.15和11（作为主操作系统）将无法运行Parallels Desktop 19。作为用户，您仍然可以在这些macOS系统上使用以前版本的Parallels Desktop，甚至可以使用Parallels Desktop19许可证密钥激活它；\n在使用英特尔处理器的Mac电脑上，不再支持旧的Windows操作系统版本（2000、XP、Vista、8和8.1）。作为用户，您仍然可以安装或使用它们，但它们不再得到维护。Parallels建议升级到最新版本；\n“打印为PDF（Mac Desktop）”打印选项不再可用。使用微软的“打印成PDF”；\n在使用英特尔处理器的Mac电脑上，“从电脑传输Windows”选项不再可用。使用Apple迁移助手在新的Windows虚拟机中手动迁移数据和重新安装Windows应用程序；\n带有检查频率选择器的“检查更新”下拉菜单不再可用。如果启用了自动检查，Parallels Desktop在运行时每天检查一次更新。\n\n![img](https://jpg.mac89.com/pic/202306/12145129_8dd26f4b75.jpeg)\n","tags":["破解","ARM-windows11"],"categories":["工具"]},{"title":"Go-自定义错误处理机制","url":"/2024/04/17/Go-自定义错误处理机制/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>Go：自定义错误处理机制</strong></font>\n\n<!--more-->\n\n```go\n// 关键函数 errors.New()\npackage main\n\nimport (\n\t\"errors\"\n\t\"fmt\"\n)\n\nfunc main() {\n\terr := test()\n\tif err != nil {\n\t\tfmt.Println(\"自定义错误：\", err)\n\t}\n\tfmt.Println(\"上面的出发操作执行成功...\")\n\tfmt.Println(\"正常执行下面的逻辑...\")\n}\n\nfunc test() (err error) {\n\tnum1 := 10\n\tnum2 := 0\n\tif num2 == 0 {\n\t\treturn errors.New(\"除数不能为0哦～～\")\n\t} else {\n\t\tresult := num1 / num2\n\t\tfmt.Println(result)\n\t\treturn nil\n\t}\n}\n\n```\n","tags":["go","基础"],"categories":["go","错误处理"]},{"title":"Go-错误捕获机制","url":"/2024/04/17/Go-错误捕获机制/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>Go：错误捕获机制</strong></font>\n\n<!--more-->\n\n```go\npackage main\n\nimport \"fmt\"\n\nfunc main() {\n\ttest()\n\tfmt.Println(\"上面的出发操作执行成功...\")\n\tfmt.Println(\"正常执行下面的逻辑...\")\n}\n\nfunc test() {\n  // 利用 defer + recover 来捕获错误。 defer后面加上 () 来执行匿名函数的调用\n\tdefer func() {\n    // 调用recover 内置函数，来捕获错误\n\t\terr := recover()\n    //如果没有捕获错误。返回值为零值： nil\n\t\tif err != nil {\n\t\t\tfmt.Println(\"错误已经捕获：\")\n\t\t\tfmt.Println(\"Error:  \", err)\n\t\t}\n\t}()\n\tnum1 := 10\n\tnum2 := 0\n\tresult := num1 / num2\n\tfmt.Println(result)\n}\n\n```\n","tags":["go","基础"],"categories":["go","错误处理"]},{"title":"移动光猫-吉比特 H3-1S H3-2S获取超级密码方法(亲测可用！！)","url":"/2024/04/15/移动光猫-吉比特-H3-1S-H3-2S获取超级密码方法-亲测可用！！/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>**移动光猫-吉比特 H3-1S H3-2S获取超级密码方法**:</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>1.使用光猫背后的普通用户名登录进光猫，浏览器复制以下链接打开</strong></font>\n\n[http://192.168.1.1/usr=CMCCAdmin ... md=1&telnet.gch](http://192.168.1.1/usr=CMCCAdmin&psw=aDm8H%MdA&cmd=1&telnet.gch)\n\n<font color=#f26522 size=4 face=宋体><strong>2.电脑启用 telnet</strong></font>\n\n![开启telnet成功](https://s2.loli.net/2024/05/09/uKpnNMcji45sfxv.png)\n\n<font color=#f26522 size=4 face=宋体><strong>3.通过telnet进入光猫</strong></font>\n\n\n输入：\n\n`telnet 192.168.1.1`\n\n用户名、密码如下：\n`CMCCAdmin`\n`aDm8H%MdA`\n\n<font color=red size=3 face=宋体><strong>注意：密码默认不显示 不需要重复输入</strong></font>\n\n![连接状态](https://s2.loli.net/2024/05/09/4riCBgt57fanybh.png)\n<font color=#f26522 size=4 face=宋体><strong>4.查看一下登陆信息,可以看到账号密码全部进行了加密</strong></font>\n\n```bash\nsidbg 1 DB p DevAuthInfo\n```\n\n输入上面的命令后将会显示下面的内容：\n\n```bash\n<Tbl name=\"DevAuthInfo\" RowCount=\"2\">\n<Row No=\"0\">\n<DM name=\"ViewName\" val=\"IGD.AU1\"/>\n<DM name=\"Enable\" val=\"1\"/>\n<DM name=\"IsOnline\" val=\"0\"/>\n<DM name=\"AppID\" val=\"1\"/>\n<DM name=\"User\" val=\"******\"/>\n<DM name=\"Pass\" val=\"******\"/>\n<DM name=\"Level\" val=\"1\"/>\n<DM name=\"Extra\" val=\"\"/>\n<DM name=\"ExtraInt\" val=\"0\"/>\n</Row>\n<Row No=\"1\">\n<DM name=\"ViewName\" val=\"IGD.AU2\"/>\n<DM name=\"Enable\" val=\"1\"/>\n<DM name=\"IsOnline\" val=\"0\"/>\n<DM name=\"AppID\" val=\"1\"/>\n<DM name=\"User\" val=\"******\"/>\n<DM name=\"Pass\" val=\"******\"/>\n<DM name=\"Level\" val=\"2\"/>\n<DM name=\"Extra\" val=\"\"/>\n<DM name=\"ExtraInt\" val=\"0\"/>\n</Row>\n</Tbl> \n```\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>5.修改CMCCAdmin用户的登录密码</strong></font>\n\n\n输入下面的命令更改CMCCAdmin的密码：\n\nsidbg 1 DB set DevAuthInfo 0 Pass admin\n\nPass后面是CMCCAdmin的登录密码\n\n再输入下面的命令保存即可\n\n```bash\nsidbg 1 DB save\n```\n\n\n\n完成后即可使用CMCCAdmin+更改后的密码即可登录光猫后台。\n\n祝各位使用愉快！\n","tags":["运维","移动","光猫","超级用户"],"categories":["工具"]},{"title":"mac-查看硬盘命令","url":"/2024/04/15/mac-查看硬盘命令/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>mac 查看硬盘命令:</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>在 Mac 上查看硬盘的命令有多种，以下是几个常用的方法：</strong></font>\n\n+ <font color=#b0171f size=3 face=宋体><strong>1、使用 Finder</strong></font>\n\n可以在 Finder 中查看所有已连接的硬盘和存储设备。在 Finder 窗口的侧边栏中，单击“设备”即可查看硬盘列表。您还可以在“应用程序”文件夹中找到“实用工具”文件夹，里面包含“磁盘工具”应用程序，可用于查看磁盘和分区的详细信息。\n\n\n\n+ <font color=#b0171f size=3 face=宋体><strong>2、使用终端命令</strong></font>\n  + 在 Mac 上也可以使用终端命令来查看硬盘信息，以下是几个常用的命令：\n  + `df` 命令：该命令可以查看所有已连接的硬盘和存储设备的总体使用情况。在终端中输入`df -h`即可将磁盘使用情况以人类可读的方式输出。\n  + `diskutil` 命令：该命令可以查看所有磁盘和分区的详细信息。在终端中输入`diskutil list`即可列出所有磁盘和分区的信息。\n  + `diskutil info` 命令：该命令可以查看指定磁盘或分区的详细信息。在终端中输入`diskutil info /dev/disk0`即可查看磁盘`/dev/disk0`的详细信息。\n\n\n\n<font color=red size=4 face=宋体><strong>以上是在 Mac 上常用的查看硬盘信息的方法，您可以根据实际需求选择适合自己的方法。</strong></font>\n\n","tags":["运维","命令","磁盘"],"categories":["Mac"]},{"title":"一键搞定多层跳板访问目标机器","url":"/2024/04/13/一键搞定多层跳板访问目标机器/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>一、免密码登录ssh</strong></font>\n\n<!--more-->\n\n+ <font color=#f26522 size=4 face=宋体><strong>1、生成钥匙对</strong></font>\n\n  ```bash\n  # 生成key，但首先你得安装ssh\n  ssh-keygen -t rsa -b 2048\n  # 一路按回车换行，终端输出大概是这样\n  # Generating public/private rsa key pair.\n  # Enter file in which to save the key (/home/username/.ssh/id_rsa): \n  # Enter passphrase (empty for no passphrase): \n  # Enter same passphrase again: \n  # Your identification has been saved in /home/username/.ssh/id_rsa.\n  # Your public key has been saved in /home/username/.ssh/id_rsa.pub.\n  ```\n\n+ <font color=#f26522 size=4 face=宋体><strong>2、将共钥传输给远端主机</strong></font>\n\n  ```bash\n  # id@server 是你的用户名和远端主机地址喔\n  ssh-copy-id id@server\n  # 按规定输入远端主机密码后，成功的话能看到终端输出\n  # Number of key(s) added:        1\n  ```\n\n<font color=red size=4 face=宋体><strong>PS：</strong></font><font color=#b0171f size=3 face=宋体><strong>公钥储存在远端主机这个文件里：.ssh/authorized_keys，现在当你重新再通过SSH连接到远端主机时，已经不再需要密码啦！</strong></font>\n\n<font color=#00b2c2 size=5 face=宋体><strong>二、使用`跳板`连接到`目标机器`(ProxyJump)</strong></font>\n\n 本节内容参考自：[SSH 通过跳板机直接访问内网机器](https://link.zhihu.com/?target=https%3A//woodenrobot.me/2019/07/18/ssh-proxyjump/)、[SSH使用技巧-免密码/自动代理](https://atomlab.org/posts/code/ssh-trick/)\n\n<font color=red size=4 face=宋体><strong>PS：</strong></font><font color=#b0171f size=3 face=宋体><strong>需要 `OpenSSH 7.3` 以上版本才可以使用 `ProxyJump`, 使用下列命令查看`OpenSSH` 版本：</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>1、直接命令`临时使用`：</strong></font>\n\n  ```bash\n  ssh -J [email protected]:port1,[email protected]:port2\n  \n  # 可以直接使用上述命令通过跳板机直接登录内网机器，比如：\n  # ssh username@目标机器IP -p 22 -J username@跳板机IP:22\n  # 如果需要通过多个跳板机则以 , 分割：\n  # ssh username@目标机器IP -p 22 -J username1@跳板机IP1:22,username2@跳板机IP2:22\n  ```\n\n+ <font color=#f26522 size=4 face=宋体><strong>2、长期使用`配置文件`||`~\\.ssh\\config`：</strong></font>\n\n  ```bash\n  Host tiaoban1    # 代表跳板机 1\n      HostName 跳板机 1 的 IP\n      Port 22    # ssh 连接端口\n      User username1    # 跳板机 1 的用户名\n  \n  Host tiaoban2    # 代表跳板机 2\n      HostName 跳板机 2 的 IP\n      Port 22    # ssh 连接端口\n      User username2    # 跳板机 2 的用户名\n  \n  Host target    # 代表目标机器的名字\n      HostName 目标机器 IP    # 这个是目标机器的 IP\n      Port 22    # 目标机器 ssh 的端口\n      User username_target    # 目标机器的用户名\n      ProxyJump tiaoban1,tiaoban2\n  \n  Host 10.10.0.*    # 使用通配符 * 代表 10.10.0.1 - 10.10.0.255\n      Port 22    # 服务器端口\n      User username    # 服务器用户名\n      ProxyJump tiaoban1,tiaoban2\n  ```\n\n+ <font color=#f26522 size=4 face=宋体><strong>3、使用方法：</strong></font>\n\n  ```bash\n  ssh tiaoban1   # 连接到跳板机 1\n  \n  ssh target   # 连接到目标机器\n  ```\n\n<font color=#00b2c2 size=5 face=宋体><strong>三、安装`expect`交互</strong></font>\n\n 本节内容参考自：[Shell脚本交互之：自动输入密码](https://blog.csdn.net/zhangjikuan/article/details/51105166)\n\n<font color=red size=4 face=宋体><strong>PS：</strong></font><font color=#b0171f size=3 face=宋体><strong>用于与控制台交互，如果上面的内容无法 免密登录服务器，可以用这种方法</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>1、安装 `expect`：</strong></font>\n\n  ```shell\n  # ubuntu or debian\n  sudo apt-get install expect\n  \n  # centos7\n  yum install expect\n  \n  # mac os  // 没有brew 去搜一下，怎么安装 brew\n  brew install expect\n  ```\n\n+ <font color=#f26522 size=4 face=宋体><strong>2、语法：</strong></font>\n\n  ```bash\n  #!/usr/bin/expect -f\n  # #!/bin/expect   //原文此处是错误，导致 no such file or directory  正确的写法是 #!/usr/bin/expect -f\n  set timeout 30\n  spawn ssh -l jikuan.zjk 10.125.25.189\n  expect \"password:\"\n  send \"zjk123\\r\"\n  interact\n  ```\n\n+ <font color=#f26522 size=4 face=宋体><strong>3、说明：</strong></font>\n\n  ```\n  在运行脚本时候要expect  file，不能sh file了\n  上面语句第一句是设定超时时间为30s，spawn是expect的语句，执行命令前都要加这句\n  expect \"password：\"这句意思是交互获取是否返回password：关键字，因为在执行ssh时会返回输入password的提示：jikuan.zjk@10.125.25.189's password:\n  send就是将密码zjk123发送过去\n  interact代表执行完留在远程控制台，不加这句执行完后返回本地控制台\n  ```\n\n","tags":["运维","跳板","ssh"],"categories":["工具"]},{"title":"Python-打包报错-PyInstaller.exceptions.PythonLibraryNotFoundError:-Python-library-not-found","url":"/2024/04/03/Python-打包报错-PyInstaller-exceptions-PythonLibraryNotFoundError-Python-library-not-found/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>Python-打包报错</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>错误说明：</strong></font>\n\n```python\nPyInstaller.exceptions.PythonLibraryNotFoundError: Python library not found: libpython3.8.so.1.0, libpython3.8.so\n\n这个错误是因为 编译文件中没有以上两个文件，或者找不到\n```\n\n<font color=red size=4 face=宋体><strong>解决办法：</strong></font><font color=#00b2c2 size=3 face=宋体><strong>重新编译</strong></font>\n\n```shell\n# 安装依赖\nsudo yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel libffi-devel gdbm-devel db4-devel libpcap-devel xz-devel make\n\n# 下载源码 3.8.1\nwget https://www.python.org/ftp/python/3.8.1/Python-3.8.1.tgz\n\n# 解压压缩包\ntar -zxvf Python-3.8.1.tgz\n\n# 进入文件夹\ncd Python-3.8.1\n\n# 配置安装位置\n./configure --prefix=/usr/local/python3 --enable-shared --with-ssl\n\n# 安装\nmake && make install\n```\n\n<font color=red size=4 face=宋体><strong>解决 Python library not found：</strong></font><font color=#00b2c2 size=3 face=宋体><strong>复制编译好的文件，到系统环境变量：</strong></font>\n\n```python\n# 查找 libpython3.8.so.1.0 所在目录\nfind / -name libpython3.8.so.1.0\n\n# 所在动态库在 /usr/local/python3/lib 中\ncp /usr/local/python3/lib/libpython3.8.a /usr/lib64/\ncp /usr/local/python3/lib/libpython3.8.so /usr/lib64/\ncp /usr/local/python3/lib/libpython3.8.so.1.0 /usr/lib64/\ncp /usr/local/python3/lib/libpython3.so /usr/lib64/\n```\n\n","tags":["python","打包"],"categories":["工具"]},{"title":"lxml-模块导致-非法指令","url":"/2024/04/03/lxml-模块导致-非法指令/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>from lxml import etree\n非法指令(吐核)</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>错误说明：</strong></font>\n\n```txt\n这个错误是因为 lxml 5.2.0 最新版本导致的 centos7导库错误引起的\n```\n\n<font color=red size=4 face=宋体><strong>解决办法：</strong></font>\n\n```\npip3 install lxml==5.0.0\n```\n\n","tags":["python","打包"],"categories":["工具"]},{"title":"Python、Go 打包运行代码","url":"/2024/04/02/Python、Go 打包运行代码/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>Go</strong></font>\n\n<!--more-->\n\n```go\ngo build   //这个命令会查找项目中的main包，并编译生成一个可执行文件\ngo build -o myapp  //如果你想给生成的可执行文件指定一个不同的名称，可以使用-o参数\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>Python</strong></font>\n\n```python\n# 使用PyInstaller\npip install pyinstaller\n\n# 这个命令会生成一个单独的可执行文件（在Windows上是.exe，在Linux和Mac上是没有扩展名的文件）。--onefile选项告诉PyInstaller生成一个单独的文件，而不是一个包含许多依赖文件的目录。\npyinstaller --onefile your_script.py\n```\n\n","tags":["python","go"],"categories":["工具"]},{"title":"go-Post方式取参数","url":"/2024/03/29/go-Post方式取参数/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>go Post方式取参数：</strong></font>\n\n<!--more-->\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"github.com/gin-gonic/gin\"\n)\n\nfunc _form(context *gin.Context) {\n\tfmt.Println(context.PostForm(\"name\"))                // from 表单中只能接受一个相同 keys\n\tfmt.Println(context.PostFormArray(\"name\"))           // from 中 允许接受多个 相同 keys 一个from中存在两个 name\n\tfmt.Println(context.DefaultPostForm(\"addr\", \"四川\")) //如果 keys ：addr 不存在，那么 addr默认值 ： 四川\n\tfrom, error := context.MultipartForm()               // 接受from中所有的参数，包括文件\n\tfmt.Println(from, error)\n}\n\nfunc main() {\n\trouter := gin.Default()\n\trouter.POST(\"from\", _form)\n\trouter.Run(\":80\")\n}\n```\n\n","tags":["go","web"],"categories":["go","go_gin"]},{"title":"go-get_方式取参数-","url":"/2024/03/29/go-get-方式取参数/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>go-get_方式取参数</strong></font>\n\n<!--more-->\n\n`http://127.0.0.1/query?user=尼碟`\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"github.com/gin-gonic/gin\"\n)\n\nfunc _query(context *gin.Context) {\n\tfmt.Println(context.Query(\"user\"))         //取单个\n\tfmt.Println(context.GetQuery(\"user\"))      //取单个\n\tfmt.Println(context.GetQueryArray(\"user\")) // 如果参数下面存在多个 相同 keys 的话，可以用这种方式\n}\n\nfunc main() {\n\trouter := gin.Default()\n\trouter.GET(\"/query\", _query)\n\trouter.Run(\":80\")\n}\n// 访问url： http://127.0.0.1/query?user=尼碟\n\n// 后台打印内容：\n\n// 尼碟\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>param方式取参数</strong></font>\n\n`http://127.0.0.1/param/136/47/狗蛋大兵`\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"github.com/gin-gonic/gin\"\n)\n\nfunc _param(context *gin.Context) {\n   fmt.Println(\"这是 id：\" + context.Param(\"id\"))\n   fmt.Println(\"这是 pid：\" + context.Param(\"pid\"))\n   fmt.Println(\"这是 name：\" + context.Param(\"name\"))\n}\n\nfunc main() {\n\trouter := gin.Default()\n\trouter.GET(\"/param/:id/:pid/:name\", _param) // 可以取多个动态参数\n\trouter.Run(\":80\")\n}\n\n//  访问url： http://127.0.0.1/param/136/47/狗蛋大兵\n\n// 打印：\n// 这是 id：136\n// 这是 pid：47\n// 这是 name：狗蛋大兵\n\n```\n\n","tags":["go","web"],"categories":["go","go_gin"]},{"title":"go-关键字与保留字","url":"/2024/03/29/go-关键字与保留字/","content":"\n\n\n<font color=#00b2c2 size=7 face=宋体><strong>go-关键字与保留字：</strong></font>\n\n<!--more-->\n\n<font color=#00b2c2 size=5 face=宋体><strong>关键字：</strong></font>\n\n```\nbreak        default      func         interface    select\ncase         defer        go           map          struct\nchan         else         goto         package      switch\nconst        fallthrough  if           range        type\ncontinue     for          import       return       var\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>保留字：</strong></font>\n\n```\nConstants:    true  false  iota  nil\n\nTypes:    int  int8  int16  int32  int64  \n          uint  uint8  uint16  uint32  uint64  uintptr\n          float32  float64  complex128  complex64\n          bool  byte  rune  string  error\n\nFunctions:   make  len  cap  new  append  copy  close  delete\n             complex  real  imag\n             panic  recover\n```\n\n","tags":["go","基础"],"categories":["go","基础"]},{"title":"go-的依赖管理相关内容","url":"/2024/03/29/go-的依赖管理相关内容/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>配置环境：</strong></font>\n\n<!--more-->\n\n```shell\nset GO111MODULE=on\nSET GOPROXY=[https://goproxy.cn](https://goproxy.cn/)  # 这是win环境下的 \nexport GOPROXY=[https://goproxy.cn](https://goproxy.cn/)   # 这是mac环境下的\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>go mod 相关命令：</strong></font>\n\n```go\ngo mod init [包名] // 初始化项目(如果你是初始化项目直接 `go mod init` 就好了)\n\ngo get   // 下载依赖包，并且还可以指定下载的版本。\ngo get -u   //升级到最新的次要版本或者修订版本(x.y.z, z是修订版本号， y是次要版本号)\ngo get -u=patch   //升级到最新的修订版本\ngo get package@version  //升级到指定的版本号version \n\n\ngo mod download    //下载依赖的module到本地cache（默认为$GOPATH/pkg/mod目录）\ngo mod edit        //编辑go.mod文件\ngo mod graph       //打印模块依赖图\ngo mod init        //初始化当前文件夹, 创建go.mod文件\ngo mod tidy        //增加缺少的module，删除无用的module\ngo mod vendor      //将依赖复制到vendor下\ngo mod verify      //校验依赖\ngo mod why         //解释为什么需要依赖\n```\n\n<font color=#f26522 size=4 face=宋体><strong></strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong></strong></font>\n","tags":["go","基础"],"categories":["go"]},{"title":"go-的 mod 依赖管理相关内容","url":"/2024/03/29/go-的-mod-依赖管理相关内容/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>配置环境：</strong></font>\n\n<!--more-->\n\n```shell\nset GO111MODULE=on\nSET GOPROXY=[https://goproxy.cn](https://goproxy.cn/)  # 这是win环境下的 \nexport GOPROXY=[https://goproxy.cn](https://goproxy.cn/)   # 这是mac环境下的\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>go mod 相关命令：</strong></font>\n\n```go\ngo mod init [包名] // 初始化项目(如果你是初始化项目直接 `go mod init` 就好了)\n\ngo get   // 下载依赖包，并且还可以指定下载的版本。\ngo get -u   //升级到最新的次要版本或者修订版本(x.y.z, z是修订版本号， y是次要版本号)\ngo get -u=patch   //升级到最新的修订版本\ngo get package@version  //升级到指定的版本号version \n\n\ngo mod download    //下载依赖的module到本地cache（默认为$GOPATH/pkg/mod目录）\ngo mod edit        //编辑go.mod文件\ngo mod graph       //打印模块依赖图\ngo mod init        //初始化当前文件夹, 创建go.mod文件\ngo mod tidy        //增加缺少的module，删除无用的module\ngo mod vendor      //将依赖复制到vendor下\ngo mod verify      //校验依赖\ngo mod why         //解释为什么需要依赖\n```\n\n<font color=#f26522 size=4 face=宋体><strong></strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong></strong></font>\n","tags":["go","基础"],"categories":["go","基础"]},{"title":"gin-响应体的返回","url":"/2024/03/27/gin-响应体的返回/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>gin-响应体的返回：</strong></font>\n\n<!--more-->\n\n+ <font color=#f26522 size=4 face=宋体><strong>响应字符串：</strong></font>\n\n```go\nfunc _string(context *gin.Context) {\n\tcontext.String(http.StatusOK, \"我是你爸爸\")\n}\n\nfunc main() {\n\trouter.GET(\"/string\", _string)\n}\n```\n\n\n\n+ <font color=#f26522 size=4 face=宋体><strong>响应Json：</strong></font>\n\n```go\nfunc _json(context *gin.Context) {\n\n  // 方式：一\n\t// 创建结构体\n\ttype UserInfo struct {\n\t\tUserName string `json:\"user_name\"` // 渲染json 为后面的小写 user_name\n\t\tAge      int    `json:\"age\"`\n\t\tPassWord string `json:\"-\"` // 在json 中 \"-\" 表示不渲染该项\n\t}\n\t// 在结构体中添加数据  => Json\n\t//user := UserInfo{\"李小屁\", 25, \"123456\"}\n\t//context.JSON(200, user)\n\n  // 方式：二\n\t// json 响应map\n\t//userMap := map[string]string{\n\t//\t\"user_name\": \"李小头\",\n\t//\t\"age\": \"23\",\n\t//}\n\t//context.JSON(200, userMap)\n\n  // 方式：三\n\t//直接响应 Json 数据\n\tcontext.JSON(200, gin.H{\"user_name\": \"李中头\", \"age\": 28})\n\n}\n\nfunc main() {\n\trouter.GET(\"/json\", _json)\n}\n```\n\n+ <font color=#f26522 size=4 face=宋体><strong>响应 xml：</strong></font>\n\n```go\n// 响应 xml\nfunc _xml(context *gin.Context) {\n\tcontext.XML(http.StatusOK, gin.H{\"user\": \"hanru\", \"message\": \"hey\", \"status\": http.StatusOK, \"data\": gin.H{\"user\": \"李大头\"}})\n}\n\nfunc main() {\n\trouter.GET(\"/xml\", _xml)\n}\n```\n\n\n\n+ <font color=#f26522 size=4 face=宋体><strong>响应 yaml：</strong></font>\n\n```go\n// 响应 xml\nfunc _yaml(context *gin.Context) {\n\tcontext.YAML(http.StatusOK, gin.H{\"user\": \"hanru\", \"message\": \"hey\", \"status\": http.StatusOK, \"data\": gin.H{\"user\": \"李大头\"}})\n}\n\nfunc main() {\n\trouter.GET(\"/yaml\", _yaml)    // 这里需要注意的是，返回yaml 文件 某些浏览器会自动下载\n}\n```\n\n\n\n+ <font color=#f26522 size=4 face=宋体><strong>响应 html：</strong></font>\n\n```go\nfunc _html(context *gin.Context) {\n\tprintln(_time())\n\tcontext.HTML(200, \"index.html\", gin.H{})\n}\n\n// 其中 加载静态文件 和 html模板文件\nfunc main() {\n\trouter.LoadHTMLGlob(\"templates/*\")\n\trouter.Static(\"/static\", \"./static\")\n}\n\n```\n\n+ <font color=#f26522 size=4 face=宋体><strong>响应文件：</strong></font>\n\n```go\nrouter.StaticFile(\"/static\", \"static/cc.png\")   //没有对应的函数，直接返回\n```\n\n![响应文件](https://s2.loli.net/2024/03/29/GaivOTL8IQR9ZY2.png)\n\n<font color=#f26522 size=4 face=宋体><strong>重定向：</strong></font>\n\n```go\n// 响应跳转 302\nfunc _redirect(context *gin.Context) {\n\tcontext.Redirect(302, \"https://www.baidu.com\")\n}\nfunc main() {\n\trouter.GET(\"/baidu\", _redirect) // 301: 永久重定向，  302：临时重定向\n}\n```\n\n","tags":["go","web"],"categories":["go","go_gin"]},{"title":"go-安装并部署一个简单的-gin-web接口","url":"/2024/03/27/go-安装并部署一个简单的-gin-web接口/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>go 安装并部署一个简单的 gin web接口:</strong></font>\n\n<!--more-->\n\n+ 1.下载并安装 gin：\n\n  ```bash\n  go get -u github.com/gin-gonic/gin\n  ```\n\n+ 2.将 gin 引入到代码中\n\n  ```go\n  import \"github.com/gin-gonic/gin\"\n  ```\n\n+ 3.一个简单的gin_ web程序\n\n  ```go\n  package main\n  \n  import (\n  \t\"github.com/gin-gonic/gin\"\n  \t\"net/http\"\n  )\n  \n  func main() {\n  \t// 创建一个默认的路由\n  \trouter := gin.Default()\n  \n  \t// 绑定路由规则 和路由函数\n  \trouter.GET(\"index\", func(context *gin.Context) {\n  \t\tcontext.String(200, \"你吧牛逼了\")\n  \t})\n  \n  \t// 启动监听 端口\n  \t//router.Run(\":8080\")\n  \n  \t// 采用原声 http服务的方式启动  router.Run 本质上就是 http.ListenAndServe 的封装\n  \thttp.ListenAndServe(\":8080\", router)\n  }\n  ```\n","tags":["go","web"],"categories":["go","go_gin"]},{"title":"golang-项目中-web框架的对比","url":"/2024/03/26/golang-项目中-web框架的对比/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>golang 有哪些快速开发的web框架？：</strong></font>\n\n<!--more-->\n\n**不BB，直接上干货。**\n\n```text\n下面的框架涵盖了 Go 语言开发中所有可能用到的开源Web 框架。\n```\n\n**看完之后，你绝对可以找到适合自己的框架。**\n\n## 企业级常用 Web 框架\n\n### <font color=#f26522 size=6 face=宋体><strong>iris（比较推荐）</strong></font>\n\nWeb: 性能测试：8\n\n开源（海外）\n\nWeb框架\n\n目前发展最快的Go Web框架。提供完整的MVC功能并且面向未来。\n\n**项目地址**：[github.com/kataras/iris](https://link.zhihu.com/?target=https%3A//github.com/kataras/iris)\n\n**优点：**\n\n主要侧重于Web开发，提供了Web开发的一系列功能组件，基于MVC开发模式。iris这一年发展比较快，从一个Web Server的组件，也慢慢朝着beego的设计方向努力。\n\n**缺点：**\n\n号称性能最强，结果平平。非模块化设计。最近两年开始朝beego方向发展，但整体框架能力还不完备，需要加油。\n\n![img](https://pic3.zhimg.com/80/v2-6d8759da8b8de5bb0109142a0093dbe2_720w.webp)\n\n### <font color=#f26522 size=6 face=宋体><strong>beego</strong></font>\n\nWeb: 性能测试：8\n\n开源（国内）\n\nWeb框架\n\n**项目地址**：[github.com/beego/beego](https://link.zhihu.com/?target=https%3A//github.com/beego/beego)\n\n**优点：**\n\n开源的比较早，最早的一款功能比较全面的Golang开发框架，一直在Golang领域有着比较大的影响力，作者谢大多年组织着国内影响力比较大GopherCN活动。beego有着比较丰富的开发模块、开箱即用，提供了基于MVC设计模式的项目结构、开发工具链，主要定位为Web开发，当然也可以用于非Web项目开发。\n\n**缺点：**\n\n起步较早，自谢大创业后，近几年发展较慢。非模块化设计，对第三方重量级模块依赖较多。\n\n### <font color=#f26522 size=6 face=宋体><strong>gin</strong></font>\n\n**Web: 性能测试：9**\n\n**Web框架**\n\n**项目地址**：[github.com/gin-gonic/gin](https://link.zhihu.com/?target=https%3A//github.com/gin-gonic/gin)\n\n**优点：**\n\n专注于轻量级的Web Server，比较简单，易于理解，路由和中间件设计不错，可以看做替代标准库net/http.Server的路由加强版web server。献给爱造轮子的朋友们。\n\n**缺点：**\n\n功能简单易用，既是优点，也是缺点。\n\n### <font color=#f26522 size=6 face=宋体><strong>goframe</strong></font>\n\nWeb: 性能测试：8\n\n开源（国内）\n\n**项目地址**：[github.com/gogf/gf](https://link.zhihu.com/?target=https%3A//github.com/gogf/gf)\n\n**模块化框架**\n\n**优点：**\n\n主要以工程化和企业级方向为主，特别是模块化设计和工程化设计思想非常棒。针对业务项目而言，提供了开发规范、项目规范、命名规范、设计模式、开发工具链、丰富的模块、高质量代码和文档，社区活跃。作者也是资深的PHP开发者，PHP转Go的小伙伴会倍感亲切。\n\n**缺点：**开源时间较晚，推广过于佛系，目前主要面向国内用户，未推广海外。\n\n## Go语言学习资料推荐\n\n### **30 天入门 Go 语言**\n\n[Go语言学习路线图](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/2ux5nnExKXIdxxQR3Z6vKQ)\n\n[前言：Go 语言为什么这么火？](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/ije6vF-yVR4GoKPVH3cdUg)\n\n[Day1:Go语言入门篇](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/v3SK5CxtdTXx38i3m1TDtg)\n\n[Day2：Go语言发展史，如何学习Go语言？](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzI1MjkxNDU4OQ%3D%3D%26mid%3D2247484089%26idx%3D1%26sn%3D0f79f77fb36ae5d11a1b607090af35b4%26chksm%3De9dd3c4bdeaab55d55265f50c0e7974a12a108e6248d6d622409219cd9651bf9ddce718ad02e%26scene%3D178%26cur_album_id%3D2106348088293376002%23rd)\n\n[Day3: C语言与Go语言对比学习（关键字、标识符、注释等系列知识）](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzI1MjkxNDU4OQ%3D%3D%26mid%3D2247484159%26idx%3D1%26sn%3D56235262b4bcb951ff16a2f887eb8c61%26chksm%3De9dd3c0ddeaab51bf2e2a49d50b8a2d8df2c9697f93f07dde148e6e422414ae461adee030241%26scene%3D178%26cur_album_id%3D2106348088293376002%23rd)\n\n[Day4: Go 语言程序组成（开始实践编写Go语言程序）](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzI1MjkxNDU4OQ%3D%3D%26mid%3D2247484192%26idx%3D1%26sn%3Da384304d424d3f5673b8ff347898c548%26chksm%3De9dd3dd2deaab4c4f2871f65913e04b7be1e2a00dacce1c6d6074874a8d2dcd407448fdd25d0%26scene%3D178%26cur_album_id%3D2106348088293376002%23rd)\n\n[Day5: Go语言编码风格](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzI1MjkxNDU4OQ%3D%3D%26mid%3D2247484232%26idx%3D1%26sn%3Df8995471c0133b2284898df08c004219%26chksm%3De9dd3dbadeaab4ac963b5b96fe138cecaa9aac1c1464f9071a55ec069a3764289b236801ea85%26scene%3D178%26cur_album_id%3D2106348088293376002%23rd)\n\n[Day6: Go 语言基础知识巩固加强](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzI1MjkxNDU4OQ%3D%3D%26mid%3D2247484250%26idx%3D1%26sn%3D43595cfd10e3fdddf193f144fd3e24e4%26chksm%3De9dd3da8deaab4bea30bffa2d41f069c2432c3c9c8ec67a3c0933b239f9d22d2db73c64aaa55%26scene%3D178%26cur_album_id%3D2106348088293376002%23rd)\n\n[Day7: Go语言变量与变量定义大全解](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzI1MjkxNDU4OQ%3D%3D%26mid%3D2247484299%26idx%3D1%26sn%3D047b9bb53f63cdfa7b6754c13d9ab68b%26chksm%3De9dd3d79deaab46ff5dceaae19d9b77a07695b1b041217c32fa65fb4e500151e2890ca7fc2e3%26scene%3D178%26cur_album_id%3D2106348088293376002%23rd)\n\n[Day8: Go语言数据类型转换](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/x5apTYjJIxDCAHUvS5j_ig)\n\n[Day9: Go语言常量相关知识点](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/Py7Mv4Ue5K0ulnPYVnV8fg)\n\n[Day10: Go语言输出输入函数](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/URjA2g_32toxrp6UAwPmCQ)\n\n[Day11: Go语言命令行详细解读](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/5oRGYi6dSCeljM6zTvyUYQ)\n\n[Day12: Go语言运算符（各类运算符详细讲解）](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/Ov0bhzs6zTI8PGNsA-KxHA)\n\n[Day13: Go语言流程控制](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/x65RcVsFIoGdwNoP7QT7-w)\n\n[Day14: Go语言函数与闭包等知识点](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/LqEglWaYksPtkszCCPl8xA)\n\n[Day15: Go语言数组与切片等知识讲解](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/USqjlB6wG0w0yb-V8fB9MQ)\n\n[Day16: Go语言字典与结构体大全解](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/twqhfQ13oEXKoBtxd24ipA)\n\n[Day17: Go语言方法与接口保姆级讲解](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/Ti5bgeQdKhnRDOlxkSjefw)\n\n[Day18: Go语言面向对象各类知识点讲解](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/__UUZFFSnNq_4uwUzIT2mA)\n\n[Day19: Go语言异常处理各类知识讲解](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/K6pDuD9MmHLxrAfol2VJGQ)\n\n[Day20: Go语言字符串与正则表达式大全解](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/mYxATpMXyxeW5dHEl0iLKA)\n\n[Day21: Go语言和C语言交叉访问](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/n-cd4D010hitdrNnPVWt4A)\n\n[Day22: Go语言操作文件](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/-E9wB4-TqiDdVGXA9yeRLw)\n\n[Day23: Go语言并发编程知识讲解](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/47a26-HLSKxMM0hjl7SSAg)\n\n[Day24: Go语言多线程同步与生产者消费问题详细解读](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/y7F0aSNBVvDhe7uwyQIV4g)\n\n[Day25:Go语言管道(Channel)](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/qJYB9iExAgJxZ6DLCP2rBg)\n\n[Day26: Go 语言定时器](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/6rbB_QgTjvqsPp2qmVXOYA)\n\n[Day27: Go语言指针操作教程（持续更新ing）](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/M-BD8Auty_t9B93F82MUCw)\n\n### Go 语言电子书推荐\n\n[Go并发实战链接：](https://link.zhihu.com/?target=https%3A//pan.baidu.com/s/1sE6RQ5We5ciLtkkWAaSyyQ)提取码：41zd\n\n[Go语言编程链接](https://link.zhihu.com/?target=https%3A//pan.baidu.com/s/1yo_weXsbl_tMXjJrVPMI-A) 提取码：dcu3\n\n[Go语言标准库链接](https://link.zhihu.com/?target=https%3A//pan.baidu.com/s/1MNkUhJT-ZQA5D7-tGAX-Lg)：提取码：8kx9\n\n[Go语言程序设计：](https://link.zhihu.com/?target=https%3A//pan.baidu.com/s/1db91f8NGAzhMicPGdxuBPA)提取码：2uqt\n\n[Go语言圣经](https://link.zhihu.com/?target=https%3A//pan.baidu.com/s/19xZJsF8KyCGp2fO4VYvPmA)：提取码：7emu\n\n[Go语言实战](https://link.zhihu.com/?target=https%3A//pan.baidu.com/s/143UFM4Uoir_yGRgSgt7hsA)：提取码：f7o2\n\n[Go语言学习](https://link.zhihu.com/?target=https%3A//pan.baidu.com/s/1qnle6ZlgtSYANwjN4spS8Q)笔记：提取码：7il3\n\n### Go书籍在线推荐阅读：\n\n### [《深入解析Go》](https://link.zhihu.com/?target=https%3A//github.com/tiancaiamao/go-internals)\n\n> 这本书适合对 Go 底层的东西比较感兴趣的朋友阅读，也是作者抽空写的一本开源的书籍《深入解析Go》。写这本书不表示我能力很强，而是我愿意分享，和大家一起分享对Go语言的内部实现的一些研究。作者一直认为知识是用来分享的，让更多的人分享自己拥有的一切知识这个才是人生最大的快乐。\n\n### [《Go实战开发》](https://link.zhihu.com/?target=https%3A//github.com/astaxie/Go-in-Action)\n\n> 这本书适合有Go语言基础的朋友阅读，没有任何基础的建议不要阅读学习，建议去 GitHub 阅读 [GoGuide](https://link.zhihu.com/?target=https%3A//github.com/coderit666/GoGuide)开源项目，有编程基础的可以通过这本书进阶学习 Go。\n\n### [《Go入门指南》](https://link.zhihu.com/?target=https%3A//github.com/Unknwon/the-way-to-go_ZH_CN)\n\n> 这是作者在完成阅读这本名叫 《The Way to Go》 之后，决定每天抽出一点时间来进行翻译的工作，并且以开源的形式免费分享给有需要的 Go 语言爱好者，适合初学者学习。\n\n### [《Go语言标准库》](https://link.zhihu.com/?target=https%3A//github.com/polaris1119/The-Golang-Standard-Library-by-Example)\n\n> 这是 Go语言标准库，学习 Go 语言首选。\n\n### [《Go Web 编程》](https://link.zhihu.com/?target=https%3A//github.com/astaxie/build-web-application-with-golang)\n\n> 这本书适合学习完成Go语言基础+前端基础的朋友去学习进阶Go-Web 相关的知识。\n\n### [《Go语言博客实践》](https://link.zhihu.com/?target=https%3A//github.com/achun/Go-Blog-In-Action)\n\n> 中文名**Go语言博客实践**. 是对[TypePress](https://link.zhihu.com/?target=https%3A//github.com/typepress/typepress)开发过程中的想法, 方法, 探讨等任何方面同步整理成的电子书。\n\n### [《Go语言学习笔记》](https://link.zhihu.com/?target=https%3A//github.com/qyuhen/book)\n\n> 这本书主要是作者记录学习Go语言的笔记，适合初学者学习。\n\n### [《Go语言高级编程》](https://link.zhihu.com/?target=https%3A//github.com/chai2010/advanced-go-programming-book)\n\n> 本书涵盖 CGO、Go 汇编语言、RPC 实现、Web 框架实现、分布式系统等高阶主题，针对Go语言有一定经验想深入了解Go语言各种高级用法的开发人员。对于刚学习 Go 语言的读者，建议去学习Go语言开源项目 [GoGuide](https://link.zhihu.com/?target=https%3A//github.com/coderit666/GoGuide)。\n\n### [Effective Go](https://link.zhihu.com/?target=https%3A//golang.org/doc/effective_go.html) 英文版\n\n> 这是一本英文版的Go语言书籍，建议你有英语基础再去阅读。\n\n### [The Way to Go](https://link.zhihu.com/?target=https%3A//github.com/Unknwon/the-way-to-go_ZH_CN) 中文版\n\n> 《The Way to Go》中文译本，中文正式名《[Go 入门指南](https://www.zhihu.com/search?q=Go+入门指南&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={\"sourceType\"%3A\"answer\"%2C\"sourceId\"%3A2229767926})》\n\n### Go语言学习导航\n\n**[Golang 学习导航](https://link.zhihu.com/?target=https%3A//hao.golangstack.com/)**\n\n> **网站中含有 GO 语言开源图书、Go语言开发工具、Go语言入门教程、Go语言进阶教程、Go语言官方资源、Go语言 Web 框架、Go语言微服务资源、Go语言领域大牛。**\n\n![img](https://pic2.zhimg.com/80/v2-d2ab1ecc8944671d9ed53c74c94dbaa1_720w.webp)\n\n![img](https://pic3.zhimg.com/80/v2-26c2047240759a367ce48638a5d8fef6_720w.webp)\n\n最后，如果觉得大叔的分享对你有帮助，欢迎**关注我**\n\n\n\n[@Go语言入门到精通](https://www.zhihu.com/people/669446be2fffd5481e8a1fa99f91c2e4)\n","tags":["go","web框架"],"categories":["go","基础"]},{"title":"django-跨域支持配置","url":"/2024/03/20/django-跨域支持配置/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>django-跨域支持配置</strong></font>\n\n<!--more-->\n\n```python\n# 安装模块\npip3 install django-cors-headers\n\n\n\n# books_demo/settings.py\nINSTALLED_APPS = [\n    ...\n    # demo\n    'corsheaders',\n    ...\n]\n\nMIDDLEWARE = [\n    'corsheaders.middleware.CorsMiddleware', # 需注意与其他中间件顺序，这里放在最前面即可\n    ...\n]\n\n# 支持跨域配置开始\nCORS_ORIGIN_ALLOW_ALL = True\nCORS_ALLOW_CREDENTIALS = True \n```\n","tags":["python","django"],"categories":["python","django"]},{"title":"python-虚拟环境包(requirements.txt)的导出与安装","url":"/2024/03/20/python-虚拟环境包(requirements.txt)的导出与安装/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>python-虚拟环境包(requirements.txt)的导出与安装：</strong></font>\n\n<!--more-->\n\n<font color=#00b2c2 size=5 face=宋体><strong>导出：</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>bash命令：</strong></font>\n\n```bash\n# 虚拟环境下\npip freeze > requirements.txt\n```\n\n+ <font color=#f26522 size=4 face=宋体><strong>python：</strong></font>\n\n```python\nimport subprocess\nsubprocess.call(['pip', 'freeze'], stdout=open('requirements.txt', 'w'))\nprint(\"已成功导出环境到requirements.txt\")\n```\n\n+ <font color=red size=5 face=宋体><strong>导入虚拟环境：</strong></font>\n\n```python\n# 进入虚拟环境\nsource xxx/bin/activate\n\n# 开始导入包\npip3 install -r requirements.txt\n```\n\n"},{"title":"Layui-的下载｜配置与部署","url":"/2024/03/19/Layui-的下载｜配置与部署/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>Layui-的下载｜配置与部署：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>Layui 2.9.7 下载：</strong></font>\n\n+ [Layui 2.9.7 百度云直链下载](https://bd.bcebos.com/v1/xly-icafe/layui-v2.9.7-20240319133227-srprxq.zip)\n\n+ [Layui 2.9.7 官方通道下载](https://gitee.com/layui/layui/attach_files/1685481/download)\n\n+ 第三方 CDN 方式引入\n\n  ```javascript\n  <!-- 引入 layui.css -->\n  <link href=\"//unpkg.com/layui@2.9.7/dist/css/layui.css\" rel=\"stylesheet\">\n  ```\n\n  ```javascript\n  <!-- 引入 layui.js -->\n  <script src=\"//unpkg.com/layui@2.9.7/dist/layui.js\"></script>\n  ```\n","tags":["LayUI","前端","快速开发","指南"],"categories":["LayUI"]},{"title":"LayUI 快速开发指南","url":"/2024/03/04/LayUI-快速开发指南/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>LayUI 快速开发指南</strong></font>\n\n<!--more-->\n\n#### <font color=#f26522 size=4 face=宋体><strong>布局元素</strong></font>\n\n```\n# 布局元素\n# 固定宽度并且居中的容器\n<div class=\"layui-container\"></div> \n\n# 宽度不固定100%适应的容器\n<div class=\"layui-fluid\"></div> \n\n\n# 行\n<div class=\"layui-row\"></div>\n\n# 列\n\nlayui-col-lg*  #  --> *代表当前占12列中的多少列的宽度  -->  桌面≥1200px\nlayui-col-md*  #  -->  桌面≥992px\nlayui-col-sm*  #  -->  平板≥768px\nlayui-col-xs*  #  -->  手机<768px\n\n# 列偏移\nlayui-col-md-offset*  #  --> * 代表当前列向右偏移多少列\n```\n\n<font color=#f26522 size=4 face=宋体><strong></strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong></strong></font>\n","tags":["LayUI","前端","快速开发","指南"],"categories":["LayUI"]},{"title":"禹神 Vue3 前端笔记","url":"/2024/02/22/禹神-Vue3-前端笔记/","content":"\n\n\n# 1. Vue3简介\n\n<!--more-->\n\n- 2020年9月18日，`Vue.js`发布版`3.0`版本，代号：`One Piece`（n\n- 经历了：[4800+次提交](https://github.com/vuejs/core/commits/main)、[40+个RFC](https://github.com/vuejs/rfcs/tree/master/active-rfcs)、[600+次PR](https://github.com/vuejs/vue-next/pulls?q=is%3Apr+is%3Amerged+-author%3Aapp%2Fdependabot-preview+)、[300+贡献者](https://github.com/vuejs/core/graphs/contributors)\n- 官方发版地址：[Release v3.0.0 One Piece · vuejs/core](https://github.com/vuejs/core/releases/tag/v3.0.0)\n- 截止2023年10月，最新的公开版本为：`3.3.4`\n\n  <img src=\"https://s2.loli.net/2024/02/22/GLPQrNvRBaWe9Ts.png\" alt=\"image.png\" style=\"zoom:30%;\" /> \n\n## 1.1. 【性能的提升】\n\n- 打包大小减少`41%`。\n\n- 初次渲染快`55%`, 更新渲染快`133%`。\n\n- 内存减少`54%`。\n\n  \n## 1.2.【 源码的升级】\n\n- 使用`Proxy`代替`defineProperty`实现响应式。\n\n- 重写虚拟`DOM`的实现和`Tree-Shaking`。\n\n  \n## 1.3. 【拥抱TypeScript】\n\n- `Vue3`可以更好的支持`TypeScript`。\n\n  \n## 1.4. 【新的特性】\n\n1. `Composition API`（组合`API`）：\n   - `setup`\n   - `ref`与`reactive`\n   - `computed`与`watch`\n   \n     ......\n   \n2. 新的内置组件：\n   - `Fragment`\n   - `Teleport`\n   - `Suspense`\n\n     ......\n\n3. 其他改变：\n   - 新的生命周期钩子\n   - `data` 选项应始终被声明为一个函数\n   - 移除`keyCode`支持作为` v-on` 的修饰符\n\n     ......\n\n\n\n# 2. 创建Vue3工程\n\n## 2.1. 【基于 vue-cli 创建】\n点击查看[官方文档](https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create)\n\n> 备注：目前`vue-cli`已处于维护模式，官方推荐基于 `Vite` 创建项目。\n\n```shell\n## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上\nvue --version\n\n## 安装或者升级你的@vue/cli \nnpm install -g @vue/cli\n\n## 执行创建命令\nvue create vue_test\n\n##  随后选择3.x\n##  Choose a version of Vue.js that you want to start the project with (Use arrow keys)\n##  > 3.x\n##    2.x\n\n## 启动\ncd vue_test\nnpm run serve\n```\n\n---\n\n## 2.2. 【基于 vite 创建】(推荐)\n`vite` 是新一代前端构建工具，官网地址：[https://vitejs.cn](https://vitejs.cn/)，`vite`的优势如下：\n\n- 轻量快速的热重载（`HMR`），能实现极速的服务启动。\n- 对 `TypeScript`、`JSX`、`CSS` 等支持开箱即用。\n- 真正的按需编译，不再等待整个应用编译完成。\n- `webpack`构建 与 `vite`构建对比图如下：\n<img src=\"https://s2.loli.net/2024/02/22/Zjp9rwdhWu1zaHK.png\" alt=\"webpack构建\" title=\"webpack构建\" style=\"zoom:20%;box-shadow:0 0 10px black\" />\t<img src=\"https://s2.loli.net/2024/02/22/UmeJz1Hgxk7rOyN.png\" alt=\"vite构建\" title=\"vite构建\" style=\"zoom: 20%;box-shadow:0 0 10px black\" />\n* 具体操作如下（点击查看[官方文档](https://cn.vuejs.org/guide/quick-start.html#creating-a-vue-application)）\n\n```shell\n## 1.创建命令\nnpm create vue@latest\n\n## 2.具体配置\n## 配置项目名称\n√ Project name: vue3_test\n## 是否添加TypeScript支持\n√ Add TypeScript?  Yes\n## 是否添加JSX支持\n√ Add JSX Support?  No\n## 是否添加路由环境\n√ Add Vue Router for Single Page Application development?  No\n## 是否添加pinia环境\n√ Add Pinia for state management?  No\n## 是否添加单元测试\n√ Add Vitest for Unit Testing?  No\n## 是否添加端到端测试方案\n√ Add an End-to-End Testing Solution? » No\n## 是否添加ESLint语法检查\n√ Add ESLint for code quality?  Yes\n## 是否添加Prettiert代码格式化\n√ Add Prettier for code formatting?  No\n```\n自己动手编写一个App组件\n\n```html\n<template>\n  <div class=\"app\">\n    <h1>你好啊！</h1>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  export default {\n    name:'App' //组件名\n  }\n</script>\n\n<style>\n  .app {\n    background-color: #ddd;\n    box-shadow: 0 0 10px;\n    border-radius: 10px;\n    padding: 20px;\n  }\n</style>\n```\n\n安装官方推荐的`vscode`插件：\n\n<img src=\"https://s2.loli.net/2024/02/22/R1E6rZBwxaFkghs.png\" alt=\"Snipaste_2023-10-08_20-46-34\" style=\"zoom:50%;\" /> \n\n<img src=\"https://s2.loli.net/2024/02/22/tprjsKJVG97YvhI.png\" alt=\"image-20231218085906380\" style=\"zoom:42%;\" /> \n\n总结：\n\n- `Vite` 项目中，`index.html` 是项目的入口文件，在项目最外层。\n- 加载`index.html`后，`Vite` 解析 `<script type=\"module\" src=\"xxx\">` 指向的`JavaScript`。\n- `Vue3`**中是通过 **`createApp` 函数创建一个应用实例。\n## 2.3. 【一个简单的效果】\n\n`Vue3`向下兼容`Vue2`语法，且`Vue3`中的模板中可以没有根标签\n\n```html\n<template>\n  <div class=\"person\">\n    <h2>姓名：{{name}}</h2>\n    <h2>年龄：{{age}}</h2>\n    <button @click=\"changeName\">修改名字</button>\n    <button @click=\"changeAge\">年龄+1</button>\n    <button @click=\"showTel\">点我查看联系方式</button>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  export default {\n    name:'App',\n    data() {\n      return {\n        name:'张三',\n        age:18,\n        tel:'13888888888'\n      }\n    },\n    methods:{\n      changeName(){\n        this.name = 'zhang-san'\n      },\n      changeAge(){\n        this.age += 1\n      },\n      showTel(){\n        alert(this.tel)\n      }\n    },\n  }\n</script>\n```\n\n\n# 3. Vue3核心语法\n## 3.1.  【OptionsAPI 与 CompositionAPI】\n\n- `Vue2`的`API`设计是`Options`（配置）风格的。\n- `Vue3`的`API`设计是`Composition`（组合）风格的。\n###  Options API 的弊端\n\n`Options`类型的 `API`，数据、方法、计算属性等，是分散在：`data`、`methods`、`computed`中的，若想新增或者修改一个需求，就需要分别修改：`data`、`methods`、`computed`，不便于维护和复用。\n\n<img src=\"https://s2.loli.net/2024/02/22/kvMuHFr4tSRKGmB.gif\" alt=\"1.gif\" style=\"zoom:70%;border-radius:20px\" /><img src=\"https://s2.loli.net/2024/02/22/lbNcvXTUHEzKe96.gif\" alt=\"2.gif\" style=\"zoom:70%;border-radius:20px\" />\n\n### Composition API 的优势\n\n可以用函数的方式，更加优雅的组织代码，让相关功能的代码更加有序的组织在一起。\n\n<img src=\"https://s2.loli.net/2024/02/22/LVDAY2KZjREvb9F.gif\" alt=\"3.gif\" style=\"height:300px;border-radius:10px\"  /><img src=\"https://s2.loli.net/2024/02/22/hG9SmEjf8d2esDc.gif\" alt=\"4.gif\" style=\"height:300px;border-radius:10px\"  />\n\n> 说明：以上四张动图原创作者：大帅老猿\n\n## 3.2. 【拉开序幕的 setup】\n### setup 概述\n`setup`是`Vue3`中一个新的配置项，值是一个函数，它是 `Composition API` **“表演的舞台**_**”**_，组件中所用到的：数据、方法、计算属性、监视......等等，均配置在`setup`中。\n\n特点如下：\n\n- `setup`函数返回的对象中的内容，可直接在模板中使用。\n- `setup`中访问`this`是`undefined`。\n- `setup`函数会在`beforeCreate`之前调用，它是“领先”所有钩子执行的。\n```html\n<template>\n  <div class=\"person\">\n    <h2>姓名：{{name}}</h2>\n    <h2>年龄：{{age}}</h2>\n    <button @click=\"changeName\">修改名字</button>\n    <button @click=\"changeAge\">年龄+1</button>\n    <button @click=\"showTel\">点我查看联系方式</button>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  export default {\n    name:'Person',\n    setup(){\n      // 数据，原来写在data中（注意：此时的name、age、tel数据都不是响应式数据）\n      let name = '张三'\n      let age = 18\n      let tel = '13888888888'\n\n      // 方法，原来写在methods中\n      function changeName(){\n        name = 'zhang-san' //注意：此时这么修改name页面是不变化的\n        console.log(name)\n      }\n      function changeAge(){\n        age += 1 //注意：此时这么修改age页面是不变化的\n        console.log(age)\n      }\n      function showTel(){\n        alert(tel)\n      }\n\n      // 返回一个对象，对象中的内容，模板中可以直接使用\n      return {name,age,tel,changeName,changeAge,showTel}\n    }\n  }\n</script>\n```\n### setup 的返回值\n\n- 若返回一个**对象**：则对象中的：属性、方法等，在模板中均可以直接使用**（重点关注）。**\n- 若返回一个**函数**：则可以自定义渲染内容，代码如下：\n```html\nsetup(){\n  return ()=> '你好啊！'\n}\n```\n### setup 与 Options API 的关系\n\n- `Vue2` 的配置（`data`、`methos`......）中**可以访问到** `setup`中的属性、方法。\n- 但在`setup`中**不能访问到**`Vue2`的配置（`data`、`methos`......）。\n- 如果与`Vue2`冲突，则`setup`优先。\n### setup 语法糖\n`setup`函数有一个语法糖，这个语法糖，可以让我们把`setup`独立出去，代码如下：\n\n```html\n<template>\n  <div class=\"person\">\n    <h2>姓名：{{name}}</h2>\n    <h2>年龄：{{age}}</h2>\n    <button @click=\"changName\">修改名字</button>\n    <button @click=\"changAge\">年龄+1</button>\n    <button @click=\"showTel\">点我查看联系方式</button>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  export default {\n    name:'Person',\n  }\n</script>\n\n<!-- 下面的写法是setup语法糖 -->\n<script setup lang=\"ts\">\n  console.log(this) //undefined\n  \n  // 数据（注意：此时的name、age、tel都不是响应式数据）\n  let name = '张三'\n  let age = 18\n  let tel = '13888888888'\n\n  // 方法\n  function changName(){\n    name = '李四'//注意：此时这么修改name页面是不变化的\n  }\n  function changAge(){\n    console.log(age)\n    age += 1 //注意：此时这么修改age页面是不变化的\n  }\n  function showTel(){\n    alert(tel)\n  }\n</script>\n```\n扩展：上述代码，还需要编写一个不写`setup`的`script`标签，去指定组件名字，比较麻烦，我们可以借助`vite`中的插件简化\n\n1. 第一步：`npm i vite-plugin-vue-setup-extend -D`\n2. 第二步：`vite.config.ts`\n```html\nimport { defineConfig } from 'vite'\nimport VueSetupExtend from 'vite-plugin-vue-setup-extend'\n\nexport default defineConfig({\n  plugins: [ VueSetupExtend() ]\n})\n```\n\n3. 第三步：`<script setup lang=\"ts\" name=\"Person\">`\n## 3.3. 【ref 创建：基本类型的响应式数据】\n\n- **作用：**定义响应式变量。\n- **语法：**`let xxx = ref(初始值)`。\n- **返回值：**一个`RefImpl`的实例对象，简称`ref对象`或`ref`，`ref`对象的`value`**属性是响应式的**。\n- **注意点：**\n   - `JS`中操作数据需要：`xxx.value`，但模板中不需要`.value`，直接使用即可。\n   - 对于`let name = ref('张三')`来说，`name`不是响应式的，`name.value`是响应式的。\n```html\n<template>\n  <div class=\"person\">\n    <h2>姓名：{{name}}</h2>\n    <h2>年龄：{{age}}</h2>\n    <button @click=\"changeName\">修改名字</button>\n    <button @click=\"changeAge\">年龄+1</button>\n    <button @click=\"showTel\">点我查看联系方式</button>\n  </div>\n</template>\n\n<script setup lang=\"ts\" name=\"Person\">\n  import {ref} from 'vue'\n  // name和age是一个RefImpl的实例对象，简称ref对象，它们的value属性是响应式的。\n  let name = ref('张三')\n  let age = ref(18)\n  // tel就是一个普通的字符串，不是响应式的\n  let tel = '13888888888'\n\n  function changeName(){\n    // JS中操作ref对象时候需要.value\n    name.value = '李四'\n    console.log(name.value)\n\n    // 注意：name不是响应式的，name.value是响应式的，所以如下代码并不会引起页面的更新。\n    // name = ref('zhang-san')\n  }\n  function changeAge(){\n    // JS中操作ref对象时候需要.value\n    age.value += 1 \n    console.log(age.value)\n  }\n  function showTel(){\n    alert(tel)\n  }\n</script>\n```\n## 3.4. 【reactive 创建：对象类型的响应式数据】\n\n- **作用：**定义一个**响应式对象**（基本类型不要用它，要用`ref`，否则报错）\n- **语法：**`let 响应式对象= reactive(源对象)`。\n- **返回值：**一个`Proxy`的实例对象，简称：响应式对象。\n- **注意点：**`reactive`定义的响应式数据是“深层次”的。\n```html\n<template>\n  <div class=\"person\">\n    <h2>汽车信息：一台{{ car.brand }}汽车，价值{{ car.price }}万</h2>\n    <h2>游戏列表：</h2>\n    <ul>\n      <li v-for=\"g in games\" :key=\"g.id\">{{ g.name }}</li>\n    </ul>\n    <h2>测试：{{obj.a.b.c.d}}</h2>\n    <button @click=\"changeCarPrice\">修改汽车价格</button>\n    <button @click=\"changeFirstGame\">修改第一游戏</button>\n    <button @click=\"test\">测试</button>\n  </div>\n</template>\n\n<script lang=\"ts\" setup name=\"Person\">\nimport { reactive } from 'vue'\n\n// 数据\nlet car = reactive({ brand: '奔驰', price: 100 })\nlet games = reactive([\n  { id: 'ahsgdyfa01', name: '英雄联盟' },\n  { id: 'ahsgdyfa02', name: '王者荣耀' },\n  { id: 'ahsgdyfa03', name: '原神' }\n])\nlet obj = reactive({\n  a:{\n    b:{\n      c:{\n        d:666\n      }\n    }\n  }\n})\n\nfunction changeCarPrice() {\n  car.price += 10\n}\nfunction changeFirstGame() {\n  games[0].name = '流星蝴蝶剑'\n}\nfunction test(){\n  obj.a.b.c.d = 999\n}\n</script>\n```\n## 3.5. 【ref 创建：对象类型的响应式数据】\n\n- 其实`ref`接收的数据可以是：**基本类型**、**对象类型**。\n- 若`ref`接收的是对象类型，内部其实也是调用了`reactive`函数。\n```html\n<template>\n  <div class=\"person\">\n    <h2>汽车信息：一台{{ car.brand }}汽车，价值{{ car.price }}万</h2>\n    <h2>游戏列表：</h2>\n    <ul>\n      <li v-for=\"g in games\" :key=\"g.id\">{{ g.name }}</li>\n    </ul>\n    <h2>测试：{{obj.a.b.c.d}}</h2>\n    <button @click=\"changeCarPrice\">修改汽车价格</button>\n    <button @click=\"changeFirstGame\">修改第一游戏</button>\n    <button @click=\"test\">测试</button>\n  </div>\n</template>\n\n<script lang=\"ts\" setup name=\"Person\">\nimport { ref } from 'vue'\n\n// 数据\nlet car = ref({ brand: '奔驰', price: 100 })\nlet games = ref([\n  { id: 'ahsgdyfa01', name: '英雄联盟' },\n  { id: 'ahsgdyfa02', name: '王者荣耀' },\n  { id: 'ahsgdyfa03', name: '原神' }\n])\nlet obj = ref({\n  a:{\n    b:{\n      c:{\n        d:666\n      }\n    }\n  }\n})\n\nconsole.log(car)\n\nfunction changeCarPrice() {\n  car.value.price += 10\n}\nfunction changeFirstGame() {\n  games.value[0].name = '流星蝴蝶剑'\n}\nfunction test(){\n  obj.value.a.b.c.d = 999\n}\n</script>\n```\n## 3.6. 【ref 对比 reactive】\n宏观角度看：\n\n> 1. `ref`用来定义：**基本类型数据**、**对象类型数据**；\n>\n> 2. `reactive`用来定义：**对象类型数据**。\n\n- 区别：\n\n> 1. `ref`创建的变量必须使用`.value`（可以使用`volar`插件自动添加`.value`）。\n>\n>    <img src=\"https://s2.loli.net/2024/02/22/OWeGVjZkt341D5h.png\" alt=\"自动补充value\" style=\"zoom:50%;border-radius:20px\" /> \n>\n> 2. `reactive`重新分配一个新对象，会**失去**响应式（可以使用`Object.assign`去整体替换）。\n\n- 使用原则：\n> 1. 若需要一个基本类型的响应式数据，必须使用`ref`。\n> 2. 若需要一个响应式对象，层级不深，`ref`、`reactive`都可以。\n> 3. 若需要一个响应式对象，且层级较深，推荐使用`reactive`。\n\n## 3.7. 【toRefs 与 toRef】\n\n- 作用：将一个响应式对象中的每一个属性，转换为`ref`对象。\n- 备注：`toRefs`与`toRef`功能一致，但`toRefs`可以批量转换。\n- 语法如下：\n```html\n<template>\n  <div class=\"person\">\n    <h2>姓名：{{person.name}}</h2>\n    <h2>年龄：{{person.age}}</h2>\n    <h2>性别：{{person.gender}}</h2>\n    <button @click=\"changeName\">修改名字</button>\n    <button @click=\"changeAge\">修改年龄</button>\n    <button @click=\"changeGender\">修改性别</button>\n  </div>\n</template>\n\n<script lang=\"ts\" setup name=\"Person\">\n  import {ref,reactive,toRefs,toRef} from 'vue'\n\n  // 数据\n  let person = reactive({name:'张三', age:18, gender:'男'})\n\t\n  // 通过toRefs将person对象中的n个属性批量取出，且依然保持响应式的能力\n  let {name,gender} =  toRefs(person)\n\t\n  // 通过toRef将person对象中的gender属性取出，且依然保持响应式的能力\n  let age = toRef(person,'age')\n\n  // 方法\n  function changeName(){\n    name.value += '~'\n  }\n  function changeAge(){\n    age.value += 1\n  }\n  function changeGender(){\n    gender.value = '女'\n  }\n</script>\n```\n## 3.8. 【computed】\n\n作用：根据已有数据计算出新数据（和`Vue2`中的`computed`作用一致）。\n\n<img src=\"https://s2.loli.net/2024/02/22/vnDHLu7oJBd96tj.gif\" style=\"zoom:20%;\" />  \n\n```html\n<template>\n  <div class=\"person\">\n    姓：<input type=\"text\" v-model=\"firstName\"> <br>\n    名：<input type=\"text\" v-model=\"lastName\"> <br>\n    全名：<span>{{fullName}}</span> <br>\n    <button @click=\"changeFullName\">全名改为：li-si</button>\n  </div>\n</template>\n\n<script setup lang=\"ts\" name=\"App\">\n  import {ref,computed} from 'vue'\n\n  let firstName = ref('zhang')\n  let lastName = ref('san')\n\n  // 计算属性——只读取，不修改\n  /* let fullName = computed(()=>{\n    return firstName.value + '-' + lastName.value\n  }) */\n\n\n  // 计算属性——既读取又修改\n  let fullName = computed({\n    // 读取\n    get(){\n      return firstName.value + '-' + lastName.value\n    },\n    // 修改\n    set(val){\n      console.log('有人修改了fullName',val)\n      firstName.value = val.split('-')[0]\n      lastName.value = val.split('-')[1]\n    }\n  })\n\n  function changeFullName(){\n    fullName.value = 'li-si'\n  } \n</script>\n```\n## 3.9.【watch】\n\n- 作用：监视数据的变化（和`Vue2`中的`watch`作用一致）\n- 特点：`Vue3`中的`watch`只能监视以下**四种数据**：\n> 1. `ref`定义的数据。\n> 2. `reactive`定义的数据。\n> 3. 函数返回一个值（`getter`函数）。\n> 4. 一个包含上述内容的数组。\n\n我们在`Vue3`中使用`watch`的时候，通常会遇到以下几种情况：\n### * 情况一\n监视`ref`定义的【基本类型】数据：直接写数据名即可，监视的是其`value`值的改变。\n\n```html\n<template>\n  <div class=\"person\">\n    <h1>情况一：监视【ref】定义的【基本类型】数据</h1>\n    <h2>当前求和为：{{sum}}</h2>\n    <button @click=\"changeSum\">点我sum+1</button>\n  </div>\n</template>\n\n<script lang=\"ts\" setup name=\"Person\">\n  import {ref,watch} from 'vue'\n  // 数据\n  let sum = ref(0)\n  // 方法\n  function changeSum(){\n    sum.value += 1\n  }\n  // 监视，情况一：监视【ref】定义的【基本类型】数据\n  const stopWatch = watch(sum,(newValue,oldValue)=>{\n    console.log('sum变化了',newValue,oldValue)\n    if(newValue >= 10){\n      stopWatch()\n    }\n  })\n</script>\n```\n### * 情况二\n监视`ref`定义的【对象类型】数据：直接写数据名，监视的是对象的【地址值】，若想监视对象内部的数据，要手动开启深度监视。\n\n> 注意：\n>\n> * 若修改的是`ref`定义的对象中的属性，`newValue` 和 `oldValue` 都是新值，因为它们是同一个对象。\n>\n> * 若修改整个`ref`定义的对象，`newValue` 是新值， `oldValue` 是旧值，因为不是同一个对象了。\n\n```html\n<template>\n  <div class=\"person\">\n    <h1>情况二：监视【ref】定义的【对象类型】数据</h1>\n    <h2>姓名：{{ person.name }}</h2>\n    <h2>年龄：{{ person.age }}</h2>\n    <button @click=\"changeName\">修改名字</button>\n    <button @click=\"changeAge\">修改年龄</button>\n    <button @click=\"changePerson\">修改整个人</button>\n  </div>\n</template>\n\n<script lang=\"ts\" setup name=\"Person\">\n  import {ref,watch} from 'vue'\n  // 数据\n  let person = ref({\n    name:'张三',\n    age:18\n  })\n  // 方法\n  function changeName(){\n    person.value.name += '~'\n  }\n  function changeAge(){\n    person.value.age += 1\n  }\n  function changePerson(){\n    person.value = {name:'李四',age:90}\n  }\n  /* \n    监视，情况一：监视【ref】定义的【对象类型】数据，监视的是对象的地址值，若想监视对象内部属性的变化，需要手动开启深度监视\n    watch的第一个参数是：被监视的数据\n    watch的第二个参数是：监视的回调\n    watch的第三个参数是：配置对象（deep、immediate等等.....） \n  */\n  watch(person,(newValue,oldValue)=>{\n    console.log('person变化了',newValue,oldValue)\n  },{deep:true})\n  \n</script>\n```\n### *  情况三\n监视`reactive`定义的【对象类型】数据，且默认开启了深度监视。\n```html\n<template>\n  <div class=\"person\">\n    <h1>情况三：监视【reactive】定义的【对象类型】数据</h1>\n    <h2>姓名：{{ person.name }}</h2>\n    <h2>年龄：{{ person.age }}</h2>\n    <button @click=\"changeName\">修改名字</button>\n    <button @click=\"changeAge\">修改年龄</button>\n    <button @click=\"changePerson\">修改整个人</button>\n    <hr>\n    <h2>测试：{{obj.a.b.c}}</h2>\n    <button @click=\"test\">修改obj.a.b.c</button>\n  </div>\n</template>\n\n<script lang=\"ts\" setup name=\"Person\">\n  import {reactive,watch} from 'vue'\n  // 数据\n  let person = reactive({\n    name:'张三',\n    age:18\n  })\n  let obj = reactive({\n    a:{\n      b:{\n        c:666\n      }\n    }\n  })\n  // 方法\n  function changeName(){\n    person.name += '~'\n  }\n  function changeAge(){\n    person.age += 1\n  }\n  function changePerson(){\n    Object.assign(person,{name:'李四',age:80})\n  }\n  function test(){\n    obj.a.b.c = 888\n  }\n\n  // 监视，情况三：监视【reactive】定义的【对象类型】数据，且默认是开启深度监视的\n  watch(person,(newValue,oldValue)=>{\n    console.log('person变化了',newValue,oldValue)\n  })\n  watch(obj,(newValue,oldValue)=>{\n    console.log('Obj变化了',newValue,oldValue)\n  })\n</script>\n```\n### * 情况四\n监视`ref`或`reactive`定义的【对象类型】数据中的**某个属性**，注意点如下：\n\n1. 若该属性值**不是**【对象类型】，需要写成函数形式。\n2. 若该属性值是**依然**是【对象类型】，可直接编，也可写成函数，建议写成函数。\n\n结论：监视的要是对象里的属性，那么最好写函数式，注意点：若是对象监视的是地址值，需要关注对象内部，需要手动开启深度监视。\n\n```html\n<template>\n  <div class=\"person\">\n    <h1>情况四：监视【ref】或【reactive】定义的【对象类型】数据中的某个属性</h1>\n    <h2>姓名：{{ person.name }}</h2>\n    <h2>年龄：{{ person.age }}</h2>\n    <h2>汽车：{{ person.car.c1 }}、{{ person.car.c2 }}</h2>\n    <button @click=\"changeName\">修改名字</button>\n    <button @click=\"changeAge\">修改年龄</button>\n    <button @click=\"changeC1\">修改第一台车</button>\n    <button @click=\"changeC2\">修改第二台车</button>\n    <button @click=\"changeCar\">修改整个车</button>\n  </div>\n</template>\n\n<script lang=\"ts\" setup name=\"Person\">\n  import {reactive,watch} from 'vue'\n\n  // 数据\n  let person = reactive({\n    name:'张三',\n    age:18,\n    car:{\n      c1:'奔驰',\n      c2:'宝马'\n    }\n  })\n  // 方法\n  function changeName(){\n    person.name += '~'\n  }\n  function changeAge(){\n    person.age += 1\n  }\n  function changeC1(){\n    person.car.c1 = '奥迪'\n  }\n  function changeC2(){\n    person.car.c2 = '大众'\n  }\n  function changeCar(){\n    person.car = {c1:'雅迪',c2:'爱玛'}\n  }\n\n  // 监视，情况四：监视响应式对象中的某个属性，且该属性是基本类型的，要写成函数式\n  /* watch(()=> person.name,(newValue,oldValue)=>{\n    console.log('person.name变化了',newValue,oldValue)\n  }) */\n\n  // 监视，情况四：监视响应式对象中的某个属性，且该属性是对象类型的，可以直接写，也能写函数，更推荐写函数\n  watch(()=>person.car,(newValue,oldValue)=>{\n    console.log('person.car变化了',newValue,oldValue)\n  },{deep:true})\n</script>\n```\n### * 情况五\n监视上述的多个数据\n```html\n<template>\n  <div class=\"person\">\n    <h1>情况五：监视上述的多个数据</h1>\n    <h2>姓名：{{ person.name }}</h2>\n    <h2>年龄：{{ person.age }}</h2>\n    <h2>汽车：{{ person.car.c1 }}、{{ person.car.c2 }}</h2>\n    <button @click=\"changeName\">修改名字</button>\n    <button @click=\"changeAge\">修改年龄</button>\n    <button @click=\"changeC1\">修改第一台车</button>\n    <button @click=\"changeC2\">修改第二台车</button>\n    <button @click=\"changeCar\">修改整个车</button>\n  </div>\n</template>\n\n<script lang=\"ts\" setup name=\"Person\">\n  import {reactive,watch} from 'vue'\n\n  // 数据\n  let person = reactive({\n    name:'张三',\n    age:18,\n    car:{\n      c1:'奔驰',\n      c2:'宝马'\n    }\n  })\n  // 方法\n  function changeName(){\n    person.name += '~'\n  }\n  function changeAge(){\n    person.age += 1\n  }\n  function changeC1(){\n    person.car.c1 = '奥迪'\n  }\n  function changeC2(){\n    person.car.c2 = '大众'\n  }\n  function changeCar(){\n    person.car = {c1:'雅迪',c2:'爱玛'}\n  }\n\n  // 监视，情况五：监视上述的多个数据\n  watch([()=>person.name,person.car],(newValue,oldValue)=>{\n    console.log('person.car变化了',newValue,oldValue)\n  },{deep:true})\n\n</script>\n```\n## 3.10. 【watchEffect】\n\n* 官网：立即运行一个函数，同时响应式地追踪其依赖，并在依赖更改时重新执行该函数。\n\n* `watch`对比`watchEffect`\n\n  > 1. 都能监听响应式数据的变化，不同的是监听数据变化的方式不同\n  >\n  > 2. `watch`：要明确指出监视的数据\n  >\n  > 3. `watchEffect`：不用明确指出监视的数据（函数中用到哪些属性，那就监视哪些属性）。\n\n* 示例代码：\n\n  ```html\n  <template>\n    <div class=\"person\">\n      <h1>需求：水温达到50℃，或水位达到20cm，则联系服务器</h1>\n      <h2 id=\"demo\">水温：{{temp}}</h2>\n      <h2>水位：{{height}}</h2>\n      <button @click=\"changePrice\">水温+1</button>\n      <button @click=\"changeSum\">水位+10</button>\n    </div>\n  </template>\n  \n  <script lang=\"ts\" setup name=\"Person\">\n    import {ref,watch,watchEffect} from 'vue'\n    // 数据\n    let temp = ref(0)\n    let height = ref(0)\n  \n    // 方法\n    function changePrice(){\n      temp.value += 10\n    }\n    function changeSum(){\n      height.value += 1\n    }\n  \n    // 用watch实现，需要明确的指出要监视：temp、height\n    watch([temp,height],(value)=>{\n      // 从value中获取最新的temp值、height值\n      const [newTemp,newHeight] = value\n      // 室温达到50℃，或水位达到20cm，立刻联系服务器\n      if(newTemp >= 50 || newHeight >= 20){\n        console.log('联系服务器')\n      }\n    })\n  \n    // 用watchEffect实现，不用\n    const stopWtach = watchEffect(()=>{\n      // 室温达到50℃，或水位达到20cm，立刻联系服务器\n      if(temp.value >= 50 || height.value >= 20){\n        console.log(document.getElementById('demo')?.innerText)\n        console.log('联系服务器')\n      }\n      // 水温达到100，或水位达到50，取消监视\n      if(temp.value === 100 || height.value === 50){\n        console.log('清理了')\n        stopWtach()\n      }\n    })\n  </script>\n  ```\n  \n  \n\n## 3.11. 【标签的 ref 属性】\n\n作用：用于注册模板引用。\n\n> * 用在普通`DOM`标签上，获取的是`DOM`节点。\n>\n> * 用在组件标签上，获取的是组件实例对象。\n\n用在普通`DOM`标签上：\n\n```html\n<template>\n  <div class=\"person\">\n    <h1 ref=\"title1\">尚硅谷</h1>\n    <h2 ref=\"title2\">前端</h2>\n    <h3 ref=\"title3\">Vue</h3>\n    <input type=\"text\" ref=\"inpt\"> <br><br>\n    <button @click=\"showLog\">点我打印内容</button>\n  </div>\n</template>\n\n<script lang=\"ts\" setup name=\"Person\">\n  import {ref} from 'vue'\n\t\n  let title1 = ref()\n  let title2 = ref()\n  let title3 = ref()\n\n  function showLog(){\n    // 通过id获取元素\n    const t1 = document.getElementById('title1')\n    // 打印内容\n    console.log((t1 as HTMLElement).innerText)\n    console.log((<HTMLElement>t1).innerText)\n    console.log(t1?.innerText)\n    \n\t\t/************************************/\n\t\t\n    // 通过ref获取元素\n    console.log(title1.value)\n    console.log(title2.value)\n    console.log(title3.value)\n  }\n</script>\n```\n\n用在组件标签上：\n\n```html\n<!-- 父组件App.vue -->\n<template>\n  <Person ref=\"ren\"/>\n  <button @click=\"test\">测试</button>\n</template>\n\n<script lang=\"ts\" setup name=\"App\">\n  import Person from './components/Person.vue'\n  import {ref} from 'vue'\n\n  let ren = ref()\n\n  function test(){\n    console.log(ren.value.name)\n    console.log(ren.value.age)\n  }\n</script>\n\n\n<!-- 子组件Person.vue中要使用defineExpose暴露内容 -->\n<script lang=\"ts\" setup name=\"Person\">\n  import {ref,defineExpose} from 'vue'\n\t// 数据\n  let name = ref('张三')\n  let age = ref(18)\n  /****************************/\n  /****************************/\n  // 使用defineExpose将组件中的数据交给外部\n  defineExpose({name,age})\n</script>\n```\n\n\n\n## 3.12. 【props】\n\n> ```js\n> // 定义一个接口，限制每个Person对象的格式\n> export interface PersonInter {\n> id:string,\n> name:string,\n>  age:number\n> }\n> \n> // 定义一个自定义类型Persons\n> export type Persons = Array<PersonInter>\n> ```\n>\n> `App.vue`中代码：\n>\n> ```html\n> <template>\n> \t<Person :list=\"persons\"/>\n> </template>\n> \n> <script lang=\"ts\" setup name=\"App\">\n> import Person from './components/Person.vue'\n> import {reactive} from 'vue'\n>  import {type Persons} from './types'\n> \n>  let persons = reactive<Persons>([\n>   {id:'e98219e12',name:'张三',age:18},\n>    {id:'e98219e13',name:'李四',age:19},\n>     {id:'e98219e14',name:'王五',age:20}\n>   ])\n> </script>\n> \n> ```\n>\n> `Person.vue`中代码：\n>\n> ```html\n> <template>\n> <div class=\"person\">\n> <ul>\n>   <li v-for=\"item in list\" :key=\"item.id\">\n>      {{item.name}}--{{item.age}}\n>    </li>\n>  </ul>\n> </div>\n> </template>\n> \n> <script lang=\"ts\" setup name=\"Person\">\n> import {defineProps} from 'vue'\n> import {type PersonInter} from '@/types'\n> \n> // 第一种写法：仅接收\n> // const props = defineProps(['list'])\n> \n> // 第二种写法：接收+限制类型\n> // defineProps<{list:Persons}>()\n> \n> // 第三种写法：接收+限制类型+指定默认值+限制必要性\n> let props = withDefaults(defineProps<{list?:Persons}>(),{\n>   list:()=>[{id:'asdasg01',name:'小猪佩奇',age:18}]\n> })\n> console.log(props)\n> </script>\n> ```\n>\n\n## 3.13. 【生命周期】\n\n* 概念：`Vue`组件实例在创建时要经历一系列的初始化步骤，在此过程中`Vue`会在合适的时机，调用特定的函数，从而让开发者有机会在特定阶段运行自己的代码，这些特定的函数统称为：生命周期钩子\n\n* 规律：\n\n  > 生命周期整体分为四个阶段，分别是：**创建、挂载、更新、销毁**，每个阶段都有两个钩子，一前一后。\n\n* `Vue2`的生命周期\n\n  > 创建阶段：`beforeCreate`、`created`\n  >\n  > 挂载阶段：`beforeMount`、`mounted`\n  >\n  > 更新阶段：`beforeUpdate`、`updated`\n  >\n  > 销毁阶段：`beforeDestroy`、`destroyed`\n\n* `Vue3`的生命周期\n\n  > 创建阶段：`setup`\n  >\n  > 挂载阶段：`onBeforeMount`、`onMounted`\n  >\n  > 更新阶段：`onBeforeUpdate`、`onUpdated`\n  >\n  > 卸载阶段：`onBeforeUnmount`、`onUnmounted`\n\n* 常用的钩子：`onMounted`(挂载完毕)、`onUpdated`(更新完毕)、`onBeforeUnmount`(卸载之前)\n\n* 示例代码：\n\n  ```html\n  <template>\n    <div class=\"person\">\n      <h2>当前求和为：{{ sum }}</h2>\n      <button @click=\"changeSum\">点我sum+1</button>\n    </div>\n  </template>\n  \n  <!-- vue3写法 -->\n  <script lang=\"ts\" setup name=\"Person\">\n    import { \n      ref, \n      onBeforeMount, \n      onMounted, \n      onBeforeUpdate, \n      onUpdated, \n      onBeforeUnmount, \n      onUnmounted \n    } from 'vue'\n  \n    // 数据\n    let sum = ref(0)\n    // 方法\n    function changeSum() {\n      sum.value += 1\n    }\n    console.log('setup')\n    // 生命周期钩子\n    onBeforeMount(()=>{\n      console.log('挂载之前')\n    })\n    onMounted(()=>{\n      console.log('挂载完毕')\n    })\n    onBeforeUpdate(()=>{\n      console.log('更新之前')\n    })\n    onUpdated(()=>{\n      console.log('更新完毕')\n    })\n    onBeforeUnmount(()=>{\n      console.log('卸载之前')\n    })\n    onUnmounted(()=>{\n      console.log('卸载完毕')\n    })\n  </script>\n  ```\n\n## 3.14. 【自定义hook】\n\n- 什么是`hook`？—— 本质是一个函数，把`setup`函数中使用的`Composition API`进行了封装，类似于`vue2.x`中的`mixin`。\n\n- 自定义`hook`的优势：复用代码, 让`setup`中的逻辑更清楚易懂。\n\n示例代码：\n\n- `useSum.ts`中内容如下：\n\n  ```html\n  import {ref,onMounted} from 'vue'\n  \n  export default function(){\n    let sum = ref(0)\n  \n    const increment = ()=>{\n      sum.value += 1\n    }\n    const decrement = ()=>{\n      sum.value -= 1\n    }\n    onMounted(()=>{\n      increment()\n    })\n  \n    //向外部暴露数据\n    return {sum,increment,decrement}\n  }\t\t\n  ```\n  \n- `useDog.ts`中内容如下：\n\n  ```js\n  import {reactive,onMounted} from 'vue'\n  import axios,{AxiosError} from 'axios'\n  \n  export default function(){\n    let dogList = reactive<string[]>([])\n  \n    // 方法\n    async function getDog(){\n      try {\n        // 发请求\n        let {data} = await axios.get('https://dog.ceo/api/breed/pembroke/images/random')\n        // 维护数据\n        dogList.push(data.message)\n      } catch (error) {\n        // 处理错误\n        const err = <AxiosError>error\n        console.log(err.message)\n      }\n    }\n  \n    // 挂载钩子\n    onMounted(()=>{\n      getDog()\n    })\n  \t\n    //向外部暴露数据\n    return {dogList,getDog}\n  }\n  ```\n\n- 组件中具体使用：\n\n  ```html\n  <template>\n    <h2>当前求和为：{{sum}}</h2>\n    <button @click=\"increment\">点我+1</button>\n    <button @click=\"decrement\">点我-1</button>\n    <hr>\n    <img v-for=\"(u,index) in dogList.urlList\" :key=\"index\" :src=\"(u as string)\"> \n    <span v-show=\"dogList.isLoading\">加载中......</span><br>\n    <button @click=\"getDog\">再来一只狗</button>\n  </template>\n  \n  <script lang=\"ts\">\n    import {defineComponent} from 'vue'\n  \n    export default defineComponent({\n      name:'App',\n    })\n  </script>\n  \n  <script setup lang=\"ts\">\n    import useSum from './hooks/useSum'\n    import useDog from './hooks/useDog'\n  \t\n    let {sum,increment,decrement} = useSum()\n    let {dogList,getDog} = useDog()\n  </script>\n  ```\n\n    \n\n---\n\n# 4. 路由\n\n## 4.1. 【对路由的理解】\n\n<img src=\"https://s2.loli.net/2024/02/22/DwoFp1lznKBvS5R.png\" alt=\"image-20231018144351536\" style=\"zoom:20%;border-radius:40px\" /> \n\n## 4.2. 【基本切换效果】\n\n- `Vue3`中要使用`vue-router`的最新版本，目前是`4`版本。\n\n- 路由配置文件代码如下：\n\n  ```js\n  import {createRouter,createWebHistory} from 'vue-router'\n  import Home from '@/pages/Home.vue'\n  import News from '@/pages/News.vue'\n  import About from '@/pages/About.vue'\n  \n  const router = createRouter({\n  \thistory:createWebHistory(),\n  \troutes:[\n  \t\t{\n  \t\t\tpath:'/home',\n  \t\t\tcomponent:Home\n  \t\t},\n  \t\t{\n  \t\t\tpath:'/about',\n  \t\t\tcomponent:About\n  \t\t}\n  \t]\n  })\n  export default router\n  ```\n* `main.ts`代码如下：\n\n  ```js\n  import router from './router/index'\n  app.use(router)\n  \n  app.mount('#app')\n  ```\n\n- `App.vue`代码如下\n\n  ```html\n  <template>\n    <div class=\"app\">\n      <h2 class=\"title\">Vue路由测试</h2>\n      <!-- 导航区 -->\n      <div class=\"navigate\">\n        <RouterLink to=\"/home\" active-class=\"active\">首页</RouterLink>\n        <RouterLink to=\"/news\" active-class=\"active\">新闻</RouterLink>\n        <RouterLink to=\"/about\" active-class=\"active\">关于</RouterLink>\n      </div>\n      <!-- 展示区 -->\n      <div class=\"main-content\">\n        <RouterView></RouterView>\n      </div>\n    </div>\n  </template>\n  \n  <script lang=\"ts\" setup name=\"App\">\n    import {RouterLink,RouterView} from 'vue-router'  \n  </script>\n  ```\n\n## 4.3. 【两个注意点】\n\n> 1. 路由组件通常存放在`pages` 或 `views`文件夹，一般组件通常存放在`components`文件夹。\n>\n> 2. 通过点击导航，视觉效果上“消失” 了的路由组件，默认是被**卸载**掉的，需要的时候再去**挂载**。\n\n## 4.4.【路由器工作模式】\n\n1. `history`模式\n\n   > 优点：`URL`更加美观，不带有`#`，更接近传统的网站`URL`。\n   >\n   > 缺点：后期项目上线，需要服务端配合处理路径问题，否则刷新会有`404`错误。\n   >\n   > ```js\n   > const router = createRouter({\n   > \thistory:createWebHistory(), //history模式\n   > \t/******/\n   > })\n   > ```\n\n2. `hash`模式\n\n   > 优点：兼容性更好，因为不需要服务器端处理路径。\n   >\n   > 缺点：`URL`带有`#`不太美观，且在`SEO`优化方面相对较差。\n   >\n   > ```js\n   > const router = createRouter({\n   > \thistory:createWebHashHistory(), //hash模式\n   > \t/******/\n   > })\n   > ```\n\n## 4.5. 【to的两种写法】\n\n```html\n<!-- 第一种：to的字符串写法 -->\n<router-link active-class=\"active\" to=\"/home\">主页</router-link>\n\n<!-- 第二种：to的对象写法 -->\n<router-link active-class=\"active\" :to=\"{path:'/home'}\">Home</router-link>\n```\n\n## 4.6. 【命名路由】\n\n作用：可以简化路由跳转及传参（后面就讲）。\n\n给路由规则命名：\n\n```js\nroutes:[\n  {\n    name:'zhuye',\n    path:'/home',\n    component:Home\n  },\n  {\n    name:'xinwen',\n    path:'/news',\n    component:News,\n  },\n  {\n    name:'guanyu',\n    path:'/about',\n    component:About\n  }\n]\n```\n\n跳转路由：\n\n```html\n<!--简化前：需要写完整的路径（to的字符串写法） -->\n<router-link to=\"/news/detail\">跳转</router-link>\n\n<!--简化后：直接通过名字跳转（to的对象写法配合name属性） -->\n<router-link :to=\"{name:'guanyu'}\">跳转</router-link>\n```\n\n\n\n## 4.7. 【嵌套路由】\n\n1. 编写`News`的子路由：`Detail.vue`\n\n2. 配置路由规则，使用`children`配置项：\n\n   ```ts\n   const router = createRouter({\n     history:createWebHistory(),\n   \troutes:[\n   \t\t{\n   \t\t\tname:'zhuye',\n   \t\t\tpath:'/home',\n   \t\t\tcomponent:Home\n   \t\t},\n   \t\t{\n   \t\t\tname:'xinwen',\n   \t\t\tpath:'/news',\n   \t\t\tcomponent:News,\n   \t\t\tchildren:[\n   \t\t\t\t{\n   \t\t\t\t\tname:'xiang',\n   \t\t\t\t\tpath:'detail',\n   \t\t\t\t\tcomponent:Detail\n   \t\t\t\t}\n   \t\t\t]\n   \t\t},\n   \t\t{\n   \t\t\tname:'guanyu',\n   \t\t\tpath:'/about',\n   \t\t\tcomponent:About\n   \t\t}\n   \t]\n   })\n   export default router\n   ```\n   \n3. 跳转路由（记得要加完整路径）：\n\n   ```html\n   <router-link to=\"/news/detail\">xxxx</router-link>\n   <!-- 或 -->\n   <router-link :to=\"{path:'/news/detail'}\">xxxx</router-link>\n   ```\n\n4. 记得去`Home`组件中预留一个`<router-view>`\n\n   ```html\n   <template>\n     <div class=\"news\">\n       <nav class=\"news-list\">\n         <RouterLink v-for=\"news in newsList\" :key=\"news.id\" :to=\"{path:'/news/detail'}\">\n           {{news.name}}\n         </RouterLink>\n       </nav>\n       <div class=\"news-detail\">\n         <RouterView/>\n       </div>\n     </div>\n   </template>\n   ```\n\n   \n\n## 4.8. 【路由传参】\n\n### query参数\n\n   1. 传递参数\n\n      ```html\n      <!-- 跳转并携带query参数（to的字符串写法） -->\n      <router-link to=\"/news/detail?a=1&b=2&content=欢迎你\">\n      \t跳转\n      </router-link>\n      \t\t\t\t\n      <!-- 跳转并携带query参数（to的对象写法） -->\n      <RouterLink \n        :to=\"{\n          //name:'xiang', //用name也可以跳转\n          path:'/news/detail',\n          query:{\n            id:news.id,\n            title:news.title,\n            content:news.content\n          }\n        }\"\n      >\n        {{news.title}}\n      </RouterLink>\n      ```\n\n   2. 接收参数：\n\n      ```js\n      import {useRoute} from 'vue-router'\n      const route = useRoute()\n      // 打印query参数\n      console.log(route.query)\n      ```\n\n\n### params参数\n\n   1. 传递参数\n\n      ```html\n      <!-- 跳转并携带params参数（to的字符串写法） -->\n      <RouterLink :to=\"`/news/detail/001/新闻001/内容001`\">{{news.title}}</RouterLink>\n      \t\t\t\t\n      <!-- 跳转并携带params参数（to的对象写法） -->\n      <RouterLink \n        :to=\"{\n          name:'xiang', //用name跳转\n          params:{\n            id:news.id,\n            title:news.title,\n            content:news.title\n          }\n        }\"\n      >\n        {{news.title}}\n      </RouterLink>\n      ```\n\n   2. 接收参数：\n\n      ```js\n      import {useRoute} from 'vue-router'\n      const route = useRoute()\n      // 打印params参数\n      console.log(route.params)\n      ```\n\n> 备注1：传递`params`参数时，若使用`to`的对象写法，必须使用`name`配置项，不能用`path`。\n>\n> 备注2：传递`params`参数时，需要提前在规则中占位。\n\n## 4.9. 【路由的props配置】\n\n作用：让路由组件更方便的收到参数（可以将路由参数作为`props`传给组件）\n\n```js\n{\n\tname:'xiang',\n\tpath:'detail/:id/:title/:content',\n\tcomponent:Detail,\n\n  // props的对象写法，作用：把对象中的每一组key-value作为props传给Detail组件\n  // props:{a:1,b:2,c:3}, \n\n  // props的布尔值写法，作用：把收到了每一组params参数，作为props传给Detail组件\n  // props:true\n  \n  // props的函数写法，作用：把返回的对象中每一组key-value作为props传给Detail组件\n  props(route){\n    return route.query\n  }\n}\n```\n\n## 4.10. 【 replace属性】\n\n  1. 作用：控制路由跳转时操作浏览器历史记录的模式。\n\n  2. 浏览器的历史记录有两种写入方式：分别为```push```和```replace```：\n\n     - ```push```是追加历史记录（默认值）。\n     - `replace`是替换当前记录。\n\n  3. 开启`replace`模式：\n\n     ```html\n     <RouterLink replace .......>News</RouterLink>\n     ```\n\n## 4.11. 【编程式导航】\n\n路由组件的两个重要的属性：`$route`和`$router`变成了两个`hooks`\n\n```js\nimport {useRoute,useRouter} from 'vue-router'\n\nconst route = useRoute()\nconst router = useRouter()\n\nconsole.log(route.query)\nconsole.log(route.parmas)\nconsole.log(router.push)\nconsole.log(router.replace)\n```\n\n## 4.12. 【重定向】\n\n1. 作用：将特定的路径，重新定向到已有路由。\n\n2. 具体编码：\n\n   ```js\n   {\n       path:'/',\n       redirect:'/about'\n   }\n   ```\n\n\n\n# 5. pinia \n\n## 5.1【准备一个效果】\n\n<img src=\"https://s2.loli.net/2024/02/22/GbKyu4poHJZtgw2.gif\" alt=\"pinia_example\" style=\"zoom:30%;border:3px solid\" /> \n\n## 5.2【搭建 pinia 环境】\n\n第一步：`npm install pinia`\n\n第二步：操作`src/main.ts`\n\n```ts\nimport { createApp } from 'vue'\nimport App from './App.vue'\n\n/* 引入createPinia，用于创建pinia */\nimport { createPinia } from 'pinia'\n\n/* 创建pinia */\nconst pinia = createPinia()\nconst app = createApp(App)\n\n/* 使用插件 */{}\napp.use(pinia)\napp.mount('#app')\n```\n\n此时开发者工具中已经有了`pinia`选项\n\n<img src=\"https://s2.loli.net/2024/02/22/avODA9IErUTojih.png\" style=\"zoom:80%;border:1px solid black;border-radius:10px\" />\n\n## 5.3【存储+读取数据】\n\n1. `Store`是一个保存：**状态**、**业务逻辑** 的实体，每个组件都可以**读取**、**写入**它。\n\n2. 它有三个概念：`state`、`getter`、`action`，相当于组件中的： `data`、 `computed` 和 `methods`。\n\n3. 具体编码：`src/store/count.ts`\n\n   ```ts\n   // 引入defineStore用于创建store\n   import {defineStore} from 'pinia'\n   \n   // 定义并暴露一个store\n   export const useCountStore = defineStore('count',{\n     // 动作\n     actions:{},\n     // 状态\n     state(){\n       return {\n         sum:6\n       }\n     },\n     // 计算\n     getters:{}\n   })\n   ```\n\n4. 具体编码：`src/store/talk.ts`\n\n   ```js\n   // 引入defineStore用于创建store\n   import {defineStore} from 'pinia'\n   \n   // 定义并暴露一个store\n   export const useTalkStore = defineStore('talk',{\n     // 动作\n     actions:{},\n     // 状态\n     state(){\n       return {\n         talkList:[\n           {id:'yuysada01',content:'你今天有点怪，哪里怪？怪好看的！'},\n        \t\t{id:'yuysada02',content:'草莓、蓝莓、蔓越莓，你想我了没？'},\n           {id:'yuysada03',content:'心里给你留了一块地，我的死心塌地'}\n         ]\n       }\n     },\n     // 计算\n     getters:{}\n   })\n   ```\n   \n5. 组件中使用`state`中的数据\n\n   ```html\n   <template>\n     <h2>当前求和为：{{ sumStore.sum }}</h2>\n   </template>\n   \n   <script setup lang=\"ts\" name=\"Count\">\n     // 引入对应的useXxxxxStore\t\n     import {useSumStore} from '@/store/sum'\n     \n     // 调用useXxxxxStore得到对应的store\n     const sumStore = useSumStore()\n   </script>\n   ```\n\n   ```html\n   <template>\n   \t<ul>\n       <li v-for=\"talk in talkStore.talkList\" :key=\"talk.id\">\n         {{ talk.content }}\n       </li>\n     </ul>\n   </template>\n   \n   <script setup lang=\"ts\" name=\"Count\">\n     import axios from 'axios'\n     import {useTalkStore} from '@/store/talk'\n   \n     const talkStore = useTalkStore()\n   </script>\n   ```\n\n   \n\n## 5.4.【修改数据】(三种方式)\n\n1. 第一种修改方式，直接修改\n\n   ```ts\n   countStore.sum = 666\n   ```\n\n2. 第二种修改方式：批量修改\n\n   ```ts\n   countStore.$patch({\n     sum:999,\n     school:'atguigu'\n   })\n   ```\n\n3. 第三种修改方式：借助`action`修改（`action`中可以编写一些业务逻辑）\n\n   ```js\n   import { defineStore } from 'pinia'\n   \n   export const useCountStore = defineStore('count', {\n     /*************/\n     actions: {\n       //加\n       increment(value:number) {\n         if (this.sum < 10) {\n           //操作countStore中的sum\n           this.sum += value\n         }\n       },\n       //减\n       decrement(value:number){\n         if(this.sum > 1){\n           this.sum -= value\n         }\n       }\n     },\n     /*************/\n   })\n   ```\n\n4. 组件中调用`action`即可\n\n   ```js\n   // 使用countStore\n   const countStore = useCountStore()\n   \n   // 调用对应action\n   countStore.incrementOdd(n.value)\n   ```\n\n\n## 5.5.【storeToRefs】\n\n- 借助`storeToRefs`将`store`中的数据转为`ref`对象，方便在模板中使用。\n- 注意：`pinia`提供的`storeToRefs`只会将数据做转换，而`Vue`的`toRefs`会转换`store`中数据。\n\n```html\n<template>\n\t<div class=\"count\">\n\t\t<h2>当前求和为：{{sum}}</h2>\n\t</div>\n</template>\n\n<script setup lang=\"ts\" name=\"Count\">\n  import { useCountStore } from '@/store/count'\n  /* 引入storeToRefs */\n  import { storeToRefs } from 'pinia'\n\n\t/* 得到countStore */\n  const countStore = useCountStore()\n  /* 使用storeToRefs转换countStore，随后解构 */\n  const {sum} = storeToRefs(countStore)\n</script>\n\n```\n\n## 5.6.【getters】\n\n  1. 概念：当`state`中的数据，需要经过处理后再使用时，可以使用`getters`配置。\n\n  2. 追加```getters```配置。\n\n     ```js\n     // 引入defineStore用于创建store\n     import {defineStore} from 'pinia'\n     \n     // 定义并暴露一个store\n     export const useCountStore = defineStore('count',{\n       // 动作\n       actions:{\n         /************/\n       },\n       // 状态\n       state(){\n         return {\n           sum:1,\n           school:'atguigu'\n         }\n       },\n       // 计算\n       getters:{\n         bigSum:(state):number => state.sum *10,\n         upperSchool():string{\n           return this. school.toUpperCase()\n         }\n       }\n     })\n     ```\n\n  3. 组件中读取数据：\n\n     ```js\n     const {increment,decrement} = countStore\n     let {sum,school,bigSum,upperSchool} = storeToRefs(countStore)\n     ```\n\n     \n\n## 5.7.【$subscribe】\n\n通过 store 的 `$subscribe()` 方法侦听 `state` 及其变化\n\n```ts\ntalkStore.$subscribe((mutate,state)=>{\n  console.log('LoveTalk',mutate,state)\n  localStorage.setItem('talk',JSON.stringify(talkList.value))\n})\n```\n\n\n\n## 5.8. 【store组合式写法】\n\n```ts\nimport {defineStore} from 'pinia'\nimport axios from 'axios'\nimport {nanoid} from 'nanoid'\nimport {reactive} from 'vue'\n\nexport const useTalkStore = defineStore('talk',()=>{\n  // talkList就是state\n  const talkList = reactive(\n    JSON.parse(localStorage.getItem('talkList') as string) || []\n  )\n\n  // getATalk函数相当于action\n  async function getATalk(){\n    // 发请求，下面这行的写法是：连续解构赋值+重命名\n    let {data:{content:title}} = await axios.get('https://api.uomg.com/api/rand.qinghua?format=json')\n    // 把请求回来的字符串，包装成一个对象\n    let obj = {id:nanoid(),title}\n    // 放到数组中\n    talkList.unshift(obj)\n  }\n  return {talkList,getATalk}\n})\n```\n\n\n\n# 6. 组件通信\n\n**`Vue3`组件通信和`Vue2`的区别：**\n\n* 移出事件总线，使用`mitt`代替。\n\n- `vuex`换成了`pinia`。\n- 把`.sync`优化到了`v-model`里面了。\n- 把`$listeners`所有的东西，合并到`$attrs`中了。\n- `$children`被砍掉了。\n\n**常见搭配形式：**\n\n<img src=\"https://s2.loli.net/2024/02/22/WZaSR8Mor15mfIT.png\" alt=\"image-20231119185900990\" style=\"zoom:60%;\" /> \n\n## 6.1. 【props】\n\n概述：`props`是使用频率最高的一种通信方式，常用与 ：**父 ↔ 子**。\n\n- 若 **父传子**：属性值是**非函数**。\n- 若 **子传父**：属性值是**函数**。\n\n父组件：\n\n```html\n<template>\n  <div class=\"father\">\n    <h3>父组件，</h3>\n\t\t<h4>我的车：{{ car }}</h4>\n\t\t<h4>儿子给的玩具：{{ toy }}</h4>\n\t\t<Child :car=\"car\" :getToy=\"getToy\"/>\n  </div>\n</template>\n\n<script setup lang=\"ts\" name=\"Father\">\n\timport Child from './Child.vue'\n\timport { ref } from \"vue\";\n\t// 数据\n\tconst car = ref('奔驰')\n\tconst toy = ref()\n\t// 方法\n\tfunction getToy(value:string){\n\t\ttoy.value = value\n\t}\n</script>\n```\n\n子组件\n\n```html\n<template>\n  <div class=\"child\">\n    <h3>子组件</h3>\n\t\t<h4>我的玩具：{{ toy }}</h4>\n\t\t<h4>父给我的车：{{ car }}</h4>\n\t\t<button @click=\"getToy(toy)\">玩具给父亲</button>\n  </div>\n</template>\n\n<script setup lang=\"ts\" name=\"Child\">\n\timport { ref } from \"vue\";\n\tconst toy = ref('奥特曼')\n\t\n\tdefineProps(['car','getToy'])\n</script>\n```\n\n## 6.2. 【自定义事件】\n\n1. 概述：自定义事件常用于：**子 => 父。**\n2. 注意区分好：原生事件、自定义事件。\n\n- 原生事件：\n  - 事件名是特定的（`click`、`mosueenter`等等）\t\n  - 事件对象`$event`: 是包含事件相关信息的对象（`pageX`、`pageY`、`target`、`keyCode`）\n- 自定义事件：\n  - 事件名是任意名称\n  - <strong style=\"color:red\">事件对象`$event`: 是调用`emit`时所提供的数据，可以是任意类型！！！</strong >\n\n3. 示例：\n\n   ```html\n   <!--在父组件中，给子组件绑定自定义事件：-->\n   <Child @send-toy=\"toy = $event\"/>\n   \n   <!--注意区分原生事件与自定义事件中的$event-->\n   <button @click=\"toy = $event\">测试</button>\n   ```\n\n   ```js\n   //子组件中，触发事件：\n   this.$emit('send-toy', 具体数据)\n   ```\n\n## 6.3. 【mitt】\n\n概述：与消息订阅与发布（`pubsub`）功能类似，可以实现任意组件间通信。\n\n安装`mitt`\n\n```shell\nnpm i mitt\n```\n\n新建文件：`src\\utils\\emitter.ts`\n\n```javascript\n// 引入mitt \nimport mitt from \"mitt\";\n\n// 创建emitter\nconst emitter = mitt()\n\n/*\n  // 绑定事件\n  emitter.on('abc',(value)=>{\n    console.log('abc事件被触发',value)\n  })\n  emitter.on('xyz',(value)=>{\n    console.log('xyz事件被触发',value)\n  })\n\n  setInterval(() => {\n    // 触发事件\n    emitter.emit('abc',666)\n    emitter.emit('xyz',777)\n  }, 1000);\n\n  setTimeout(() => {\n    // 清理事件\n    emitter.all.clear()\n  }, 3000); \n*/\n\n// 创建并暴露mitt\nexport default emitter\n```\n\n接收数据的组件中：绑定事件、同时在销毁前解绑事件：\n\n```typescript\nimport emitter from \"@/utils/emitter\";\nimport { onUnmounted } from \"vue\";\n\n// 绑定事件\nemitter.on('send-toy',(value)=>{\n  console.log('send-toy事件被触发',value)\n})\n\nonUnmounted(()=>{\n  // 解绑事件\n  emitter.off('send-toy')\n})\n```\n\n【第三步】：提供数据的组件，在合适的时候触发事件\n\n```javascript\nimport emitter from \"@/utils/emitter\";\n\nfunction sendToy(){\n  // 触发事件\n  emitter.emit('send-toy',toy.value)\n}\n```\n\n**注意这个重要的内置关系，总线依赖着这个内置关系**\n\n## 6.4.【v-model】\n\n1. 概述：实现 **父↔子** 之间相互通信。\n\n2. 前序知识 —— `v-model`的本质\n\n   ```html\n   <!-- 使用v-model指令 -->\n   <input type=\"text\" v-model=\"userName\">\n   \n   <!-- v-model的本质是下面这行代码 -->\n   <input \n     type=\"text\" \n     :value=\"userName\" \n     @input=\"userName =(<HTMLInputElement>$event.target).value\"\n   >\n   ```\n\n3. 组件标签上的`v-model`的本质：`:moldeValue` ＋ `update:modelValue`事件。\n\n   ```html\n   <!-- 组件标签上使用v-model指令 -->\n   <AtguiguInput v-model=\"userName\"/>\n   \n   <!-- 组件标签上v-model的本质 -->\n   <AtguiguInput :modelValue=\"userName\" @update:model-value=\"userName = $event\"/>\n   ```\n\n   `AtguiguInput`组件中：\n\n   ```html\n   <template>\n     <div class=\"box\">\n       <!--将接收的value值赋给input元素的value属性，目的是：为了呈现数据 -->\n   \t\t<!--给input元素绑定原生input事件，触发input事件时，进而触发update:model-value事件-->\n       <input \n          type=\"text\" \n          :value=\"modelValue\" \n          @input=\"emit('update:model-value',$event.target.value)\"\n       >\n     </div>\n   </template>\n   \n   <script setup lang=\"ts\" name=\"AtguiguInput\">\n     // 接收props\n     defineProps(['modelValue'])\n     // 声明事件\n     const emit = defineEmits(['update:model-value'])\n   </script>\n   ```\n\n4. 也可以更换`value`，例如改成`abc`\n\n   ```html\n   <!-- 也可以更换value，例如改成abc-->\n   <AtguiguInput v-model:abc=\"userName\"/>\n   \n   <!-- 上面代码的本质如下 -->\n   <AtguiguInput :abc=\"userName\" @update:abc=\"userName = $event\"/>\n   ```\n\n   `AtguiguInput`组件中：\n\n   ```html\n   <template>\n     <div class=\"box\">\n       <input \n          type=\"text\" \n          :value=\"abc\" \n          @input=\"emit('update:abc',$event.target.value)\"\n       >\n     </div>\n   </template>\n   \n   <script setup lang=\"ts\" name=\"AtguiguInput\">\n     // 接收props\n     defineProps(['abc'])\n     // 声明事件\n     const emit = defineEmits(['update:abc'])\n   </script>\n   ```\n\n5. 如果`value`可以更换，那么就可以在组件标签上多次使用`v-model`\n\n   ```html\n   <AtguiguInput v-model:abc=\"userName\" v-model:xyz=\"password\"/>\n   ```\n\n   \n\n\n## 6.5.【$attrs 】\n\n1. 概述：`$attrs`用于实现**当前组件的父组件**，向**当前组件的子组件**通信（**祖→孙**）。\n\n2. 具体说明：`$attrs`是一个对象，包含所有父组件传入的标签属性。\n\n   >  注意：`$attrs`会自动排除`props`中声明的属性(可以认为声明过的 `props` 被子组件自己“消费”了)\n\n父组件：\n\n```html\n<template>\n  <div class=\"father\">\n    <h3>父组件</h3>\n\t\t<Child :a=\"a\" :b=\"b\" :c=\"c\" :d=\"d\" v-bind=\"{x:100,y:200}\" :updateA=\"updateA\"/>\n  </div>\n</template>\n\n<script setup lang=\"ts\" name=\"Father\">\n\timport Child from './Child.vue'\n\timport { ref } from \"vue\";\n\tlet a = ref(1)\n\tlet b = ref(2)\n\tlet c = ref(3)\n\tlet d = ref(4)\n\n\tfunction updateA(value){\n\t\ta.value = value\n\t}\n</script>\n```\n\n子组件：\n\n```html\n<template>\n\t<div class=\"child\">\n\t\t<h3>子组件</h3>\n\t\t<GrandChild v-bind=\"$attrs\"/>\n\t</div>\n</template>\n\n<script setup lang=\"ts\" name=\"Child\">\n\timport GrandChild from './GrandChild.vue'\n</script>\n```\n\n孙组件：\n\n```html\n<template>\n\t<div class=\"grand-child\">\n\t\t<h3>孙组件</h3>\n\t\t<h4>a：{{ a }}</h4>\n\t\t<h4>b：{{ b }}</h4>\n\t\t<h4>c：{{ c }}</h4>\n\t\t<h4>d：{{ d }}</h4>\n\t\t<h4>x：{{ x }}</h4>\n\t\t<h4>y：{{ y }}</h4>\n\t\t<button @click=\"updateA(666)\">点我更新A</button>\n\t</div>\n</template>\n\n<script setup lang=\"ts\" name=\"GrandChild\">\n\tdefineProps(['a','b','c','d','x','y','updateA'])\n</script>\n```\n\n## 6.6. 【$refs、$parent】\n\n1. 概述：\n\n   * `$refs`用于 ：**父→子。**\n   * `$parent`用于：**子→父。**\n\n2. 原理如下：\n\n   | 属性      | 说明                                                     |\n   | --------- | -------------------------------------------------------- |\n   | `$refs`   | 值为对象，包含所有被`ref`属性标识的`DOM`元素或组件实例。 |\n   | `$parent` | 值为对象，当前组件的父组件实例对象。                     |\n\n## 6.7. 【provide、inject】\n\n1. 概述：实现**祖孙组件**直接通信\n\n2. 具体使用：\n\n   * 在祖先组件中通过`provide`配置向后代组件提供数据\n   * 在后代组件中通过`inject`配置来声明接收数据\n\n4. 具体编码：\n\n   【第一步】父组件中，使用`provide`提供数据\n\n   ```html\n   <template>\n     <div class=\"father\">\n       <h3>父组件</h3>\n       <h4>资产：{{ money }}</h4>\n       <h4>汽车：{{ car }}</h4>\n       <button @click=\"money += 1\">资产+1</button>\n       <button @click=\"car.price += 1\">汽车价格+1</button>\n       <Child/>\n     </div>\n   </template>\n   \n   <script setup lang=\"ts\" name=\"Father\">\n     import Child from './Child.vue'\n     import { ref,reactive,provide } from \"vue\";\n     // 数据\n     let money = ref(100)\n     let car = reactive({\n       brand:'奔驰',\n       price:100\n     })\n     // 用于更新money的方法\n     function updateMoney(value:number){\n       money.value += value\n     }\n     // 提供数据\n     provide('moneyContext',{money,updateMoney})\n     provide('car',car)\n   </script>\n   ```\n   \n   > 注意：子组件中不用编写任何东西，是不受到任何打扰的\n   \n   【第二步】孙组件中使用`inject`配置项接受数据。\n   \n   ```html\n   <template>\n     <div class=\"grand-child\">\n       <h3>我是孙组件</h3>\n       <h4>资产：{{ money }}</h4>\n       <h4>汽车：{{ car }}</h4>\n       <button @click=\"updateMoney(6)\">点我</button>\n     </div>\n   </template>\n   \n   <script setup lang=\"ts\" name=\"GrandChild\">\n     import { inject } from 'vue';\n     // 注入数据\n    let {money,updateMoney} = inject('moneyContext',{money:0,updateMoney:(x:number)=>{}})\n     let car = inject('car')\n   </script>\n   ```\n\n\n## 6.8. 【pinia】\n\n参考之前`pinia`部分的讲解\n\n## 6.9. 【slot】\n\n### 1. 默认插槽\n\n![img](https://s2.loli.net/2024/02/22/KDmNvArchICu3PF.png)\n\n```html\n父组件中：\n        <Category title=\"今日热门游戏\">\n          <ul>\n            <li v-for=\"g in games\" :key=\"g.id\">{{ g.name }}</li>\n          </ul>\n        </Category>\n子组件中：\n        <template>\n          <div class=\"item\">\n            <h3>{{ title }}</h3>\n            <!-- 默认插槽 -->\n            <slot></slot>\n          </div>\n        </template>\n```\n\n### 2. 具名插槽\n\n```html\n父组件中：\n        <Category title=\"今日热门游戏\">\n          <template v-slot:s1>\n            <ul>\n              <li v-for=\"g in games\" :key=\"g.id\">{{ g.name }}</li>\n            </ul>\n          </template>\n          <template #s2>\n            <a href=\"\">更多</a>\n          </template>\n        </Category>\n子组件中：\n        <template>\n          <div class=\"item\">\n            <h3>{{ title }}</h3>\n            <slot name=\"s1\"></slot>\n            <slot name=\"s2\"></slot>\n          </div>\n        </template>\n```\n\n### 3. 作用域插槽 \n\n1. 理解：<span style=\"color:red\">数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定。</span>（新闻数据在`News`组件中，但使用数据所遍历出来的结构由`App`组件决定）\n\n3. 具体编码：\n\n   ```html\n   父组件中：\n         <Game v-slot=\"params\">\n         <!-- <Game v-slot:default=\"params\"> -->\n         <!-- <Game #default=\"params\"> -->\n           <ul>\n             <li v-for=\"g in params.games\" :key=\"g.id\">{{ g.name }}</li>\n           </ul>\n         </Game>\n   \n   子组件中：\n         <template>\n           <div class=\"category\">\n             <h2>今日游戏榜单</h2>\n             <slot :games=\"games\" a=\"哈哈\"></slot>\n           </div>\n         </template>\n   \n         <script setup lang=\"ts\" name=\"Category\">\n           import {reactive} from 'vue'\n           let games = reactive([\n             {id:'asgdytsa01',name:'英雄联盟'},\n             {id:'asgdytsa02',name:'王者荣耀'},\n             {id:'asgdytsa03',name:'红色警戒'},\n             {id:'asgdytsa04',name:'斗罗大陆'}\n           ])\n         </script>\n   ```\n\n\n\n# 7. 其它 API\n\n## 7.1.【shallowRef 与 shallowReactive 】\n\n### `shallowRef`\n\n1. 作用：创建一个响应式数据，但只对顶层属性进行响应式处理。\n\n2. 用法：\n\n   ```js\n   let myVar = shallowRef(initialValue);\n   ```\n\n3. 特点：只跟踪引用值的变化，不关心值内部的属性变化。\n\n### `shallowReactive`\n\n1. 作用：创建一个浅层响应式对象，只会使对象的最顶层属性变成响应式的，对象内部的嵌套属性则不会变成响应式的\n\n2. 用法：\n\n   ```js\n   const myObj = shallowReactive({ ... });\n   ```\n\n3. 特点：对象的顶层属性是响应式的，但嵌套对象的属性不是。\n\n### 总结\n\n> 通过使用 [`shallowRef()`](https://cn.vuejs.org/api/reactivity-advanced.html#shallowref) 和 [`shallowReactive()`](https://cn.vuejs.org/api/reactivity-advanced.html#shallowreactive) 来绕开深度响应。浅层式 `API` 创建的状态只在其顶层是响应式的，对所有深层的对象不会做任何处理，避免了对每一个内部属性做响应式所带来的性能成本，这使得属性的访问变得更快，可提升性能。\n\n\n\n## 7.2.【readonly 与 shallowReadonly】\n\n### **`readonly`**\n\n1. 作用：用于创建一个对象的深只读副本。\n\n2. 用法：\n\n   ```js\n   const original = reactive({ ... });\n   const readOnlyCopy = readonly(original);\n   ```\n\n3. 特点：\n\n   * 对象的所有嵌套属性都将变为只读。\n   * 任何尝试修改这个对象的操作都会被阻止（在开发模式下，还会在控制台中发出警告）。\n\n4. 应用场景：\n   * 创建不可变的状态快照。\n   * 保护全局状态或配置不被修改。\n\n### **`shallowReadonly`**\n\n1. 作用：与 `readonly` 类似，但只作用于对象的顶层属性。\n\n2. 用法：\n\n   ```js\n   const original = reactive({ ... });\n   const shallowReadOnlyCopy = shallowReadonly(original);\n   ```\n\n3. 特点：\n\n   * 只将对象的顶层属性设置为只读，对象内部的嵌套属性仍然是可变的。\n\n   * 适用于只需保护对象顶层属性的场景。\n\n     \n\n## 7.3.【toRaw 与 markRaw】\n\n### `toRaw`\n\n1. 作用：用于获取一个响应式对象的原始对象， `toRaw` 返回的对象不再是响应式的，不会触发视图更新。\n\n   > 官网描述：这是一个可以用于临时读取而不引起代理访问/跟踪开销，或是写入而不触发更改的特殊方法。不建议保存对原始对象的持久引用，请谨慎使用。\n\n   > 何时使用？ —— 在需要将响应式对象传递给非 `Vue` 的库或外部系统时，使用 `toRaw` 可以确保它们收到的是普通对象\n\n2. 具体编码：\n\n   ```js\n   import { reactive,toRaw,markRaw,isReactive } from \"vue\";\n   \n   /* toRaw */\n   // 响应式对象\n   let person = reactive({name:'tony',age:18})\n   // 原始对象\n   let rawPerson = toRaw(person)\n   \n   \n   /* markRaw */\n   let citysd = markRaw([\n     {id:'asdda01',name:'北京'},\n     {id:'asdda02',name:'上海'},\n     {id:'asdda03',name:'天津'},\n     {id:'asdda04',name:'重庆'}\n   ])\n   // 根据原始对象citys去创建响应式对象citys2 —— 创建失败，因为citys被markRaw标记了\n   let citys2 = reactive(citys)\n   console.log(isReactive(person))\n   console.log(isReactive(rawPerson))\n   console.log(isReactive(citys))\n   console.log(isReactive(citys2))\n   ```\n\n### `markRaw`\n\n1. 作用：标记一个对象，使其**永远不会**变成响应式的。\n\n   > 例如使用`mockjs`时，为了防止误把`mockjs`变为响应式对象，可以使用 `markRaw` 去标记`mockjs`\n\n2. 编码：\n\n   ```js\n   /* markRaw */\n   let citys = markRaw([\n     {id:'asdda01',name:'北京'},\n     {id:'asdda02',name:'上海'},\n     {id:'asdda03',name:'天津'},\n     {id:'asdda04',name:'重庆'}\n   ])\n   // 根据原始对象citys去创建响应式对象citys2 —— 创建失败，因为citys被markRaw标记了\n   let citys2 = reactive(citys)\n   ```\n\n## 7.4.【customRef】\n\n作用：创建一个自定义的`ref`，并对其依赖项跟踪和更新触发进行逻辑控制。\n\n实现防抖效果（`useSumRef.ts`）：\n\n```typescript\nimport {customRef } from \"vue\";\n\nexport default function(initValue:string,delay:number){\n  let msg = customRef((track,trigger)=>{\n    let timer:number\n    return {\n      get(){\n        track() // 告诉Vue数据msg很重要，要对msg持续关注，一旦变化就更新\n        return initValue\n      },\n      set(value){\n        clearTimeout(timer)\n        timer = setTimeout(() => {\n          initValue = value\n          trigger() //通知Vue数据msg变化了\n        }, delay);\n      }\n    }\n  }) \n  return {msg}\n}\n```\n\n组件中使用：\n\n\n\n\n\n# 8. Vue3新组件\n\n## 8.1. 【Teleport】\n\n- 什么是Teleport？—— Teleport 是一种能够将我们的**组件html结构**移动到指定位置的技术。\n\n```html\n<teleport to='body' >\n    <div class=\"modal\" v-show=\"isShow\">\n      <h2>我是一个弹窗</h2>\n      <p>我是弹窗中的一些内容</p>\n      <button @click=\"isShow = false\">关闭弹窗</button>\n    </div>\n</teleport>\n```\n\n## 8.2. 【Suspense】\n\n-  等待异步组件时渲染一些额外内容，让应用有更好的用户体验 \n-  使用步骤： \n   -  异步引入组件\n   -  使用`Suspense`包裹组件，并配置好`default` 与 `fallback`\n\n```tsx\nimport { defineAsyncComponent,Suspense } from \"vue\";\nconst Child = defineAsyncComponent(()=>import('./Child.vue'))\n```\n\n```html\n<template>\n    <div class=\"app\">\n        <h3>我是App组件</h3>\n        <Suspense>\n          <template v-slot:default>\n            <Child/>\n          </template>\n          <template v-slot:fallback>\n            <h3>加载中.......</h3>\n          </template>\n        </Suspense>\n    </div>\n</template>\n```\n\n\n\n## 8.3.【全局API转移到应用对象】\n\n- `app.component`\n- `app.config`\n- `app.directive`\n- `app.mount`\n- `app.unmount`\n- `app.use`\n\n## 8.4.【其他】\n\n- 过渡类名 `v-enter` 修改为 `v-enter-from`、过渡类名 `v-leave` 修改为 `v-leave-from`。\n\n\n- `keyCode` 作为 `v-on` 修饰符的支持。\n\n- `v-model` 指令在组件上的使用已经被重新设计，替换掉了 `v-bind.sync。`\n\n- `v-if` 和 `v-for` 在同一个元素身上使用时的优先级发生了变化。\n\n- 移除了`$on`、`$off` 和 `$once` 实例方法。\n\n- 移除了过滤器 `filter`。\n\n- 移除了`$children` 实例 `propert`。\n\n  ......\n","tags":["学习笔记","vue3.0"],"categories":["前端"]},{"title":"JavaScript Vue创建运行项目","url":"/2024/02/16/JavaScript-Vue创建运行项目/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>JavaScript Vue创建运行项目：</strong></font>\n\n<!--more-->\n\n+ <font color=#b0171f size=2 face=宋体><strong>已经安装并且 `node 版本 >= 15.0`</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>创建 `Vue`项目：</strong></font>\n\n```shell\nnpm init vue@latest   # 安装vue最新版本\n\n# 创建命令\nnpm create vue@latest\n\n\n\n✔ 请输入项目名称： … hello_vue3\n✔ 是否使用 TypeScript 语法？ … 否 / 是\n✔ 是否启用 JSX 支持？ … 否 / 是\n✔ 是否引入 Vue Router 进行单页面应用开发？ … 否 / 是\n✔ 是否引入 Pinia 用于状态管理？ … 否 / 是\n✔ 是否引入 Vitest 用于单元测试？ … 否 / 是\n✔ 是否要引入一款端到端（End to End）测试工具？ › 不需要\n✔ 是否引入 ESLint 用于代码质量检测？ … 否 / 是\n```\n\n![vue3.0 项目介绍](https://s2.loli.net/2024/02/16/wSTFEjm5pqZRvih.png)\n\n<font color=#f26522 size=4 face=宋体><strong></strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong></strong></font>\n\n \n","tags":["前端","javascript"],"categories":["Vue3.0"]},{"title":"CentOS 7 编译安装 Python 3.12.0_CentOS7升级Python3","url":"/2024/02/16/CentOS-7-编译安装-Python-3-12-0-CentOS7升级Python3/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>CentOS 7 编译安装 Python 3.12.0_CentOS7</strong></font>\n\n<!--more-->\n\n## <font color=#f26522 size=5 face=宋体><strong>前言</strong></font>\n\n### <font color=#00b2c2 size=4 face=宋体><strong>本文主旨</strong></font>\n\n+ 原本 CentOS 7 下通过 Yum 安装的 Python3 版本为 3.6。由于版本太低，不满足一些应用程序对 Python 版本的最低要求。\n\n+ 因此，本文要在 CentOS 7 以编译安装的方式升级 Python 的版本到当前（2023-12）的最新版本—— Python 3.12.0。\n\n+ 因为 CentOS 7 原先的 OpenSSL 版本太旧，不满足高版本 Python 编译安装的最低要求，因而要先升级 OpenSSL 版本到 v1.1.1x，同样是通过编译的方式。\n\n+ 要安装高版本的软件，最好先升级 GCC 的版本，本文将升级 GCC 工具包到 v11。\n\n+ 所有 Python 源代码存档于：https://www.python.org/ftp/python/\n\n### <font color=#00b2c2 size=4 face=宋体><strong>什么是 Python</strong></font>\n\n+ **Python** 是一种广泛使用的解释型的高级且通过的计算机编程语言。\n\n### <font color=#00b2c2 size=4 face=宋体><strong>Python 的特点</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>**python** 有以下的特点：</strong></font>\n\n+ 1. 它同时支持结构化、过程式、反射式、面向对象函数式编程。\n+ 2. 它是动态的脚本编程语言，并具有垃圾回收功能，能够自动管理内存的使用。\n+ 3. 它简洁的语法能够让开发者以更少更清晰的代码来表达想法；\n+ 4. Python 代码使用空格缩进而非符号的方式来区分代码块，这使得用它写的代码相比之下更具有可读性；\n+ 5. Python 若有极强的跨平台能力，可在几乎所有的操作系统中使用；\n+ 6. Python 是自由的开源的且由社群驱动的软件，目前由 “Pyhton 软件基金会” 管理；\n+ 7. Python 是近年来最受欢迎的编程语言之一，当前（2023年12月），它以近 15% 的市场占有率在世界排名第一，碾压 C语言、CPP 和 Java 等传统受欢迎的编程语言。\n\n以上资料来源于网上。\n\n![CentOS 7 升级 Python 3.12.0](https://s2.loli.net/2024/02/16/bw9PR8FTEVGf1Ax.png)\n\n## <font color=#00b2c2 size=5 face=宋体><strong>升级 GCC</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>安装开发工具包</strong></font>\n\n首先要安装 CentOS 7 的开发工具包，以免到时覆盖掉新的 GCC 可执行文件。\n\n```shell\nyum update -y\nyum group install -y \"development tools\"\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>安装 GCC-11</strong></font>\n\n```bash\nyum update -y\nyum install -y centos-release-scl\nyum install -y devtoolset-11\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>启用 GCC-11 相关的组件</strong></font>\n\n```bash\ncat /etc/bashrc | grep -i \"/opt/rh/devtoolset-11/enable\"\n\nif [ $? -gt 0  ]; then\n    echo \"source /opt/rh/devtoolset-11/enable\" >>/etc/bashrc\nfi\nsource /etc/bashrc\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>创建软链接到系统可执行目录</strong></font>\n\n```bash\nln -vsf /opt/rh/devtoolset-11/root/bin/* /usr/bin/\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>检验 GCC-11 是否安装成功</strong></font>\n\n```bash\n/usr/bin/gcc --version | grep \"gcc (GCC) 11.\"\ncode=$?\n\nif [ $code -gt 0 ]; then\n    echo \"+++++++++++++++++++++++++++++++++GCC-11 安装失败！\"\n    echo \"错误码： $code\"\nelse\n    echo \"+++++++++++++++++++++++++++++++++GCC-11 安装成功！\"\nfi\n```\n\n## <font color=#f26522 size=4 face=宋体><strong>升级 OpenSSL 到 1.1.1</strong></font>\n\n由于当前的 OpenSSL v1.1.1 最高版本是 v1.1.1w，于是便安装这个。\n\n最新版在右边链接的网页： https://ftp.openssl.org/source/。\n\n### <font color=#f26522 size=4 face=宋体><strong>安装 OpenSSL 编译要求的依赖</strong></font>\n\n```bash\nyum install -y wget zlib-devel perl-IPC-Cmd perl-Test-Simple\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>设定一个变量，用来安放 OpenSSL 新版本名称</strong></font>\n\n一定要执行这一步，因为这关系到后面下载和文件目录的名字。\n\n```bash\nOPENSSL_VER=1.1.1w\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>进入 /tmp 目录</strong></font>\n\n以后的操作均在此目录及其子目录进行。\n\n```bash\ncd /tmp\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>下载最新版本的 OpenSSL 源代码</strong></font>\n\n```bash\n# 下载可能很慢，甚至会超时\n# 这时可以删除原文件，再重新下载\nwget https://ftp.openssl.org/source/openssl-${OPENSSL_VER}.tar.gz\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>解压缩和进入源码目录</strong></font>\n\n```bash\ntar zxf openssl-${OPENSSL_VER}.tar.gz\ncode=$?\n\nif [ $code -gt 0 ]; then\n    echo \"+++++++++++++++++++++++++++++++++OpenSSL 源码压缩包解压失败！\"\n    echo \"错误代码： $code\"\nelse\n    cd openssl-${OPENSSL_VER}/\nfi\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>配置和编译</strong></font>\n\n```bash\n./config --prefix=/usr/local/openssl-${OPENSSL_VER} --openssldir=/etc/ssl-${OPENSSL_VER} shared zlib\ncode=$?\n\nif [ $code -gt 0 ]; then\n    echo \"+++++++++++++++++++++++++++++++++配置源码失败！\"\n    echo \"错误代码: $code\"\nelse\n    echo \"+++++++++++++++++++++++++++++++++开始编译 OpenSSL v${OPENSSL_VER}\"\n    make -j2\n    code=$?\n    if [ $code -gt 0 ]; then\n        echo \"+++++++++++++++++++++++++++++++++编译 OpenSSL 失败！\"\n        echo \"错误代码: $code\"\n    else\n        echo \"+++++++++++++++++++++++++++++++++编译 OpenSSL 成功！\"\n    fi\nfi\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>安装 OpenSSL</strong></font>\n\n编译成功后的一步是执行安装命令：\n\n```bash\nif [ $code -eq 0 ]; then\n    echo \"+++++++++++++++++++++++++++++++++开始安装 OpenSSL v${OPENSSL_VER}\"\n    make install\n    code=$?\n    if [ $code -gt 0 ]; then\n        echo \"+++++++++++++++++++++++++++++++++OpenSSL v${OPENSSL_VER} 安装失败！\"\n        echo \"错误代码： $code\"\n    else\n        echo \"+++++++++++++++++++++++++++++++++成功安装 OpenSSL v${OPENSSL_VER}！\"\n    fi\nfi\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>将新安装的 OpenSSL 库文件目录路径放进系统中</strong></font>\n\n```bash\nif [ $code -eq 0 ]; then\n    bash -c \"echo '/usr/local/openssl-${OPENSSL_VER}/lib' >> /etc/ld.so.conf\"\n    ldconfig -v\nfi\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>查看新安装的 libssl 动态库是否存在</strong></font>\n\n```bash\nldconfig -v |grep -i \"libssl\"\n```\n\n执行结果：\n\n```bash\nlibssl.so.1.1 -> libssl.so.1.1\nlibssl3.so -> libssl3.so\nlibssl.so.10 -> libssl.so.1.0.2k\n```\n\n至此，完成对 OpenSSL 的升级安装。\n\n接下来安装当前最新版本的 Python。\n\n## <font color=#f26522 size=4 face=宋体><strong>编译升级 Python</strong></font>\n\n### <font color=#f26522 size=4 face=宋体><strong>安装依赖</strong></font>\n\n```bash\nyum install -y wget bzip2-devel libffi-devel \\\n    ncurses-devel gdbm-devel xz-devel sqlite-devel \\\n    tk-devel uuid-devel readline-devel\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>设置版本号</strong></font>\n\n最新源码包可在 https://www.python.org/ftp/python/ 找到。\n\n```bash\nPYTHON_VERSION=3.12.0\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>下载 Python 源代码压缩包</strong></font>\n\n```bash\ncd /tmp\nwget https://www.python.org/ftp/python/${PYTHON_VERSION}/Python-${PYTHON_VERSION}.tar.xz\ncode=$?\nif [ $code -gt 0 ]; then\n    # 下载失败请重试\n    echo \"+++++++++++++++++++++++++++++++++Python 源代码下载失败！\"\n    echo \"错误代码： $code\"\nelse\n    echo \"+++++++++++++++++++++++++++++++++Python 源代码包下载成功！\"\nfi\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>解压缩</strong></font>\n\n```bash\ntar Jxf Python-${PYTHON_VERSION}.tar.xz\ncode=$?\n\nif [ $code -gt 0 ]; then\n    echo \"+++++++++++++++++++++++++++++++++解压缩失败！\"\n    echo \"错误代码： $code\"\nelse\n    echo \"+++++++++++++++++++++++++++++++++解压缩成功！\"\nfi\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>进入 Python 源码目录</strong></font>\n\n```bash\necho \"+++++++++++++++++++++++++++++++++cd Python-${PYTHON_VERSION}\"\ncd Python-${PYTHON_VERSION}\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>确认当前编译安装的环境条件</strong></font>\n\n```bash\necho \"OpenSSL ver: ${OPENSSL_VER}\"\necho \"Python ver: ${PYTHON_VERSION}\"\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>进行编译条件操作</strong></font>\n\n```bash\n./configure --prefix=/usr/local/python-${PYTHON_VERSION} --with-openssl=/usr/local/openssl-${OPENSSL_VER} --with-openssl-rpath=/usr/local/openssl-${OPENSSL_VER}/lib --enable-shared --enable-ipv6 ax_cv_c_float_words_bigendian=no --enable-optimizations\ncode=$?\n\nif [ $code -gt 0 ]; then\n    echo \"+++++++++++++++++++++++++++++++++Python 编译条件配置执行失败！\"\n    echo \"错误代码： $code\"\nelse\n    echo \"+++++++++++++++++++++++++++++++++Python 编译条件配置执行成功！\"\nfi\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>进行 Python 的编译操作</strong></font>\n\n```bash\nmake -j2\ncode=$?\n\nif [ $code -gt 0 ]; then\n    echo \"+++++++++++++++++++++++++++++++++Python 编译失败\"\n    echo \"错误代码： $code\"\nelse\n    echo \"+++++++++++++++++++++++++++++++++成功进行 Python 编译操作！\"\nfi\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>安装 Python v1.12</strong></font>\n\n```bash\nmake altinstall\ncode=$?\n\nif [ $code -gt 0 ]; then\n    echo \"+++++++++++++++++++++++++++++++++Python 安装失败！\"\n    echo \"错误代码： $code\"\nelse\n    echo \"+++++++++++++++++++++++++++++++++Python 安装成功！\"\nfi\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>把新 Python 的库目录放进系统</strong></font>\n\n```bash\nbash -c \"echo \\\"/usr/local/python-${PYTHON_VERSION}/lib\\\" >> /etc/ld.so.conf\"\nldconfig -v\n## 以下命令来查实库目录是否已添加\nldconfig -v | grep -i \"python\"\n```\n\n执行结果：\n\n```bash\nlibpython3.so -> libpython3.so\nlibpython3.12.so.1.0 -> libpython3.12.so.1.0\nlibpython2.7.so.1.0 -> libpython2.7.so.1.0\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>设置新 Python 的环境变量</strong></font>\n\n```bash\necho \"export PATH=\\\"${PATH}:/usr/local/python-${PYTHON_VERSION}/bin\\\"\" >>/etc/bashrc\nsource /etc/bashrc\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>将新 Python 的可执行文件覆盖系统原有的文件</strong></font>\n\n```bash\nln -sf /usr/local/python-${PYTHON_VERSION}/bin/python3.12 /usr/bin/python3\nln -sf /usr/local/python-${PYTHON_VERSION}/bin/pip3.12 /usr/bin/pip3\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>设置 PyPI 的国内软件源并升级自身</strong></font>\n\n```bash\n# 设置国内源\nmkdir ~/.pip\ncat >~/.pip/pip.conf <<EOF\n[global]\nindex-url = https://pypi.tuna.tsinghua.edu.cn/simple\nEOF\n\n# 升级 PyPI\npython3 -m pip install --upgrade pip\n```\n","tags":["python","linux","安装"],"categories":["python"]},{"title":"Centos7 开启远程SSH登录、开启网卡","url":"/2024/02/15/Centos7-开启远程SSH登录、开启网卡/","content":"\n### <font color=#00b2c2 size=5 face=宋体><strong>[CentOS7开启SSH远程登陆](https://www.cnblogs.com/travis-li/p/12550370.html)</strong></font>\n\n<!--more-->\n\n<font color=#b0171f size=2 face=宋体><strong>在虚拟机（[Vmware](https://so.csdn.net/so/search?q=Vmware&spm=1001.2101.3001.7020) Workstation）下，安装了`CentOS7`，现在想通过SSH工具连接虚拟机中的CentOS7</strong></font>\n\n1、  首先，要确保`CentOS7`安装了  `openssh-server`，在终端中输入  `yum list installed | grep openssh-server`\n\n ![img](https://s2.loli.net/2024/02/15/BjxbiRzYFfLOHwP.png)\n\n此处显示已经安装了  `openssh-server`，如果又没任何输出显示表示没有安装  `openssh-server`，通过输入  `yum install openssh-server`\n\n ![img](https://s2.loli.net/2024/02/15/ascQCiwotzjdSrR.png)\n\n来进行安装openssh-server\n\n2、  找到了 ` /etc/ssh/`  目录下的sshd服务配置文件 `sshd_config`，用Vim编辑器打开\n\n将文件中，关于监听端口、监听地址前的 # 号去除\n\n ![img](https://s2.loli.net/2024/02/15/uX3tFzO5YbLJAZQ.png)\n\n然后开启允许远程登录\n\n ![img](https://s2.loli.net/2024/02/15/89kQdlumbaErKPD.png)\n\n最后，开启使用用户名密码来作为连接验证\n\n ![img](https://s2.loli.net/2024/02/15/312hzSq7sPUjEAr.png)\n\n保存文件，退出\n\n \n\n3、  开启  sshd  服务，输入 `sudo service sshd start`\n\n ![img](https://s2.loli.net/2024/02/15/MdFH25S3zuRkYXL.png)\n\n检查  sshd  服务是否已经开启，输入`ps -e | grep sshd`\n\n ![img](https://s2.loli.net/2024/02/15/ERLSi5ntIubMsp2.png)\n\n或者输入`netstat -an | grep 22`  检查  22 号端口是否开启监听\n\n ![img](https://s2.loli.net/2024/02/15/6bpkOMCdFqHzUls.png)\n\n \n\n4、为了免去每次开启 CentOS 时，都要手动开启  sshd 服务，可以将 sshd 服务添加至自启动列表中，输入\n\n ![img](https://s2.loli.net/2024/02/15/dtIuKZGW4FbDx9A.png)\n\n可以通过输入`systemctl list-unit-files | grep sshd`，查看是否开启了sshd 服务自启动\n\n![img](https://s2.loli.net/2024/02/15/Do46kFpKlIagPYf.png)\n\n---\n\n---\n\n\n\n<font color=#00b2c2 size=5 face=宋体><strong> 如果Ifconfig 无法使用，又无法安装的情况下：</strong></font>\n\n# CentOS下查看本机ip地址方法\n\n输入ifconfig（原来ifconfig已失效）\n\n ![img](https://s2.loli.net/2024/02/15/cdQTvRO6SYkqVzI.png)\n\n我们可以输入`ip address`，命令是存在的,但是只能查看到本机ip 127.0.0.1\n\n![img](https://s2.loli.net/2024/02/15/H8ALyPJpI2B4f5C.png)\n\n 若需要具体本机IP则按照下面进行操作\n\n你需要打开网卡配置文件 `/etc/sysconfig/network-scripts/ifcfg-ens33` ，将`ONBOOT` 修改为`yes`，也就是启动网卡\n\n![img](https://s2.loli.net/2024/02/15/vilmH9w7Wn8sbxg.png)\n\n然后重启网络服务\n\n```shell\nsudo service network restart\n```\n\n再次输入 `ip address`就可以看到ip地址了\n\n![img](https://s2.loli.net/2024/02/15/fVui2QdN7skrYhv.png)\n"},{"title":"centos7安装openVPN教程","url":"/2024/02/14/centos7安装openVPN教程/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>centos7安装openVPN教程：</strong></font>\n\n<!--more-->\n\n+ <font color=#b0171f size=2 face=宋体><strong>支持 `Debian 9`或 `Centos 7/8`或 `Ubuntu 18`或更高版本</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>OpenVPN搭建代码：</strong></font>\n\n```bash\nwget https://git.io/vpn -O openvpn-install.sh && bash openvpn-install.sh\n```\n\n<font color=#f26522 size=4 face=宋体><strong>FinalShell下载</strong></font>\n\n```bash\nhttps://wa6.lanzoui.com/ihjg2y3h14j\n\nFinalShell备用下载（含MAC版）：https://drive.google.com/drive/folders/1yUKRCn58kzDM6FRIadIWO8e5cDLz1mrx?usp=sharing\n```\n","tags":["代理","梯子"],"categories":["工具","魔法工具"]},{"title":"解压密码是中文 怎么办？","url":"/2024/02/04/解压密码是中文-怎么办？/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>解压密码是中文 怎么办？</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>一、安装unar软件包：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>Linux（Debian系列）：</strong></font>\n\n```shell\napt install unar\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>Linux（RedHat系列）：</strong></font>\n\n```shell\nyum install unar\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>MacOS：</strong></font>\n\n```shell\nbrew install unar \n```\n\n<font color=#f26522 size=4 face=宋体><strong>二、使用unar来解压：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>例如：使用密码“数据科学交流群189158789”解压“机器学习.zip”到目录“机器学习2”的命令如下：</strong></font>\n\n```\nunar -e GBK -E GBK -p 数据科学交流群189158789 -o ./机器学习2 机器学习.zip\n```\n\n"},{"title":"Linux系统上传命令rz和下载命令sz","url":"/2024/02/01/Linux系统上传命令rz和下载命令sz/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>Linux系统上传命令rz和下载命令sz：</strong></font>\n\n<!--more-->\n\n+ <font color=#f26522 size=4 face=宋体><strong>非常方便的上传和下载命令</strong></font>\n\n```shell\n# 1.安装\nyum install lrzsz -y\n\n# 2.上传（rz）\nrz -E\n\n# 3.下载（sz）\nsz filename\n```\n","tags":["系统","运维","linux"],"categories":["linux"]},{"title":"Docker 部署 启动类 命令","url":"/2024/02/01/Docker-部署-启动类 命令/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Docker 部署 启动类 命令：</strong></font>\n\n<!--more-->\n\n+ <font color=#f26522 size=4 face=宋体><strong>环境准备：</strong></font>\n\nDocker支持64位版本的CentOS 7和CentOS 8及更高版本，它要求Linux内核版本不低于3.10，使用Xshell连接远程服务器进行操作！\n\n```python\n# 环境查看（查看Linux版本的命令）\n\nlsb_release -a    # Linux 系统信息查看命令\ncat /etc/redhat-release\n\n# 如果提示未找到命令：\n## -bash: lsb_release: 未找到命令\n\nyum provides */lsb_release   # 安装 lsb_release\n```\n\n+ <font color=#f26522 size=4 face=宋体><strong>查看内核版本命令：</strong></font>\n\n```shell\n# 系统内核是3.10以上的\n#    cat /proc/version\n#    uname -a\n#    uname -r\n\n[root&liudl /]& uname -r\n# 3.10.0-1062.12.1.e17.x86_64\n```\n\n+ <font color=#f26522 size=4 face=宋体><strong>帮助启动类命令：</strong></font>\n\n```shell\nsystemctl start docker   # 启动docker\nsystemctl stop docker    # 停止docker\nsystemctl restart docker    # 重启docker\nsystemctl status docker    # 查看docker状态\nsystemctl enable docker    # 开启自动启动\ndocker info   # 查看docker概要信息\ndocker --help  # 查看docker `总`体帮助文档\ndocker <具体命令> --help  # 查看 docker `命令`帮助文档\n```\n\n+ <font color=#00b2c2 size=4 face=宋体><strong>镜像命令：</strong></font>\n\n```python\ndocker images  # 列出 本地主机上 的镜像\ndocker images -a  # 列出 本地主机上 的镜像(含历史映像层)\ndocker images -q  # 列出 本地主机上 的镜像(只显示镜像ID)\n\n# docker search 查询命令\ndocker search redis   # 搜索是否存在redis镜像(默认返回所有)\ndocker search --limit 5 redis   # 搜索并返回前5条 redis的选项\n\n# docker pull 拉取镜像命令\ndocker pull redis:latest   # 拉取最新版本 redis  (:latest，可以不写)\n\n# 查看镜像/容器/数据卷所占的空间\ndocker system df\n\n# docker 删除镜像命令：\ndocker rmi -f <镜像ID>   # 强制删除单个镜像\ndocker rmi -f <镜像名1>:TAG <镜像名2>:TAG  # 删除多个镜像\ndocker rmi -f $(docker images -qa)   # 删除全部的镜像\n```\n\n![image-20240201224626977](https://s2.loli.net/2024/02/01/d1p5ZrlcwDbGRFs.png)\n\n\n\n\n\n\n\n\n\n<font color=#00b2c2 size=5 face=宋体><strong></strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong></strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong></strong></font>\n\n","tags":["工具","centos7","docker"],"categories":["Docker"]},{"title":"Centos7下，使用docker部署docker-selenium,远程请求chrome_drive","url":"/2024/01/29/centos7下，使用docker部署docker-selenium-远程请求chrome-drive/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>Centos7下，使用docker部署docker-selenium,远程请求chrome_drive：</strong></font>\n\n<!--more-->\n\n+ <font color=#f26522 size=4 face=宋体><strong>[远程WebDriver | Selenium](https://www.selenium.dev/zh-cn/documentation/webdriver/drivers/remote_webdriver/)</strong></font>\n+ <font color=#f26522 size=4 face=宋体><strong>官方Github：</strong></font>[SeleniumHQ/docker-selenium: Provides a simple way to run Selenium Grid with Chrome, Firefox, and Edge using Docker, making it easier to perform browser automation (github.com)](https://github.com/SeleniumHQ/docker-selenium)\n\n+ <font color=#f26522 size=4 face=宋体><strong>VNC 密码：`secret`</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>拉取镜像：</strong></font>\n\n```shell\ndocker pull standalone-chrome\n```\n\n+ <font color=#f26522 size=4 face=宋体><strong>部署docker_selenium：</strong></font>\n+ <font color=#00b2c2 size=4 face=宋体><strong>参考：</strong></font>[seleniumbase学习总结5 - docker-compose集成部署执行环境 - 掘金 (juejin.cn)](https://juejin.cn/post/7087386683062108196)\n\n```shell\ndocker run -d -p 3786:4444 -e SE_NODE_MAX_SESSIONS=100 -e NODE_MAX_INSTANCES=100 -e SE_NODE_OVERRIDE_MAX_SESSIONS=true -e E_SESSION_REQUEST_TIMEOUT=35 --name selenium-node-chrme1 -v /dev/shm:/dev/shm selenium/standalone-chrome\n\n# --restart  \n参数会在容器异常时重启，比如hub被压挂了等，在搭建重要项目是都是加上该参数\n\n# --scale chrome=num\ndocker-compose up -d --scale chrome=num //num是要启动节点的数量，chrome是docker-compose文件中节点的名称\n\n# 若需多个node，可重复执行以上命令，修改--name即可。\n\n# --shm-size=\"2g\"\n来使用主机的共享内存，防止容器崩溃,这是避免浏览器在 docker 容器内崩溃的已知解决方法，这里是 Chrome和Firefox的记录问题。2gb 的 shm 大小是任意的，但已知效果很好，您的特定用例可能需要不同的值，建议根据您的需要调整此值。\n\n# VNC_NO_PASSWORD=1\n没有密码验证的情况下运行 VNC\n\n# VNC_VIEW_ONLY=1\n仅查看模式下运行 VNC\n\n# -e SE_EVENT_BUS_HOST= < event_bus_ip | event_bus_name >\n# -e SE_EVENT_BUS_PUBLISH_PORT=4442\n# -e SE_EVENT_BUS_SUBSCRIBE_PORT=4443\n节点配置选项： 告诉节点事件总线在哪里，以便它可以注册自己。\n\n# -e SE_NODE_MAX_SESSIONS=10\n增加每个容器的会话并发性\n\n# -v /home/ubuntu/files:/home/seluser/files\n注意：mkdir /home/ubuntu/files\nchown 1200:1201 /home/ubuntu/files\n挂载数据卷前操作\n\n# -e SE_OPTS= \"--log-level FINE\"\n可以通过将环境变量传递给容器来增加日志输出\n\n# docker logs -f <容器 ID | 容器名称>\n所有输出都发送到标准输出，因此可以通过运行检查\n\n# -e JAVA_OPTS=-Xmx512m\n告诉节点事件总线在哪里，以便它可以注册自己。\n\n# -e SE_EVENT_BUS_SUBSCRIBE_PORT=4443\n# -e SCREEN_WIDTH=1366\n# -e SCREEN_HEIGHT=768\n# -e SCREEN_DEPTH=24\n# -e SCREEN_DPI=74\n设置屏幕分辨率\n\n# -e SE_NODE_SESSION_TIMEOUT\n网格 URL 和会话超时，默认300秒\n\n# -e E_SESSION_REQUEST_TIMEOUT=500\n超时为 500 秒\n\n# -e SE_SESSION_RETRY_INTERVAL=2\n重试间隔为 2 秒\n\n# -e SE_NODE_OVERRIDE_MAX_SESSIONS true\n启用视频录制\n\n# -e START_XVFB=false\n以无头模式运行,默认是true\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>UI面板地址：</strong></font>\n\n```\nhttp://127.0.0.1:3786/ui#\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>python 运行事例：</strong></font>\n\n```python\nfrom selenium import webdriver\n\noptions = webdriver.ChromeOptions()\ndriver = webdriver.Remote(command_executor=\"http://xxxxx:3786/wd/hub\", options=options)\ndriver.get(\"https://www.baidu.com\")\nprint(driver.page_source)\ndriver.close()\n\n```\n\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>好处：</strong></font>\n\n```txt\n那这样做的意义在哪里呢？\n我们都知道，selenium 通常是只需要下载一个驱动，然后就可以本地使用了\n\t- 特别需要注意的是，selenium下的驱动和浏览器的版本是对应的，如果版本不对应，那么是没办法请求的\n\n但是docker selenium 就不会有这种问题了，使用docker远程请求，会自动匹配\n```\n\n","tags":["工具","centos7","docker"],"categories":["Docker"]},{"title":"使用coder-server打造在线IDE","url":"/2024/01/27/使用coder-server打造在线IDE/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>使用coder-server打造在线IDE：</strong></font>\n\n<!--more-->\n\n## <font color=#f26522 size=4 face=宋体><strong>前言：</strong></font>\n\n在平时的学习工作中，我们经常会用到代码编辑器，Vscode已经成为我们的首选。但是本地编辑器有个弊端就是当我们在家庭和公司之间移动的时候，无法连续编码。这个时候就有很多新兴的在线编辑器（web IDE）出现了，目前我最常用的就是腾讯的cloudstudio，但是其每天免费4小时的使用时长在某些时候可能不够用，这个时候我们就需要拥有自己的在线编辑器了。今天我们就一起来介绍下在线编辑器coder-server环境的搭建和基础使用。\n\n## <font color=#f26522 size=4 face=宋体><strong>关于cloud_studio</strong></font>\n\n首先声明，这不是广告。仅仅因为其免费好用。\n\n我们可以在[coding.net](https://coding.net/)注册账号，登录后，点击导航栏的Cloud Studio即可进入。\n![cloudstudio](https://s2.loli.net/2024/01/27/xsLaieJVWdAmqNP.png)\n\n然后我们根据自己需要的环境类型创建虚拟环境即可。\n\n![环境类型](https://s2.loli.net/2024/01/27/S3OjfvNbCHYm9hK.png)\n\n然后你就得到了一个非常方便好用的在线编辑器。\n\n![cloudstudio8c4g](https://s2.loli.net/2024/01/27/ClBLONA4EgbaZH5.png)\n\n> 从上图可以看到，这台服务器的性能还是很不错的，8核4G很强了，免费的还要什么自行车。\n\ncloudstudio非常适合白嫖党，但是今天它不是主角。\n\n## <font color=#00b2c2 size=5 face=宋体><strong>coder-server：</strong></font>\n\ncoder-server一个开源的基于vscode开发的在线编辑器工具。其支持二进制部署、Docker部署、HemlChart部署，目前还不支持windows部署，但是已经足够我们使用了。\n\n具体部署可以参考官方文档：https://coder.com/docs/code-server/latest/install。\n\n这里我们选择相对简单快捷的方式，Docker部署。\n\n### <font color=#f26522 size=4 face=宋体><strong>前置条件</strong></font>\n\n在部署coder-server前，你需要准备一台Linux虚机（建议CentOS 7），你可以去云厂商购买（用于生产），也可以使用VMware在个人电脑创建虚机（用于学习）。\n\n我是购买的腾讯云的轻量应用服务器。\n\n### <font color=#f26522 size=4 face=宋体><strong>拉取coder-server镜像</strong></font>\n\n```bash\ndocker pull codercom/code-server\n```\n\n### <font color=#f26522 size=4 face=宋体><strong>启动coder-server</strong></font>\n\n```bash\ndocker run -d  --name coder-server -p 8082:8080 -e PASSWORD=123 codercom/code-server:latest\n```\n\n启动完成后，我们需要在云服务器的防火墙菜单中打开8082端口，然后就可以使用云服务器的公网ip进行登录使用了。（如果你是本地虚拟机，不需要处理防火墙，直接在浏览器访问虚拟机的ip:8082即可）\n\n### <font color=#f26522 size=4 face=宋体><strong>访问coder-server</strong></font>\n\n我们在浏览器访问云服务器的公网ip:8082。\n\n![coder-server登录界面](https://s2.loli.net/2024/01/27/pkbsfB8w5rvVyM1.png)\n\n输入密码123登录。\n![loginok](https://s2.loli.net/2024/01/27/1HuUbnL8NZvj62T.png)\n\n哇哦，这不就是vscode本vscode嘛。\n\n### <font color=#00b2c2 size=5 face=宋体><strong>安装插件：</strong></font>\n\ncoder-server和vscode一样，支持安装插件，我选择了几个常用的插件安装测试，均完美支持。\n\n![plugin](https://s2.loli.net/2024/01/27/luRLOitqv37s1I2.png)\n\n编码体验\n\n简单体验了下，实际编码体验和vscode没有差别。大家可以放心使用。\n\n### <font color=#f26522 size=4 face=宋体><strong>Tips</strong></font>\n\n因为coder-server专注于编辑器而对语言本身稍有忽略，比如其内置的python没有pip3工具，需要自己安装；而且内置的deb源速度较慢，需要自行替换。\n\n#### <font color=#f26522 size=4 face=宋体><strong>修改deb源</strong></font>\n\n因为自带的vi不要用，所以我们使用以下方式修改deb源，参考：[常用工具大全](https://www.u1s1.vip/archives/tools)。\n\n1. 复制国内源地址到编辑器的文件aaa中\n2. 使用命令 `cat aaa > /etc/apt/sources.list`\n3. 使用命令`apt update`更新源\n\n#### <font color=#f26522 size=4 face=宋体><strong>安装pip3</strong></font>\n\n在完成了修改deb源和更新deb源之后，我们就可以使用命令`apt install python3-pip`来安装pip3了。\n\n安装完成后，你就可以安装你所需要的库了。\n\n亲测可行。赶快行动起来吧。\n\n到此，结束。\n","tags":["部署","在线编辑","开发"],"categories":["工具"]},{"title":"Docker安装CentOS7镜像","url":"/2024/01/25/Docker安装CentOS7镜像/","content":"\n## <font color=#00b2c2 size=5 face=宋体><strong>Docker安装CentOS7镜像</strong></font>\n\n<!--more-->\n\n在使用Docker进行容器化开发时，我们经常需要使用CentOS7作为基础镜像。本文将介绍如何安装CentOS7镜像并运行容器。\n\n##### <font color=#f26522 size=4 face=宋体><strong>步骤一：安装Docker</strong></font>\n\n首先，我们需要在主机上安装Docker。Docker是一个开源的容器化平台，可以帮助我们快速构建、发布和运行应用程序。以下是在CentOS7上安装Docker的步骤：\n\n+ <font color=#b0171f size=2 face=宋体><strong>1、更新系统软件包：</strong></font>\n\n```shell\nsudo yum update\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>2、添加Docker的官方仓库：</strong></font>\n\n```shell\n$ sudo yum install -y yum-utils\n$ sudo yum-config-manager --add-repo \n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>3、安装Docker引擎：</strong></font>\n\n```shell\nsudo yum install docker-ce docker-ce-cli containerd.io\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>4、启动Docker服务并设置开机自启：</strong></font>\n\n```shell\n$ sudo systemctl start docker\n$ sudo systemctl enable docker\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>5、验证Docker是否安装成功：</strong></font>\n\n```shell\n$ docker version\n```\n\n如果输出Docker版本信息，则说明安装成功。\n\n##### <font color=#f26522 size=4 face=宋体><strong>步骤二：下载CentOS7镜像</strong></font>\n\n下载完成后，我们可以使用以下命令运行一个基于CentOS7的容器：\n\n```shell\ndocker run -itd --name=centos --privileged=true -p 39022:22 -p 39023:39023 centos:7 /usr/sbin/init\n\n# 多端口映射\ndocker run -itd --name=centos --privileged=true -p 39022:22 -p 39023:39023 -p 39443:443 -p 39080:80 -p 39888:8888 -p 39306:3306 -p 39011:39011 centos:7 /usr/sbin/init\n```\n\n<font color=red size=4 face=宋体><strong>进入容器：</strong></font>\n要进入已经运行的容器，我们可以使用以下命令：\n\n```shell\n$ docker exec -it mycentos /bin/bash\n```\n\n这个命令将会在容器内部启动一个新的终端，并进入到容器的命令行界面。\n\n+ <font color=#f26522 size=4 face=宋体><strong>停止和删除容器</strong></font>\n  + 如果你想停止运行的容器，可以使用以下命令：\n\n```shell\n$ docker stop mycentos\n```\n\n   + 如果你想停止运行的容器，可以使用以下命令：\n\n```shell\n$ docker rm mycentos\n```\n\n### <font color=#00b2c2 size=5 face=宋体><strong>安装ssh远程登录</strong></font>\n\n```shell\nyum install net-tools.x86_64 -y\nyum install -y openssh-server\nyum install passwd -y\n```\n\n##### <font color=#00b2c2 size=5 face=宋体><strong>修改ssh服务配置</strong></font>\n\n```shell\nvi /etc/ssh/sshd_config \n     UsePAM yes  改为 UsePAM no\n     UsePrivilegeSeparation 去掉#，sandbox 改为 no\n     端口 Port:22 改成 22\n```\n\n##### <font color=#00b2c2 size=5 face=宋体><strong>启动ssh服务&开机启动  </strong></font>\n\n```shell\nsystemctl start sshd\nsystemctl enable sshd\n```\n\n","tags":["工具","centos7","docker"],"categories":["Docker"]},{"title":"Shadowsocks 一键安装脚本（四合一）","url":"/2024/01/25/Shadowsocks-一键安装脚本（四合一）/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>[Shadowsocks 一键安装脚本（四合一）](https://teddysun.com/486.html)</strong></font>\n\n<!--more-->\n\n\n\n本文搬运自秋水大神的[Shadowsocks 一键安装脚本（四合一） | 秋水逸冰 (teddysun.com)](https://teddysun.com/486.html)\n\n## <font color=#00b2c2 size=5 face=宋体><strong>本脚本适用环境 :</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>系统支持：CentOS 6+，Debian 7+，Ubuntu 12+</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>内存要求：≥128M</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>日期　　：2019 年 01 月 11 日</strong></font>\n\n### <font color=#00b2c2 size=5 face=宋体><strong>关于本脚本 :</strong></font> \n\n+ 1、一键安装 Shadowsocks-Python， ShadowsocksR， Shadowsocks-Go， Shadowsocks-libev 版（四选一）服务端；\n+ 2、各版本的启动脚本及配置文件名不再重合；\n+ 3、每次运行可安装一种版本；\n+ 4、支持以多次运行来安装多个版本，且各个版本可以共存（注意端口号需设成不同）；\n\n+ 5、若已安装多个版本，则卸载时也需多次运行（每次卸载一种）；\n+ **友情提示：**如果你有问题，请先阅读这篇《[Shadowsocks Troubleshooting](https://teddysun.com/399.html)》之后再询问。\n\n### <font color=#00b2c2 size=5 face=宋体><strong>默认配置  :</strong></font> \n\n+ 服务器端口：自己设定（如不设定，默认从 9000-19999 之间随机生成）\n+ 密码：自己设定（如不设定，默认为 teddysun.com）\n+ 加密方式：自己设定（如不设定，Python 和 libev 版默认为 aes-256-gcm，R 和 Go 版默认为 aes-256-cfb）\n+ 协议（protocol）：自己设定（如不设定，默认为 origin）（仅限 ShadowsocksR 版）\n+ 混淆（obfs）：自己设定（如不设定，默认为 plain）（仅限 ShadowsocksR 版）\n+ **备注：**脚本默认创建单用户配置文件，如需配置多用户，请手动修改相应的配置文件后重启即可。\n\n### <font color=#00b2c2 size=5 face=宋体><strong>客户端下载   :</strong></font> \n\n<font color=#f26522 size=4 face=宋体><strong>常规版 Windows 客户端</strong></font>\nhttps://github.com/shadowsocks/shadowsocks-windows/releases\n\n<font color=#f26522 size=4 face=宋体><strong>ShadowsocksR 版 Windows 客户端</strong></font>\nhttps://github.com/shadowsocksrr/shadowsocksr-csharp/releases\n\n### <font color=#00b2c2 size=5 face=宋体><strong>使用方法    :</strong></font> \n\n<font color=#f26522 size=4 face=宋体><strong>使用root用户登录，运行以下命令：</strong></font>\n\n```bash\nwget --no-check-certificate -O shadowsocks-all.sh https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-all.sh\nchmod +x shadowsocks-all.sh\n./shadowsocks-all.sh 2>&1 | tee shadowsocks-all.log\n```\n\n### <font color=#00b2c2 size=5 face=宋体><strong>安装完成后，脚本提示如下    :</strong></font>  \n\n```bash\nCongratulations, your_shadowsocks_version install completed!\nYour Server IP        :your_server_ip\nYour Server Port      :your_server_port\nYour Password         :your_password\nYour Encryption Method:your_encryption_method\n\nYour QR Code: (For Shadowsocks Windows, OSX, Android and iOS clients)\n ss://your_encryption_method:your_password@your_server_ip:your_server_port\nYour QR Code has been saved as a PNG file path:\n your_path.png\n\nWelcome to visit:https://teddysun.com/486.html\nEnjoy it!\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>卸载方法     :</strong></font>  \n\n<font color=#f26522 size=4 face=宋体><strong>若已安装多个版本，则卸载时也需多次运行（每次卸载一种）：</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>使用root用户登录，运行以下命令：</strong></font>\n\n```bash\n./shadowsocks-all.sh uninstall\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>启动脚本     :</strong></font>  \n\n<font color=#b0171f size=2 face=宋体><strong>启动脚本后面的参数含义，从左至右依次为：启动，停止，重启，查看状态。</strong></font>\n\n```bash\n# Shadowsocks-Python 版：\n/etc/init.d/shadowsocks-python start | stop | restart | status\n\n# ShadowsocksR 版：\n/etc/init.d/shadowsocks-r start | stop | restart | status\n\n# Shadowsocks-Go 版：\n/etc/init.d/shadowsocks-go start | stop | restart | status\n\n# Shadowsocks-libev 版：\n/etc/init.d/shadowsocks-libev start | stop | restart | status\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>各版本默认配置文件      :</strong></font>  \n\n```bash\n# Shadowsocks-Python 版：\n/etc/shadowsocks-python/config.json\n\n# ShadowsocksR 版：\n/etc/shadowsocks-r/config.json\n\n# Shadowsocks-Go 版：\n/etc/shadowsocks-go/config.json\n\n# Shadowsocks-libev 版：\n/etc/shadowsocks-libev/config.json\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong></strong></font>  \n\n<font color=#f26522 size=4 face=宋体><strong></strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong></strong></font>\n\n### <font color=#00b2c2 size=5 face=宋体><strong>更新日志 </strong></font>  \n\n<font color=#f26522 size=4 face=宋体><strong>2019 年 01 月 11 日：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>1、升级：libsodium 到最新版本 1.0.17；</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>2、升级：mbedtls 到最新版本 2.16.0；</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>2018 年 11 月 05 日：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>1、升级：使用 Github 上最新代码编译出 Go 版二进制可执行文件，版本号 1.2.2。</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>2018 年 06 月 01 日：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>1、修正：在启用了插件 simple-obfs 的情况下，libev 版启动失败的问题；</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>2、修正：在使用 /etc/init.d/shadowsocks-libev restart 命令重启 libev 版服务端时，偶尔出现的 “bind: Address already in use” 问题；</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>3、修正：移除 libev 版配置文件中的 local_address 字段；</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>4、修改：不再默认使用 root 用户启动，改为使用 nobody 用户启动 libev 版服务端 ss-server；</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>5、升级：mbedtls 到版本 2.9.0；</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>6、修改：libev 版启动脚本中的 -u 参数（即同时启用 TCP 和 UDP 模式），改到配置文件里配置为 “mode”: “tcp_and_udp”；</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>7、修改：libev 版配置文件的内置 NameServers 为 8.8.8.8，默认是从 /etc/resolv.conf 中取得。</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>2018 年 02 月 07 日：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>1、修改：将默认端口从 8989 改为从 9000-19999 之间随机生成。</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>2018 年 02 月 06 日：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>1、修改：ShadowsocksR 版为 [ShadowsocksRR](https://github.com/shadowsocksrr/shadowsocksr) 最新版；</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>2、新增：ShadowsocksR 版的协议（protocol）增加了 4 个，分别为：</strong></font>\n\n```bash\nauth_chain_c\nauth_chain_d\nauth_chain_e\nauth_chain_f\n```\n\n2017 年 12 月 29 日：\n1、升级：libsodium 到 1.0.16。\n\n2017 年 11 月 25 日：\n1、如果 Linux 内核版本大于 3.7.0，则配置文件默认支持 TCP fast open；\n2、新增：libev 版启动时支持 verbose mode，也就是默认写 log 到 /var/log/messages 方便查看。\n\n2017 年 11 月 12 日：\n1、新增生成 ss:// 或 ssr:// 链接，以及其二维码图片。\n※ 脚本会根据当前安装的版本以及输入的各项配置，自动生成 ss:// 或 ssr:// 的链接并在安装成功后显示，直接复制即可被客户端识别。同时生成其二维码图片，并保存在当前目录下，下载后用看图软件打开，也能被客户端识别。\n\n复制二维码链接后 Shadowsocks 客户端识别示例：\n![Shadowsocks 客户端示例](https://teddysun.com/wp-content/uploads/2017/ss_client.png)\n\n复制二维码链接后 ShadowsocksR 客户端识别示例：\n![ShadowsocksR 客户端示例](https://teddysun.com/wp-content/uploads/2017/ssr_client.png)\n\n二维码（QR Code）参考链接：\nhttps://github.com/shadowsocks/shadowsocks/wiki/Generate-QR-Code-for-Android-or-iOS-Clients\nhttps://github.com/shadowsocksr-backup/shadowsocks-rss/wiki/SSR-QRcode-scheme\n\n2017 年 10 月 22 日：\n1、升级：libsodium 到 1.0.15。\n\n2017 年 10 月 14 日：\n1、新增：在安装 Shadowsocks-libev 版时**可选安装** simple-obfs 服务端。\n※ 脚本通过判断 autoconf 版本是否大于或等于 2.67 来一键安装 simple-obfs 服务端。并且，支持在安装过程中选择 obfs 为 http 或 tls。\n※ 使用方法参考：https://teddysun.com/511.html\n\n2017 年 09 月 16 日：\n1、修正：Shadowsocks-libev 版 v3.1.0 使用 libc-ares 替换 libudns 依赖包，解决了依赖问题；\n2、升级：mbedtls 到版本 2.6.0。\n\n2017 年 07 月 27 日：\n1、新增：ShadowsocksR 版可选协议（protocol）auth_chain_b 。使用该协议需更新到最新（4.7.0） [ShadowsocksR 版客户端](http://dl.teddysun.com/files/ShadowsocksR-4.7.0-win.7z)；\n2、修改：更新 ShadowsocksR 源码下载地址。\n\n2017 年 07 月 23 日：\n1、修正：卸载时可自行选择某个版本卸载，若该版本不存在则报错退出。\n\n2017 年 07 月 22 日：\n1、修正：默认加密方式从 aes-256-cfb 改为 aes-256-gcm（Python 和 libev 版）；\n2、新增：安装时可选 16 种加密方式的其中之一（Python 和 libev 版）。如下所示：\n\n```bsh\naes-256-gcm\naes-192-gcm\naes-128-gcm\naes-256-ctr\naes-192-ctr\naes-128-ctr\naes-256-cfb\naes-192-cfb\naes-128-cfb\ncamellia-128-cfb\ncamellia-192-cfb\ncamellia-256-cfb\nchacha20-ietf-poly1305\nchacha20-ietf\nchacha20\nrc4-md5\n```\n\n3、新增：安装时可选 9 种加密方式的其中之一（Go 版）。如下所示：\n\n```bsh\naes-256-cfb\naes-192-cfb\naes-128-cfb\naes-256-ctr\naes-192-ctr\naes-128-ctr\nchacha20-ietf\nchacha20\nrc4-md5\n```\n\n4、新增：安装时可选 15 种加密方式的其中之一（none 是不加密，ShadowsocksR 版）。如下所示：\n\n```bsh\nnone\naes-256-cfb\naes-192-cfb\naes-128-cfb\naes-256-cfb8\naes-192-cfb8\naes-128-cfb8\naes-256-ctr\naes-192-ctr\naes-128-ctr\nchacha20-ietf\nchacha20\nsalsa20\nxchacha20\nxsalsa20\nrc4-md5\n```\n\n5、新增：安装时可选 7 种协议（protocol）的其中之一（仅限 ShadowsocksR 版）。如下所示：\n\n```bsh\norigin\nverify_deflate\nauth_sha1_v4\nauth_sha1_v4_compatible\nauth_aes128_md5\nauth_aes128_sha1\nauth_chain_a\nauth_chain_b\n```\n\n6、新增：安装时可选 9 种混淆（obfs）的其中之一（仅限 ShadowsocksR 版）。如下所示：\n\n```bsh\nplain\nhttp_simple\nhttp_simple_compatible\nhttp_post\nhttp_post_compatible\ntls1.2_ticket_auth\ntls1.2_ticket_auth_compatible\ntls1.2_ticket_fastauth\ntls1.2_ticket_fastauth_compatible\n```\n\n2017 年 02 月 24 日：\n1、恢复： 通过 Github API 自动获取 Shadowsocks-libev 的最新 release 版本的功能（v3.0.3）。\n\n2017 年 02 月 13 日：\n1、升级： Shadowsocks-libev 版到版本 3.0.2；\n2、升级： Shadowsocks-go 版到版本 1.2.1（基于 [Github 最新代码](https://github.com/shadowsocks/shadowsocks-go)，用 go 1.8 编译完成的 x86 和 x86_64 二进制文件）；\n3、修复：在 Debian 7 下默认没有 libudns-dev 依赖包的问题。\n\n2017 年 02 月 12 日：\n1、升级： Shadowsocks-libev 版到版本 3.0.1。\n\n2017 年 01 月 27 日：\n1、升级： Shadowsocks-go 版到版本 1.2.1 （仅适用于 x86_64 系统）\n\n### 更多单版本 Shadowsocks 服务端一键安装脚本 \n\n[Shadowsocks Python 版一键安装脚本（CentOS，Debian，Ubuntu）](https://teddysun.com/342.html)\n[ShadowsocksR 版一键安装脚本（CentOS，Debian，Ubuntu）](https://shadowsocks.be/9.html)\n[CentOS 下 Shadowsocks-libev 一键安装脚本](https://teddysun.com/357.html)\n[Debian 下 Shadowsocks-libev 一键安装脚本](https://teddysun.com/358.html)\n[Shadowsocks-go 一键安装脚本（CentOS，Debian，Ubuntu）](\n","tags":["代理","梯子"],"categories":["工具"]},{"title":"清除 宝塔面板 + Linux ssh 登陆日志","url":"/2024/01/16/清除-宝塔面板-Linux-ssh-登陆日志/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>清除 宝塔面板 + Linux ssh 登陆日志：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**1、登录宝塔面板，会在“面板操作日志”里，留下我们的登录信息**</strong></font>\n\n```python\n/www/server/panel/data/default.db    # 用navicat打开清除\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**2、清除 Linux SSH 登陆的 日志信息**</strong></font>\n\n```python\n# 下面的命令 直接执行即可\ncat /dev/null > /var/log/wtmp\ncat /dev/null > /var/log/btmp\ncat /dev/null > /var/log/lastlog\ncat /dev/null > /var/log/secure\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**3、Windows 清除远程桌面登陆**</strong></font>\n\n```python\n# 步骤1. 按“Win + R”键，然后输入“CMD”打开命令提示符\n# 步骤2. 然后依次输入以下命令，并在每个命令输入完成按下回车键\nreg delete “HKEY_CURRENT_USER\\Software\\Microsoft\\Terminal Server Client\\Default” /va /f\nreg delete “HKEY_CURRENT_USER\\Software\\Microsoft\\Terminal Server Client\\Servers” /f\nreg add “HKEY_CURRENT_USER\\Software\\Microsoft\\Terminal Server Client\\Servers”\ndel /ah %homepath%\\documents\\default.rdp\n```\n\n","tags":["系统","运维","宝塔"],"categories":["linux"]},{"title":"字符串的操作","url":"/2024/01/14/字符串的操作/","content":"\n### 字符串的操作：\n\n<!--more-->\n\n```python\n## 字符串转义\n\"\\n\"     # 换行符号\n\"\\'\"     # 表示单引号\n'\\\"'     # 表示双引号\n\"\\\\\"     # 反斜杠\n\"\\t\"     # 制表符\n\"\\r\"     # 回车符\n\n## 字符串的格式化输出\nname = \"小明\"\nage = 19\n# 方式1:\n\tprint(\"我的名字是：%s, 今年%d\" % (name, age))\n# 方式2:\n\t# python3.6版本+ 解释器可用\n\tprint(f\"我的名字是：{name}, 今年{age}\")\n  \n\nstr_ = \"hello world\"\nprint(len(str_))    `# 字符串长度  输出: 11\n```\n\n\n\n### 字符串的内置函数：\n\n| **方法**     | **作用**                           | **示例**                               | **输出**                 |\n| ------------ | ---------------------------------- | -------------------------------------- | ------------------------ |\n| upper        | 全部大写                           | \"Hello\".upper()                        | \"HELLO\"                  |\n| lower        | 全部小写                           | \"Hello\".lower()                        | \"hello\"                  |\n| startswith() | 是否以a开头                        | \"张三”.startswith(\"张”)                | True                     |\n| endswith()   | 是否以a结尾                        | \"meinv.png”.endswith(\".jpg”)           | False                    |\n| isdigit()    | 是否全数字                         | '123’.isdigit()                        | True                     |\n| strip()      | 去两边空格                         | \" hi yuan  \\n\".strip()                 | \"hi yuan\"                |\n| join()       | 将多个字符串连接在一起             | \"-”.join(['北京’, '上海', '深圳’])     | \"北京-上海-深圳\"         |\n| split()      | 按某字符分割字符串，默认按空格分隔 | \"北京-上海-深圳\".split(\"-\")            | ['北京', '上海', '深圳'] |\n| find()       | 搜索指定字符串，没有返回-1         | \"hello yuan”.find(\"yuan\")              | 6                        |\n| index()      | 同上，但是找不到会报错             | \"hello yuan”.index(\"yuan\")             | 6                        |\n| count()      | 统计指定的字符串出现的次数         | \"hello world\".count(\"l\")               | 3                        |\n| replace()    | 替换old为new                       | hello world'.replace(‘world',‘python') | \"hello python\"           |\n\n![image-20240114001507783](https://s2.loli.net/2024/01/14/t8sCS2kbD4QTBvJ.png)\n\n![image-20240114001542239](https://s2.loli.net/2024/01/14/aEjk71MpCwGNefb.png)\n\n![image-20240114001800127](https://s2.loli.net/2024/01/14/ISas9KCBZw1YReo.png)\n\n![image-20240114001853053](https://s2.loli.net/2024/01/14/zvaBIZyG4gf6ePp.png)\n","tags":["python","基础"],"categories":["python"]},{"title":"python socket模块的简单应用","url":"/2024/01/14/python-socket模块的简单应用/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>python socket模块的简单应用：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>server端：</strong></font>\n\n```python\nimport socket\n\n# 网络三要素： IP PORT 协议（TCP，UDP）\nsock = socket.socket()\nsock.bind((\"127.0.0.1\", 8899))\nsock.listen(5)     # 最大连接数\n\n\"\"\"\n    sock 是一个socket对象。\n    listen 是socket对象的一个方法，用于使socket对象开始监听进入的连接请求。\n    5 是listen方法的参数，表示在接受新的连接请求之前，该socket可以排队的最大连接数。\n\"\"\"\n\n#  等待客户端链接\nprint(\"server is waiting....\")\nconn, addr = sock.accept()    # conn：连接  addr：端口\nprint(\"conn\", conn)\nprint(\"addr\", addr)\n\ndata = conn.recv(1024)       # 最大接收字节 1024\nprint(\"data\", data)\nconn.send(b\"message has received\")    # 回消息\n\n```\n\n<font color=#f26522 size=4 face=宋体><strong>客户端：</strong></font>\n\n```python\nimport socket\n\nsock = socket.socket()\n\nsock.connect((\"127.0.0.1\", 8899))\nsock.send(b\"hello world\")\n\nres = sock.recv(1024)\nprint(\"服务端响应数据：\",res.decode())\n\n```\n\n","tags":["python","django","基础"],"categories":["python","django"]},{"title":"AI_计算机视觉_01_9*9乘法表&随机数生成与排序","url":"/2023/12/29/AI-计算机视觉-01-9-9乘法表-随机数生成与排序/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>AI_计算机视觉_01： 9*9乘法表&随机数生成与排序：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong></strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong></strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>Python Number 数据类型用于存储数值，包括int、long、float、double、complex</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>Python 中数学运算常用的函数基本都在math模块</strong></font>\n\n\n```python\nimport math\n\nprint(math.ceil(4.1))    # 返回数字的上入整数   5\nprint(math.floor(4.9))   # 返回数字的下舍整数   4\nprint(math.fabs(-10))    # 返回数字的绝对值     10.0\nprint(math.sqrt(9))      # 返回数字的平方根     3.0\nprint(math.exp(1))       # 返回e的x次幂        2.718281828459045\n```\n\n+ 2、<font color=#f26522 size=4 face=宋体><strong>Python 中随机数：</strong></font>\n\n  + <font color=#b0171f size=2 face=宋体><strong>随机生成一个［0,1）范围内的实数</strong></font>\n\n    ```python\n    import random\n    \n    ran = random.random()\n    print(rar)\n    \n    0.39523871821810574\n    ```\n\n  + <font color=#b0171f size=2 face=宋体><strong>随机生成一个［1,20）范围内的整数</strong></font>\n\n    ```python\n    import random\n    ran = random.randint(1,20)\n    print(ran)\n    \n    14\n    ```\n  + <font color=#b0171f size=2 face=宋体><strong>当使用random.seed（x）设定好种子之后，random（）生成的随机数将会是同一个。</strong></font>\n\n    ```python\n    import random\n    \n    print(\"--设置种子 seed-------＂）\n    random.seed(10)\n    print(\"Random number with seed 10:\", random.random())\n    \n    # 生成同一个随机数\n    print(\"Random number with seed 10:\", random.random())\n          \n    \n    # 设置种子 seed\n    # Random number with seed 10: 0.5714025946899135\n    # Random number with seed 10: 0.5714025946899135\n    ```\n  \n+ 3、<font color=#f26522 size=4 face=宋体><strong>列表的元素添加、合并：</strong></font>\n\n  + <font color=#b0171f size=2 face=宋体><strong>extend(): 合并列表: </strong></font>\n    \n    ```python\n    girls = [\"杨超越\"]\n    models = [\"刘雯\", \"奚梦瑶\"］\n    girls.extend(models)\n    \n    [\"杨超越\", \"刘雯\", \"奚梦瑶\"]\n    ```\n  \n  + <font color=#b0171f size=2 face=宋体><strong>insert(): 在指定位置添加: </strong></font>\n  \n    ```python\n    girle.insert(1, \"虞书欣\")\n    \n    [\"杨超越\", \"虞书欣\", \"刘雯\", \"奚梦瑶\"]\n    ```\n  \n+ 4、<font color=#f26522 size=4 face=宋体><strong>列表删除：</strong></font>\n\n  + <font color=#b0171f size=2 face=宋体><strong>del():  </strong></font>\n    \n    ```python\n    words = ['cat', 'hello' , 'pen', 'pencil', 'ruler']\n    del words[1]\n    print(words)\n    ```\n    \n  + <font color=#b0171f size=2 face=宋体><strong>remove():  </strong></font>\n    \n    ```python\n    words = ['cat', 'hello' , 'pen', 'pencil', 'ruler']\n    words.remove(\"cat\")\n    print(words)\n    ```\n    + <font color=#b0171f size=2 face=宋体><strong>pop():  </strong></font>\n    \n    ```python\n    words = ['cat', 'hello' , 'pen', 'pencil', 'ruler']\n    words.remove(1)\n    print(words)\n    ```\n  \n+ 5、<font color=#f26522 size=4 face=宋体><strong>os基础库：</strong></font>\n\n  ```python\n  path = \"/home/mypath/python_learn\"\n  os.path.exists(path)   # 判断括号里的文件是否存在，括号内可以是文件路径。返回布尔型。\n  \n  os.path.split(path)   # 判断括号里的文件是否存在，括号内可以是文件路径。返回布尔型。\n  [\"/home/mypath\", \"python_learn\"]\n  \n  os.path.splitext(path)   # 将path的文件名和扩展名分开。\n  [\"python\", \"py\"]\n  \n  os.path.isdir(path)  # 判断是否是文件夹 \n  \n  # 文件操作：\n  os.listdir(path)  # 列出路径下所有文件,将路径下所有文件存到list中。\n  os.mkdir(path, mode)  # 创建目录  path为要创建的目录。mode为目录设置的数字权限。\n  os.makedirs(path, mode)   # 递归创建目录  path为需要递归创建的目录。\n  \n  os.walk（） # 显示指定目录， 返回三个元素\n  \t- root   # 所指的是当前正在遍历的这个文件夹本身的路径；\n    - dirs   # 是一个列表，内容是该文件夹中所有文件夹的名字（不包括子目录）\n    - files  # 列表，内容是该文件夹中所有文件的名字（不包括子目录）\n  \n  # 文件重命名\n  os.rename(src, dst)  # 用于命名文件或目录，从src到dst，如果dst是一个存在的目录，将抛出OSError。\n  ```\n  \n  ![shutil_os拓展库](https://s2.loli.net/2023/12/29/aVjNvDOsCZQBpRA.png)\n\n![shutil_os拓展库](https://s2.loli.net/2023/12/29/LmAIporOdlPtNbT.png)","tags":["AI","计算机视觉","学习"],"categories":["计算机视觉"]},{"title":"DeepNude 破解，获得高级版去掉水印","url":"/2023/12/26/DeepNude-破解，获得高级版去掉水印/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>DeepNude 破解，获得高级版去掉水印：</strong></font>\n\n<!--more-->\n\n## <font color=#f26522 size=4 face=宋体><strong>前言</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>前段时间DeepNude大火，官网被挤爆，然后又因为舆论原因被迫关闭了官网不再更新，其高级版也不能再购买，当然本身高级版50$的价格也让人望而却步。本文就告诉你如何破解获取高级版。过程十分简单</strong></font>\n\n\n\n## <font color=#f26522 size=4 face=宋体><strong>过程</strong></font>\n\n<font color=#b0171f size=3 face=宋体><strong>只有简单的两步</strong></font>\n\n+ 1、打开DeepNude根目录，找到“color.cp36-win_amd64.pyd”文件并删除。\n\n+ 2、下载“color.py”文件，并放到根目录。\n  + 点击下载：[color.py](https://api.isoyu.com/Deepnude/color.py)\n  + 蓝奏云下载：[color.py.zip](https://wwwqe.lanzoul.com/iJi6u1j0womj)\n\n+ 如果不能自动下载请按`Ctrl`+`S`保存\n\n---\n\n\n\n<font color=#00b2c2 size=3 face=宋体><strong>到此就算破解完成，获得高级版了。</strong></font>\n\n<font color=#00b2c2 size=3 face=宋体><strong>如果出现闪退可能是图片路径有中文。</strong></font>\n","tags":["AI","换脸","教程","centos7"],"categories":["AI"]},{"title":"Deepnude V3中文付费破解去水印AI算法“脱”衣工具","url":"/2023/12/26/Deepnude-V3中文付费破解去水印AI算法“脱”衣工具/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>Deepnude V3中文付费破解去水印AI算法“脱”衣工具：</strong></font>\n\n<!--more-->\n\n+ [Deepnude V3中文付费破解去水印AI算法“脱”衣工具 - 常用软件 - QQ神教程网 (qqshen.cn)](https://www.qqshen.cn/article-3131-1.html)\n+  **下载地址：https://pan.baidu.com/s/1pINFPIABoTJs83NYLsEEQw 提取码: bep4**  \n\n<font color=#b0171f size=2 face=宋体><strong>**PS：** 原图片泳装照效果最佳，可百度或TB搜索死库水</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong> 一、DeepNude V3改进说明：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>1、调整窗体尺寸，原尺寸为800\\*800，但很多人的屏幕分辨率不高，直接导致软件界面下方被整体挡住，无法进行任何操作。本次修改窗体尺寸为800\\*600，足以显示DeepNude[破解](https://www.52pojie.cn/)版窗体的下方按钮。</strong></font>\n+  <font color=#b0171f size=2 face=宋体><strong>2、全面中文支持：屏蔽初级版水印，直接显示高级版。高级版界面中的所有文字均为中文。 </strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>3、解决某些情况下的闪退：当图片尺寸被手动调整，并且尺寸变得不合要求时，会发生闪退，增加了这部分的错误提示，从而不再莫名其妙闪退。  </strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>二、DeepNude高级版破解版的使用说明：</strong></font>\n\n<font color=red size=4 face=宋体><strong>记住：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>1、如果软件装在C盘，启动时，一定要在软件图标上右键，选择【以管理员身份运行】</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>2、DeepNude闪退的解决办法当前软件基本上只有一种确定性的闪退情况：当图片路径中有中文或者图片名带中文时，明确会有闪退！此时，需要更改路径或更改文件名为字母或数字。</strong></font> \n+  <font color=#b0171f size=2 face=宋体><strong>3、DeepNude转换时报错的解决办法错误如下图：软件应该放在C盘了，由于使用过程中模型会有新的写入，因此需要给予管理员权限。</strong></font>\n\n![Deepnude V3中文付费破解去水印AI算法“脱”衣工具](https://s2.loli.net/2023/12/26/l5UhxDg14jkHbeT.png)**\n\n<font color=#f26522 size=4 face=宋体><strong> 三、DeepNude下载目前有2个版本可供下载：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>1、DeepNude安装包—无模型（适合下载过原始版本的人）.exe【107M】：这个包里没有模型文件和图标文件，安装后，将原来解压出来的DeepNude文件夹中找到目录pyqtlib、qtbin，移动到新安装的路径中，DeepNude内部路径保持不变。 </strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>2、DeepNude中文安装包—完整包（适合没下过的人）.exe【2.01G】：这个包里包含全部文件，安装后即可使用。打开软件时，一定要在图标上右键，选择【以管理员身份运行】，否则出错。</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>四、DeepNude背景及历史：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>据国外的评测机构Motherboard报道说，有外国网友开发出一款名叫DeepNude的PC软件，只要给DeepNude一张女性照片，借助神经网络技术，软件可以自动“脱掉”女性身上的衣服，显示出LUO体照片。</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>目前DeepNude只能处理女性照片，如果原图露出来的皮肤越多，那么处理的效果就会越好；而对于男人的照片，最后得出的结果还是女性部位。</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>目前来看，最新消息是DeepNude官网虽然还可以访问，但是已经没有任何下载和在线处理功能了。</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>评测机构Motherboard还联系了DeepNude的开发人员，应要求，其采用匿名，化名为“阿尔贝托”（Alberto）。</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>阿尔贝托说，DeepNude基于加州大学伯克利分校研究者开发的开源算法pix2pix创建，应用于Pytorch并且版本要采用最新的1.1.0版本，对他们来说，整个开发过程共使用1万张女性LUO图加以训练，而且以西方人的图片为主。这一算法与之前的人工智能换脸技术deepfake算法相似，也和无人车技术所使用的算法相似。</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>“阿尔贝托”表示，该软件目前之所以只能用于女性照片，是因为女性LUO体图像更容易在网上找到，但他希望能创建一个男性版本的软件。</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>他还表示，他继续这一实验是出于“有意思”和好奇心。</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>“我不是偷窥狂。我是技术的爱好者，”他说，“继续提升这个算法，最近也是吸取了之前的教训（来自其它创业公司）和经济上的问题，我问我自己是否可以在这个算法上获得经济回报。这就是我创建DeepNude的原因。”但Motherboard指出，之前就有deepfake在网络上流传，但这种技术很容易就会成为伤害女性的工具——要么在未经同意的前提下使用女性照片，要么在网上恶意散布SQ内容。</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>而DeepNude相当于deepfake技术的进化版，操作更简单，处理速度更快。</strong></font>\n![Deepnude V3中文付费破解去水印AI算法“脱”衣工具](https://www.qqshen.cn/data/attachment/forum/201907/22/010344st6599910fz300yi.png)\n![Deepnude V3中文付费破解去水印AI算法“脱”衣工具](https://www.qqshen.cn/data/attachment/forum/201907/22/010344nknf464tj4ng22vt.png)\n![Deepnude V3中文付费破解去水印AI算法“脱”衣工具](https://www.qqshen.cn/data/attachment/forum/201907/22/010343uuboo7wvfejqqdr9.png)\n","tags":["AI","换脸","教程","centos7"],"categories":["AI"]},{"title":"Deepnude “脱” 衣原理分析及下载","url":"/2023/12/26/Deepnude-“脱”-衣原理分析及下载/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>Deepnude “脱” 衣原理分析及下载</strong></font>\n\n<!--more-->\n\n- [Deepnude “脱” 衣原理分析及下载 - 无主界 (idleleo.com)](https://www.idleleo.com/07/2496)\n\n所属分类: [游戏/技术](https://www.idleleo.com/category/yxjs/)\n\nDeepnude前段时间可谓火的不行，虽然作者很快关闭了网站和app，但是其使用的原理是值得一探究竟的。再加上有些小伙伴可能也想深入了解相关技术，笔者便转载了相关文章以及下载地址供大家参考。\n\n![Deepnude “脱” 衣原理分析及下载](https://s2.loli.net/2023/12/26/hPZwxbd6SXjez3r.webp)\n\n可以参考NVIDIA论文使用部分卷积和基于部分卷积的填充来修复不规则孔的图像。纸质代码部分转换。论文地址: [https://arxiv.org/abs/1804.07723和https://arxiv.org/abs/1811.11718](https://www.idleleo.com/go?url=https://arxiv.org/abs/1804.07723和https://arxiv.org/abs/1811.11718)\n\n![Deepnude “脱” 衣原理分析及下载](https://s2.loli.net/2023/12/26/mioqkFd7VQ2nU5N.webp)\n\n在Image_Inpainting实验测试（[https://api.isoyu.com/Deepnude/Image_Inpainting(NVIDIA_2018).mp4](https://www.idleleo.com/go?url=https://api.isoyu.com/Deepnude/Image_Inpainting(NVIDIA_2018).mp4))视频的图像界面中，您只需使用工具简单地涂抹图像中不需要的内容。即使形状非常不规则，NVIDIA的模型也可以非常逼真地“恢复”图像。图片填充了涂抹的空白。它可以被描述为一键式P图片，并且“没有ps痕迹”。该研究基于Nvidia的桂林刘大佬的团队。他们发布了一种可以编辑图像或重建已损坏图像的深度学习方法，即使图像穿了个洞或丢失了像素。这是目前2018国家最先进的方法。\n\n### Pix2Pix(需要配对数据)\n\n论文参考: [https://arxiv.org/abs/1611.07004](https://www.idleleo.com/go?url=https://arxiv.org/abs/1611.07004)下面是训练Pix2Pix模型200个epochs后产生的输出。\n\n![Deepnude “脱” 衣原理分析及下载](https://s2.loli.net/2023/12/26/posX7kaHelgELI8.webp)\n\n了解更多信息可以查看[https://github.com/tensorflow/docs/blob/master/site/en/r2/tutorials/generative/pix2pix.ipynb](https://www.idleleo.com/go?url=https://blog.isoyu.com/go.php?url=https://github.com/tensorflow/docs/blob/master/site/en/r2/tutorials/generative/pix2pix.ipynb)\n\n### CycleGAN（无需配对数据）\n\nCycleGAN使用循环一致性损失函数来实现训练，而无需配对数据。换句话说，它可以从一个域转换到另一个域，而无需在源域和目标域之间进行一对一映射。这开启了执行许多有趣任务的可能性，例如照片增强，图像着色，样式传输等。只需要源和目标数据集。参考论文[https://arxiv.org/abs/1703.10593](https://www.idleleo.com/go?url=https://arxiv.org/abs/1703.10593)\n\n![Deepnude “脱” 衣原理分析及下载](https://s2.loli.net/2023/12/26/rWGI7ZT8sDMwLPm.webp)\n\n了解更多信息[https://github.com/tensorflow/docs/blob/master/site/en/r2/tutorials/generative/cyclegan.ipynb](https://www.idleleo.com/go?url=https://github.com/tensorflow/docs/blob/master/site/en/r2/tutorials/generative/cyclegan.ipynb)\n\n## Windows版DeepNude使用过程\n\nDeepNude可以真正实现图像到图像的目的，并且生成的图像更加真实。\n\n![Deepnude “脱” 衣原理分析及下载](https://s2.loli.net/2023/12/26/VUdStfTG3hmvel5.webp)\n\n![Deepnude “脱” 衣原理分析及下载](https://s2.loli.net/2023/12/26/saO7UR8krt2cQAL.webp)\n\n![Deepnude “脱” 衣原理分析及下载](https://s2.loli.net/2023/12/26/MGjNz8bq9ufvOrs.webp)\n\n![Deepnude “脱” 衣原理分析及下载](https://s2.loli.net/2023/12/26/wYiRo7JsNh5IWDt.webp)\n\nPS: 删除deepnude根目录中的color.cp36-win_amd64.pyd文件，然后添加color.py([https://api.isoyu.com/Deepnude/color.py](https://www.idleleo.com/go?url=https://api.isoyu.com/Deepnude/color.py))文件以获取deepnude的高级版本。\n\n## 对deepnude下架争取再重新上架的建议\n\n1. **尺寸** 包括156M DeepNude_Windows_v2.0.0.zip和1.90G pyqtlib.rar。\n2. **速度** 转换图片需要30秒。\n3. **内容** 使用图像到图像神经网络自动从女性身上移除衣服以揭示她们的裸露。此应用程序适用于深度学习的错误应用。\n\n\\* DeepNude可以使用Tensorflow实现，并使用模型压缩技术。\n\n\\* DeepNude应该改变目前不尊重女性的做法。**总结**实际上，可以不需要Image-to-Image。我们可以使用GAN直接从随机值生成图像或从文本生成图像。 \n\nObj-GAN: [https://github.com/jamesli1618/](https://www.idleleo.com/go?url=https://github.com/jamesli1618/)\n\nObj-GANStoryGAN: [https://github.com/yitong91/StoryGAN](https://www.idleleo.com/go?url=https://github.com/yitong91/StoryGAN)\n\n微软人工智能研究院（Microsoft Research AI）开发的新 AI 技术可以理解自然语言描述、绘制草图、合成图像，然后根据草图框架和文字提供的个别单词细化细节。换句话说，这个网络可以根据描述日常场景的文字描述生成同样场景的图像。\n\n![Deepnude “脱” 衣原理分析及下载](https://s2.loli.net/2023/12/26/xOfBpQZ1TjC5XqL.webp)\n\n![Deepnude “脱” 衣原理分析及下载](https://s2.loli.net/2023/12/26/8QgA23iacxNHnIL.webp)\n\n当前最优的文本到图像生成模型可以基于单句描述生成逼真的鸟类图像。然而，文本到图像生成器远远不止仅对一个句子生成单个图像。给定一个多句段落，生成一系列图像，每个图像对应一个句子，完整地可视化整个故事。\n\n![Deepnude “脱” 衣原理分析及下载](https://s2.loli.net/2023/12/26/1VdW74oHOhRv6k2.webp)\n\n## Deepnude下载\n\n网友提供： [magnet:?xt=urn:btih:7be4eb8d640742d2ffebd6495e9392e9e2c399bc](magnet:?xt=urn:btih:7be4eb8d640742d2ffebd6495e9392e9e2c399bc)\n\n也有GitHub开源地址： [https://github.com/open-deepnude/open-deepnude](https://www.idleleo.com/go?url=https://github.com/open-deepnude/open-deepnude)\n","tags":["AI","换脸","教程","centos7"],"categories":["AI"]},{"title":"Cloudflare逆向 参考站点记录","url":"/2023/12/25/Cloudflare逆向-参考站点记录/","content":"\n#### 逆向 JS 参考非常具有指导性 ：[数据科学SourceResearch](https://www.resourch.com/)\n\n<!--more-->\n\n#### 12 种方法来隐藏您的机器人自动化检测，如何使 Selenium 不可检测和隐身：https://www.itblogcn.com/article/2034.html\n\n#### 網絡爬蟲-cloudflare五秒等待驗證逆向破解：https://www.twblogs.net/a/5d8c8d4fbd9eee5327001af8\n\n##### 逆向lin狗 大佬 =>https://developer.aliyun.com/profile/iaxsqtcumsgky/highScore_1?spm=a2c6h.24874632.expert-profile.5.27efd78f3t7PF1\n\n#### <font color=#00b2c2 size=5 face=宋体><strong>Cloudflare 小记：</strong></font>https://blog.csdn.net/weixin_58584029/article/details/128719446\n\n##### [     Selenium真正绕过webdriver检测         ](https://www.cnblogs.com/Wl55387370/p/16553574.html)             https://www.cnblogs.com/Wl55387370/p/16553574.html\n\n\n\n\n\n\n\n###### 关键词搜索：selenium绕过检测\n","tags":["逆向","记录","Cloudflare"],"categories":["逆向_反爬"]},{"title":"Faceswap：AI视频换脸教程, 换脸软件使用教程 Faceswap for windows","url":"/2023/12/02/Faceswap：AI视频换脸教程-换脸软件使用教程-Faceswap-for-windows/","content":"\n# <font color=#00b2c2 size=6 face=宋体><strong>Faceswap：AI视频换脸教程, 换脸软件使用教程 Faceswap for windows：</strong></font>\n\n<!--more-->\n\n本文搬运自：By [Gideon](https://justcode.ikeepstudying.com/author/gideon/) [AI 机器学习](https://justcode.ikeepstudying.com/category/ai-machine-learning/) [0 Comments](https://justcode.ikeepstudying.com/2020/10/faceswap：ai视频换脸教程-换脸软件使用教程-faceswap-for-windows/#disqus_thread)\n\n------\n\n------\n\n### <font color=#00b2c2 size=5 face=宋体><strong>最终效果演示：</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>此视频是原视频和换脸后的视频拼接后的结果：</strong></font> https://objrecong.oss-cn-shanghai.aliyuncs.com/output.mp4\n\n \n\n### <font color=#f26522 size=4 face=宋体><strong>1、安装：</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>官方下载地址：</strong></font>https://github.com/deepfakes/faceswap/releases\n\n![Faceswap：AI视频换脸教程, 换脸软件使用教程 Faceswap for windows](https://s2.loli.net/2023/12/02/KJSUOoRgtmac5XQ.png)\n\n<font color=#b0171f size=2 face=宋体><strong>下载后双击exe安装，如果没有独显，就选 Setup for CPU</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>有英伟达显卡，就选 Setup for NVIDIA GPU</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>有AMD显卡，就选 Setup for AMD GPU</strong></font>\n\n---\n\n<font color=#b0171f size=2 face=宋体><strong>最好选择用GPU计算，因为CPU计算起来超级慢，就算是i9, 也不如一个普通GPU的计算能力</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>一个普通的短视频，就算是强如RTX-2070，可能都要不间断计算一个星期</strong></font>\n\n![Faceswap：AI视频换脸教程, 换脸软件使用教程 Faceswap for windows](https://s2.loli.net/2023/12/02/F1gZUlkdjCPx76s.png)\n\n \n\n### <font color=#f26522 size=4 face=宋体><strong>2.获取视频序列帧：</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>准备两段包含人脸的视频，最好是正脸</strong></font>\n\n![Faceswap：AI视频换脸教程, 换脸软件使用教程 Faceswap for windows](https://s2.loli.net/2023/12/02/bGZnKwHqJRYS9Nd.png)\n\n<font color=#b0171f size=2 face=宋体><strong>然后我们需要把视频转化为序列帧，随便用什么方法、什么软件都行，在此，我们使用opencv-python去处理</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>新建两个文件夹p1_Input和p2_Input （命名随意） p1_Input用来存第一个视频的序列帧，</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>p2_Input用来存第二个视频的序列帧，然后运行python脚本</strong></font>\n\n```python\n# 事先 pip install opencv-python\nimport cv2\n\ncap=cv2.VideoCapture(r'E:\\PyCharmProjects\\FaceswapFiles\\燃向热血高校_小栗旬帅炸.mp4')\nindex=0\n \nwhile True:\n    _,frame=cap.read()\n    if not _:\n        break\n    cv2.imshow('frame',frame)\n    cv2.imwrite(r'E:\\PyCharmProjects\\FaceswapFiles\\p1_Input\\\\'+'p'+str(index)+'.jpg',frame)\n    index += 1\n    c=cv2.waitKey(30)\n    if c==27:\n        break\n```\n\n<font color=#b0171f size=2 face=宋体><strong>另一个视频同理，改下路径即可</strong></font> \n\n<font color=#b0171f size=2 face=宋体><strong>处理完后，对应的序列帧会存在对应的文件夹下</strong></font> \n\n \n\n![Faceswap：AI视频换脸教程, 换脸软件使用教程 Faceswap for windows](https://s2.loli.net/2023/12/02/V65I9CrfBjsUoeS.png)\n\n### <font color=#f26522 size=4 face=宋体><strong>3.提取序列帧中的人脸：</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>首先新建两个空文件夹，用来存放提取的人脸图，例如p1_Output和p2_Output</strong></font> \n\n![Faceswap：AI视频换脸教程, 换脸软件使用教程 Faceswap for windows](https://s2.loli.net/2023/12/02/Jw5akuy1bAx7pZX.png)\n\n<font color=#b0171f size=2 face=宋体><strong>然后打开faceswap软件</strong></font> \n\n<font color=#b0171f size=2 face=宋体><strong>选中Extract</strong></font> \n\n<font color=#b0171f size=2 face=宋体><strong>Input Dir 选为上文的p1_Input文件夹</strong></font> \n\n<font color=#b0171f size=2 face=宋体><strong>Output Dir 选为上文的p1_Output文件夹</strong></font> \n\n<font color=#b0171f size=2 face=宋体><strong>点击下方的Extract开始提取人脸</strong></font> \n\n<font color=#b0171f size=2 face=宋体><strong>如果是第一次运行，点击Extract后会安装各种库，会比较慢</strong></font> \n\n \n\n![Faceswap：AI视频换脸教程, 换脸软件使用教程 Faceswap for windows](https://s2.loli.net/2023/12/02/TvywV3knZ8HhlM1.png)\n\n \n\n<font color=#b0171f size=2 face=宋体><strong>执行完后，</strong></font> \n\n<font color=#b0171f size=2 face=宋体><strong>会在p1_Output文件夹下生成人脸图，然后检查一下，类似p0044_0.jpg和p0045_0.jpg这种有问题的图片，手动删掉</strong></font> \n\n \n\n![Faceswap：AI视频换脸教程, 换脸软件使用教程 Faceswap for windows](https://justcode.ikeepstudying.com/wp-content/uploads/2020/10/6dc8ef60e12f4eb88a14c658761ed77b.jpg)\n\n <font color=#b0171f size=2 face=宋体><strong>然后另一个视频同理</strong></font> \n\n<font color=#b0171f size=2 face=宋体><strong>更改一下路径，输入和输出路径分别改为p2_Input和p2_Output ，重复上述操作</strong></font> \n\n <font color=#00b2c2 size=5 face=宋体><strong>4.训练：</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>新建一个空文件夹，取名models，用来存放训练后的模型</strong></font> \n\n<font color=#b0171f size=2 face=宋体><strong>此时选择Train一栏</strong></font> \n\n<font color=#b0171f size=2 face=宋体><strong> Input A 选择 p1_Output</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong> Input B 选择 p2_Output</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong> Model Dir 选择 刚才新建的models文件夹</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>然后点击下方的Train按钮开始训练</strong></font> \n\n![274a2a0d9a0f4e289a430b88e363123e](https://s2.loli.net/2023/12/03/7ZRES23MQ4j1TXU.png)\n\n \n\n<font color=#b0171f size=2 face=宋体><strong>训练是个漫长的过程，根据处理的内容的复杂度，官方提示需要24小时至一个星期或者更长，要有耐心</strong></font> \n\n![10ee056811764bce8f1a71f0de63fe81](https://s2.loli.net/2023/12/03/SFa2UvxMizmcwIW.png)\n\n \n\n \n\n<font color=#b0171f size=2 face=宋体><strong>根据电脑的性能，每隔一段时间，下方控制台会刷新一下损失函数的值，训练可以根据需求随时中断，官方建议，当值小于0.02效果会比较理想</strong></font> \n\n \n\n![Faceswap：AI视频换脸教程, 换脸软件使用教程 Faceswap for windows](https://s2.loli.net/2023/12/03/dfQDTe6aUg4SCsm.png)\n\n \n\n<font color=#b0171f size=2 face=宋体><strong>随时可中断训练，此时模型的精度，就是你中断时控制台上显示的损失函数的值，中断后，训练的模型会存在上文新建的models文件夹下</strong></font> \n\n![Faceswap：AI视频换脸教程, 换脸软件使用教程 Faceswap for windows](https://s2.loli.net/2023/12/03/mx6cqk4OfKzej8H.png)\n\n \n\n###  <font color=#00b2c2 size=5 face=宋体><strong>5.换脸：</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>新建个空文件夹，取名Final_Output，用来存放换脸后的最终的序列帧</strong></font> \n\n<font color=#b0171f size=2 face=宋体><strong>选择Convert一栏</strong></font> \n\n<font color=#b0171f size=2 face=宋体><strong>假如想把赵四的脸换到换到泷谷源治上</strong></font> \n\n<font color=#f26522 size=4 face=宋体><strong>则：</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong> Input Dir 需要选择 p1_Input路径，即视频1的原始序列帧</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>Output Dir 选择刚才创建的Final_Output文件夹路径</strong></font> \n\n<font color=#b0171f size=2 face=宋体><strong>Model Dir 选择第4步保存模型的models文件夹路径</strong></font> \n\n<font color=#b0171f size=2 face=宋体><strong>最后点击下方的Convert按钮开始换脸</strong></font> \n\n \n\n![Faceswap：AI视频换脸教程, 换脸软件使用教程 Faceswap for windows](https://s2.loli.net/2023/12/03/UXdA7RtmwsZfQ3q.png)\n\n###   <font color=#00b2c2 size=5 face=宋体><strong>6.序列帧转为视频：</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>第5步执行完后，可在Final_Output文件夹中找到最终换脸后的序列帧</strong></font> \n\n<font color=#b0171f size=2 face=宋体><strong>此时我们再把序列帧转化为视频，用什么方式转换都行</strong></font> \n\n<font color=#b0171f size=2 face=宋体><strong>在此，我们同样用opencv-python去处理</strong></font> \n\n\n\n![Faceswap：AI视频换脸教程, 换脸软件使用教程 Faceswap for windows](https://justcode.ikeepstudying.com/wp-content/uploads/2020/10/ef29626e818b499492a5e139c913fd7d.jpg)\n\n \n\n <font color=#00b2c2 size=5 face=宋体><strong>最终效果：</strong></font>\n\nhttps://objrecong.oss-cn-shanghai.aliyuncs.com/output.mp4\n","tags":["AI","换脸","教程","windows10"],"categories":["AI"]},{"title":"DeepFaceLab3：视频换脸完整流程","url":"/2023/11/25/DeepFaceLab3：视频换脸完整流程/","content":"\n\n\n# DeepFaceLab3：视频换脸完整流程\n\n<!--more-->\n\n本文搬运自：[DeepFaceLab3：视频换脸完整流程 – DeepFake中文网 (deepfaker.xyz)](https://www.deepfaker.xyz/?p=2272)\n\n对于刚入门的朋友来说，你给他直接上心法肯定没啥有，最直接的还是教招式。实操，才有感觉嘛！DeepFaceLab虽然版本一直在升级，但是整体步骤和执行逻辑并没有太大变化。所以老教程现在一样能用了。但是为了教程的完整性，我就全部重写一遍，稍作改进。\n\n## 安装软件\n\n安装过程其实非常简单。一般发布的软件包都是.exe结尾，本质上其实就是一个用7z压缩的压缩包而已。所以安装只要双击就好了，大家都会的！\n\n安装的时候需要注意几个点。\n\n \n\n**第一：**杀毒软件可能会有木马警报，添加信任就好。杀毒软件可能会无警报删文件，导致执行的时候出现未知错误。这种情况可以先退杀毒软件，安装完了就不受影响。\n\n**第二**：安装的时候记得选好路径\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426155730.jpg@!full)\n\n路径并没有硬性要求，默认是解压到安装包所在路径。有不少人对路径并不是很敏感。比如通过QQ群文件下载的，就直接解压在路径超深的QQ缓存目录中，这样可能会出问题，而且不好找。最好是放在C盘外的其他盘的根目录。文件路径不强制英文，但是依旧不推荐中文。文件名不要用特殊字符，降低出错概率。\n\n**第三：**\n\n输入密码\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426155742.jpg@!full)\n\n我发布的文件如果有密码，就都是deepfaker.xyz。不管哪个版本直接输入就好了。当然，你任性，也可以不输入。\n\n \n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426155754.jpg@!full)\n\n不输入就是上面这种结果。然后你点1，2，3，4每个步骤都点不动。因为不看英文或者大意，犯这个错误的也不少。\n\n \n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426155755.jpg@!full)\n\n正确的打开方式是这样的。里面会有_internal和workplace文件夹。前者放的是源代码和软件相关的内容，后者是工作目录，上一篇有讲过。除此之外还有一堆.bat结尾的文件。可以把这些称为脚本或者批处理文件。里面是一行行的DOS命令。\n\n批处理文件打开方式和EXE一模一样，Double kill ~~Double click  双击打开！每一个批处理文件都干一件事情，我们要做的就是按一定的顺序点击这些文件，就能完成换脸。是不是挺简单？\n\n## **执行步骤**\n\nDFL换脸的思路是，想将视频转换成图，从图片中提取人脸，从人脸中学习特征。然后应用模型，先对图片进行换脸，然后把图片合成视频，同时带上原视频的音轨。\n\n具体来说可以分为如下几步：\n\n- 源视频转图片\n- 目标视频转图片\n- 提取源头像\n- 提取目标头像\n- 训练模型\n- 应用模型\n- 合成视频\n\n批处理文件步骤如下：\n\n- 源视频转图片 extract images from video data_src.bat\n- 目标视频转图片 extract images from video data_dst FULL FPS.bat\n- 提取源头像 data_src faceset extract.bat\n- 目标头像提取 data_dst faceset extract.bat\n- 训练轻量级模型 train Quick96.bat/SAE/AMP\n- 应用轻量级模型 merge Quick96.bat /SAE/AMP\n- 合成 MP4 视频 merged to mp4.bat\n\n杂七杂八交代清楚了就可以开始操作，本文会将每一个步骤截图说明。但是为了控制文章的体型，以操作为主。一些常见错误或者参数详解，会在后续文章中完成。关于操作，这里做一个重点提示：遇事不决按回车！\n\n### Step1：源视频转图片\n\n双击批处理文件源视频转图片 extract images from video data_src.bat\n\n \n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426160224.jpg@!full)\n\n跳出黑色窗口，输入10回车，然后输入jpg回车，就会自动开始将视频分解为图片。\n\nFPS：视频有一个指标叫帧率，常见有24，30，60等，代表一秒钟有几张。第一个参数输入10指的是一秒钟只取10张；不输入直接回车，默认帧率是30就取30张。因为很多影视剧画面相对固定，没必要全部取，否则后面会浪费大量提取时间，而且模型训练压力也会加大。\n\nFormat:  图片格式，主要是jpg和png。png是无损格式，但是JPG能在保证画质的情况下减少巨量的空间。所以如果不是要求特别变态，一般都用jpg。这样可以减少空间，节省时间\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426160233.jpg@!full)\n\n正常情况下，这个步骤执行非常快，出现“搞定/done” 的字样就是执行完成了。完成后，workplace/data_src下面就会出现很多图片，这就是从视频里分解出来的图片。文件名一般为0000x.jpg，其实这里面命名可以随意，没有强制要求。这里还有一个aligned的文件夹，是为后面步骤准备的。\n\n### Step2：目标视频转图片\n\n双击批处理文件目标视频转图片 extract images from video data_dst FULL FPS.bat\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426160244-1.jpg@!full)\n\n和上面的步骤类似，这次处理的是dst视频。因为dst必须一帧不落，所以没有FPS选项，只有图片格式这一个选项。\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426160254.jpg@!full)\n\n处理完后的图片保存在workspace/data_dst里面。\n\n### Step3：提取源头像\n\n双击批处理文件提取源头像 data_src faceset extract.bat\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426160310.jpg@!full)\n\n这一步的作用是提取源素材图片中的人脸。这里有六个参数，一般只需一路回车即可。第一次使用需要缓存GPU内核，需要稍微等一等。开始提取后底部有显示进度，当进度到100%，会显示图片数量和提取到的人脸数量，并出现“搞定！！！” 就证明已经出来成功并且处理完成。\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426160320.jpg@!full)\n\n处理完成后，头像保存在data_src/aligned下面。\n\n不少人在这个环节会遇到问题。\n\n常见问题是：\n\n- 驱动不够新，去官网下载更新到最新版本即可。\n- 软件不够新，deepfaker.xyz 上获取新版\n- 显卡软件不匹配， A卡用Directx12，不要用rtx3000版。\n\n提取完之后，如果src素材比较复杂，就需要做一些筛选。这个筛选可以写一篇很长的文章。这里简要说一下。主要是把一些不需要的素材删除：\n\n- 很模糊的可以直接删除\n- 不是目标人物的可以直接删除\n- 图片残缺的删除\n- 脸部有遮挡的删除\n- 脸部光照差异特别大的删除\n- …..\n\n### Step4：提取目标头像\n\n双击批处理文件目标头像提取 data_dst faceset extract.bat\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426160335.jpg@!full)\n\n这一步的作用是提取目标素材图片中的人脸。和上一步非常类似，这里就是少了一个“保存调试图片”的参数。其实也不是少了，而是默认就执行了。\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426160320-1.jpg@!full)\n\n提取的头像保存在data_dst/aligned的文件夹里。\n\n提取完之后也要对素材进行一个筛选。\n\n把不是目标人物的素材删掉，把头像旋转的图片删掉。一般来说文件名后缀_1的都可以删掉。dst的删除核心原则是要换的人脸留下，不要换的统统删掉。\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426160344.jpg@!full)\n\n这些图标保存在aligned_debug里面\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426160939.jpg@!full)\n\n大概其中一张图片，可以看到人脸上有三种颜色的线框。\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426161011.jpg@!full)\n\n红色就是头像截取的区域，蓝色是面部区域，绿色是人脸轮廓，以及五官定位的点。其实就是人脸的landmark。通过debug你可以直观的看到人脸识别算法识别了哪些区域，有没有识别正确。\n\n### Step5：训练模型\n\n双击批处理文件 训练轻量级模型 train Quick96.bat\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426161024.jpg@!full)\n\n这一步是训练模型，所有步骤中最重要，最难，也是最耗时间的部分。目前新版本中主要包含三类模型，分别是Quick96,SAEHD,AMP 。\n\n我把Quick96翻译为轻量级模型，优点是所需配置低，显存低，速度快，操作简单。缺点是不能自定义，像素比较低，合成效果差一些。\n\n这个模型很简单，所以也非常适合拿来入门。所以本文就用这个来举例。SAEHD和AMP模型和模型训练的知识会另起一篇文章来介绍。\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426161034.jpg@!full)\n\nQuick96使用非常简单，双击批处理文件后，选择执行设备即可，这里一般都是选显卡，直接回车即可。设备选择完成之后，程序就会自动加载素材，并显示模型的参数，底部会有跳动的数字，然后会跳出一个预览窗口。\n\n先来说说底部的数字，总共五列，分别代表：模型保存时间，迭代次数，单次迭代时间，源损失，目标损失。迭代次数是越多越好，损失是越低越好，零就是无损了嘛~不过，不可能达到！\n\n下面来说说预览窗口\n\n \n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426161101.jpg@!full)\n\n预览窗口包含操作提示、loss曲线，人脸区域。人脸区域总共五列。第一列是src，第三列是dst。第二，四，五列为算法生成列，刚开始是纯色，啥头像都没有。随着训练的进行，会慢慢出现轮廓，鼻子，眼睛，然后慢慢变清晰。\n\n训练的过程就是等待这几列变清晰的过程，最后一列就是换脸后的效果。\n\n这一个步骤并不会自动结束，需要自己判断，然后手动结束。可以通过损失值和预览图来进行判断。一般来说损失值（loss）值到了0.1x就差不多了。但是素材质量和数量不一样，会影响这个指标的变化速度。比如素材特别少，这个值降的特别快，特别低。图片不是很清晰，这个值也降的特别快，特别低。反过来，图片质量高，数量多，这个就很难降低。但是这样情况下训练出来的模型更好。\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426161116.jpg@!full)\n\n相比数字而已，通过预览图来判断就更加直观了。只要观察第二列是否无限接近第一列，第四列是否无限接近第三列。第五列的表情是否无限接近第四列。所有列的图片是否都足够清晰。如果答案是“Yes” ，那么按回车或者直接关闭窗口，进入下一步。\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426161246.jpg@!full)\n\n正常情况下模型会过几十分钟保存一次，也可以手动按S直接保存。关闭后，可以重新点击批处理文件继续训练，不用担心丢失进度。当然，要防止意外关机和重启，可能会损坏模型。\n\n### Step6：应用模型\n\n双击批处理文件 应用轻量级模型 merge Quick96.bat\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426161315.jpg@!full)\n\n这个步骤要做的是将图片进行换脸。应用Quick96模型也很简单。启动直接按回车选中或者输入对应的数字选中上一步已经训练好的模型。然后软件就会加载模型并显示模型参数。\n\n然后需要配置两个参数：\n\n一个是是否启用交互模式，直接回车，默认启用。\n\n一个是线程数量，输入小于等于8的数字，回车。注意，如果你核心特别多，默认回车会报错的！\n\n稍等一会儿会弹出帮助界面。\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426161316.jpg@!full)\n\n这个界面并没有任何功能上的用处，只是显示了这个环节可以使用的快捷键。每个快捷键旁边都有中文注释，可以看个大概，具体的参数含义我会在后面的文章中做一个详细的介绍。\n\n点击这个界面，确保输入法为英文，按下键盘上的Tab，就可以进入合成预览界面\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426161413.jpg@!full)\n\n进来后，默认情况下都会有人皮面具的感觉，这是正常现象。因为我们参数还没有调整！就这个素材来说，只要调整W/S，E/D 快捷键即可。调整后的效果如下：\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426161414.jpg@!full)\n\n确认效果OK之后，按下快捷键shift+？（向后应用到所有帧） 然后再按下shift+>（自动合成） 就开始自动合成了。也可以通过键盘上的< 和 >进行手动切换，查看前后帧的合成效果。\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426161515.jpg@!full)\n\n黑色窗口会显示所有的合成参数，并且显示进度条，等100%完成之后，手动关闭窗口即可。\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426161525.jpg@!full)\n\n此时，在data_dst下面已经多了两个文件，一个是merged，一个是merged_mask\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426161536.jpg@!full)\n\n进入merged可以看到很多图，这些图片中的人脸已经完全换脸。\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426161537.jpg@!full)\n\n进入merged_mask可以看到一些黑色的图片，中间有一个白色的区域。这些文件是为了方便后期制作。我们单纯使用DFL的不用太关心。\n\n### Step7：合成视频\n\n双击批处理文件 合成 MP4 视频 merged to mp4.bat\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426161538.jpg@!full)\n\n这个步骤是将已经换好脸的图片转换成视频，并且会自动读取源视频的配置信息，包括帧率，音轨这些。这个环节只有一个输出码率的参数，常规来说3就够了。\n\n除了合成mp4之外，还可以合成无损视频，AVI ，MOV等格式，便于后期处理。\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426161708.jpg@!full)\n\n执行完成后，workspace下面多了两个文件，分别是result.mp4 和 result_mask.mp4 。前者就是我们需要的最终视频，后者是遮罩视频，供后期使用。\n\n![img](https://deepfakescn.oss-cn-hongkong.aliyuncs.com/2021/10/20230426161719.jpg@!full)\n\n双击打开视频，就可以看到最终效果啦。\n\n步骤其实不难，细节很多。有些是可以直接照搬别人经验的。有些需要自己不断摸索。这并不是什么傻瓜软件，要做出好的效果肯定是要花时间研究。就像即便送你PS，PR，你没有一定的学习积累不可能做出酷炫的效果。但是我可以保证，市面上几乎所有神乎其技的换脸视频都是基于DFL，有些可能专门准备了道具场景并使用了后期制作。\n\n \n\nDeepFaceLab3系列\n\n[DeepFaceLab3：软硬件以及系统要求](http://mp.weixin.qq.com/s?__biz=MzIzODA3NDAxMg==&mid=2247485262&idx=1&sn=c9a68694d262259524014b2ea840ab6f&chksm=e93fa6bdde482fabd2b2bfac280cdc5ca83bc142a6be25e1368bb14dd837d58be22d9ca4c800&scene=21#wechat_redirect)\n\n[DeepFaceLab3：工作目录和基本概念](http://mp.weixin.qq.com/s?__biz=MzIzODA3NDAxMg==&mid=2247485268&idx=1&sn=78e823524647646f5999c3cebad9f6ee&chksm=e93fa6a7de482fb14162f919875c84c769f7473594c5ccd62328b12e2517e72801d372164af2&scene=21#wechat_redirect)\n\n[DeepFaceLab3：视频换脸完整流程详解！](http://mp.weixin.qq.com/s?__biz=MzIzODA3NDAxMg==&mid=2247485305&idx=1&sn=3df780a1f454f00044564fc22c148851&chksm=e93fa68ade482f9ca80ac3f70830f87bfd2b7df8dc8ef5be22eae00a8aadbbfb851ff11aec4c&scene=21#wechat_redirect)\n\n[DeepFaceLab3：模型的异同，选择，基础操作！](http://mp.weixin.qq.com/s?__biz=MzIzODA3NDAxMg==&mid=2247485354&idx=1&sn=7dc90561bae425f879a19423de5603e8&chksm=e93fa659de482f4f4cdb96fd4c02d7ab68cc1a6330ea770a48c463e0f890b6245cfe54d08ec2&scene=21#wechat_redirect)\n\n\n\n  \n\n******************小尾巴*********************\n\n**申明：图文均由deepfakes 中文网原创，转发请注明出处，谢谢！本站仅分享技术，切勿用于非法用途**\n**微信公众号：托尼不是塔克（TonyNoStark），学习各种AI黑科技！**\n\n 软件下载：[点击进入](https://www.deepfaker.xyz/?page_id=24)\n 入门教程：[点击进入](https://www.deepfaker.xyz/?page_id=513)\n 深入学习：[知识星球](https://www.deepfaker.xyz/?p=2050)\n 专业服务：[脸魔 F M](https://www.deepfaker.xyz/?page_id=1661) \n","tags":["AI","换脸","教程","windows10"],"categories":["AI"]},{"title":"8个免费高速文件传输工具，让你彻底告别网盘和数据线","url":"/2023/11/21/8个免费高速文件传输工具，让你彻底告别网盘和数据线/","content":"\n\n\n# 8个免费高速文件传输工具，让你彻底告别网盘和数据线\n\n<!--more-->\n\n本文搬运自：[8个免费高速文件传输工具，让你彻底告别网盘和数据线 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/159656061)\n\n文件传输是日常使用较为频繁的一项功能，电脑与电脑、电脑与手机、手机与手机....\n\n以往的文件传输主要可以分为2种方式：\n\n- **基于硬件**：数据线、移动硬盘、U盘\n- **基于软件**：微信、QQ、网盘\n\n但是，这些方式都遗留了很多痛点，\n\n- 繁琐\n- 速度慢\n- 需要登录\n- ...\n\n作为一个热衷于高效办公的我，怎么可能容忍这种痛点？\n\n![img](https://pic4.zhimg.com/80/v2-25f484edebdc4511e4e5fda9d4ac1abf_720w.webp)\n\n本文，我就来介绍9款快捷、易用、免费的文件传输工具，彻底解决文件传输困难的问题，它们分别是：\n\n- UC网盘\n- airportal\n- 文叔叔\n- sendfiles.online\n- 皮皮直连\n- sendanywhere\n- 奶牛快传\n- 小鹿快传\n- Blaze\n\n下面来详细介绍一下这9款让我爱不释手的神器！\n\n### UC网盘\n\n做内容创作这些年，文件传输和分享一直都是制约我效率和体验的重点方向。\n\n我经常会在不同设备之间传输文件，也经常会给关注的读者分享一些有价值的资料，这些年因为这个需求我尝试过很多方法，要么是限制100M或者500M的文件大小，要么是传输速度非常缓慢，要么使用非常繁琐，要么是用着用着突然停服了….真是让我有点无可奈何。\n\n![img](https://pic1.zhimg.com/80/v2-2880173dc2ec7df7f975e6df168819ec_720w.webp)\n\n经过这些年不断发掘、筛选、淘汰，最终也的确收藏了几款不错的文件传输工具，其中UC网盘·文件传输助手就是目前我在用的主力文件传输工具。\n\n之所以每当遇到文件传输问题就会想到UC网盘的原因无外乎几点：\n\n- 支持大文件传输\n- 不限制传输下载速度\n- 使用便捷\n- 安全可靠\n\n首先来说一下支持大文件传输，目前市面上出现的文件传输工具能够支持1G的已经是非常稀少，UC网盘·文件传输助手单文件最大可以支持40G的文件传输，这样几乎可以覆盖到日常工作中绝大多数文件传输场景的需求。\n\n![img](https://pic3.zhimg.com/80/v2-6738b00d702b85edc4c119d9c5c6f7f2_720w.webp)\n\n其次是不限速，这一点对文件传输太重要了，有时候给朋友分享一个文件，动辄就要坐在那干等几十分钟，无聊又无奈。相比之下，UC网盘·文件传输助手不限制上传和下载速度，对于绝大多数文件可以实现秒传，我上传一个1.4G的文件只用了不到10秒时间，这一点在用的时候太爽了！\n\n![img](https://pic3.zhimg.com/80/v2-80874c39265d61b0a8fe055eb5cca74a_720w.webp)\n\n然后说一下使用便捷，UC网盘·文件传输助手支持移动端、PC网页端，选择是比较充分的，如果经常使用，可以安装手机端、电脑收藏网盘网址，如果低频使用，可以直接百度搜索打开网页版，立即添加并传输文件，用完即走，不需要安装，也不需要到处找数据线，非常方便。\n\n![img](https://pic3.zhimg.com/80/v2-ad53312ff96ee0f5a43a67bd87b92d66_720w.webp)\n\n最后说一下安全可靠，文件传输经常伴随着信息安全问题，这是我拒绝使用很多文件传输工具的主要原因之一。对比而言，首先UC网盘·文件传输助手有非常不错的品牌背书，其次，在文件传输功能方面也做了多方面的保障，例如，限制可下载次数、有效时间、收件密码，需要有密码才可以下载，而且在达到有效期或者下载次数后自动销毁，通过这些方面来保障文件传输和分享过程中的安全性。除此之外，UC网盘的文件传输助手还可以方便的把文件转存到网盘里，这样可以有效防止文件丢失。\n\n如果你也经常需要传输一些文件，不妨可以试一下：\n\n[UC网盘 - 云盘文件传输助手](https://fast.uc.cn/?entry=zhihu13)\n\n### **AirPortal**\n\n**AirPortal**中文名称**空投**，是一款速度快、界面简单的临时文件传输工具，可以用于传输文件、图片、文本等内容。\n\n它支持自定义**保留小时数**、**下载次数**，还可以对传输的文件进行文件加密。\n\n![动图封面](https://pic2.zhimg.com/v2-115c857eafadf0e740ca0511be53820d_b.jpg)\n\n\n\n### **文叔叔**\n\n**文叔叔**是一款号称**永不限速**的临时文件传输工具，免费空间高达20G，默认保存时间为**2天**。\n\n文件上传之后会生成一个公共链接，可以直接把公共链接发送给接收方，也可以填写接受方邮箱，对方会收到一些用于下载的公共链接。\n\n![动图封面](https://pic2.zhimg.com/v2-ffa199acd97a921b8dda334aabf450e1_b.jpg)\n\n\n\n### **Sendfiles.online**\n\n**Sendfiles.online**对于没有登录的用户，最大支持发送2G文件，保存时间48小时，它不仅支持邮箱发送，还可以支持链接分享。\n\n![动图封面](https://pic4.zhimg.com/v2-fec17900a376b8a56fa6efe1bf557523_b.jpg)\n\n\n\n### **皮皮直连**\n\n**皮皮直连**的使用相对于前面3款工具有一些差异，它是一种简历**点对点连接**的文件传输工具。\n\n皮皮直连会生成一个**直连网址**，其他手机、电脑可以使用浏览器访问之间网址，建立点对点的连接，然后就可以在不同点之间进行文件传输。\n\n![动图封面](https://pic3.zhimg.com/v2-94f5ed047f9728dbf76dda8446e83dca_b.jpg)\n\n\n\n### **SendAnywhere**\n\n**SendAnywhere**是一款支持平台非常全面的文件传输工具，它不仅有网页版，还有Windows、mac、Andriod、iOS版。\n\n![img](https://pic3.zhimg.com/80/v2-afc64146d368d588e5d92009247b4f66_720w.webp)\n\n### **奶牛快传**\n\n**奶牛快传**号称全国乃至全世界最快的文件传输工具，上传下载不限速、支持2G+文件传输、支持在线预览、在线传输历史管理。\n\n![img](https://pic2.zhimg.com/80/v2-6991ff6e4c6d2823e279d473193c8265_720w.webp)\n\n### **小鹿快传**\n\n**小鹿快传**是一款基于P2P技术的文件传输工具，它不仅安全，而且速度非常快。\n\n除此之外，小鹿快传具有简单、无损等优点。它使用非常简单，而且支持任何文件类型，而且对图像、视频等文件不做任何处理，不损失画质。\n\n![动图封面](https://pic3.zhimg.com/v2-0d113f1bead4568c0918a5f047450232_b.jpg)\n\n\n\n### **Blaze**\n\n**Blaze**与皮皮直连有一些类似，也是一款通过先建立点对点连接，然后进行文件传输的工具。\n\n不同的是，皮皮直连是通过网站分配的连接建立连接，而Blaze是通过创建房间，其他用户加入房间的方式建立连接。\n\n![img](https://pic3.zhimg.com/80/v2-9fffefbd51b8f4ab2a8092f5c5523c0e_720w.webp)\n\n------\n\n## 干货\n\n最近，为了方便大家，我花费了半个月的时间把这几年来收集的各种实用工具整合到一起，其中涉及影音娱乐、效率办公、系统清理、编程开发等上百款强大工具，其中涵盖Windows、Mac、Andriod、Chrome，我把各种软件的安全下载链接整理到一个文档中供大家使用，减少麻烦、避免踩坑，目录如下：\n\n![img](https://pic1.zhimg.com/80/v2-e70f4be2554bd867e2737f77824d2300_720w.webp)\n\n所有干货送给大家，希望能够点赞支持一下！\n\n[实用工具_免费高速下载|百度网盘-分享无限制 (baidu.com)](https://pan.baidu.com/s/1StnTCgCgOful535PMU_ioQ?from=init#list/path=%2F)（提取码：0000）\n","tags":["工具","传输","网盘"],"categories":["工具"]},{"title":"网络爬虫-cloudflare五秒等待验证逆向破解(js版)","url":"/2023/11/21/网络爬虫-cloudflare五秒等待验证逆向破解-js版/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>网络爬虫-cloudflare五秒等待验证逆向破解(js版)：</strong></font>\n\n<!--more-->\n\n本文搬运自：[网络爬虫-cloudflare五秒等待验证逆向破解 - CodeAntenna](https://codeantenna.com/a/nyhfUFhv3H#)\n\n### <font color=#b0171f size=2 face=宋体><strong>Cloudflare是国外的一家安全防护公司，最近在很多网站上也看到了他的身影，比较明显的特征就是让你等待5秒钟以验证你是否是真实的浏览器。</strong></font>\n\n#### <font color=#f26522 size=4 face=宋体><strong>以 https://www.biovision.com/ 为例</strong></font>\n\n#### ![](https://s2.loli.net/2023/11/21/QYDFC6rAJ2aZsyg.png)\n\n### <font color=#b0171f size=2 face=宋体><strong>另一个明显的特征就是它的cookie里面会包含__cfduid, cf_clearance 这个两个字段。 如果你发现你访问的网站里有这些特征，那么毫无疑问他就是采用了 Cloudflare的安全防护了，我们这里讲他的初级防护，也就是等待5秒的js逆向分析。</strong></font>\n\n------\n\n### <font color=#f26522 size=4 face=宋体><strong>首先访问网站，抓包分析。</strong></font>\n\n![在这里插入图片描述](https://s2.loli.net/2023/11/21/SdwycfnHIkhM5X3.png)\n![在这里插入图片描述](https://s2.loli.net/2023/11/21/YiPFzm6xlLtHo1X.png)\n![在这里插入图片描述](https://s2.loli.net/2023/11/21/lWGX3uKBSbs7ihT.png)\n\n### <font color=#b0171f size=2 face=宋体><strong>可以很清晰地看到，第一次请求访问该网站会503，然后给你一个__cfduid的cookie，带着这个cookie以及某几个参数(后面会讲到)去访问第二个url，会返回给你cf_clearance这个cookie,最后带着这俩cookie再次访问该网站即可正常拿到数据了。</strong></font>\n\n------\n\n### <font color=#b0171f size=2 face=宋体><strong>接下来就是找第二个链接里面的params参数了，不难发现，前面三个参数都是直接在第一次访问网站时返回的静态html里面，用正则取出来即可，所以我们重点关注的是第四个参数jschl_answer，因为我们在源码里面没有发现他。</strong></font>\n\n![在这里插入图片描述](https://s2.loli.net/2023/11/21/5hvqEKnsz1MFYSy.png)\n\n```python\n_s = re.findall('name=\"s\" value=\"(.*?)\"', r.text)[0]\n_jschl_vc = re.findall('name=\"jschl_vc\" value=\"(.*?)\"', r.text)[0]\n_pass = re.findall('name=\"pass\" value=\"(.*?)\"', r.text)[0]\n```\n\n<font color=#b0171f size=2 face=宋体><strong>然后我们看第一次访问网站时返回给我们的html,可以发现里面有一大段很奇怪的js。</strong></font>\n\n![在这里插入图片描述](https://s2.loli.net/2023/11/21/Dbvn1ou4rJRGKTd.png)\n![在这里插入图片描述](https://s2.loli.net/2023/11/21/NOEjf2kBCJ1QeqL.png)\n\n<font color=#b0171f size=2 face=宋体><strong>我们可以看到 这个a其实就是我们要的东西，a.value实际上就是我们需要找到的加密参数。接下来只需要用execjs把这段js运行出来，拿到a.value的值即可。</strong></font>\n\n```python\nr = s.get('https://www.biovision.com/', headers=headers)\nprint(r.text)\n\npattern = re.compile('setTimeout\\(function\\(\\)\\{(.*?)f.action \\+= location.hash;', re.S)\ncode = pattern.findall(r.text)\ncode = re.sub('\\s+(t = document.*?);\\s+;', '', code[0], flags=re.S)\ncode = re.sub('a.value', 'value', code)\ncode = re.sub('t.length', '17', code)\ncode = 'function test(){' + code.strip() + ';return value;}'\ns1 = execjs.compile(code)\nt = s1.call('test')\nprint(t)\n```\n\n> ###### <font color=#b0171f size=2 face=宋体><strong>这里讲解一下t.length替换为17是怎么来的，以免有些同学一头雾水。直接拿源码中的js去浏览器运行，因为这个是固定值，所以我直接替换了，如下图：</strong></font>\n\n![](https://s2.loli.net/2023/11/21/Q7oM46vJYLlSrPn.png)\n\n### <font color=#b0171f size=2 face=宋体><font color=#f26522 size=4 face=宋体><strong>然后我们可以拿fiddler抓包拿到的这段js去运行，看看生成的结果是否和抓包里的jschl_answer一致。</strong></font></font>\n\n![](https://s2.loli.net/2023/11/21/6FM9S42kDWPK3Hi.png)\n\n### 可以看到完全一致，至此逆向分析结束。\n\n##### OK 大功告成\n","tags":["逆向","记录","Cloudflare"],"categories":["逆向_反爬"]},{"title":"黑客工具之Google Hacking的简单用法","url":"/2023/11/21/黑客工具之Google-Hacking的简单用法/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>黑客工具之Google Hacking的简单用法：</strong></font>\n\n<!--more-->\n\n本文搬运自：[黑客工具之Google Hacking的简单用法 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/400365865)\n\n+ 感谢大神：[黑客老鸟-九青](https://www.zhihu.com/people/shen-tou-ce-shi-yan-jiu-yuan-9ling) 无私的技术分享\n\n[黑客工具之Sqlmap详细使用教程 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/394955217)\n\n<font color=#f26522 size=4 face=宋体><strong>一、Google Hacking简介</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>Google Hacking 是利用谷歌搜索的强大，来在浩瀚的互联网中搜索到我们需要的信息。轻量级的搜索可以搜素出一些遗留后门，不想被发现的后台入口，中量级的搜索出一些用户信息泄露，源代码泄露，未授权访问等等，重量级的则可能是mdb文件下载，CMS 未被锁定install页面，网站配置密码，php远程文件包含漏洞等重要信息。</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>工具文章合集：</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>利用Google搜索我们想要的信息，需要配合谷歌搜索引擎的一些语法：</strong></font>\n\n## <font color=#00b2c2 size=5 face=宋体><strong>基本搜索：</strong></font>\n\n- <font color=#b0171f size=2 face=宋体><strong>逻辑与：and</strong></font>\n- <font color=#b0171f size=2 face=宋体><strong>逻辑或： or</strong></font>\n- <font color=#b0171f size=2 face=宋体><strong>逻辑非： -</strong></font>\n- <font color=#b0171f size=2 face=宋体><strong>完整匹配：\"关键词\"</strong></font>\n- <font color=#b0171f size=2 face=宋体><strong>通配符：* ?</strong></font>\n\n## <font color=#00b2c2 size=5 face=宋体><strong>高级搜索：</strong></font>\n\n**`intext:`**\n\n<font color=#b0171f size=2 face=宋体><strong>寻找正文中含有关键字的网页，例如： **`intext:后台登录`** 将只返回正文中包含 后台登录 的网页</strong></font>\n\n![img](https://s2.loli.net/2023/11/21/NXACjRzpHneSYwQ.webp)\n\n**`intitle:`**\n\n<font color=#b0171f size=2 face=宋体><strong>寻找标题中含有关键字的网页，例如： **`intitle:后台登录`** 将只返回标题中包含 后台登录 的网页，**`intitle:后台登录 密码`** 将返回标题中包含黑客而正文中包含中国的网页</strong></font>\n\n\n\n<img src=\"https://s2.loli.net/2023/11/21/3gvZFKjqV72Odth.webp\" alt=\"img\" style=\"zoom:80%;\" />\n\n**`allintitle:`**\n\n<font color=#b0171f size=2 face=宋体><strong>用法和intitle类似，只不过可以指定多个词，例如： **`alltitle:后台登录 管理员`** 将返回标题中包含黑客 和中国的网页</strong></font>\n\n![img](https://s2.loli.net/2023/11/21/9OmrYuAB7IQkanX.webp)\n\n**`inurl：`**\n\n<font color=#b0171f size=2 face=宋体><strong>将返回url中含有关键词的网页：例如：**`inurl:Login`** 将返回url中含有 Login 的网页</strong></font>\n\n\n\n![img](https://s2.loli.net/2023/11/21/5iV9hNSIz8kXrRj.webp)\n\n<font color=#b0171f size=2 face=宋体><strong>查找管理员登录页面</strong></font>\n\n![img](https://s2.loli.net/2023/11/21/l7qb1jJod4PLUxi.webp)\n\n<font color=#b0171f size=2 face=宋体><strong>查找后台数据库管理页面</strong></font>\n\n![img](https://s2.loli.net/2023/11/21/IpNlc1jhCStTdea.webp)\n\n**`allinurl:`**\n\n<font color=#b0171f size=2 face=宋体><strong>用法和inurl类似，只不过可以指定多个词，例如：**`inurl:Login admin`** 将返回url中含有 Login 和 admin 的网页</strong></font>\n\n![img](https://s2.loli.net/2023/11/21/krHj4pNaDJLI1v3.webp)\n\n**`site:`**\n\n<font color=#b0171f size=2 face=宋体><strong>指定访问的站点，例如： **site:[http://baidu.com](https://link.zhihu.com/?target=http%3A//baidu.com) inurl:Login** 将只在[http://baidu.com](https://link.zhihu.com/?target=http%3A//baidu.com) 中查找url中含有 Login的网页</strong></font>\n\n![img](https://s2.loli.net/2023/11/21/EYzLCaeMoH6h7pF.webp)\n\n**`filetype:`**\n\n<font color=#b0171f size=2 face=宋体><strong>指定访问的文件类型，例如：**`site:baidu.com filetype:pdf`** 将只返回http://baidu.com站点上文件类型为pdf的网页</strong></font>\n\n![img](https://s2.loli.net/2023/11/21/IapXLzVETZdBcb2.webp)\n\n**`link:`**\n\n<font color=#b0171f size=2 face=宋体><strong>指定链接的网页，例如：**`link:http://www.baidu.com`** 将返回所有包含指向 http://www.baidu.com的网页</strong></font>\n\n![img](https://s2.loli.net/2023/11/21/vUMQljuhrH39ICO.webp)\n\n**`related:`**\n\n<font color=#b0171f size=2 face=宋体><strong>相似类型的网页，例如：**`related:http://www.xjtu.edu.cn`** 将返回与 http://www.xjtu.edu.cn相似的页面，相似指的是网页的布局相似</strong></font>\n\n![img](https://s2.loli.net/2023/11/21/ZckzpHesimbP7OS.webp)\n\n**`cache:`**\n\n<font color=#b0171f size=2 face=宋体><strong>网页快照，谷歌将返回给你他存储下来的历史页面，如果你同时制定了其他查询词，将在搜索结果里以高亮显示，例如：**`cache:http://www.hackingspirits.com guest`** ，将返回指定网站的缓存，并且正文中含有guest</strong></font>\n\n\n\n**`info:`**\n\n<font color=#b0171f size=2 face=宋体><strong>返回站点的指定信息，例如：`info:http://www.baidu.com` 将返回百度的一些信息</strong></font>\n\n**`define:`**\n\n<font color=#b0171f size=2 face=宋体><strong>返回某个词语的定义，例如：`define:Hacker`　　将返回关于Hacker的定义</strong></font>\n\n**`phonebook:`**\n\n<font color=#b0171f size=2 face=宋体><strong>电话簿查询美国街道地址和电话号码信息。例如：`phonebook:Lisa+CA` 将返回名字里面包含Lisa并住在加州的人的所有名字</strong></font>\n\n**`查找网站后台`**\n\n- <font color=#b0171f size=2 face=宋体><strong>`site:http://xx.com intext:管理`</strong></font>\n- <font color=#b0171f size=2 face=宋体><strong>`site:http://xx.com inurl:login`</strong></font>\n- <font color=#b0171f size=2 face=宋体><strong>`site:http://xx.com intitle:后台`</strong></font>\n\n**`查看服务器使用的程序`**\n\n- <font color=#b0171f size=2 face=宋体><strong>`site:http://xx.com filetype:asp`</strong></font>\n- <font color=#b0171f size=2 face=宋体><strong>`site:http://xx.com filetype:php`</strong></font>\n- <font color=#b0171f size=2 face=宋体><strong>`site:http://xx.com filetype:jsp`</strong></font>\n- <font color=#b0171f size=2 face=宋体><strong>`site:http://xx.com filetype:aspx`</strong></font>\n\n**`查看上传漏洞`**\n\n- <font color=#b0171f size=2 face=宋体><strong>`site:http://xx.com inurl:file`</strong></font>\n- <font color=#b0171f size=2 face=宋体><strong>`site:http://xx.com inurl:load`</strong></font>\n\n**`Index of`**\n\n<font color=#b0171f size=2 face=宋体><strong>利用 `Index of`语法去发现允许目录浏览的web网站，就像在本地的普通目录一样。下面是一些有趣的查询：</strong></font>\n\n- `index of /admin`\n- `index of /passwd`\n- `index of /passwd`\n- `index of /mail`\n- `\"index of /\" +passwd`\n- `\"index of /\" +password.txt`\n- `\"index of /\" +.htaccess`\n- `\"index of /root\"`\n- `\"index of /cgi-bin\"`\n- `\"index of /logs\"`\n- `\"index of /config\"`\n\n<font color=#00b2c2 size=5 face=宋体><strong>**`inurl`**</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>而上面这些命令中用的最多的就是 `inurl: `了，利用这个命令，可以查到很多意想不到的东西</strong></font>\n\n- <font color=#b0171f size=2 face=宋体><strong>利用 allinurl:winnt/system32/ 查询：列出的服务器上本来应该受限制的诸如“system32” 等目录，如果你运气足够好，你会发现“system32” 目录里的“cmd.exe” 文件，并能执行他，接下来就是提升权限并攻克了。</strong></font>\n- <font color=#b0171f size=2 face=宋体><strong>查询 allinurl:wwwboard/passwd.txt 将列出所有有“WWWBoard Password vulnerability”漏洞的服务器，阅读更多请参见下面链接。</strong></font>\n- <font color=#b0171f size=2 face=宋体><strong>查询 inurl:.bash_history 将列出互联网上可以看见 “inurl:.bash_history” 文件的服务器。这是一个命令历史文件，这个文件包含了管理员执行的命令，有时会包含一些敏感信息比如管理员键入的密码。</strong></font>\n- <font color=#b0171f size=2 face=宋体><strong>查询 inurl:config.txt 将看见网上暴露了“inurl:config.txt”文件的服务器，这个文件包含了经过哈希编码的管理员的密码和数据库存取的关键</strong></font>信息。\n\n<font color=#f26522 size=4 face=宋体><strong>还有一些其他一些使用“`inurl:`”和“`allinurl:`”查询组合的例子：</strong></font>\n\n- `inurl:admin filetype:txt`\n- `inurl:admin filetype:db`\n- `inurl:admin filetype:cfg`\n- `inurl:mysql filetype:cfg`\n- `inurl:passwd filetype:txt`\n- `inurl:”wwwroot/*.”`\n- `inurl:adpassword.txt`\n- `inurl:webeditor.php`\n- `inurl:file_upload.php`\n- `inurl:gov filetype:xls “restricted”`\n- `index of ftp +.mdb allinurl:/cgi-bin/ +mailto`\n\n## <font color=#00b2c2 size=5 face=宋体><strong>查找有可能存在SQL注入的网站：</strong></font>\n\n**`inurl:id=1`**\n\n![img](https://s2.loli.net/2023/11/21/LW1ycq9jo4hXItm.webp)\n\n\n\n\n\n","tags":["渗透","hack","谷歌搜索工具"],"categories":["渗透"]},{"title":"AI换脸项目 - faceswap 基于Centos7 的部署、配置、训练、替换教程","url":"/2023/11/20/AI换脸项目-faceswap-基于Centos7-的部署、配置、训练、替换教程/","content":"\n\n\n<br>\n\n---\n\n<br>\n\n### <font color=#00b2c2 size=5 face=宋体><strong>AI换脸项目 - faceswap 基于Centos7 的部署、配置、训练、替换教程（原创）</strong></font>\n\n<!--more-->\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>知识拓展：</strong></font>\n\n+ [【精选】Nvidia GPU 最新计算能力表（CUDA Compute Capability）_cuda计算能力排行_Dust_Evc的博客-CSDN博客](https://blog.csdn.net/Dust_Evc/article/details/125019266)\n\n+ [训练指南-deepfakes/faceswap：训练Faceswap，模型恢复和分析，手把手教学，简单快速上手！ - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/377418009)\n\n+ [python - faceswap换脸程序安装及使用 - 个人文章 - SegmentFault 思否](https://segmentfault.com/a/1190000042846780)\n\n<font color=#f26522 size=4 face=宋体><strong>环境说明：</strong></font>\n\n+ 系统：Centos7.9\n+ Intel(R) Xeon(R) CPU E5-2678 v3\n+ 2部署方式：CPU\n+ 指令集强制要求（CPU方式安装）：AVX\n+ 软件：FFmpeg\n+ python版本：3.10（强制要求，非3.10，很多环境不支持）\n\n<br>\n\n---\n\n<br>\n\n#### <font color=#00b2c2 size=5 face=宋体><strong>1、编译安装 python 3.10 环境：</strong></font>\n\n```python\ncd /root\n\n#只是将python3.11的安装包下载到 /root目录下\nwget https://www.python.org/ftp/python/3.10.9/Python-3.10.9.tgz\n\n#下载最新的软件安装包\ntar -xzf Python-3.10.9.tgz\n\n#解压缩安装包\nyum -y install gcc zlib zlib-devel libffi libffi-devel\n\n#安装源码编译需要的编译环境\nyum install readline-devel\n\n#可以解决后期出现的方向键、删除键乱码问题，这里提前避免。\nyum install openssl-devel openssl11 openssl11-devel\n\n#安装openssl11，后期的pip3安装网络相关模块需要用到ssl模块。\nexport CFLAGS=$(pkg-config --cflags openssl11)\nexport LDFLAGS=$(pkg-config --libs openssl11)\n\n#设置编译FLAG，以便使用最新的openssl库\ncd /root/Python-3.10.9\n\n#进入刚解压缩的目录\n./configure --prefix=/usr/python --with-ssl\n\n#指定python3的安装目录为 /usr/python 并使用ssl模块，指定目录好处是\n#后期删除此文件夹就可以完全删除软件了。\nmake\nmake install\n\n#就是源码编译并安装了，时间会持续几分钟。\n# 如果下面命令执行，提示已经存在/usr/bin/python3 和 /usr/bin/pip3， 可以删除。建议删除，后续会方便很多，也可以不删除，后续执行python3.10也可\n# 删除命令：rm -rf /usr/bin/python3 /usr/bin/pip3  # 然后在执行下面的命令\nln -s /usr/python/bin/python3 /usr/bin/python3\nln -s /usr/python/bin/pip3 /usr/bin/pip3\n#指定链接，此后我们系统的任何地方输入python3就是我们安装的\n```\n\n<br>\n\n---\n\n<br><font color=#00b2c2 size=5 face=宋体><strong>2、yum 安装 ffmpeg 环境：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>yum官方不支持ffmpeg，所以我们需要添加第三方源</strong></font>\n\n```python\n# 安装epel-release，因为安装需要使用其他的repo源，所以需要epel支持：\nyum install -y epel-release rpm\n\n# 安装Nux-Dextop源：\nrpm --import http://li.nux.ro/download/nux/RPM-GPG-KEY-nux.ro\nrpm -Uvh http://li.nux.ro/download/nux/dextop/el7/x86_64/nux-dextop-release-0-1.el7.nux.noarch.rpm\nyum repolist\n\n# 开始安装\nyum install -y ffmpeg\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>ffmpeg 相关常用命令：</strong></font>\n\n```python\n# 从视频input.mp4中，裁剪出从1分30秒开始的一分钟视频\nffmpeg -ss 0:1:30 -t 0:1:0 -i input.mp4 -vcodec copy -acodec copy out.mp4\n\n# 视频转图片，-r:每秒钟提取的帧数，默认为30\nffmpeg -i input.mp4 -r 10 output/video_%d.jpg\n\n# 图片转视频，-b:v：控制视频码率，默认为200，所以合成的视频像素很低\nffmpeg -i input/video_%04d.jpg -b:v 5626k out.mp4\n\n# 视频合成，分为两步，先把每个视频转成ts流，再合成一个视频\nffmpeg -i input1.mp4 -vcodec copy -acodec copy -vbsf h264_mp4toannexb input1.ts\nffmpeg -i input2.mp4 -vcodec copy -acodec copy -vbsf h264_mp4toannexb input2.ts\nffmpeg -i \"concat:input1.ts|input2.ts\" -acodec copy -vcodec copy -absf aac_adtstoasc concat.mp4\n```\n\n<br>\n\n---\n\n<br>\n\n<font color=#00b2c2 size=5 face=宋体><strong>3、部署安装 faceswap， 基于 Centos7：</strong></font>\n\n+ 官方文档说明：[faceswap/INSTALL.md at master · deepfakes/faceswap · GitHub](https://github.com/deepfakes/faceswap/blob/master/INSTALL.md)\n+ 官方项目地址：[GitHub - deepfakes/faceswap: Deepfakes Software For All](https://github.com/deepfakes/faceswap)\n\n```python\n# 进入root 根目录，创建一个 ai 文件夹 用来存放所有的ai文件\ncd /root\nmkdir ai\n\n# 进入 ai 文件夹\ncd /root/ai\n\n# 开始 clone 项目到本地\ngit clone --depth 1 https://github.com/deepfakes/faceswap.git\ncd faceswap\n\n# 安装项目相关依赖  不报错，就说明没问题\npython3 install -r ./requirements/requirements_cpu.txt\n\n# 安装完成，执行初始化\ncd /root/ai/faceswap\npython3 faceswap.py -h\n\n# 此时会跳出让你选择的界面，我们是cpu方式运行，就选择 cpu就好\n```\n\n<br>\n\n---\n\n<br>\n\n<font color=#00b2c2 size=5 face=宋体><strong>4、faceswap 项目运行：</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>后期部署参考：[换脸开源项目faceswap在centos的实现-CSDN博客](https://blog.csdn.net/qq_42370471/article/details/107448694)</strong></font>\n\n+ ### <font color=#f26522 size=4 face=宋体><strong>工作流程(此处要把 **gakki** 的脸换成 **刘亦菲**)：</strong></font>\n\n  + <font color=#b0171f size=2 face=宋体><strong>1、/root/ai/AiSetFiles/gakki：`要被换脸`的人原图，即从爬虫爬的图片</strong></font>\n  + <font color=#b0171f size=2 face=宋体><strong>2、/root/ai/AiSetFiles/gakki_video：`要被换脸`的人视频</strong></font>\n  + <font color=#b0171f size=2 face=宋体><strong>3、/root/ai/AiSetFiles/gakki_ready：`要被换脸`的人，原始图片/视频进行脸部特征抽取后，放置的文件夹</strong></font>\n  + <font color=#b0171f size=2 face=宋体><strong>4、/root/ai/AiSetFiles/lyf：`要换成谁的脸`的人原图，即从爬虫爬的图片</strong></font>\n  + <font color=#b0171f size=2 face=宋体><strong>5、/root/ai/AiSetFiles/lyf_video：`要换成谁的脸` 的人视频</strong></font>\n  + <font color=#b0171f size=2 face=宋体><strong>6、/root/ai/AiSetFiles/lyf_ready：`要换成谁的脸`的人，原始图片/视频进行脸部特征抽取后，放置的文件夹</strong></font>\n  + <font color=#b0171f size=2 face=宋体><strong>7、/root/ai/AiSetFiles/gakki_lyf_model：放置训练的模型文件</strong></font>\n  + <font color=#b0171f size=2 face=宋体><strong>8、/root/ai/AiSetFiles/convert：放置模型跑出来的最终结果，即已经换脸后的文件</strong></font>\n\n+ <font color=#00b2c2 size=4 face=宋体><strong>1、抽取脸部特征：</strong></font>\n\n  ```python\n  # 抽取图片的脸部特征，传入的是文件夹，会保留原本的格式，即jpg文件抽取后的图片依然是jpg\n  python faceswap.py extract -i /root/ai/AiSetFiles/gakki -o /root/ai/AiSetFiles/gakki_ready\n  python faceswap.py extract -i /root/ai/AiSetFiles/lyf -o /root/ai/AiSetFiles/lyf_ready\n  # 抽取视频里每帧图片的脸部特征，传入的是视频文件，默认保存为png格式\n  python faceswap.py extract -i /root/ai/AiSetFiles/gakki_video/gakki.mp4 -o /root/ai/AiSetFiles/gakki_ready\n  python faceswap.py extract -i /root/ai/AiSetFiles/lyf_video/lyf.mp4 -o /root/ai/AiSetFiles/lyf_ready\n  \n  # 若是从网上下了多个短视频，可以使用上面的ffmpeg命令进行视频合并\n  \n  # 若传入的是视频，则提取面部特征后的图片数量一般会比较巨大，若是想自己控制输出图片的数量，可以使用ffmpeg将视频切成图片，然后当作图片进行处理。不过我的ffmpeg无法操作png格式，只能转成jpg格式，会导致丢失很多信息。png格式的文件一般要比jpg格式文件大得多，模型的效果也要好些\n  ```\n\n+ <font color=#00b2c2 size=4 face=宋体><strong>2、人工筛选：</strong></font>\n  + <font color=#b0171f size=2 face=宋体><strong>图片进行面部特征抽取后，会变成下面这种大头照。</strong></font>\n  + <font color=red size=2 face=宋体><strong>这时候就需要进行人工筛选了，这一步是最耗时的，因为最后入模型的就是这些图片，因此需要仔细的筛选。</strong></font>\n\n![面部特征抽取后.png](https://s2.loli.net/2023/11/20/OJeaRcV6mdgsIP2.png)\n\n+ <font color=#00b2c2 size=4 face=宋体><strong>3、训练模型：</strong></font>\n  + <font color=#b0171f size=2 face=宋体><strong>这里有个点要额外注意一下，我在使用`nohup`进行后台运行的时候，程序直接崩了，我也没搞清楚是什么问题，如果出现了这种情况，建议使用`jupyter-lab --port 9999 --allow-root`开启jupyter，然后在本地windows浏览器打开jupyter的终端，然后在这里进行模型训练。就不用担心关电脑后程序自动终止。</strong></font>\n  + <font color=#b0171f size=2 face=宋体><strong>模型训练没什么说的，这里的模型是手动停止的，自己觉得模型不再收敛，时间有差不多的时候，直接在命令行 `敲回车` 就可以直接停止了</strong></font>\n\n  ```python\n  # python3 faceswap.py train -A <要被换掉人的脸的抽取面部特征的文件夹> -B <想要替换成谁的脸的面部特征文件夹> -m <训练后的model存放文件夹>\n  python3 faceswap.py train -A /root/ai/AiSetFiles/gakki_ready -B /root/ai/AiSetFiles/lyf_ready -m /root/ai/AiSetFiles/gakki_lyf_model/\n  ```\n\n+ <font color=#00b2c2 size=4 face=宋体><strong>4、调用模型进行换脸：</strong></font>\n  \n  + <font color=#f26522 size=3 face=宋体><strong>对图片进行换脸：</strong></font>\n  \n  ```python\n  # python faceswap.py convert -i <输入文件夹> -o <输出文件夹> -m <模型文件夹>\n  python faceswap.py convert -i /root/ai/AiSetFiles/gakki -o /root/ai/AiSetFiles/convert -m /root/ai/AiSetFiles/gakki_lyf_model/\n  ```\n  \n  + <font color=#f26522 size=3 face=宋体><strong>对视频进行换脸：</strong></font>\n  \n    + 如果想对视频进行换脸，必须调用`ffmpeg`把视频切成图片，然后再调用上面的命令，最后再自己把图片拼成视频。涉及的`ffmpeg命令`都在上面。\n    + 换脸后生成的文件是png格式，如果ffmpeg操作不了png格式图片，就需要先转成jpg\n  \n  ```python\n  from PIL import Image\n  img = Image.open('lyf_1.png')\n  img.save('lyf_1.jpg')\n  \n  # 直接将png格式读进去，然后保存为jpg即可，再配合os模块即可批量转换\n  ```\n  \n    \n\n<font color=#00b2c2 size=5 face=宋体><strong>5、补充：</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>使用频繁的linux命令：</strong></font>\n\n  ```python\n  # 查看当前文件下的文件数量（仅文件）\n  ls -l | grep \"^-\" | wc -l\n  # 解压zip文件，可能会把一大堆文件直接解压在当前文件夹，建议在一个空文件夹内解压zip文件\n  unzip lyf.zip\n  # 压缩文件夹lyf内的所有文件\n  tar -zcvf lyf.tar.gz ./lyf\n  # 查看当前目录下所有的文件大小\n  du -sh *\n  ```\n\n","tags":["AI","换脸","教程","centos7"],"categories":["AI"]},{"title":"centos7安装python3.10完整教程","url":"/2023/11/19/centos7安装python3-10完整教程/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>[centos7安装python3.10完整教程：](https://zskcloud.xyz/1809.html)</strong></font>\n\n<!--more-->\n\n## <font color=#f26522 size=4 face=宋体><strong>安装环境：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>Linux系统：centos7</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>python版本：3.11</strong></font>\n\n```python\ncd /root\n#只是将python3.11的安装包下载到 /root目录下\nwget https://www.python.org/ftp/python/3.10.9/Python-3.10.9.tgz\n#下载最新的软件安装包\ntar -xzf Python-3.10.9.tgz\n#解压缩安装包\nyum -y install gcc zlib zlib-devel libffi libffi-devel\n#安装源码编译需要的编译环境\nyum install readline-devel\n#可以解决后期出现的方向键、删除键乱码问题，这里提前避免。\nyum install openssl-devel openssl11 openssl11-devel\n#安装openssl11，后期的pip3安装网络相关模块需要用到ssl模块。\nexport CFLAGS=$(pkg-config --cflags openssl11)\nexport LDFLAGS=$(pkg-config --libs openssl11)\n#设置编译FLAG，以便使用最新的openssl库\ncd /root/Python-3.10.9\n#进入刚解压缩的目录\n./configure --prefix=/usr/python --with-ssl\n#指定python3的安装目录为 /usr/python 并使用ssl模块，指定目录好处是\n#后期删除此文件夹就可以完全删除软件了。\nmake\nmake install\n#就是源码编译并安装了，时间会持续几分钟。\nln -s /usr/python/bin/python3 /usr/bin/python3\nln -s /usr/python/bin/pip3 /usr/bin/pip3\n#指定链接，此后我们系统的任何地方输入python3就是我们安装的\n#这个最新版python3了\n```\n\n","tags":["python","linux","安装"],"categories":["python"]},{"title":"python+undetected_chromedriver+chrome绕过五秒盾（cloudflare）","url":"/2023/11/19/python-undetected-chromedriver-chrome绕过五秒盾（cloudflare）/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>python+undetected_chromedriver+chrome绕过五秒盾（cloudflare）：</strong></font>\n\n<!--more-->\n\n本文转载自：csdn >>> [python+undetected_chromedriver+chrome绕过五秒盾（cloudflare）_莫霄霆的博客-CSDN博客](https://blog.csdn.net/m0_60570576/article/details/121429251)\n\n<font color=#b0171f size=2 face=宋体><strong>公司是做外贸的，所以需要爬取一些外国网站的商品竞品数据，但是在爬取某个网站的时候，遇到了五秒盾的阻拦。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>说实话，一开始自己并不了解五秒盾，毕竟在之前爬国内网站的时候，并没有遇到过这种防护措施，但是在爬取这个外国邮件网站的时候，返回的文本中，总是有如下的信息：</strong></font>\n\n![img](https://s2.loli.net/2023/11/19/hFnToNrCXadyquv.png)\n\n<font color=#b0171f size=2 face=宋体><strong>一直让 “Just a moment...”，一开始自己以为是加载缓慢，但是每次都有，这就不得不引起警觉。</strong></font> \n\n<font color=#b0171f size=3 face=宋体><strong>在[vscode](https://so.csdn.net/so/search?q=vscode&spm=1001.2101.3001.7020)中显示了一下html代码，并在浏览器上看了一下界面，发现是这样的</strong></font>\n\n![img](https://s2.loli.net/2023/11/19/uipWBbZYjPmglKT.jpg)\n\n<font color=red size=3 face=宋体><strong>这个.   \"DDoS protection by Cloudflare\" 是个啥子鬼？</strong></font> \n\n<font color=#b0171f size=2 face=宋体><strong>但是看到DDoS protection by这种字样，感觉应该是防止DDoS攻击的，但是这个“Cloudflare”又是个啥？</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>在网上查询了一下，原来是所谓“五秒盾”的东东，而且网上有针对这小盾盾现成的python模块，也就是cloudscraper模块，使用requests和scrapy都可以.</strong></font>\n\n<font color=#b0171f size=3 face=宋体><strong>网上针对requests使用cloudscraper的比较多，但是本人使用scrapy，所以参考AroayCloudScraper(https://githubmemory.com/repo/hwpchn/AroayCloudScraper)模块重新修改了一下,进行爬取的时候，毫不费力的就饶过了对方设置五秒盾的网站，简直不要太过完美！</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>事情原本到这步已经告一段落,毕竟其他的事情就是用scrapy的xpath获取数据就可以了，但是........</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>两周后，当领导要求再次爬取得这个网站的时候，我发现，原来的代码竟然不管用了！</strong></font>\n\n<font color=#b0171f size=2 face=宋体><font color=#f26522 size=4 face=宋体><strong>原因是代码返回了这个错误：</strong></font></font>\n\n![img](https://s2.loli.net/2023/11/19/67RanV8Obt1JYLh.png)\n\n<font color=#b0171f size=2 face=宋体><strong>what? 要钱了？！</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>本着能白嫖绝不付费的原则，我找了一下该模块的git，但是上面显示并没有付费内容，而且提示了貌似一年才更新一次.....</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>但是这个模块还能否继续使用呢？我决定在google先查为妙，查询结果中，有一个是在scrapy中设置:     'COOKIES_ENABLED': True, 即可使用，但是我试了一下，并没有神马卵用......</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>事到如今，看来这种方法应该是行不通了，还有其他办法，当然有！</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>首先想到的就是用selenium+chrome模拟浏览器去将数据采集下来，这种方法虽然有些繁琐，且一直为高级爬虫工程师所不齿，但是我大中华某位伟人曾经说过：“不管黑猫白猫，只要抓住耗子的就是好cat”。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>说干就干！</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>立马在电脑上开始安装selenium,chromedriver,至于chrome，因为公司配的都是苹果电脑（不要问为啥，就是这么豪横！），但是我的是M1芯片的，所以要使用ARM架构的chrome。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>安装步骤，以及对应版本的chromedriver就不展示了，总之万事皆备，只欠代码了！</strong></font>\n\n<font color=#b0171f size=2 face=宋体><font color=#f26522 size=4 face=宋体><strong>忙不迭的将原来写过测试某宝的代码贴上测试一波，其中覆盖window.navitor.webdirver的值都已经妥妥的安排明白了，但是，竟然不行！</strong></font></font>\n\n![img](https://s2.loli.net/2023/11/19/xM32SFdt1EqWsaC.png)\n\n<font color=#b0171f size=2 face=宋体><strong>打开的浏览器界面，依然停留在五秒盾，我与对面的数据依旧还有一盾之隔！</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>怎么办？！怎么办？！领导限定的日期已经到了，再不出数据，就要被用键盘打死了😭 😭 😭</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>但是越是到这个时候，越不能慌张，毕竟写bug咱在行，找解决方法尤甚啊！</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>于是乎，我开启了疯狂搜索模式，功夫不负有心人，众里寻她千百度，方法就在隔壁拐角处！</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>我找到了一个webdirver的驱动模块，但是并不是selenium，而是undetected_chromedriver ([GitHub - ultrafunkamsterdam/undetected-chromedriver: Custom Selenium Chromedriver | Zero-Config | Passes ALL bot mitigation systems (like Distil / Imperva/ Datadadome / CloudFlare IUAM)](https://github.com/ultrafunkamsterdam/undetected-chromedriver))</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>这个模块可以完美的模拟chrome浏览器，并且不用设置js默认值，也就是无需自己再添加瞒天过海的设置，只要简单的几行代码就可以。</strong></font>\n\n![img](https://s2.loli.net/2023/11/19/say1iZwpYtuOjAc.jpg)\n\n<font color=#b0171f size=2 face=宋体><strong>测试了一下，报错，说是我chrome的版本不匹配，而且undetected_chromedriver只支持chrome96及以上的版本！但是我的mac下载的就是最新的ARM架构的chrome，最多就是95。</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>为山九仞，可不能功亏一篑，我急忙查看该模块的git说明，幸好，有解释：</strong></font>\n\n![img](https://s2.loli.net/2023/11/19/PeQHzmj1qnywocJ.jpg)\n\n<font color=#b0171f size=2 face=宋体><strong>也就是说该模块支持自定义chrome版本！</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>可以可以，这个结果很让我满意，忙不迭的测试一波，原本的数据页面在等待了五秒验证之后，真的出现了！果然很好很强大！</strong></font>\n\n![img](https://s2.loli.net/2023/11/19/N37yuqblKOST28P.png)\n\n<font color=#f26522 size=4 face=宋体><strong> 但是在之前代码中，我使用递归函数的方式，但是需要每翻一页就要打开安装一次chrome，本着提(能)高(懒)效(即)率(懒)的方式，修改了下代码，换成了循环遍历的方式：</strong></font>\n\n![img](https://s2.loli.net/2023/11/19/jRYoQ7wzGd2XPDO.jpg)\n\n<font color=#b0171f size=2 face=宋体><strong>好了，本次使用python+undetected_chromedriver+chrome绕过五秒盾的方法分享就到这，下次再见！😜 😜 😜</strong></font>\n","tags":["逆向","记录","Cloudflare"],"categories":["逆向_反爬"]},{"title":"使用Cloud Scraper捅穿Cloudflare的5秒盾","url":"/2023/11/19/使用Cloud Scraper捅穿Cloudflare的5秒盾/","content":"\n\n\n# <font color=#00b2c2 size=5 face=宋体><strong>[使用Cloud Scraper捅穿Cloudflare的5秒盾](https://www.cnblogs.com/yoyo1216/p/17356845.html)</strong></font>\n\n<!--more-->\n\n### <font color=#f26522 size=4 face=宋体><strong>1.免费版的五秒盾</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>要绕过这个5秒盾非常简单，只需要使用一个第三方库，叫做`cloudscraper`。我们可以使用`pip`来安装：</strong></font>\n\n```shell\npip3 install cloudscraper\n```\n\n<font color=#b0171f size=2 face=宋体><strong>安装完成以后，只需要使用3行代码就能绕过 Cloud Flare 的5秒盾：</strong></font>\n\n```python\nimport cloudscraper\nscraper = cloudscraper.create_scraper()\nresp = scraper.get('目标网站').text\n```\n\n<font color=#b0171f size=2 face=宋体><strong>我们还是以上面的网站为例：</strong></font>\n\n```python\nimport cloudscraper\nfrom lxml.html import fromstring\n \nscraper = cloudscraper.create_scraper()\nresp = scraper.get('https://mv-voice.com/news/2021/05/04/mountain-view-whisman-students-sent-home-after-children-test-positive-for-covid-19').text\nselector = fromstring(resp)\ntitle = selector.xpath('//h1/text()')[0]\nprint(title)\n```\n\n<font color=red size=3 face=宋体><strong>运行效果如下图所示：</strong></font>\n\n![img](https://s2.loli.net/2023/11/19/lOm87puUTzvji6L.png)\n\n<font color=red size=3 face=宋体><strong>破盾成功。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>CloudScraper`[2]` 非常强大，它可以突破 Cloud Flare 免费版各个版本的五秒盾。而且它的接口和 requests 保持一致。原来用 requests 怎么写代码，现在只需要把`requests.xxx`改成`scraper.xxx`就可以了</strong></font>\n\n### <font color=#00b2c2 size=5 face=宋体><strong>2.付费版的CloudFlare五秒盾</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>付费版的CloudFlare五秒盾，有没有什么办法绕过呢？其实方法非常简单。只需要使用Docker运行一个容器就可以了。启动命令为：</strong></font>\n\n```shell\ndocker run -d \\\n  --name=flaresolverr \\\n  -p 8191:8191 \\\n  -e LOG_LEVEL=info \\\n  --restart unless-stopped \\\n  ghcr.io/flaresolverr/flaresolverr:latest\n```\n\n<font color=#f26522 size=4 face=宋体><strong>这个容器启动以后，会开启8191端口。我们通过往这个端口发送http请求，让他转发请求给目标网站，就可以绕过五秒盾。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>具体使用示例：</strong></font>\n\n```python\nimport requests\nimport json\n \nurl = \"http://localhost:8191/v1\"\n \npayload = json.dumps({\n  \"cmd\": \"request.get\",\n  \"url\": \"https://www.coinbase.com/ventures/content\",\n  \"maxTimeout\": 60000\n})\nheaders = {\n  'Content-Type': 'application/json'\n}\n \nresponse = requests.post(url, headers=headers, data=payload)\n \n# 这个Docker镜像启动的接口，返回的数据是JOSN，网页源代码在其中的.solution.response中\nprint(response.json()['solution']['response'])\n```\n\n<font color=red size=3 face=宋体><strong>我们启动的这个容器，为什么可以绕过CloudFlare的五秒盾呢，关键原因就在这个项目中：FlareSolverr[2]。大家可以阅读他的源代码，看看他是怎么绕过的。</strong></font>\n\n[1] Codebase: *https://www.coinbase.com/ventures/content*\n\n[2] FlareSolverr: *https://github.com/FlareSolverr/FlareSolverr*\n","tags":["逆向","记录","Cloudflare"],"categories":["逆向_反爬"]},{"title":"aiohttp.ClientSession() 使用 multipart/form-data 上传文件和字符集","url":"/2023/10/25/aiohttp-ClientSession-使用-multipart-form-data-上传文件和字符集/","content":"\n\n\n# <font color=#00b2c2 size=5 face=宋体><strong>aiohttp 异步http请求-4.文件上传multipart/form-data：</strong></font>\n\n<!--more-->\n\n本文搬运自：https://www.cnblogs.com/yoyoketang/p/16173424.html\n\n# 前言\n\n<font color=#f26522 size=4 face=宋体><strong>文件上传接口，post 请求参数类型content-type:multipart/form-data，上传文件分2种情况</strong></font>\n\n- <font color=#b0171f size=2 face=宋体><strong>小文件上传，可以直接用open函数读取</strong></font>\n- <font color=#b0171f size=2 face=宋体><strong>大文件上传，aiohttp支持多种类型的文件以流媒体的形式上传</strong></font>\n\n# 官方文档示例\n\n<font color=#f26522 size=4 face=宋体><strong>上传 multipart 类型</strong></font>\n\n```python\nurl = 'http://httpbin.org/post'\nfiles = {'file': open('report.xls', 'rb')}\n\nawait session.post(url, data=files)\n```\n\n<font color=#f26522 size=4 face=宋体><strong>也可以明确设置`filename` 和 `content_type`</strong></font>\n\n```python\nurl = 'http://httpbin.org/post'\ndata = FormData()\ndata.add_field('file',\n               open('report.xls', 'rb'),\n               filename='report.xls',\n               content_type='application/vnd.ms-excel')\n\nawait session.post(url, data=data)\n```\n\n# 参考案例\n\n<font color=#f26522 size=4 face=宋体><strong>用fiddler抓包，查看抓到的接口，以下这种接口就是multipart/form-data</strong></font>\n\n```tex\nContent-Type: multipart/form-data\nbody参数是这种格式：\n\n-----------------------------22165374713946\nContent-Disposition: form-data; name=\"localUrl\"\n\nyoyoketang.png\n-----------------------------22165374713946\nContent-Disposition: form-data; name=\"imgFile\"; filename=\"yoyoketang.png\"\nContent-Type: image/png\n```\n\n\n\n![img](https://s2.loli.net/2023/10/25/aldeVAI3CNc85pj.png)\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>上面的接口需要传2个参数</strong></font>\n\n- <font color=#b0171f size=2 face=宋体><strong>title 传字符串</strong></font>\n- <font color=#b0171f size=2 face=宋体><strong>file 传一个文件</strong></font>\n\n<font color=red size=3 face=宋体><strong>官网文档写的是只传一个file参数，实际验证也可以传其它字符串参数，如下示例：</strong></font>\n\n```python\nimport aiohttp\nimport asyncio\n\n\nasync def main():\n    async with aiohttp.ClientSession('http://127.0.0.1:8000') as session:\n        files = {\n            'file': open('a.jpg', 'rb'),\n            'title': '文件上传'\n            }\n        async with session.post('/api/v1/upfile/', data=files) as resp:\n            print(resp.url)\n            print(await resp.text())\n\n\nloop = asyncio.get_event_loop()\nloop.run_until_complete(main())\n```\n\n运行结果\n\n```bash\nhttp://http://127.0.0.1:8000/api/v1/upfile/\n{\"code\":0,\"msg\":\"success!\",\"data\":{\"file\":\"/media/up_image/a_TEn5GLR.jpg\",\"title\":\"文件上传\",\"timestamp\":\"2022-04-21 11:15:28\"}}\n```\n\n# 使用 FormData 类\n\n<font color=#f26522 size=4 face=宋体><strong>FormData 类自定义文件类型和名称</strong></font>\n\n```python\nimport aiohttp\nimport asyncio\nfrom aiohttp import FormData\n\n\nasync def main():\n    async with aiohttp.ClientSession('http://49.235.92.12:7005') as session:\n        data = FormData()\n        data.add_field('file',\n                       open('a.jpg', 'rb'),\n                       filename='a.jpg',\n                       content_type='image/png')\n        data.add_field('title', '文件上传1')\n        async with session.post('/api/v1/upfile/', data=data) as resp:\n            print(resp.url)\n            print(await resp.text())\n\n\nloop = asyncio.get_event_loop()\nloop.run_until_complete(main())\n```\n\n# 大文件上传\n\n<font color=#b0171f size=3 face=宋体><strong>小文件上传可以直接open函数读取，大文件直接读取会非常消耗内容。aiohttp支持多种类型的流式上传，这使您可以发送大文件而无需将它们读入内存。</strong></font>\n<font color=#f26522 size=4 face=宋体><strong>作为一个简单的案例，只需为您的 body 提供一个类似文件的对象：</strong></font>\n\n```python\nwith open('massive-body', 'rb') as f:\n   await session.post('http://httpbin.org/post', data=f)\n```\n\n或者您可以使用异步生成器：\n\n```python\nasync def file_sender(file_name=None):\n    async with aiofiles.open(file_name, 'rb') as f:\n        chunk = await f.read(64*1024)\n        while chunk:\n            yield chunk\n            chunk = await f.read(64*1024)\n\n# Then you can use file_sender as a data provider:\n\nasync with session.post('http://httpbin.org/post',\n                        data=file_sender(file_name='huge_file')) as resp:\n    print(await resp.text())\n```\n\n<font color=#f26522 size=4 face=宋体><strong>因为该 content 属性是一个 StreamReader（提供异步迭代器协议），所以您可以将 get 和 post 请求链接在一起：</strong></font>\n\n```rust\nresp = await session.get('http://python.org')\nawait session.post('http://httpbin.org/post',\n                   data=resp.content)\n```\n\n\n\n<font color=red size=4 face=宋体><strong>**笔记 Python 3.5 没有对异步生成器的原生支持，使用 async_generator库作为解决方法。**</strong></font>\n3.1 版后已弃用：aiohttp仍支持aiohttp.streamer装饰器，但不推荐使用此方法，而支持异步生成器，如上所示。\n","tags":["python","异步、协程"],"categories":["python_异步"]},{"title":"centos7通过rc.local文件添加自启动服务","url":"/2023/10/15/centos7通过rc-local文件添加自启动服务/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>centos7通过rc.local文件添加自启动服务：</strong></font>\n\n<!--more-->\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>系统环境:</strong></font>\n\n+ <font color=#b0171f size=3 face=宋体><strong>Centos 7</strong></font>\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>1、赋予脚本执行权限</strong></font>\n\n```shell\nchmod +x /etc/rc.d/rc.local\nchmod +x /etc/rc.local\n```\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>2、自动服务</strong></font>\n\n```shell\nsystemctl enable rc-local.service\nsystemctl start rc-local.service\nsystemctl status rc-local.service\n```\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>3、添加启动脚本</strong></font>\n\n```shell\n[root@threegene-mongodb-4ee43df-prd ~]# more /etc/rc.local\n#!/bin/bash\n# THIS FILE IS ADDED FOR COMPATIBILITY PURPOSES\n#\n# It is highly advisable to create own systemd services or udev rules\n# to run scripts during boot instead of using this file.\n#\n# In contrast to previous versions due to parallel execution during boot\n# this script will NOT be run after all other services.\n#\n# Please note that you must run 'chmod +x /etc/rc.d/rc.local' to ensure\n# that this script will be executed during boot.\n\ntouch /var/lock/subsys/local\n/usr/local/services/mongodb/bin/mongod -f /home/middle/mongodb/conf/mongo.cnf\n/usr/local/services/mongodb_arbiter/bin/mongod -f /home/middle/mongodb_arbiter/conf/mongo.cnf\n\n\n```\n\n<br>\n\n---\n\n<br>\n\n","tags":["系统","运维","ftp","挂载"],"categories":["linux"]},{"title":"折腾 DeepNude 去水印，去隐私算法","url":"/2023/10/14/折腾-DeepNude-去水印，去隐私算法/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong></strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong></strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong></strong></font>\n"},{"title":"go 数组的指针值传递，改变","url":"/2023/10/08/go-数组的指针值传递，改变/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>go 数组的指针值传递，改变：</strong></font>\n\n<!--more-->\n\n\n\n![go 数组的指针值传递，改变](https://s2.loli.net/2023/10/08/4mrWEPOGYJxZ9Sn.png)\n","tags":["go","基础"],"categories":["go","基础"]},{"title":"go 数组的初始化赋值方式","url":"/2023/10/08/go-数组的初始化赋值方式/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>go 数组的初始化赋值方式：</strong></font>\n\n<!--more-->\n\n```go\npackage main\n\nimport \"fmt\"\n\nfunc main() {\n\t//第一种：给定数组长度\n\tvar arr1 [3]int = [3]int{3, 6, 9}\n\tfmt.Println(arr1)\n\t// 输出结果 [3 6 9]\n\n\t//第二种：不给定数组长度，赋值的时候在给定长度\n\tvar arr2 = [3]int{1, 4, 7}\n\tfmt.Println(arr2)\n\t// 输出结果 [1 4 7]\n\n\t//第三种：不给定数组长度，赋值的时候，也不知道数组长度 以 ... 方式处理\n\tvar arr3 = [...]int{5, 7, 65, 87, 66}\n\tfmt.Println(arr3)\n\t// 输出结果 [5 7 65 87 66]\n\n\t//第四种：不给定数组长度，赋值的时候，也不知道数组长度 以 ... 方式处理 在此基础上，以下标赋值的方式处理\n\tvar arr4 = [...]int{3: 5, 2: 7, 0: 65, 1: 87, 4: 66}\n\tfmt.Println(arr4)\n\t// 输出结果 [65 87 7 5 66]\n}\n```\n\n<font color=red size=4 face=宋体><strong>以上代码运行结果：</strong></font>\n\n![go 数组的初始化赋值方式结果](https://s2.loli.net/2023/10/08/1FyIdYhVZjN5xUf.png)\n\n","tags":["go","基础"],"categories":["go","基础"]},{"title":"go go语言for循环的操作的几种方法","url":"/2023/10/08/go-go语言for循环的操作的几种方法/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>go go语言for循环的操作的几种方法：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>for循环、for range 循环：</strong></font>\n\n![image-20231008202549722](../../../../Library/Application Support/typora-user-images/image-20231008202549722.png)\n","tags":["go","基础"],"categories":["go","基础"]},{"title":"Go语言标准库文档中文版","url":"/2023/10/08/Go语言标准库文档中文版/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>Go语言标准库文档中文版：</strong></font>\n\n<!--more-->\n\n<font color=#b0171f size=3 face=宋体><strong>Go语言标准库文档中文版：</strong></font>[<font color=red size=3 face=宋体><strong>传送门</strong></font>](https://studygolang.com/pkgdoc)\n\n![Go语言标准库文档中文版](https://s2.loli.net/2023/10/08/7e1STEU9lGLrnYD.png)\n","tags":["go","基础","中文文档"],"categories":["go","基础"]},{"title":"go go语言中 臭名昭著到错误机制1","url":"/2023/10/08/go-go语言中-臭名昭著到错误机制1/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>go语言中 臭名昭著到错误机制1：</strong></font>\n\n<!--more-->\n\n+ <font color=#f26522 size=4 face=宋体><strong>defer + recover 错误处理机制 代码示例：</strong></font>\n\n![image-20231008162142031](https://s2.loli.net/2023/10/08/5ZS1yeBzqxjOXwc.png)\n\n+ <font color=#f26522 size=4 face=宋体><strong>errors函数 错误处理机制 代码示例：</strong></font>\n\n![image-20231008163342257](https://s2.loli.net/2023/10/08/fpqydrztEPUXVkO.png)\n","tags":["go","基础"],"categories":["go","错误处理"]},{"title":"go 函数体外传值,函数体内改变函数体外的值","url":"/2023/10/02/go-函数体外传值-函数体内改变函数体外的值/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>函数体外传值,函数体内改变函数体外的值：</strong></font>\n\n<!--more-->\n\n![image-20231002044008846](https://s2.loli.net/2023/10/02/Hk1I64fRjF2Zbgs.png)\n","tags":["go","基础"],"categories":["go","基础"]},{"title":"go switch 用法说明","url":"/2023/09/30/go-switch-用法说明/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>go switch 用法说明：</strong></font>\n\n<!--more-->\n\n![image-20230930203129854](https://s2.loli.net/2023/09/30/Nebk35SlDTFz19s.png)\n\n","tags":["go","基础"],"categories":["go","基础"]},{"title":"go int数据类型长度","url":"/2023/09/30/go-int数据类型长度/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>int数据类型长度:</strong></font>\n\n![go int数据类型](https://s2.loli.net/2023/09/30/Jncaoz1UYbv5T6e.png)\n","tags":["go","基础"],"categories":["go","基础"]},{"title":"Centos7 安装 pdf2image (PDF 转 图片)","url":"/2023/09/21/Centos7-安装-pdf2image-PDF-转-图片/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>Centos7 安装 pdf2image (PDF 转 图片)</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>前置环境：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>Centos 安装 pdf2image</strong></font>\n\n```\nCentos安装pdf2image\n环境：centos8、python3.6.4\n\n库安装\n1、pip3 install poppler-utils\n2、pip3 install pdf2image\n3、yum install poppler\n4、yum install poppler-utils\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>Ubuntu 安装 pdf2image</strong></font>\n\n```\n1、pip3 install poppler-utils\n2、pip3 install pdf2image\n3、sudo apt-get install poppler\n4、sudo apt-get install poppler-utils\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>Mac OS 安装 pdf2image</strong></font>\n\n```\n1、pip3 install poppler-utils\n2、pip3 install pdf2image\n3、brew install poppler\n```\n\n<font color=#f26522 size=4 face=宋体><strong>核心代码：</strong></font>\n\n```python\nfrom pdf2image import convert_from_path\nimport random\n# 将PDF文件转换为图像\nimages = convert_from_path('s.pdf')\n\n# 保存图像到文件\nfor i, image in enumerate(images):\n    image.save('' + str(i+1) +'.jpg', 'JPEG')\n\n```\n\n","tags":["PDF","转换"],"categories":["python"]},{"title":"ffmpeg 同时添加4个水印","url":"/2023/09/16/ffmpeg-同时添加4个水印/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>ffmpeg 同时添加4个水印(原创!)：</strong></font>\n\n<!--more-->\n\n+ <font color=#b0171f size=4 face=宋体><strong>左上角添加高斯模糊水印</strong></font>\n\n```shell\n# 左上角水印\nffmpeg -t 55 -i input.mp4  -filter_complex  \"[0:v]crop=w=iw/5:h=ih/5:x=0:y=0,boxblur=luma_radius=8:luma_power=2[boxblur1];[0:v][boxblur1]overlay=0:0[vouts1]\" -map \"[vouts1]\" -map 0:a -c:v libx264 -crf 28 -preset veryfast -c:a copy -movflags +faststart output.mp4 -y\n```\n\n+ <font color=#b0171f size=4 face=宋体><strong>右上角添加高斯模糊水印</strong></font>\n\n```shell\n# 右上角水印\nffmpeg -t 55 -i input.mp4  -filter_complex  \"[0:v]crop=w=iw/5:h=ih/5:x=iw-(iw/5):y=0,boxblur=luma_radius=8:luma_power=2[boxblur1];[0:v][boxblur1]overlay=W-(W/5):0[vouts1]\" -map \"[vouts1]\" -map 0:a -c:v libx264 -crf 28 -preset veryfast -c:a copy -movflags +faststart output.mp4 -y\n```\n\n+ <font color=#b0171f size=4 face=宋体><strong>左下角添加高斯模糊水印</strong></font>\n\n```shell\n# 左下角水印\nffmpeg -t 55 -i input.mp4  -filter_complex  \"[0:v]crop=w=iw/5:h=ih/5:x=0:y=ih-(ih/5),boxblur=luma_radius=8:luma_power=2[boxblur1];[0:v][boxblur1]overlay=0:H-(H/5)[vouts1]\" -map \"[vouts1]\" -map 0:a -c:v libx264 -crf 28 -preset veryfast -c:a copy -movflags +faststart output.mp4 -y\n```\n\n+ <font color=#b0171f size=4 face=宋体><strong>右下角添加高斯模糊水印</strong></font>\n\n```shell\n# 右下角水印\nffmpeg -t 55 -i input.mp4  -filter_complex  \"[0:v]crop=w=iw/4.2:h=ih/4.8:x=iw-(iw/4.2):y=ih-(ih/4.8),boxblur=luma_radius=8:luma_power=2[boxblur1];[0:v][boxblur1]overlay=W-(W/4.2):H-(H/4.8)[vouts1]\" -map \"[vouts1]\" -map 0:a -c:v libx264 -crf 28 -preset veryfast -c:a copy -movflags +faststart output.mp4 -y\n```\n\n+ <font color=#b0171f size=4 face=宋体><strong>多水印合成：</strong></font>\n\n```shell\n# 多水印合成\nffmpeg -t 55 -i input.mp4  -filter_complex  \"[0:v]crop=w=iw/5:h=ih/5:x=0:y=0,boxblur=luma_radius=8:luma_power=2[boxblur1];[0:v]crop=w=iw/5:h=ih/5:x=iw-(iw/5):y=0,boxblur=luma_radius=8:luma_power=2[boxblur2];[0:v]crop=w=iw/5:h=ih/5:x=0:y=ih-(ih/5),boxblur=luma_radius=8:luma_power=2[boxblur3];[0:v]crop=w=iw/4.2:h=ih/4.8:x=iw-(iw/4.2):y=ih-(ih/4.8),boxblur=luma_radius=8:luma_power=2[boxblur4];[0:v][boxblur1]overlay=0:0[vouts1];[vouts1][boxblur2]overlay=W-(W/5):0[vouts2];[vouts2][boxblur3]overlay=0:H-(H/5)[vouts3];[vouts3][boxblur4]overlay=W-(W/4.2):H-(H/4.8)[vout]\" -map \"[vout]\" -map 0:a -c:v libx264 -crf 28 -preset veryfast -c:a copy -movflags +faststart output.mp4 -y\n```\n\n","tags":["ffmpeg","水印"],"categories":["视频编辑"]},{"title":"centos7 NodeSource 安装Node.js","url":"/2023/09/16/centos7-NodeSource-安装Node-js/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>centos7 NodeSource 安装Node.js</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>使用nvm安装到 `node` 发现不是全局，所以改用这种方式安装</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>原文地址>>[如何在CentOS 7安装Node.js和npm | myfreax](https://www.myfreax.com/how-to-install-node-js-on-centos-7/)</strong></font>\n\n\n\n### <font color=#b0171f size=3 face=宋体><strong>安装Node.JS版本16.x。运行curl命令，下载并运行NodeSource安装脚本。</strong></font>\n\n```\n# 安装16\ncurl -fsSL https://rpm.nodesource.com/setup_16.x | sudo bash -\n\n# 安装18\ncurl -fsSL https://rpm.nodesource.com/setup_18.x | sudo bash -\n\n# 安装19\ncurl -fsSL https://rpm.nodesource.com/setup_19.x | sudo bash -\n\n# 安装20\ncurl -fsSL https://rpm.nodesource.com/setup_20.x | sudo bash -\n\n# 安装21\ncurl -fsSL https://rpm.nodesource.com/setup_21.x | sudo bash -\n```\n\n<font color=#b0171f size=2 face=宋体><strong>该脚本会将NodeSource签名密钥添加到您的系统，创建yum储存库文件，安装所有必需的软件包，</strong></font><font color=#b0171f size=2 face=宋体><strong>并刷新yum缓存。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>如果您需要另一个Node.js版本， 比如`14.x`，将`setup_16.x`更改为`setup_14.x`。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>一旦启用NodeSource仓库，请运行命令`sudo yum install -y nodejs`安装Node.js和npm。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>Node.JS软件包同时包含`node`和`npm`二进制文件。可以运行命令`node --version`，`npm --version`打印其版本来验证Node.js和npm是否已成功安装。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>如果你使用的yarn不是npm，可以运行命令`sudo corepack enable yarn`安装yarn。然后运行命令`yarn -v`打印yarn版本号。</strong></font>\n\n```shell\nsudo yum install -y nodejs\ncorepack enable yarn npm\nnode --version\nnpm --version\nyarn -v\n```\n\n","tags":["工具","安装","nodejs"],"categories":["工具","安装教程"]},{"title":"centos下使用nvm安装nodejs","url":"/2023/09/16/centos下使用nvm安装nodejs/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>centos下使用nvm安装nodejs：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>之前安装nodejs的时候，怎么安装怎么报错</strong></font>\n\n+ 报错内容(yum安装)\n\n```txt\nnode: relocation error: /lib64/libnode.so.93: symbol FIPS_selftest, version OPENSSL_1_1_0g not defined in file libcrypto.so.1.1 with link time reference\n```\n\n<font color=#f26522 size=4 face=宋体><strong>然后...更改 nvm安装！ 完美解决，还傻瓜式</strong></font>\n\n---\n\n\n\n### <font color=red size=5 face=宋体><strong>1、安装 git</strong></font>\n\n```\nyum -y install git\n```\n\n### <font color=#00b2c2 size=5 face=宋体><strong>2、拉取nvm</strong></font>\n\n```\ngit clone https://github.com/creationix/nvm.git ~/.nvm\n```\n\n### <font color=red size=5 face=宋体><strong>3、生效环境</strong></font>\n\n```\nsource ~/.nvm/nvm.sh\n```\n\n### <font color=#00b2c2 size=5 face=宋体><strong>4、如果第3步 无效，请执行这里</strong></font>\n\n```bash\n#添加环境变量\nvim /root/.bashrc\n\n# 将下面内容 复制到文本中\nexport NVM_DIR=\"$HOME/.nvm\"\n[ -s \"$NVM_DIR/nvm.sh\" ] && \\. \"$NVM_DIR/nvm.sh\"  # This loads nvm\n[ -s \"$NVM_DIR/bash_completion\" ] && \\. \"$NVM_DIR/bash_completion\"  # This loads nvm bash_completion\n\n\n# 保存\nesc > : > wq  #保存退出\n\n# 立即生效\nsource /root/.bashrc\n```\n\n### <font color=red size=5 face=宋体><strong>5、查看node版本</strong></font>\n\n```shell\nnode --version\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>6、nvm相关命令</strong></font>\n\n```bash\n# 查看可安装版本\nnvm list\n\n# 安装\nnvm install v16.20.2\n\n# 切换 使用版本\nnvm use v16.20.2\n\n# 卸载\nnvm uninstall v16.20.2\n```\n\n","tags":["nodejs安装教程"],"categories":["nodejs"]},{"title":"python aiohttp 超时设置","url":"/2023/09/15/python-aiohttp-超时设置/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>python aiohttp 超时设置：</strong></font>\n\n<!--more-->\n\n<font color=#b0171f size=2 face=宋体><strong>aiohttp模块下不能使用timeout来做超时设置，下面是正确的设置方法</strong></font>\n\n```python\nasync def RunSqlFindMain(list_data):\n    \"\"\"\n\n    :状态码返回值 0  False   数据不存在\n    :状态码返回值 1  True   数据存在\n    :状态码返回值 400  True   请求超时\n    :return:\n    \"\"\"\n    timeout = aiohttp.ClientTimeout(total=7)\n    async with aiohttp.ClientSession() as session:\n        tasks = [asyncio.create_task(fetch(session, data, timeout)) for data in list_data]\n        await asyncio.wait(tasks)\n        s_ = [i.result() for i in tasks]\n        return s_\n```\n\n","tags":["python","异步、协程"],"categories":["python_异步"]},{"title":"ffmpeg moviepy合并片头","url":"/2023/09/07/ffmpeg-moviepy合并片头/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>moviepy合并片头：</strong></font>\n\n<!--more-->\n\n```python\nfrom moviepy.video.compositing.concatenate import concatenate_videoclips\nfrom moviepy.editor import VideoFileClip\n\nintro = VideoFileClip(\"intro_video.mp4\")   # 片头\nmain_video = VideoFileClip(\"main_video.mp4\")   # 创建一个新的视频对象，并将主视频的每一帧添加到该对象中：\nvideo = concatenate_videoclips([intro, main_video], method=\"compose\")   # 开始合并视频  #合并之后，出现花屏 method=\"compose\" 即可解决\nvideo.write_videofile(\"final_video.mp4\")   # 写入本地\n```\n\n","tags":["ffmpeg"],"categories":["视频编辑"]},{"title":"ffmpeg 命令心得_非常重要","url":"/2023/09/07/ffmpeg-命令心得-非常重要/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>ffmpeg 命令心得_非常重要：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>h5播放器，在pc和安卓端，播放没有任何问题，但是在ios端播放就有问题</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>猜测这是因为播放器需要添加参数，但是如果我们将ios端能兼容的视频格式在原视频的基础上转换一下，其实也能解决</strong></font>\n\n+ <font color=#b0171f size=3 face=宋体><strong>切割帧：</strong></font>\n\n```\nffmpeg -i test.m4v -f image2  -vf fps=fps=50 -qscale:v 2 text/%05d.jpg\n```\n\n+ <font color=#b0171f size=3 face=宋体><strong>添加帧切割m3u8：</strong></font>\n\n```shell\nffmpeg -i input.mp4 -force_key_frames \"expr:gte(t,n_forced*8)\" -strict -8 -c:a aac -c:v libx264 -hls_time 8 -f hls -map 0 -f segment -segment_list index.m3u8 %04d.ts\n\n# ffmpeg -i input.mp4：指定输入文件为 input.mp4。\n# -force_key_frames \"expr:gte(t,n_forced*8)\"：强制在每 8 帧之后生成一个关键帧，其中 t 表示当前时间戳，n_forced 表示之前已经强制生成的关键帧数量。\n# -strict -8：使用严格模式，以保证生成的 HLS 文件在各种平台上兼容性更好。\n# -c:a aac -c:v libx264：指定音频和视频的编码格式分别为 AAC 和 H.264。\n# -hls_time 8：设置每个 HLS 切片的时间长度为 8 秒。\n# -f hls -map 0：指定输出格式为 HLS，并映射输入文件的全部内容到输出中。\n# -segment_list index.m3u8 %04d.ts：生成每个切片的索引列表文件 index.m3u8，其中 %04d 表示用数字填充四位数的占位符，用于表示每个切片的序号。\n\n# 总结起来，该命令的作用是将输入的 MP4 文件进行处理，生成一系列按时间切片分割的 HLS 格式的视频片段，并生成相应的索引列表文件。\n```\n\n\n\n+ <font color=#b0171f size=3 face=宋体><strong>转码到通用版本：</strong></font>\n\n```shell\nffmpeg -i input.mp4 -threads 12 -s 1920x1080 -r 30000/1001 -video_track_timescale 30k -c:a copy output.mp4\n\n# ffmpeg -i v1.mp4：指定输入文件为 input.mp4。\n# -threads 12：指定使用 12 个线程进行视频处理。\n# -s 1920x1080：指定输出视频的分辨率大小为 1920x1080。\n# -r 30000/1001：指定输出视频的帧率为 30000/1001 fps。\n# -video_track_timescale 30k：指定输出视频的时间尺度为 30k time scale。\n# -c:a copy：将输入文件的音频流直接复制到输出文件中。\n# newv1.mp4：指定输出文件名为 output.mp4。\n\n# 总结起来，该命令的作用是将输入的 MP4 文件进行处理，生成一个新的 MP4 文件，该文件的分辨率大小为 HD 720p，帧率为 30000/1001 fps，时间尺度为 30k time scale，音频流保持不变。\n```\n\n\n\n+ <font color=#b0171f size=3 face=宋体><strong>复制 切割m3u8：</strong></font>\n\n```shell\nffmpeg -i input.mp4 -f segment -segment_time 8 -segment_format mpegts -segment_list index.m3u8 -c copy -bsf:v h264_mp4toannexb -map 0 %04d.ts\n\n# ffmpeg -i input.mp4：指定输入文件为 input.mp4。\n# -f segment -segment_time 8 -segment_format mpegts -segment_list index.m3u8：将输入文件分割成多个片段，每个片段的时长为 8 秒，格式为 MPEG-TS，生成的索引列表文件名为 index.m3u8。\n# -c copy -bsf:v h264_mp4toannexb：将输入文件的视频流直接复制到输出文件中，并使用 h264_mp4toannexb 过滤器将视频流转换为 Annex B 格式。\n# -map 0 %04d.ts：将输入文件的全部内容映射到输出文件中，输出的每个片段的文件名为 %04d.ts，其中 %04d 表示用数字填充四位数的占位符，用于表示每个片段的序号。\n\n# 总结起来，该命令的作用是将输入的 MP4 文件进行处理，生成一系列时长为 8 秒的 MPEG-TS 格式的视频片段，并将每个片段的文件名保存到 index.m3u8 文件中。同时，将视频流转换为 Annex B 格式。\n```\n\n\n\n+ <font color=#b0171f size=3 face=宋体><strong>转码到通用版本(音频流转换为公有格式)：</strong></font>\n\n```shell\nffmpeg -i input.mp4 -bsf:a aac_adtstoasc -threads 12 -s 1920x1080 -r 30000/1001 -video_track_timescale 30k -c:a copy output.mp4\n\n# ffmpeg -i input.mp4：指定输入文件为 input.mp4。\n# -bsf:a aac_adtstoasc：使用 aac_adtstoasc 过滤器将输入文件的音频流转换为公有格式。\n# -threads 12：指定使用 12 个线程进行视频处理。\n# -s 1920x1080：指定输出视频的分辨率大小为 1920x1080。\n# -r 30000/1001：指定输出视频的帧率为 30000/1001 fps。\n# -video_track_timescale 30k：指定输出视频的时间尺度为 30k time scale。\n# -c:a copy：将输入文件的音频流直接复制到输出文件中。\n# output.mp4：指定输出文件名为 output.mp4。\n\n# 总结起来，该命令的作用是将输入的 MP4 文件进行处理，生成一个新的 MP4 文件，该文件的分辨率大小为 1920x1080，帧率为 30000/1001 fps，时间尺度为 30k time scale，音频流保持不变，并将结果保存为 output.mp4 文件。同时，使用 aac_adtstoasc 过滤器将音频流转换为公有格式。\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>合并视频>>>到通用版本：</strong></font>\n\n```shell\nffmpeg -i input.mp4 -i v1.mp4 -threads 24  -bsf:a aac_adtstoasc -filter_complex \"concat=n=2:v=1:a=1\" -s 1920x1080 -r 30000/1001 -video_track_timescale 30k output.mp4\n\n# ffmpeg -i input.mp4 -i v1.mp4：指定输入文件为 input.mp4 和 v1.mp4。\n# -threads 24：指定使用 24 个线程进行视频处理。\n# -bsf:a aac_adtstoasc：使用 aac_adtstoasc 过滤器将输入文件的音频流转换为公有格式。\n# -filter_complex \"concat=n=2:v=1:a=1\"：使用 concat 过滤器将两个输入文件连接起来。n=2 表示输入文件的数量，v=1 表示视频流的数量，a=1 表示音频流的数量。\n# -s 1920x1080：指定输出视频的分辨率大小为 1920x1080。\n# -r 30000/1001：指定输出视频的帧率为 30000/1001 fps。\n# -video_track_timescale 30k：指定输出视频的时间尺度为 30k time scale。\n# output.mp4：指定输出文件名为 output.mp4。\n\n# 总结起来，该命令的作用是将 input.mp4 和 v1.mp4 两个文件进行处理，将它们连接成一个新的 MP4 文件，并将结果保存为 output.mp4 文件。该文件的分辨率大小为 1920x1080，帧率为 30000/1001 fps，时间尺度为 30k time scale，音频流保持不变，并将音频流转换为公有格式。同时，使用 24 个线程进行视频处理。\n```\n\n<font color=#f26522 size=4 face=宋体><strong></strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong></strong></font>\n\n","tags":["ffmpeg"],"categories":["视频编辑"]},{"title":"linux下tree命令中文字符乱码解决方案","url":"/2023/09/02/linux下tree命令中文字符乱码解决方案/","content":"\n\n\n# 1.问题描述\n\n<!--more-->\n\n在centos下使用tree命令打印目录树时，中文字符显示乱码：如下图所示\n\n![](https://s2.loli.net/2023/09/02/UByQc4VwpPoHnXk.png)\n\n尝试了网上说的设置为ASCII编码的方法，没有用：\n\n```shell\nalias tree='tree --charset ASCII'\n```\n\n# 2.解决办法\n\n最后直接使用这个命令就可以了：\n\n```bash\ntree -N\n```\n\n如下图所示：\n\n![](https://s2.loli.net/2023/09/02/9w6QMWYxLRS8ylP.png)\n","tags":["系统","运维","linux","命令"],"categories":["linux"]},{"title":"python js反混淆 eval","url":"/2023/08/31/python-js反混淆-eval/","content":"\n<font color=red size=4 face=宋体><strong>本文搬运自 >>> https://blog.csdn.net/CaliXz/article/details/127405966</strong></font>\n\n<font color=#00b2c2 size=5 face=宋体><strong>python js反混淆 eval(function(p,a,c,k,e,d){}</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>前言：</strong></font>\n<font color=#b0171f size=3 face=宋体><strong>在Python爬取资源的时候需要分析网站，有时候关键部分的JS会被混淆，所以不得不去解密这段JS去获取数据，这里推荐两个JS在线解密工具。</strong></font>\n\nhttps://www.sojson.com/jsjiemi.html <font color=#b0171f size=2 face=宋体><strong>#很强的JS反混淆解密工具</strong></font>\n\nhttps://www.jb51.net/article/9705.htm <font color=#b0171f size=2 face=宋体><strong>#带原理代码</strong></font>\n\n\n\n<font color=red size=5 face=宋体><strong>前置安装：</strong></font>\n\n+ *`js2py`*官方网址： [<font color=#b0171f size=4 face=宋体><strong>传送门</strong></font>](https://github.com/PiotrDabkowski/Js2Py)\n\n+ 安装 js2py 库`pip3 install js2py`\n+ 简单使用\n\n```python\n>>> import js2py\n>>> js2py.eval_js('console.log( \"Hello World!\" )')\n'Hello World!'\n>>> add = js2py.eval_js('function add(a, b) {return a + b}')\n>>> add(1, 2) + 3\n6\n>>> add.constructor\nfunction Function() { [python code] }\n>>> js2py.require('underscore')\n'function _(obj) { [python code] }'\n```\n\n\n\n# <font color=#f26522 size=4 face=宋体><strong>原理：</strong></font>\n\n<font color=red size=3 face=宋体><strong>拿到一段混淆的JavaScript</strong></font>\n\n```javascript\neval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\\\b'+e(c)+'\\\\b','g'),k[c])}}return p}('q p=[\"5://2.1.0/4-6-9-8/o~7.3\",\"5://2.1.0/4-6-9-8/m~7.3\",\"5://2.1.0/4-6-9-8/n~7.3\",\"5://2.1.0/4-6-9-8/r~7.3\",\"5://2.1.0/4-6-9-8/l~7.3\",\"5://2.1.0/4-6-9-8/w~7.3\",\"5://2.1.0/4-6-9-8/v~7.3\",\"5://2.1.0/4-6-9-8/u~7.3\",\"5://2.1.0/4-6-9-8/t~7.3\",\"5://2.1.0/4-6-9-8/x~7.3\",\"5://2.1.0/4-6-9-8/h~7.3\",\"5://2.1.0/4-6-9-8/c~7.3\",\"5://2.1.0/4-6-9-8/b~7.3\",\"5://2.1.0/4-6-9-8/e~7.3\",\"5://2.1.0/4-6-9-8/a~7.3\",\"5://2.1.0/4-6-9-8/d~7.3\",\"5://2.1.0/4-6-9-8/k~7.3\",\"5://2.1.0/4-6-9-8/f~7.3\",\"5://2.1.0/4-6-9-8/j~7.3\",\"5://2.1.0/4-6-9-8/i~7.3\",\"5://2.1.0/4-6-9-8/g~7.3\",\"5://2.1.0/4-6-9-8/s~7.3\",\"5://2.1.0/4-6-9-8/W~7.3\",\"5://2.1.0/4-6-9-8/P~7.3\",\"5://2.1.0/4-6-9-8/O~7.3\",\"5://2.1.0/4-6-9-8/N~7.3\",\"5://2.1.0/4-6-9-8/M~7.3\",\"5://2.1.0/4-6-9-8/y~7.3\",\"5://2.1.0/4-6-9-8/Q~7.3\",\"5://2.1.0/4-6-9-8/R~7.3\",\"5://2.1.0/4-6-9-8/V~7.3\",\"5://2.1.0/4-6-9-8/U~7.3\",\"5://2.1.0/4-6-9-8/T~7.3\",\"5://2.1.0/4-6-9-8/S~7.3\",\"5://2.1.0/4-6-9-8/L~7.3\",\"5://2.1.0/4-6-9-8/K~7.3\",\"5://2.1.0/4-6-9-8/D~7.3\",\"5://2.1.0/4-6-9-8/C~7.3\",\"5://2.1.0/4-6-9-8/B~7.3\",\"5://2.1.0/4-6-9-8/z~7.3\",\"5://2.1.0/4-6-9-8/A~7.3\",\"5://2.1.0/4-6-9-8/E~7.3\",\"5://2.1.0/4-6-9-8/F~7.3\",\"5://2.1.0/4-6-9-8/J~7.3\",\"5://2.1.0/4-6-9-8/I~7.3\",\"5://2.1.0/4-6-9-8/H~7.3\",\"5://2.1.0/4-6-9-8/G~7.3\"]',59,59,'com|dcarimg|p3|jpg|tos|https|cn|noop|0015|avt|811716e5848751f1dae4f43f452975cd|ac1da9e8dcf023ae40eb45195cab20a1|fcae6a61ed85f85031a7829c9b519e61|f7aaa057505d7fdf86bb8e245b1bcd6a|4c77737996ab63f6db336aa073d3227f|3e28866f375affe69d7ed45e1014b414|647872d796cdb80011fe54ba30158f86|1c267424577ba7ca58e2ca4f9972e59b|24177a9f95362d39bf3d83b9bbb51851|018189c7f19dcde8784898368e87224b|993d09a49f7e9ca64f49fdc54c535531|f13a6fcd9427162329b9a55a1d076968|988aed36201086727dbdce71830020a3|f484bfd1aab868bfb1ad94e8e8d64da5|25289976c198b253271c32cfc8f6c5cd|newImgs|var|ba92c1e92141863363f480377dd3260d|66a07a2fdb465192a8db4c2c5392d0a9|f0818bb47337ba55f34df0baeed1f5cc|9355a4db8df02389c4b403ae30fcf274|8048bdbe78ec41d8d3e1ff55d65de01c|26bcc798fbdc2722d9287af869b870b2|9e41a0f6c3c53e71a0cac75cf0d99646|12ed9a9e36d363bd0093334db44ef006|543aeca44254e62a41cdcd2b6e5a5de5|2bbb7c6f1ce099f6908ed45cd5d0e252|9a838fe8cd361123fa35a8c823521bec|b10634e98282a88c93e407cd3479a8c9|6c9bc152695491ef0c1b22bf6e47de2e|875475b9019046940f104818b8e1a0d0|f5fc612de0976995e05b123e35daab32|caff83ebd1266b1548562867b19c4914|702288d93b39e913e1502af2111d5292|24a4a4d935db4fe7e3d9e21f474df902|fd43e76331946eb998a663a5b407dcbe|f10e6797cecc0a5cf480fd17bc0d35c3|4ff3e1adbf079851039e03654980166b|fc62b1ee314ff71e3093dcdc150c03a8|5442a7e61b486de6003ab3fca5c44ac9|c0d22ca08487eed65f2acd3ad712b87c|4067412f2411aab6dcfe30fed69e35a8|c61f4fd9163cd6a58c97530d61d233b1|a8f6298664ec1d5203acd1040746f62c|10439132723f4220eee6ab4c4fc56f4e|ffbc3806dd0bd6f2c754bbda42b6cd68|041f97ded5acefcf3ee41cb2598e0501|ee709d458d06c892c4b4960b0228d3bf|cc4afe36aad5666a2df254d116661fcb'.split('|'),0,{}))\n```\n\n<font color=red size=3 face=宋体><strong>我们把“eval”去掉丢到chrome F12 Console里，得到</strong></font>\n\n![](https://s2.loli.net/2023/08/31/1SquOzDAoC3ek6U.png)\n\n# <font color=#00b2c2 size=5 face=宋体><strong>实现：</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>这里我们使用js2py这个包</strong></font>\n\n```python\nimport js2py\n \nif __name__ == '__main__':\n    encrypted=r\"\"\"(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\\\b'+e(c)+'\\\\b','g'),k[c])}}return p}('q p=[\"5://2.1.0/4-6-9-8/o~7.3\",\"5://2.1.0/4-6-9-8/m~7.3\",\"5://2.1.0/4-6-9-8/n~7.3\",\"5://2.1.0/4-6-9-8/r~7.3\",\"5://2.1.0/4-6-9-8/l~7.3\",\"5://2.1.0/4-6-9-8/w~7.3\",\"5://2.1.0/4-6-9-8/v~7.3\",\"5://2.1.0/4-6-9-8/u~7.3\",\"5://2.1.0/4-6-9-8/t~7.3\",\"5://2.1.0/4-6-9-8/x~7.3\",\"5://2.1.0/4-6-9-8/h~7.3\",\"5://2.1.0/4-6-9-8/c~7.3\",\"5://2.1.0/4-6-9-8/b~7.3\",\"5://2.1.0/4-6-9-8/e~7.3\",\"5://2.1.0/4-6-9-8/a~7.3\",\"5://2.1.0/4-6-9-8/d~7.3\",\"5://2.1.0/4-6-9-8/k~7.3\",\"5://2.1.0/4-6-9-8/f~7.3\",\"5://2.1.0/4-6-9-8/j~7.3\",\"5://2.1.0/4-6-9-8/i~7.3\",\"5://2.1.0/4-6-9-8/g~7.3\",\"5://2.1.0/4-6-9-8/s~7.3\",\"5://2.1.0/4-6-9-8/W~7.3\",\"5://2.1.0/4-6-9-8/P~7.3\",\"5://2.1.0/4-6-9-8/O~7.3\",\"5://2.1.0/4-6-9-8/N~7.3\",\"5://2.1.0/4-6-9-8/M~7.3\",\"5://2.1.0/4-6-9-8/y~7.3\",\"5://2.1.0/4-6-9-8/Q~7.3\",\"5://2.1.0/4-6-9-8/R~7.3\",\"5://2.1.0/4-6-9-8/V~7.3\",\"5://2.1.0/4-6-9-8/U~7.3\",\"5://2.1.0/4-6-9-8/T~7.3\",\"5://2.1.0/4-6-9-8/S~7.3\",\"5://2.1.0/4-6-9-8/L~7.3\",\"5://2.1.0/4-6-9-8/K~7.3\",\"5://2.1.0/4-6-9-8/D~7.3\",\"5://2.1.0/4-6-9-8/C~7.3\",\"5://2.1.0/4-6-9-8/B~7.3\",\"5://2.1.0/4-6-9-8/z~7.3\",\"5://2.1.0/4-6-9-8/A~7.3\",\"5://2.1.0/4-6-9-8/E~7.3\",\"5://2.1.0/4-6-9-8/F~7.3\",\"5://2.1.0/4-6-9-8/J~7.3\",\"5://2.1.0/4-6-9-8/I~7.3\",\"5://2.1.0/4-6-9-8/H~7.3\",\"5://2.1.0/4-6-9-8/G~7.3\"]',59,59,'com|dcarimg|p3|jpg|tos|https|cn|noop|0015|avt|811716e5848751f1dae4f43f452975cd|ac1da9e8dcf023ae40eb45195cab20a1|fcae6a61ed85f85031a7829c9b519e61|f7aaa057505d7fdf86bb8e245b1bcd6a|4c77737996ab63f6db336aa073d3227f|3e28866f375affe69d7ed45e1014b414|647872d796cdb80011fe54ba30158f86|1c267424577ba7ca58e2ca4f9972e59b|24177a9f95362d39bf3d83b9bbb51851|018189c7f19dcde8784898368e87224b|993d09a49f7e9ca64f49fdc54c535531|f13a6fcd9427162329b9a55a1d076968|988aed36201086727dbdce71830020a3|f484bfd1aab868bfb1ad94e8e8d64da5|25289976c198b253271c32cfc8f6c5cd|newImgs|var|ba92c1e92141863363f480377dd3260d|66a07a2fdb465192a8db4c2c5392d0a9|f0818bb47337ba55f34df0baeed1f5cc|9355a4db8df02389c4b403ae30fcf274|8048bdbe78ec41d8d3e1ff55d65de01c|26bcc798fbdc2722d9287af869b870b2|9e41a0f6c3c53e71a0cac75cf0d99646|12ed9a9e36d363bd0093334db44ef006|543aeca44254e62a41cdcd2b6e5a5de5|2bbb7c6f1ce099f6908ed45cd5d0e252|9a838fe8cd361123fa35a8c823521bec|b10634e98282a88c93e407cd3479a8c9|6c9bc152695491ef0c1b22bf6e47de2e|875475b9019046940f104818b8e1a0d0|f5fc612de0976995e05b123e35daab32|caff83ebd1266b1548562867b19c4914|702288d93b39e913e1502af2111d5292|24a4a4d935db4fe7e3d9e21f474df902|fd43e76331946eb998a663a5b407dcbe|f10e6797cecc0a5cf480fd17bc0d35c3|4ff3e1adbf079851039e03654980166b|fc62b1ee314ff71e3093dcdc150c03a8|5442a7e61b486de6003ab3fca5c44ac9|c0d22ca08487eed65f2acd3ad712b87c|4067412f2411aab6dcfe30fed69e35a8|c61f4fd9163cd6a58c97530d61d233b1|a8f6298664ec1d5203acd1040746f62c|10439132723f4220eee6ab4c4fc56f4e|ffbc3806dd0bd6f2c754bbda42b6cd68|041f97ded5acefcf3ee41cb2598e0501|ee709d458d06c892c4b4960b0228d3bf|cc4afe36aad5666a2df254d116661fcb'.split('|'),0,{}))\"\"\"\n    print(js2py.eval_js(encrypted))\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>运行结果：</strong></font>\n\n```\nvar newImgs=[\"https://p3.dcarimg.com/tos-cn-avt-0015/25289976c198b253271c32cfc8f6c5cd~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/988aed36201086727dbdce71830020a3~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/f484bfd1aab868bfb1ad94e8e8d64da5~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/ba92c1e92141863363f480377dd3260d~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/f13a6fcd9427162329b9a55a1d076968~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/26bcc798fbdc2722d9287af869b870b2~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/8048bdbe78ec41d8d3e1ff55d65de01c~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/9355a4db8df02389c4b403ae30fcf274~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/f0818bb47337ba55f34df0baeed1f5cc~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/9e41a0f6c3c53e71a0cac75cf0d99646~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/1c267424577ba7ca58e2ca4f9972e59b~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/fcae6a61ed85f85031a7829c9b519e61~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/ac1da9e8dcf023ae40eb45195cab20a1~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/4c77737996ab63f6db336aa073d3227f~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/811716e5848751f1dae4f43f452975cd~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/f7aaa057505d7fdf86bb8e245b1bcd6a~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/993d09a49f7e9ca64f49fdc54c535531~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/3e28866f375affe69d7ed45e1014b414~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/018189c7f19dcde8784898368e87224b~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/24177a9f95362d39bf3d83b9bbb51851~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/647872d796cdb80011fe54ba30158f86~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/66a07a2fdb465192a8db4c2c5392d0a9~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/cc4afe36aad5666a2df254d116661fcb~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/4067412f2411aab6dcfe30fed69e35a8~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/c0d22ca08487eed65f2acd3ad712b87c~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/5442a7e61b486de6003ab3fca5c44ac9~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/fc62b1ee314ff71e3093dcdc150c03a8~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/12ed9a9e36d363bd0093334db44ef006~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/c61f4fd9163cd6a58c97530d61d233b1~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/a8f6298664ec1d5203acd1040746f62c~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/ee709d458d06c892c4b4960b0228d3bf~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/041f97ded5acefcf3ee41cb2598e0501~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/ffbc3806dd0bd6f2c754bbda42b6cd68~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/10439132723f4220eee6ab4c4fc56f4e~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/4ff3e1adbf079851039e03654980166b~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/f10e6797cecc0a5cf480fd17bc0d35c3~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/6c9bc152695491ef0c1b22bf6e47de2e~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/b10634e98282a88c93e407cd3479a8c9~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/9a838fe8cd361123fa35a8c823521bec~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/543aeca44254e62a41cdcd2b6e5a5de5~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/2bbb7c6f1ce099f6908ed45cd5d0e252~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/875475b9019046940f104818b8e1a0d0~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/f5fc612de0976995e05b123e35daab32~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/fd43e76331946eb998a663a5b407dcbe~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/24a4a4d935db4fe7e3d9e21f474df902~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/702288d93b39e913e1502af2111d5292~noop.jpg\",\"https://p3.dcarimg.com/tos-cn-avt-0015/caff83ebd1266b1548562867b19c4914~noop.jpg\"]\n```\n\n","tags":["python","逆向","Cloudflare","javascript","爬虫"],"categories":["逆向_反爬"]},{"title":"python3 使用requests发送未进验证的ssl请求警告提示","url":"/2023/08/31/python3-使用requests发送未进验证的ssl请求警告提示/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>python3 使用requests发送未进验证的ssl请求警告提示：</strong></font>\n\n<!--more-->\n\n![image-20230831171649520](https://s2.loli.net/2023/08/31/HsQaSdo4ZmBTbzE.png)\n\n<font color=#b0171f size=2 face=宋体><strong>使用起来其实，无伤大雅，但是一排红字，就是有点难看。消除吧！</strong></font>\n\n```python\nimport requests\n\nurl = \"xxx\"\nresponse = requests.get(url)\nprint(response.text)\n\n# 返回内容:\n/site-packages/urllib3/connectionpool.py:1095: InsecureRequestWarning: Unverified HTTPS request is being made to host '127.0.0.1'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#tls-warnings\n  warnings.warn(\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**解决方法：**</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>在代码中添加以下代码即可解决：</strong></font>\n\n```python\nimport urllib3\nurllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)\n```\n\n","tags":["错误","基础"],"categories":["python"]},{"title":"Python 判断视频是否包含音频","url":"/2023/08/26/Python-判断视频是否包含音频/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>Python 判断视频是否包含音频：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>安装库：</strong></font>\n\n+ `pip install moviepy`\n\n<font color=#f26522 size=4 face=宋体><strong>判断代码：</strong></font>\n\n```python\nfrom moviepy.editor import *\n\nvideo = VideoFileClip('test.mp4')\nprint(video.audio is None) #如果视频中的音频为None则说明视频中不包含音频\n```\n\n","tags":["python","ffmpeg","多层m3u8"],"categories":["视频编辑"]},{"title":"ffmpeg 视频旋转","url":"/2023/08/17/ffmpeg-视频旋转/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>ffmpeg 视频旋转：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>要使用FFmpeg旋转视频，您可以使用以下命令：</strong></font>\n\n```\nshellffmpeg -i input_video.mp4 -vf \"transpose=1\" output_video.mp4\n```\n\n<font color=#f26522 size=4 face=宋体><strong>在这个命令中，`-i input_video.mp4`指定输入视频文件的路径和文件名。`-vf \"transpose=1\"`指定旋转视频的角度，这里旋转90度。您可以根据需要更改旋转角度。最后，`output_video.mp4`指定输出视频文件的路径和文件名。</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>如果您想旋转视频逆时针90度，可以使用以下命令：</strong></font>\n\n```\nshellffmpeg -i input_video.mp4 -vf \"transpose=2\" output_video.mp4\n```\n\n<font color=#f26522 size=4 face=宋体><strong>这将使用`transpose=2`来逆时针旋转视频90度。</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>请注意，这些命令假设您已经安装了FFmpeg，并且可以在命令行中运行它。</strong></font>\n","tags":["ffmpeg"],"categories":["视频编辑"]},{"title":"根据主视频，自动设置片头的分辨率、Fps、编码器","url":"/2023/08/15/根据主视频，自动设置片头的分辨率、Fps、编码器/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>根据主视频，自动设置片头的分辨率、Fps、编码器：</strong></font>\n\n<!--more-->\n\n+ <font color=#f26522 size=4 face=宋体><strong>前提：</strong></font>\n  + <font color=#b0171f size=3 face=宋体><strong>安装：ffmpeg</strong></font>\n  + <font color=#b0171f size=3 face=宋体><strong>安装：python库 opencv-python `pip3 install opencv-python`</strong></font>\n\n```python\n  def set_start_video(self, video_path, start_video_path):\n    \"\"\"\n      :param video_path: 原始mp4 绝对路径\n      :param start_video_path:   片头的绝对路径\n      :return: \n    \"\"\"\n      video = cv2.VideoCapture(f\"{video_path}\")\n      # print(height, width)\n      # resolution1 = (int(video.get(cv2.CAP_PROP_FRAME_WIDTH)), int(video.get(cv2.CAP_PROP_FRAME_HEIGHT)))\n      # print(resolution1)\n\n      # 获取高度\n      height = int(video.get(cv2.CAP_PROP_FRAME_HEIGHT))\n\n      # 获取宽度\n      width = int(video.get(cv2.CAP_PROP_FRAME_WIDTH))\n\n      # 获取帧率\n      fps = video.get(cv2.CAP_PROP_FPS)\n\n      # # 向上取整\n      # fps_a = math.ceil(fps)\n\t\t\t\n      # 保留2位小数\n      fps_a = '%.2f' % fps\n      # \"ffmpeg -i a.mp4 -r 30 b.mp4\"\n      # print(fps_a)\n\n      # 退出cv2\n      video.release()\n      cv2.destroyAllWindows()\n      \n\t\t\t# 开始获取编码器 因为我的本地opencv库版本低，尝试获取编码器格式失败，所以这里用另一种方式获取\n      command = f\"ffprobe -v quiet -select_streams v:0 -show_entries stream=codec_name -of default '{video_path}/v1.mp4'\"\n      result = subprocess.run(command, shell=True, stdout=subprocess.PIPE)\n      encoder = result.stdout.decode().strip()\n      new_encoder = re.search(\"codec_name=(?P<codec_name>.*?)\\n\", encoder)\n\t\t\t\n      # 编写执行命令字符串\n      cmd_str = f\"ffmpeg -i {start_video_path} -vf scale={width}:{height} -r {fps_a} -acodec aac -vcodec {new_encoder.group('codec_name')} {video_path}/xxx.ts\"   # 这里的xxx.ts 就是我们根据主视频修改后的片头\n      # 开始执行命令\n      os.system(cmd_str)\n```\n\n","tags":["python","ffmpeg"],"categories":["视频编辑"]},{"title":"利用m3u8文件机制添加片头","url":"/2023/08/15/利用m3u8文件机制添加片头/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>利用m3u8文件机制添加片头：</strong></font>\n\n<!--more-->\n\n```python\ndef set_header(m3u8_file_path, header_path):\n    \"\"\"\n    :param m3u8_file_path:  m3u8文件所在绝对路径\n    :param header_path:     视频片头播放绝对路径\n    :return:   False 片头已经添加， True 片头添加成功\n    \"\"\"\n    with open(m3u8_file_path, \"r\", encoding='utf-8') as f:\n        all_lines = f.readlines()\n        for i, item in enumerate(all_lines):\n            if \"#EXTINF:\" in item:\n                vernier = i\n                break\n        if header_path in all_lines[vernier+1]:\n            print(f\"已经添加了片头，请勿重复添加\")\n            return False\n        print(vernier)\n        all_lines.insert(vernier, \"#EXTINF:5,\\n\")   # 此处的5是时长\n        all_lines.insert(vernier + 1, f\"{header_path}\\n\")\n    with open(m3u8_file_path, \"w\", encoding='utf-8') as w_f:\n        for k_w in all_lines:\n            w_f.write(f\"{k_w}\")\n    return True\nif __name__ == '__main__':\n    set_header('test.m3u8', \"http://xxx.xxx.com/wuxing.ts\")\n\n```\n\n","tags":["python","ffmpeg"],"categories":["视频编辑"]},{"title":"FFmpeg拼接视频 并设置帧率、分辨率、编码器","url":"/2023/08/15/FFmpeg拼接视频-并设置帧率、分辨率、编码器/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>获取视频参数：</strong></font>\n\n<!--more-->\n\n+ <font color=#f26522 size=4 face=宋体><strong>安装cv2库：</strong></font>\n\n```shell\npip3 install opencv-python==4.4.0.46  # 指定版本 4.4.0.46\n```\n\n+ <font color=#f26522 size=4 face=宋体><strong>分辨率获取：</strong></font>\n\n```python\nimport cv2\nvideo = cv2.VideoCapture(f\"{video_path}/v1.mp4\")\nresolution = (int(video.get(cv2.CAP_PROP_FRAME_WIDTH)), int(video.get(cv2.CAP_PROP_FRAME_HEIGHT)))\nprint(resolution)\n\n# 输出：(1920, 1080)\n```\n\n+ <font color=#f26522 size=4 face=宋体><strong>获取fps值(帧率)：</strong></font>\n\n```python\nimport cv2\nvideo = cv2.VideoCapture(f\"{video_path}/v1.mp4\")\nfps = video.get(cv2.CAP_PROP_FPS)  # 这里可能取到的值是 29.xxx  59.xxx 所以我们需要向上取整\n# 向上取整\nfps_a = math.ceil(fps)\nprint(f\"fps值：{fps_a}\")\n\n# 输出：fps值：60\n```\n\n+ <font color=#f26522 size=4 face=宋体><strong>获取编码器名称</strong></font>\n\n```python\n# ffprobe 是FFmpeg工具集中的一个命令行工具\nfile_path = \"v1.mp4\"\ncommand = f\"ffprobe -v quiet -select_streams v:0 -show_entries stream=codec_name -of default '{file_path}'\"\nresult = subprocess.run(command, shell=True, stdout=subprocess.PIPE)\nencoder = result.stdout.decode().strip()\n# 通过指定 -select_streams v:0 参数选择视频流的第一个视屏流，然后使用 -show_entries stream=codec_name 参数来获取该视频流的编码器名称。最后，我们使用 subprocess.run() 函数来执行命令并获取输出。\n\n# 这里返回的并非我们想要的纯的内容，而是添加了其他东西，所以我们需要在提取一次\nnew_encoder = re.search(\"codec_name=(?P<codec_name>.*?)\\n\", encoder)\nprint(f\"Video Encoder: {new_encoder.group('codec_name')}\")\n```\n\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>FFmpeg拼接视频 并设置帧率、分辨率、编码器</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>是的，FFmpeg提供了一种方法来拼接视频。您可以使用`concat`过滤器来实现这个目的。</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>首先，您需要创建一个文本文件，其中包含要拼接的视频文件的列表。每个文件应在一行上，并按照它们应该出现的顺序排列。</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>例如，假设您有三个视频文件，名为`video1.mp4`、`video2.mp4`和`video3.mp4`，您可以在一个名为`input.txt`的文本文件中按如下方式列出它们：</strong></font>\n\n```txt\nfile 'video1.mp4'\nfile 'video2.mp4'\nfile 'video3.mp4'\n```\n\n<font color=#b0171f size=3 face=宋体><strong>然后，您可以使用以下命令来拼接这些视频文件：</strong></font>\n\n```shell\nffmpeg -f concat -i input.txt -c copy output.mp4\n```\n\n<font color=#f26522 size=4 face=宋体><strong>这里，`-f concat`指定了使用`concat`过滤器，`-i input.txt`指定了输入文件为`input.txt`，`-c copy`表示将输入流的编码直接复制到输出流中，而不需要重新编码。最后，您指定了输出文件名称为`output.mp4`。</strong></font>\n\n<font color=red size=4 face=宋体><strong>请注意，这种方法要求输入的视频文件具有相同的分辨率、帧率和编码器。如果这些参数不同，您可能需要进行一些额外的处理来确保拼接后的视频质量。</strong></font>\n\n<br>\n\n---\n\n<br>\n\n<font color=#00b2c2 size=5 face=宋体><strong>FFmpeg 指定编码器：</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>使用FFmpeg编码器进行音频或视频编码时，可以通过指定`-acodec`或`-vcodec`参数来设置编码器。例如，使用AAC音频编码器可以设置`-acodec aac`，使用H.264视频编码器可以设置`-vcodec h2641。</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>同时，在编码的过程中也可以设置音频或视频的参数，例如码率、通道数、采样率等1。</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>具体使用FFmpeg进行编码器设置的命令和参数可以参考FFmpeg官方文档或相关教程</strong></font>\n","tags":["ffmpeg","拼接视频"],"categories":["视频编辑"]},{"title":"python完美突破tls/ja3","url":"/2023/08/14/python完美突破tls-ja3/","content":"\n\n\n# python完美突破tls/ja3\n\n<!--more-->\n\n#  声明：\n\n本文搬运自csdn>>> https://blog.csdn.net/y_morph/article/details/129487839\n\n以下只是搬运下我公众号的东西。很早就发过了。原帖地址：\n\n[python完美突破tls/ja3 (qq.com)](https://mp.weixin.qq.com/s/GU2AgushvIEtLHtYR7BQzg)\n\n## 已经发公众号的为什么还发csdn\n\n有的圈内朋友，不经过我的允许，删减摘录我公众号的内容，这里就不提谁了，心里清楚，还能获得一些关注和流量。很无语，所以我还不如自己也发发。【猛男落泪】\n\n# 前言\n\n时隔一个多月我又发文了，我还是只发好文的geekbyte，前几天有朋友跟我说我断更一个多月了，哈哈，这不就来了吗\n\n不多废话，进入正题。\n\n如果你偶尔看到这篇文章，而对tls还一脸懵的朋友，可以先阅读以下文章了解一下\n\n```\nhttps://mp.weixin.qq.com/s/Qx7PjnBgrTR30oCurU6CGw\n\nhttps://mp.weixin.qq.com/s/7VJHCl2ht4pjkgIdcOKc5w\n\nJS逆向之猿人学第十九题突破ja3指纹验证\n\n深度剖析ja3指纹及突破\n\nja3指纹补充说明\n————————————————\n```\n\n距离我上次发 [深度剖析ja3指纹及突破](http://mp.weixin.qq.com/s?__biz=MzU0MjUwMTA2OQ==&mid=2247484649&idx=1&sn=42eb5319db1ca830ca81d75218e4c0e4&chksm=fb18f54bcc6f7c5de60395d03650aa7c6a30e37407989c604c31ffa1076d071a32afcb0556c4&scene=21#wechat_redirect) 已时隔半年多（因为之前删过重新发的），我当时抛出一个问题，就是python由于依赖的[openssl](https://so.csdn.net/so/search?q=openssl&spm=1001.2101.3001.7020)库没法高度自定义，导致针对tls那5个组件没法改动太大。\n\n```undefined\nTLSVersion,Ciphers,Extensions,EllipticCurves,EllipticCurvePointFormats\n```\n\n所以目前有些平台如果有tls认证的话，那对python的爬虫就是降维打击。当时的我确实考虑过看自己去编译一个库，然后解除这个针对python的限制。\n\n这个tls，如果我没搞错的话，在国内的圈子，进入大家视线的是青南大佬，然后是猿人学的练习题，接着再是我的深度剖析，惭愧，我提出来的python被降维打击，我自己想搞定，因为各种原因，我没能去研究，而现在已经有大佬搞定了，而且个人觉得十分完美，所以下面我给一个详细的食用流程吧，也算是给它画上一个句号了。\n\n# 目前我知道的针对tls的方案\n\n## 1.hook tls 组件\n\n目前hook方面，比较成熟的方案就是golang的cycletls，这个cycletls是我偶然找到的go库，也算是能解决大部分的平台。但是据我所知，已经有一些风控强的网站可以识别你hook修改过ja3指纹了\n\n## 2.魔改openssl\n\n用志远大佬的方案，重新编译openssl，在编译过程中，改c源码，使每次发起请求的tls指纹随机\n\n个人觉得，按目前的行情，如果是校验很强的tls话，随机的可能不行\n\n想我还被远哥在群里@夸赞过，嘻嘻~\n\n## 3.魔改socket\n\n这个方案是@3301大佬魔改了一套socket收发包流程，是真的牛逼。\n\n在几个月前我跟他私聊过，说好了一起研究的，因为种种原因我放他鸽子了，唉\n\n不过他已经基本搞定，目前已开源：\n\nhttps://github.com/zero3301/pyrequests/\n\n作者自己说了，暂不支持HTTP2和tls1.3和动态tls指纹，他希望有人能跟他一起开发，感兴趣的可以跟他联系。\n\n## 4.重编译chromium\n\n根据我的研究，发现这个方案在针对tls方面，能改的不是很多，底层还是借助了浏览器，还不如直接rpc或者用selenium之类的\n\n### 5.curl-impersonate+pycurl\n\n**这个方案我自认为是相对来说最完美的方案**\n\n也是我之前想过准备要走的研究方向，可惜因为种种原因，没有继续，理论上的思路跟这个很类似，这里就暂不透漏了。\n\ncurl-impersonate，就是用一个大佬编译好的跟浏览器完全一致的curl魔改版\n\nhttps://github.com/lwthiker/curl-impersonate\n\n其中，curl-impersonate作者自己也写过相关的文章，想了解原理的可以看看，我看完之后真的受益匪浅，对tls的理解更深入了，如果你有意向也想自己编译一个，个人十分建议阅读，反复阅读\n\nhttps://lwthiker.com/\n\npycurl就是借助curl发起请求的库\n\nhttps://github.com/pycurl/pycurl # 官方版\n\nhttps://github.com/ycq0125/pycurl  # 肝总魔改版本\n\n这里我推荐用肝总的版本。\n\n在编译安装pycurl时指定的curl是魔改好的curl-impersonate，这样python就可以发起跟浏览器完全一致的tls，而且支持自定义tls算法套件。\n\n这个方案唯一的缺点就是，**编译过程相对复杂**，没法开箱即用，在不同的系统平台下就会遇到各种各样的问题\n\nok，以下开始我的编译血泪史吧，带着大家一起编译一下curl-impersonate+pycurl。\n\n我选用的环境是在win上用vm虚拟机软件里的linux，这样，即使我有一个步骤错了，可以回到正常的还原点上，节省很多时间。以下用到的图片，由于是我在编译时在每个步骤的截图保留的，所以一会儿是kali界面，一会儿是ubuntu界面，这个不影响，实际你跟着我操作能编译成功即可（其实是真的不想再重新走一遍编译了）\n\n# 编译curl-impersonate\n\n官方教程，里面给了ubuntu、centos、macos的编译过程，当然如果你想快速用上，可以用该作者直接编译好的docker，但是如果你还要编译pycurl的话，那就得自编译了\n\nhttps://github.com/lwthiker/curl-impersonate/blob/main/INSTALL.md\n\n**注意：不建议用kali**\n\n我刚开始使用的是kali linux，为了图方便，直接用的肉师傅的r0env，反正我是没成功（不是说肉师傅的r0env有问题，我咋可能这么冒犯呢，我中途踩坑了很多次，估计装了有冲突的依赖所以导致不行）\n\nkali编译curl-impersonate是没问题的，结果到后面编译pycurl就会有问题：\n\n![img](https://s2.loli.net/2023/08/14/uxwrTRN65IeWoAh.png)\n\n这个问题我查阅了大量代码，反正就是提示源码的这一行有问题，大概意思是说事先没声明使用\n\n![img](https://s2.loli.net/2023/08/14/aTSJs5uveVOdl6Z.png)\n\n各种方法都试了，有的说是openssl和curl版本太老了，但是我的是最新的，基本不是这个问题，所以，没法了，一度让我心态没了，我放弃用kali。\n\n去官网下载的最新的ubuntu22.04lts（18版本也可以），安装在虚拟机里，网络，proxychains啥的基本配置好了。重新来吧\n\n## 1.安装需要的环境依赖\n\n这个步骤跟官方教程一样，但是多了些其他的步骤：\n\n```\nsudo apt install build-essential pkg-config cmake ninja-build curl autoconf automake libtool\n```\n\n安装完之后，还要再输入以下命令安装：\n\n```\n# 多了以下命令\nsudo apt upgrade build-essential pkg-config cmake ninja-build curl autoconf automake libtool\n```\n\n注意，检查下你系统里有没有支持HTTP2的库，要不然还是有问题，curl-impersonate可以编译，pycurl也可以编译，但是不支持HTTP2，然后只要设置HTTP2的就会报如下错：\n\n![img](https://s2.loli.net/2023/08/14/TkyIC5bdsfOqXue.png)\n\n这些坑我都踩过了，一想起编译失败的时候就心里苦，所以提前跟你说好在编译之前的操作\n\n怎么装HTTP2库，先用apt search http2\n\n然后会搜到一堆，这里就不贴上占篇幅了。\n\n我刚开始是安装了这些：\n\n```\nsudo apt-get install nghttp2 libnghttp2-dev\n```\n\n后面实在是不放心，因为真的不想重来了，都记不清楚我重试了多少次了（哭~）\n\n我索性又把自己感觉可能会用到的库都装了\n\n```\nsudo apt-get install  gogottrpc  libghc-http2-prof  libghc-wai-http2-extra-dev libghc-wai-http2-extra-prof libprotocol-http2-perl librust-curl+http2-dev librust-curl-sys+http2-dev librust-curl-sys+http2-dev ruby-protocol-http2\n```\n\n好了，有了以上的操作，再继续执行后续步骤，这个步骤没啥要注意的，直接能装上\n\n```\nsudo apt install python3-pip libnss3\npip install gyp-next\nexport PATH=\"$PATH:~/.local/bin\" # Add gyp to PATH\n# For the Chrome version only\nsudo apt install golang-go unzip\n```\n\n## 2.拉取代码\n\n也没啥要特别注意的\n\n```\ngit clone https://github.com/lwthiker/curl-impersonate.git\ncd curl-impersonate\n```\n\n如果你没装git会报错，这个就不多说了：sudo apt get git\n\n如果提示无法识别github.com的域名，vim /etc/resolv.conf\n\n去里面，把nameserver改为如下，保存退出，其他别改\n\n```\nnameserver 8.8.8.8\nnameserver 114.114.114.114\n```\n\n如果报错：\n\n```\nfatal: unable to access 'https://github.com/lwthiker/curl-impersonate.git/': gnutls_handshake() failed: The TLS connection was non-properly terminated.\n```\n\n终端设置下git的代理：\n\n```\ngit config --global http.https://github.com.proxy http://192.168.18.231:7890\ngit config --global https.https://github.com.proxy https://192.168.18.231:7890\n```\n\n再次执行，即可拉取成功\n\n![img](https://s2.loli.net/2023/08/14/3kpzrnsKBlW7OU4.png)\n\n下面这个步骤必须先后顺序执行：\n\n```\nautoconf\nmkdir build && cd build\n../configure\n```\n\n## 3.开始编译\n\n```\n# Build and install the Firefox version\nmake firefox-build\nsudo make firefox-install\n# Build and install the Chrome version\nmake chrome-build\nsudo make chrome-install\n# You may need to update the linker's cache to find libcurl-impersonate\nsudo ldconfig  # 这个步骤必须要，不然用不了\n```\n\n注意，使用make命令的时候，会去下载需要的文件，如果报错：\n\n```\ncurl: (7) Failed to connect to github.com port 443 after 6 ms: Connection refused\n```\n\n说明你网络不行，可以加上proxychains\n\n```\nproxychains make firefox-build\n```\n\n配置proxychains，先用apt 安装，然后在win电脑开启你的科学软件，\n\n配置，vim /etc/proxychains.conf ，把dns注释掉，到文件最底部，设置你win电脑的ip，科学软件暴露的端口即可\n\n![img](https://s2.loli.net/2023/08/14/86ME9HBUljbm1oz.png)\n\n![img](https://s2.loli.net/2023/08/14/tDPGC7ybScu8fH3.png)\n\n这里就不多介绍了，具体自己查proxychains怎么配置吧\n\n接着再次执行build命令，如果报错：\n\n```\nCMake Error at CMakeLists.txt:486 (message):\n  Unknown processor:[proxychains] DLL init: proxychains-ng 4.14                        \n                                                                                       \n  [proxychains] DLL init: proxychains-ng 4.14                                          \n                                                                                       \n  x86_64   \n```\n\n```\n--   No package 'libunwind-generic' found\n```\n\n执行以下解决：\n\n```\nsudo apt-get update -y\nsudo apt-get install -y libunwind-dev\n```\n\n再次执行build，没报错则构建完毕，接着再执行安装命令：\n\n```\nsudo make firefox-install\n```\n\n![img](https://s2.loli.net/2023/08/14/zTOe3mjMxPNLKUC.png)\n\n![img](https://s2.loli.net/2023/08/14/UP1DsSLlbInhXoj.png)\n\n接着编译chrome，操作同上\n\n```\nmake chrome-build  # 如果太慢加上proxychains\nsudo make chrome-install\n```\n\n如果在build的时候报错：\n\n```\nFAILED: crypto_test_data.cc /root/Desktop/curl-impersonate/build/boringssl/build/crypto_test_data.cc \ncd /root/Desktop/curl-impersonate/build/boringssl && /usr/bin/go run util/embed_test_data.go -file-list /root/Desktop/curl-impersonate/build/boringssl/build/embed_test_data_args.txt > /root/Desktop/curl-impersonate/build/boringssl/build/crypto_test_data.cc\n[proxychains] DLL init: proxychains-ng 4.14\n[proxychains] DLL init: proxychains-ng 4.14\ngo: golang.org/x/crypto@v0.0.0-20210513164829-c07d793c2f9a: Get \"https://proxy.golang.org/golang.org/x/crypto/@v/v0.0.0-20210513164829-c07d793c2f9a.mod\": dial tcp 142.251.42.241:443: i/o timeout\n```\n\n是因为借用了go的库，使用命令：\n\n```\ngo env -w GOPROXY=https://goproxy.cn\n```\n\n继续编译、安装\n\n完成之后再继续执行下面的命令，**注意下面最后一个命令的rm， 如果你只是要编译curl-impersonate，那可以删除，如果你还要编译pycurl，千万别执行删除**\n\n```\nsudo ldconfig \n# Optionally remove all the build files\ncd ../ && rm -Rf build   # 注意了\n```\n\n## 4.编译完成测试\n\n整个过程安装完后，输入curl_  按tab键，有下面的说明编译完成\n\n![img](https://s2.loli.net/2023/08/14/sYXNwUcOzbdmkJD.png)\n\n![img](https://s2.loli.net/2023/08/14/9y61w3lX2hsvHdG.png)\n\n装完了测试：\n\n```\ncurl-impersonate-ff https://ja3er.com/json\ncurl-impersonate-chrome https://ja3er.com/json\n```\n\n![img](https://s2.loli.net/2023/08/14/NwegzJxKLbAkBO6.png)\n\ncurl-impersonate编译完了\n\n如果你执行的时候报错如下：\n\n```\n/usr/local/bin/curl_ff98: line 10: /usr/local/bin/curl-impersonate-ff: No such file or directory\n```\n\n重来吧\n\n\n\n\n# 编译pycurl\n\n\n\n## 1.环境准备\n\n\n\n首先确认你刚才编译的curl-impersonate，是否符合编译pycurl的要求\n\n```undefined\ncurl-impersonate-chrome -V\n```\n\n![img](https://s2.loli.net/2023/08/14/HBfa6tn7kAsRLcU.png)\n\n如果有对应的ssl库和nghttp2，那就可以。这两个缺一个都不行，否则重新编译curl-impersonate吧\n\n## 2.拉取代码\n\n建议不要用官方的那个pycurl，用spike肝总魔改过的\n\n```\ngit clone https://github.com/ycq0125/pycurl\n```\n\n那么肝总魔改了哪些呢？我问过他本人，跟官方的比，他就改了这些，个人建议可以好好读一下他的代码：\n\n```\nhttps://github.com/pycurl/pycurl/commit/d0dbf9569f1440bdfe452000ff3073336061e24f\n```\n\n如果无法正常拉取，按照上面拉取curl-impersonate的方法同样操作即可\n\n## 3.改源码\n\n这个步骤就是为了指定刚才编译的curl-impersonate的\n\n```\ncd pycurl/src\nvi pycurl.h\n```\n\n其他不用动，改下面这里就行，把这个路径改为你实际的路径，也就是刚才编译好的curl-impersonate的build，改之前：\n\n![img](https://s2.loli.net/2023/08/14/mhM4ftYPu9W7c2B.png)\n\n改之后：\n\n![img](https://s2.loli.net/2023/08/14/maU6JGWF1H8s7OV.png)\n\n保存退出\n\n\n\n## 4.开始编译\n\n```\npython3 setup.py install --curl-config={实际的curl路径}/curl-impersonate-chrome-config --openssl-dir={实际的curl路径}/curl-impersonate/build/boringssl/build\n```\n\n比如我的：\n\n```\npython3 setup.py install --curl-config=/home/async/桌面/curl-impersonate-chrome-config --openssl-dir=/home/async/桌面/curl-impersonate/build/boringssl/build\n```\n\n如果报这个错，权限问题\n\n![img](https://s2.loli.net/2023/08/14/3wtsRYygUuAChGN.png)\n\n加上sudo再次执行，以下就是编译完了\n\n![img](https://s2.loli.net/2023/08/14/OtTwck8ugNodA3H.png)\n\n## 5.测试执行\n\n有个地址可以暂时替代ja3官网作为参考（最近发现ja3官网经常崩）\n\n```\nhttps://tls.peet.ws/api/all\n```\n\n先用curl请求：\n\n![img](https://s2.loli.net/2023/08/14/H312JsMORSQCcXe.png)\n\n现在用python请求下，也就是pycurl文件里的那个test.py文件\n\n![img](https://s2.loli.net/2023/08/14/lJ2bYkeWDLsVXv7.png)\n\n执行结果里，如果看不到这个nghttp2，就不支持HTTP2，你又得整个过程重来了\n\n可以看看test.py代码，其实跟之前的python改tls算法区别不大，只是现在用的是编译过的curlAdapter。\n\n![img](https://s2.loli.net/2023/08/14/EsmoA2VaRJCn6hk.png)\n\n光能跑没有用对吧，要看tls真的被改了没有，对比下：\n\n![img](https://s2.loli.net/2023/08/14/7qXICDGJKNVsbAU.png)\n\n一模一样，牛逼了\n\n## 6.实际案例测试\n\n还是那个不可说的地址，先用curl-impersonate看看，能访问哈：\n\n![img](https://s2.loli.net/2023/08/14/icGd5eu7RxUXOTA.png)\n\n用python请求看看：\n\n![img](https://s2.loli.net/2023/08/14/HOzQ8d7PRGNtovT.png)\n\n起飞！！！！\n\n## 7.自定义tls算法\n\n你可以对照着已有的tls算法，自定义了\n\n主要就是改这里：\n\n![img](https://s2.loli.net/2023/08/14/hJ4Ui3zlmYASaBe.png)\n\n```\nhttps://hpbn.co/transport-layer-security-tls/#tls-session-resumption\nhttp://pycurl.io/docs/latest/quickstart.html\nhttps://curl.se/libcurl/c/CURLOPT_HTTP_VERSION.html\n```\n\n反正想怎么改怎么改，你只要别给一个tls不认识的算法就行，起飞吧\n\n后期有空我把我这个编译好的环境，打成docker镜像发出来，你们就不用再走我走过的路了，当然，有时间才行，嘻嘻\n\n![img](https://s2.loli.net/2023/08/14/utcReZIokFrEyqp.jpg)\n\n# 编译其他浏览器\n\n上面的步骤是编译指定curl-chrome的，你可以重新拉下pycurl，然后重新编译，指定为firefox，edage，safari的路径即可，流程也是一样的，这里就不细说了\n\n# 踩坑总结\n\n以下是我安装过程中遇到过的坑，仅供各位朋友参考：\n\n```\n1.fatal: unable to access 'https://github.com/lwthiker/curl-impersonate.git/': gnutls_handshake() failed: The TLS connection was non-properly terminated.\n解决办法：\ngit config --global http.https://github.com.proxy http://192.168.18.231:7890\ngit config --global https.https://github.com.proxy https://192.168.18.231:7890\n```\n\n```\n2.curl: (7) Failed to connect to github.com port 443 after 6 ms: Connection refused\n解决办法：\nproxychains make firefox-build   \n编译的时候虽然会去下载各种库，如果中途报curl的错就不要用proxychains \n```\n\n```\n3.curl: (35) error:0A000126:SSL routines::unexpected eof while reading\n解决办法：\nhttps://blog.csdn.net/u011700186/article/details/109452684\n```\n\n```\n4.install /root/Desktop/curl-impersonate/build/../firefox/curl_ff* /usr/local/bin\nbash: line 1: cd: curl-7.81.0: No such file or directory\n```\n\n```\ncurl_chrome101 https://www.baidu.com\n/usr/local/bin/curl-impersonate-chrome: error while loading shared libraries: libcurl-impersonate-chrome.so.4: cannot open shared object file: No such file or directory\n```\n\n```\n解决办法：\nldconfig\n```\n\n```\n5.CMake Error at CMakeLists.txt:486 (message):\n  Unknown processor:[proxychains] DLL init: proxychains-ng 4.14                        \n                                                                                       \n  [proxychains] DLL init: proxychains-ng 4.14                                          \n                                                                                       \n  x86_64 \n```\n\n```\n--   No package 'libunwind-generic' found\n```\n\n```\n解决办法：\nsudo apt-get update -y\nsudo apt-get install -y libunwind-dev\n```\n\n```\n6.FAILED: crypto_test_data.cc /root/Desktop/curl-impersonate/build/boringssl/build/crypto_test_data.cc \ncd /root/Desktop/curl-impersonate/build/boringssl && /usr/bin/go run util/embed_test_data.go -file-list /root/Desktop/curl-impersonate/build/boringssl/build/embed_test_data_args.txt > /root/Desktop/curl-impersonate/build/boringssl/build/crypto_test_data.cc\n[proxychains] DLL init: proxychains-ng 4.14\n[proxychains] DLL init: proxychains-ng 4.14\ngo: golang.org/x/crypto@v0.0.0-20210513164829-c07d793c2f9a: Get \"https://proxy.golang.org/golang.org/x/crypto/@v/v0.0.0-20210513164829-c07d793c2f9a.mod\": dial tcp 142.251.42.241:443: i/o timeout\n```\n\n```\n解决办法：\ngo env -w GOPROXY=https://goproxy.cn\n```\n\n```\n7./usr/local/bin/curl_ff98: line 10: /usr/local/bin/curl-impersonate-ff: No such file or directory\n```\n\n```\n这是出错了，重来吧\n```\n\n```\n8.src/easyopt.c: In function ‘do_curl_setopt_string_impl’:\nsrc/easyopt.c:215:10: error: ‘CURLOPT_SSL_CERT_COMPRESSION’ undeclared (first use in this function); did you mean ‘CURLOPT_SSH_COMPRESSION’?\n  215 |     case CURLOPT_SSL_CERT_COMPRESSION:\n      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~\n      |          CURLOPT_SSH_COMPRESSION\n```\n\n```\n更新openssl，重新安装\nexport OPENSSL=/usr/local/openssl/bin\n```\n\n```\n不行就重来\n```\n\n```\n9.src/pycurl.h:5:10: fatal error: Python.h: No such file or directory \n```\n\n```\n换ubuntu ,kali不行\n```\n\n```\n10.\nTraceback (most recent call last):\n  File \"/home/async/桌面/pycurl/test2.py\", line 19, in <module>\n    curl.setopt(curl.HTTP_VERSION, curl.CURL_HTTP_VERSION_2_0)\npycurl.error: (1, '')\n```\n\n```\n原因是不支持HTTP2，https://github.com/pycurl/pycurl/issues/477\n```\n\n```\n解决办法：\n需要安装nghttp2 ， 这个在编译curl前就要安装的\nsudo apt-get install libnghttp2-dev\nsudo apt-get install nghttp2\n```\n\n```\nsudo apt-get install  gogottrpc  libghc-http2-prof  libghc-wai-http2-extra-dev libghc-wai-http2-extra-prof libprotocol-http2-perl librust-curl+http2-dev librust-curl-sys+http2-dev librust-curl-sys+http2-dev ruby-protocol-http2\n```\n\n```\n这是某大佬遇到的报错：\n```\n\n![img](https://s2.loli.net/2023/08/14/8EhIrYsDuzS1Fq7.png)\n\n这个是系统问题，换系统镜像吧\n\n目前我知道的可用的镜像：\n\n```\n1.\n No LSB modules are available.\n Distributor ID:  Debian\n Description:  Debian GNU/Linux 10 (buster)\n Release:  10\n Codename:  buster\n \n 2.ubuntu18.04\n \n 3.ubuntu22.04\n```\n\n# 结语\n\n## 1.在编译的时候别慌，遇到问题别乱，一点点排查\n\n如果遇到了我总结的里面没有的坑，多点耐心，多查资料，找原因，解决它\n\n我就为了编译好，设置了这么多还原点，所以你知道我经历了多少吗，从崩溃中重新放平心态重来（期间非常感谢spike肝总帮我排查问题）\n\n![img](https://s2.loli.net/2023/08/14/SpEYioM8GWds1D4.png)\n\n","tags":["python","逆向","Cloudflare","tls/ja3"],"categories":["逆向_反爬"]},{"title":"ffmpeg 音视频学习之ffmpeg常用基础命令整理","url":"/2023/08/02/ffmpeg-音视频学习之ffmpeg常用基础命令整理/","content":"\n\n\n# <font color=#00b2c2 size=5 face=宋体><strong>ffmpeg 音视频学习之ffmpeg常用基础命令整理</strong></font>\n\n<!--more-->\n\n基于windows环境安装好必要的[ffmpeg](https://so.csdn.net/so/search?q=ffmpeg&spm=1001.2101.3001.7020)后，对ffmpeg基础命令进行一些了解：\n\n原文链接：https://blog.csdn.net/yun6853992/article/details/121870328\n\n## 1、ffmpeg查看版本：\n\n```python\nffmpeg -version\n```\n\n## 2、ffmpeg查询命令：\n\n```python\n# 基本信息：ffmpeg -h\n# 高级信息：ffmpeg -h long\n# 所有信息：ffmpeg -h full\n\n# ffplay查看帮助： ffplay -h\n# ffprobe查看帮助： ffprobe -h\n\n# ffmpeg具体分类支持的参数查看帮助： ffmepg -h type=name\n# 比如：\t\t\nffmpeg -h muxer=flv\nffmpeg -h filter=atempo (atempo调整音频播放速率)\nffmpeg -h encoder=libx264\n```\n\n## 3、ffmpeg分类查询命令：\n\n![](https://s2.loli.net/2023/08/02/V8OkslCpx1guJvy.png)\n\n```python\n-version \t# 显示版本 \n-buildconf \t# 显示编译配置 \n-protocols \t# 显示可用的协议 \n-formats \t# 显示可用格式 (muxers+demuxers) \n\n-filters \t# 显示可用的过滤器 \n-muxers \t# 显示可用复用器 \n\n-demuxers \t# 显示可用解复用器 \n-codecs \t# 显示可用编解码器 (decoders+encoders)\n-decoders \t# 显示可用解码器\n-encoders \t# 显示可用编码器\n-layouts \t# 显示标准声道名称 \n\n-pix_fmts \t\t# 显示可用的像素格式 \n-sample_fmts \t# 显示可用的音频采样 格式 \n-bsfs \t\t\t# 显示可用比特流filter \n-colors \t\t# 显示可用的颜色名称 \n```\n\n## 4、ffmpeg基础命令：\n\n<font color=#f26522 size=3 face=宋体><strong>更多参考： http://www.ffmpeg.org/ffmpeg.html</strong></font>\n\n```python\n # 主要参数：\n#\t◼ -i 设定输入流\n#\t◼ -f 设定输出格式(format)\n#\t◼ -ss 开始时间\n#\t◼ -t 时间长度\n\t\n# 音频参数：\n#\t◼ -aframes \t\t设置要输出的音频帧数\n#\t◼ -b:a \t\t\t音频码率\n#\t◼ -ar \t\t\t设定采样率\n#\t◼ -ac\t\t\t设定声音的Channel数\n#\t◼ -acodec \t\t设定声音编解码器，如果用copy表示原始编解码数据必须被拷贝。\n#\t◼ -an \t\t\t不处理音频\n#\t◼ -af \t\t\t音频过滤器\nffmpeg -i test.mp4 -b:a 192k -ar 48000 -ac 2 -acodec libmp3lame -aframes 200 out2.mp3\n\n# 视频参数：\n#\t◼ -vframes \t\t\t设置要输出的视频帧数\n#\t◼ -b \t\t\t\t设定视频码率\n#\t◼ -b:v \t\t\t\t视频码率\n#\t◼ -r \t\t\t\t设定帧速率\n#\t◼ -s \t\t\t\t设定画面的宽与高\n#\t◼ -vn \t\t\t\t不处理视频\n#\t◼ -aspect aspect \t设置横纵比 4:3 16:9 或 1.3333 1.7777\n#\t◼ -vcodec \t\t\t设定视频编解码器，如果用copy表示原始编解码数据必须被拷贝。\n#\t◼ -vf \t\t\t\t视频过滤器\nffmpeg -i test.mp4 -vframes 300 -b:v 300k -r 30 -s 640x480 -aspect 16:9 -vcodec libx265\n\n```\n\n## 5、ffmepg使用命令提取音频或视频：\n\n```python\n# 提取音视频数据：\n# ◼ 保留封装格式\n\tffmpeg -i test.mp4 -acodec copy -vn audio.mp4\n\tffmpeg -i test.mp4 -vcodec copy -an video.mp4\n# ◼ 提取视频\n\t保留编码格式：ffmpeg -i test.mp4 -vcodec copy -an test_copy.h264\n\t强制格式：ffmpeg -i test.mp4 -vcodec libx264 -an test.h264\n# ◼ 提取音频\n\t保留编码格式：ffmpeg -i test.mp4 -acodec copy -vn test.aac\n\t强制格式：ffmpeg -i test.mp4 -acodec libmp3lame -vn test.mp3\n\t\n# 提取像素格式和PCM数据：\n# ◼ 提取YUV\n# \t◼ 提取3秒数据，分辨率和源视频一致\n\t\tffmpeg -i test_1280x720.mp4 -t 3 -pix_fmt yuv420p yuv420p_orig.yuv\n# \t◼ 提取3秒数据，分辨率转为320x240\n\t\tffmpeg -i test_1280x720.mp4 -t 3 -pix_fmt yuv420p -s 320x240 yuv420p_320x240.yuv\n# ◼ 提取RGB\n# \t◼ 提取3秒数据，分辨率转为320x240\n\t\tffmpeg -i test.mp4 -t 3 -pix_fmt rgb24 -s 320x240 rgb24_320x240.rgb\n# ◼ RGB和YUV之间的转换\n\tffmpeg -s 320x240 -pix_fmt yuv420p -i yuv420p_320x240.yuv -pix_fmt rgb24 rgb24_320x240_2.rgb\n\t\n# ◼ 提取PCM\n\tffmpeg -i buweishui.mp3 -ar 48000 -ac 2 -f s16le 48000_2_s16le.pcm\n\tffmpeg -i buweishui.mp3 -ar 48000 -ac 2 -sample_fmt s16 out_s16.wav\n\tffmpeg -i buweishui.mp3 -ar 48000 -ac 2 -codec:a pcm_s16le out2_s16le.wav\n\tffmpeg -i buweishui.mp3 -ar 48000 -ac 2 -f f32le 48000_2_f32le.pcm\n\tffmpeg -i test.mp4 -t 10 -vn -ar 48000 -ac 2 -f f32le 48000_2_f32le_2.pcm\n\n```\n\n## 6、ffmpeg命令转封装：\n\n```python\n# ◼ 保持编码格式：\n\tffmpeg -i test.mp4 -vcodec copy -acodec copy test_copy.ts\n\tffmpeg -i test.mp4 -codec copy test_copy2.ts\n# ◼ 改变编码格式：\n\tffmpeg -i test.mp4 -vcodec libx265 -acodec libmp3lame out_h265_mp3.mkv\n\t\n# ◼ 修改帧率：\n\tffmpeg -i test.mp4 -r 15 -codec copy output.mp4 # (错误命令)\n\tffmpeg -i test.mp4 -r 15 output2.mp4\n# ◼ 修改视频码率：\n\tffmpeg -i test.mp4 -b 400k output_b.mkv # （此时音频也被重新编码）\n# ◼ 修改视频码率：\n\tffmpeg -i test.mp4 -b:v 400k output_bv.mkv\n\t\n# ◼ 修改音频码率：\n\tffmpeg -i test.mp4 -b:a 192k output_ba.mp4\n# \t如果不想重新编码video，需要加上-vcodec copy\n# ◼ 修改音视频码率：\n\tffmpeg -i test.mp4 -b:v 400k -b:a 192k output_bva.mp4\n\t\n# ◼ 修改视频分辨率：\n\tffmpeg -i test.mp4 -s 480x270 output_480x270.mp4\n# ◼ 修改音频采样率: \n\tffmpeg -i test.mp4 -ar 44100 output_44100hz.mp4\n\n```\n\n## 7、ffmpeg过滤器命令：\n\n```python\n# 1：生成测试文件\n\n# ◼ 找三个不同的视频每个视频截取10秒内容\n\tffmpeg -i 沙海02.mp4 -ss 00:05:00 -t 10 -codec copy 1.mp4\n\tffmpeg -i 复仇者联盟3.mp4 -ss 00:05:00 -t 10 -codec copy 2.mp4\n\tffmpeg -i 红海行动.mp4 -ss 00:05:00 -t 10 -codec copy 3.mp4\n# \t\t如果音视频格式不统一则强制统一为 -vcodec libx264 -acodec aac\n# ◼ 将上述1.mp4/2.mp4/3.mp4转成ts格式\n\tffmpeg -i 1.mp4 -codec copy -vbsf h264_mp4toannexb 1.ts\n\tffmpeg -i 2.mp4 -codec copy -vbsf h264_mp4toannexb 2.ts\n\tffmpeg -i 3.mp4 -codec copy -vbsf h264_mp4toannexb 3.ts\n# ◼ 转成flv格式\n\tffmpeg -i 1.mp4 -codec copy 1.flv\n\tffmpeg -i 2.mp4 -codec copy 2.flv\n\tffmpeg -i 3.mp4 -codec copy 3.flv\n# 分离某些封装格式（例如MP4/FLV/MKV等）中的H.264的时候，需要首先写入SPS和PPS，否则会导致分离出来的数据没有SPS、PPS而无法播放。\n# \tH.264码流的SPS和PPS信息存储在AVCodecContext结构体的extradata中。\n# \t需要使用ffmpeg中名称为“h264_mp4toannexb”的bitstream filter处理\n\t\n# 2：开始拼接文件：\n# ◼ 以MP4格式进行拼接\n\t方法1：ffmpeg -i \"concat:1.mp4|2.mp4|3.mp4\" -codec copy out_mp4.mp4 \n\t方法2：ffmpeg -f concat -i mp4list.txt -codec copy out_mp42.mp4\n# \t自己新建 mp4list.txt,在其中实现 file '1.mp4'\n\t\n\t\n# ◼ 以TS格式进行拼接\n\t方法1：ffmpeg -i \"concat:1.ts|2.ts|3.ts\" -codec copy out_ts.mp4 \n\t方法2：ffmpeg -f concat -i tslist.txt -codec copy out_ts2.mp4\n# \t自己新建 tslist.txt,在其中实现 file '1.ts'\n\t\n# ◼ 以FLV格式进行拼接\n\t方法1：ffmpeg -i \"concat:1.flv|2.flv|3.flv\" -codec copy out_flv.mp4 \n\t方法2：ffmpeg -f concat -i flvlist.txt -codec copy out_flv2.mp4\n\n# 需要验证最后结果是否正常：\n# ◼ 方法1只适用部分封装格式，比如TS\n# ◼ 建议：\n# \t（1）使用方法2进行拼接\n# \t（2）转成TS格式再进行拼接\n\n# 3：测试不同编码拼接：\n# ◼ 修改音频编码\n\tffmpeg -i 2.mp4 -vcodec copy -acodec ac3 -vbsf h264_mp4toannexb 2.ts\n\tffmpeg -i \"concat:1.ts|2.ts|3.ts\" -codec copy out1.mp4 结果第二段没有声音\n# ◼ 修改音频采样率\n\tffmpeg -i 2.mp4 -vcodec copy -acodec aac -ar 96000 -vbsf h264_mp4toannexb 2.ts\n\tffmpeg -i \"concat:1.ts|2.ts|3.ts\" -codec copy out2.mp4 第二段播放异常\n# ◼ 修改视频编码格式\n\tffmpeg -i 1.mp4 -acodec copy -vcodec libx265 1.ts\n\tffmpeg -i \"concat:1.ts|2.ts|3.ts\" -codec copy out3.mp4 \n# ◼ 修改视频分辨率\n\tffmpeg -i 1.mp4 -acodec copy -vcodec libx264 -s 800x472 -vbsf h264_mp4toannexb 1.ts\n\tffmpeg -i \"concat:1.ts|2.ts|3.ts\" -codec copy out4.mp4\n# ◼ 注意：\n# \t把每个视频封装格式也统一为ts，拼接输出的时候再输出你需要的封装格式，比如MP4\n# \t视频分辨率可以不同，但是编码格式需要统一\n# \t音频编码格式需要统一，音频参数(采样率/声道等)也需要统一\n\n```\n\n## 8、ffmpeg 图片与视频互转：\n\n```python\n# ◼ 截取一张图片\n\tffmpeg -i test.mp4 -y -f image2 -ss 00:00:02 -vframes 1 -s 640x360 test.jpg\n\tffmpeg -i test.mp4 -y -f image2 -ss 00:00:02 -vframes 1 -s 640x360 test.bmp\n\t\t-i 输入\n\t\t-y 覆盖\n\t\t-f 格式\n\t\timage2 一种格式\n\t\t-ss 起始值\n\t\t-vframes 帧 如果大于1 那么 输出加%03d test%03d.jpg \n\t\t-s 格式大小size\n# ◼ 转换视频为图片（每帧一张图):\n\tffmpeg -i test.mp4 -t 5 -s 640x360 -r 15 frame%03d.jpg \n# ◼ 图片转换为视频:\n\tffmpeg -f image2 -i frame%03d.jpg -r 25 video.mp4\n\n\n# ◼ 从视频中生成GIF图片\n\tffmpeg -i test.mp4 -t 5 -r 1 image1.gif\n\tffmpeg -i test.mp4 -t 5 -r 25 -s 640x360 image2.gif\n# ◼ 将 GIF 转化为 视频\n\tffmpeg -f gif -i image2.gif image2.mp4\n\n```\n\n# 9、ffmpeg 视频录制命令：\n\n<font color=#b0171f size=2 face=宋体><strong>有时候写入MP4文件会不成功，改成flv就好</strong></font>\n\n```python\n# ◼ 先安装dshow软件 Screen Capturer Recorder，\n# \t项目地址：https://sourceforge.net/projects/screencapturer/files/ \n# \t然后查看可用设备名字：\n\t\tffmpeg -list_devices true -f dshow -i dummy\n\n# ◼ 录制视频（默认参数）\n\t桌面：\t\t ffmpeg -f dshow -i video=\"screen-capture-recorder\" v-out.mp4 \n\t摄像头： \t ffmpeg -f dshow -i video=\"Integrated Webcam\" -y v-out2.flv (要根据自己摄像头名称)\n# ◼ 录制声音（默认参数）\n\t系统声音：\t\t\tffmpeg -f dshow -i audio=\"virtual-audio-capturer\" a-out.aac\n\t系统+麦克风声音：\t  ffmpeg -f dshow -i audio=\"麦克风 (Realtek(R) Audio)\" -f dshow -i audio=\"virtual-audio-capturer\" -filter_complex amix=inputs=2:duration=first:dropout_transition=2 a-out2.aac\n\n# ◼ 查看视频录制的可选参数\n\tffmpeg -f dshow -list_options true -i video=\"screen-capture-recorder\"\t\n# ◼ 查看音频录制的可选参数\n\tffmpeg -f dshow -list_options true -i audio=\"virtual-audio-capturer\"\n\tffmpeg -f dshow -list_options true -i audio=\"麦克风 (Realtek(R) Audio)\"\n\n# 指定参数录制音视频：\n\t◼ ffmpeg -f dshow -i audio=\"麦克风 (Realtek(R) Audio)\" -f dshow -i audio=\"virtual-audio-capturer\" -filter_complex amix=inputs=2:duration=first:dropout_transition=2 -f dshow -video_size 1920x1080 -framerate 15 -pixel_format yuv420p -i video=\"screen-capture-recorder\" -vcodec h264_qsv -b:v 3M -y av-out.flv\n\t◼ ffmpeg -f dshow -i audio=\"麦克风 (Realtek(R) Audio)\" -f dshow -i audio=\"virtual-audio-capturer\" -filter_complex amix=inputs=2:duration=first:dropout_transition=2 -f dshow -i video=\"screen-capture-recorder\" -vcodec h264_qsv -b:v 3M -r 15 -y av-out2.mp4\n\t◼ ffmpeg -f dshow -i audio=\"麦克风 (Realtek(R) Audio)\" -f dshow -i audio=\"virtual-audio-capturer\" -filter_complex amix=inputs=2:duration=first:dropout_transition=2 -f dshow -framerate 15 -pixel_format yuv420p -i video=\"screen-capture-recorder\" -vcodec h264_qsv -b:v 3M -r 15 -y av-out3.mp4\n```\n\n## 10、ffmpeg直播推流/拉流命令：\n\n```python\n# ◼ 直播拉流\n\tffplay rtmp://server/live/streamName \n\tffmpeg -i rtmp://server/live/streamName -c copy dump.flv\n\t\t对于不是rtmp的协议 -c copy要谨慎使用\n# ◼ 可用地址\n\tHKS：rtmp://live.hkstv.hk.lxdns.com/live/hks2\n\t大熊兔(点播)：rtsp://184.72.239.149/vod/mp4://BigBuckBunny_175k.mov\n\tCCTV1高清：http://ivi.bupt.edu.cn/hls/cctv1hd.m3u8\n\t\tffmpeg -i http://ivi.bupt.edu.cn/hls/cctv1hd.m3u8 -c copy cctv1.ts\n\t\tffmpeg -i http://ivi.bupt.edu.cn/hls/cctv1hd.m3u8 cctv1.flv\n\t\tffmpeg -i http://ivi.bupt.edu.cn/hls/cctv1hd.m3u8 -acodec aac -vcodec libx264 cctv1-2.flv\n\tCCTV3高清：http://ivi.bupt.edu.cn/hls/cctv3hd.m3u8\n\tCCTV5高清：http://ivi.bupt.edu.cn/hls/cctv5hd.m3u8\n\tCCTV5+高清：http://ivi.bupt.edu.cn/hls/cctv5phd.m3u8\n\tCCTV6高清：http://ivi.bupt.edu.cn/hls/cctv6hd.m3u8\n\n# ◼ 直播推流\n\tffmpeg -re -i out.mp4 -c copy flv rtmp://server/live/streamName\n\t\t-re,表示按时间戳读取文件\n```\n\n## 11、ffmpeg filter过滤器应用：\n\n+ ### <font color=#b0171f size=3 face=宋体><strong>1、视频裁剪：</strong></font>\n\n![](https://s2.loli.net/2023/08/02/GmWy2dkN6BsIvbh.png)\n\n```python\n# 变量 \t\t\t   用于 ow 和 oh 参数的表达式中的可用变量\n\nx, y\t\t\t对 x 的计算值(从左上角水平方向的像素个数)和 y(垂直像素的数量)，对每个帧进行评估，x的默认值为(iw - ow)/2, y 的默认值为(ih - oh)/2\nin_w, iw \t\t输入的宽度\nin_h, ih \t\t输入的高度\nout_w,ow\t\t输出(裁剪)宽度，默认值= iw\nout_h,oh \t\t输出(裁剪)高度，默认值= ih\na \t\t\t\t纵横比，与 iw/ih 相同\nsar \t\t\t输入样本比例\ndar \t\t\t输入显示宽比，等于表达式 a*sar\nhsub, vsub \t\t水平和垂直的色度子样本值，对于像素格式 yuv422p, hsub 的值为 2,vsub 为 1\nn \t\t\t\t输入帧的数目，从 0 开始\npos \t\t\t位置在输入框的文件中，如果不知道 NAN\nt \t\t\t\t时间戳以秒表示，如果输入时间戳未知\n\now 的值可以从 oh 得到，反之亦然，但不能从 x 和 y 中得到，因为这些值是在 ow 和 oh 之后进行的。\nx 的值可以从 y 的值中得到，反之亦然。\n# \t例如，在输入框的左三、中三和右三，我们可以使用命令(iw/3*2)是开始裁剪的位置:\n\t\tffmpeg -i input -vf crop=iw/3:ih:0:0 output \n\t\tffmpeg -i input -vf crop=iw/3:ih:iw/3:0 output \n\t\tffmpeg -i input -vf crop=iw/3:ih:iw/3*2:0 output\n\n（1）裁剪 100x100 的区域，起点为(12,34).\n\t\tcrop=100:100:12:34\n\t\t相同效果:\n\t\tcrop=w=100:h=100:x=12:y=34\n（2）裁剪中心区域，大小为 100x100\n\t\tcrop=100:100\n（3）裁剪中心区域，大小为输入视频的 2/3\n\t\tcrop=2/3*in_w:2/3*in_h\n（4）裁剪中心区域的正方形，高度为输入视频的高\n\t\tcrop=out_w=in_h\n\t\tcrop=in_h\n（5）裁剪偏移左上角 100 像素\n\t\tcrop=in_w-100:in_h-100:100:100\n（6）裁剪掉左右 10 像素，上下 20 像素\n\t\tcrop=in_w-2*10:in_h-2*20\n（7）裁剪右下角区域\n\t\tcrop=in_w/2:in_h/2:in_w/2:in_h/2\n\n```\n\n+ <font color=#b0171f size=3 face=宋体><strong>2、文字水印：</strong></font>\n\n编译的时候需要支持 FreeType、FontConfig、iconv，系统中需要有相关的子库，\n\n在 FFmpeg 中增加纯字母水印可以使用 drawtext 滤镜进行支持:\n\n```python\ndrawtext # 参数相关：\ntext \t\t# 字符串 \t   文字\ntextfile \t# 字符串 \t   文字文件\nbox \t\t# 布尔 \t\t\t文字区域背景框(缺省 false)\nboxcolor \t# 色彩 \t\t\t展示字体区域块的颜色\nfont \t\t# 字符串 \t   字体名称（默认为 Sans 字体）\nfontsize \t# 整数 \t\t\t显示字体的大小\nx \t\t\t# 字符串 \t\t缺省为 0\ny \t\t\t# 字符串 \t\t缺省为 0\nalpha \t\t# 浮点数 \t\t透明度(默认为 1)，值从 0~1\n```\n\n<font color=#f26522 size=4 face=宋体><strong>相关使用实例：</strong></font>\n\n```python\n# （1）将文字的水印加在视频的左上角：\n\tffplay -i input.mp4 -vf \"drawtext=fontsize=100:fontfile=FreeSerif.ttf:text='hello world':x=20:y=20\"\n# 将字体的颜色设置为绿色：\n\tffplay -i input.mp4 -vf \"drawtext=fontsize=100:fontfile=FreeSerif.ttf:text='hello world':fontcolor=green\"\n# 如果想调整文字水印显示的位置，调整 x 与 y 参数的数值即可。\n\tffplay -i input.mp4 -vf \"drawtext=fontsize=100:fontfile=FreeSerif.ttf:text='hello world':fontcolor=green:x=400:y=200\"\n# 修改透明度\n\tffplay -i input.mp4 -vf \"drawtext=fontsize=100:fontfile=FreeSerif.ttf:text='helloworld':fontcolor=green:x=400:y=200:alpha=0.5\"\n\t\n# （2）文字水印还可以增加一个框，然后给框加上背景颜色：\n\tffplay -i input.mp4 -vf \"drawtext=fontsize=100:fontfile=FreeSerif.ttf:text='hello world':fontcolor=green:box=1:boxcolor=yellow\"\n\t\n# （3）有些时候文字水印希望以本地时间作为水印内容，可以在 drawtext 滤镜中配合一些特殊用法来完成，在 text 中显示本地当前时间，格式为年月日时分秒的方式，\n\tffplay -i input.mp4 -vf \"drawtext=fontsize=60:fontfile=FreeSerif.ttf:text='%{localtime\\:%Y\\-%m\\-%d %H-%M-%S}':fontcolor=gree\nn:box=1:boxcolor=yellow\"\n# 在使用 ffmpeg 转码存储到文件时需要加上-re，否则时间不对。\n\tffmpeg -re -i input.mp4 -vf \"drawtext=fontsize=60:fontfile=FreeSerif.ttf:text='%{localtime\\:%Y\\-%m\\-%d %H-%M-%S}':fontcolor=gree n:box=1:boxcolor=yellow\" out.mp4\n# （4）在个别场景中，需要定时显示水印，定时不显示水印，这种方式同样可以配合 drawtext 滤镜进行处理，使用 drawtext 与 enable 配合即可，\n# \t例如每 3 秒钟显示一次文字水印：\n\tffplay -i input.mp4 -vf \"drawtext=fontsize=60:fontfile=FreeSerif.ttf:text='test':fontcolor=green:box=1:boxcolor=yellow:enable=lt(mod(t\\,3)\\,1)\" \n# \t在使用 ffmpeg 转码存储到文件时需要加上-re，否则时间不对。\n# \t表达式参考：http://www.ffmpeg.org/ffmpeg-utils.html 3 Expression Evaluation \n\t\tlt(x, y) Return 1 if x is lesser than y, 0 otherwise.\n\t\tmod(x, y) Compute the remainder of division of x by y.\n\t\t\n# （5）跑马灯效果\n\tffplay -i input.mp4 -vf \"drawtext=fontsize=100:fontfile=FreeSerif.ttf:text='helloworld':x=mod(100*t\\,w):y=abs(sin(t))*h*0.7\"\n# 修改字体透明度，修改字体颜色\n\tffplay -i input.mp4 -vf  \"drawtext=fontsize=40:fontfile=FreeSerif.ttf:text='liaoqingfu':x=mod(50*t\\,w):y=abs(sin(t))*h*0.7:alpha=0.5:fontcolor=white:enable=lt(mod(t\\,3)\\,1)\"\n\n```\n\n+ <font color=#b0171f size=3 face=宋体><strong>3、图片水印：</strong></font>\n\n<font color=#f26522 size=3 face=宋体><strong> 为视频添加图片水印可以使用 movie 滤镜，相关参数：</strong></font>\n\n```python\nfilename\t\t \t# 字符串\t\t输入的文件名，可以是文件，协议，设备\nformat_name, f \t\t# 字符串 \t输入的封装格式\nstream_index, si \t# 整数 \t\t输入的流索引编号\nseek_point, sp \t\t# 浮点数 \tSeek 输入流的时间位置\nstreams, s \t\t\t# 字符串 \t输入的多个流的流信息\nloop \t\t\t\t# 整数 \t\t循环次数\ndiscontinuity \t\t# 时间差值   支持跳动的时间戳差值\n\n# 例如：\nffmpeg -i input.mp4 -vf \"movie=logo.png[watermark];[in][watermark]overlay=x=10:y=10[out]\" output.mp4\n# \t➢ 原始视频文件路径：input.mp4\n# \t➢ 水印图片路径：logo.png\n# \t➢ 水印位置：(x,y)=(10,10)<=(left,top)距离左侧、顶部各 10 像素；\n# \t➢ 输出文件路径：output.mp4\n\t\tmain_w  # 视频单帧图像宽度\n\t\tmain_h  # 视频单帧图像高度\n\t\toverlay_w  # 水印图片的宽度\n\t\toverlay_h  # 水印图片的高度\n# \t对应地可以将 overlay 参数设置成如下值来改变水印图片的位置：\n\t\t左上角 10:10\n\t\t右上角 main_w-overlay_w-10:10\n\t\t左下角 10:main_h-overlay_h-10\n\t\t右下角 main_w-overlay_w-10:main_h-overlay_h-10\n\n```\n\n使用实例：\n\n```python\n# 在 FFmpeg 中加入图片水印有两种方式：\n# \t一种是通过 movie 指定水印文件路径，\n# \t另外一种方式是通过filter 读取输入文件的流并指定为水印。\n# 读取 movie 图片文件作为水印：\n\n# （1）图片 logo.png 将会打入到 input.mp4 视频中，显示在 x 坐标 50、y 坐标 20 的位置\n\t\tffplay -i input.mp4 -vf \"movie=logo.png[logo];[in][logo]overlay=50:10[out]\"\n# 由于 logo.png 图片的背景色是白色，所以显示起来比较生硬，如果水印图片是透明背景的，效果会更好，\n# 下面找一张透明背景色的图片试一下：\n\tffplay -i input.mp4 -vf \"movie=logo2.png[watermark];[in][watermark]overlay=50:10[out]\"\n# （2）显示位置\n\t\tffplay -i input.mp4 -vf \"movie=logo.png[watermark];[in][watermark]overlay=10:10[out]\"\n\t\tffplay -i input.mp4 -vf \"movie=logo.png[watermark];[in][watermark]overlay=main_w-overlay_w-10:10[out]\"\n\t\tffplay -i input.mp4 -vf \"movie=logo.png[watermark];[in][watermark]overlay=10:main_h-overlay_h-10[out]\"\n\t\tffplay -i input.mp4 -vf \"movie=logo.png[watermark];[in][watermark]overlay=main_w-overlay_w-10:main_h-overlay_h-10[out]\"\n# （3）跑马灯效果\n\t\tffplay -i input.mp4 -vf \"movie=logo.png[watermark];[in][watermark]overlay=x=mod(50*t\\,main_w):y=abs(sin(t))*h*0.7[out]\"\n\n```\n\n\n\n+ <font color=#b0171f size=3 face=宋体><strong>4、生成画中画：</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>可以通过 **overlay** 将 多个视频流、多个多媒体采集设备、多个视频文件合并到一个界面中，生成画中画的效果。</strong></font>\n\n相关参数介绍：\n\n```python\nx \t\t\t字符串 \t\tX 坐标\ny \t\t\t字符串 \t\tY 坐标\neof_action \t整数 \t\t\t遇到 eof 表示时的处理方式，默认为重复\n\t\t\t\t\t\t\t➢ repeat(值为 0)：重复前一帧\n\t\t\t\t\t\t\t➢ endcall(值为 1)：停止所有的流\n\t\t\t\t\t\t\t➢ pass(值为 2)：保留主图层\nshortest \t布尔 \t\t\t终止最短的视频时全部终止（默认 false）\nformat \t\t整数 \t\t\t设置 output 的像素格式，默认为 yuv420\n\t\t\t\t\t\t\t➢ yuv420 (值为 0)\n\t\t\t\t\t\t\t➢ yuv422 (值为 1)\n\t\t\t\t\t\t\t➢ yuv444 (值为 2)\n\t\t\t\t\t\t\t➢ rgb (值为 3)\n# （1）显示画中画效果\n\t\tffplay -i input.mp4 -vf \"movie=sub_320x240.mp4[sub];[in][sub]overlay=x=20:y=20[out]\"\n\t\tffplay -i input.mp4 -vf \"movie=sub_320x240.mp4[sub];[in][sub]overlay=x=20:y=20:eof_action=1[out]\"\n\t\tffplay -i input.mp4 -vf \"movie=sub_320x240.mp4[sub];[in][sub]overlay=x=20:y=20:shortest =1[out]\"\n# 缩放子画面尺寸\n\tffplay -i input.mp4 -vf \"movie=sub_320x240.mp4,scale=640x480[sub];[in][sub]overlay=x=20:y=20[out]\"\n# （2）跑马灯\n\tffplay -i input.mp4 -vf \"movie=sub_320x240.mp4[test];[in][test]overlay=x=mod(50*t\\,main_w):y=abs(sin(t))*main_h*0.7[out]\"\n\n```\n\n\n\n+ <font color=#b0171f size=3 face=宋体><strong>5、多宫格处理：</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>从前文中可以看出进行视频图像处理时，overlay 滤镜为关键画布，可以通过 FFmpeg建立一个画布，也可以使用默认的画布。如果想以多宫格的方式展现，则可以自己建立一个足够大的画布， 下面就来看一下多宫格展示的例子：</strong></font>\n\n```python\nffmpeg -i 1.mp4 -i 2.mp4 -i 3.mp4 -i 4.mp4 -filter_complex \"nullsrc=size=640x480[base];[0:v] setpts=PTS-STARTPTS,scale=320x240[upperleft];[1:v]setpts=PTS-STARTPTS,scale=320x240[upperright];[2:v]setpts=PTS-STARTPTS, scale=320x240[lowerleft];[3:v]setpts=PTS-STARTPTS,scale=320x240[lowerright];[base][upperleft]overlay=shortest=1[tmp1];[tmp1][upperright]overlay=shortest=1:x=320[tmp2];[tmp2][lowerleft]overlay=shortest=1:y=240[tmp3];[tmp3][lowerright]overlay=shortest=1:x=320:y=240\" out.mp4\n\n# 1.2.3.4.mp4 为文件路径，out.MP4 为输出文件路径，通过 nullsrc 创建 overlay 画布，画布大小 640:480,使用[0:v][1:v][2:v][3:v]将输入的 4 个视频流去除，分别进行缩放处理，然后基于 nullsrc 生成的画布进行视频平铺，命令中自定义 upperleft,upperright,lowerleft,lowerright 进行不同位置平铺。\n\n# 只叠加左上右上的命令（输出到tmp1中，可以最后加[out]）：\nffmpeg -i 1.mp4 -i 2.mp4 -i 3.mp4 -i 4.mp4 -filter_complex \"nullsrc=size=640x480[base];[0:v]setpts=PTS-STARTPTS,scale=320x240[upperleft];[1:v]setpts=PTS-STARTPTS,scale=320x240[upperright];[base][upperleft]overlay=shortest=1[tmp1];[tmp1][upperright]overlay=shortest=1:x=320\" out2.mp4\n\n```\n\n\n\n+ <font color=#b0171f size=3 face=宋体><strong>6、视频倒放相关控制：</strong></font>\n\n```python\n# 通过ffmpeg命令行进行音视频倒放，android平台同样可以以将ffmpeg集成进去实现音视频的相关编辑\n\n# 1.视频倒放，无音频\n\tffmpeg.exe -i inputfile.mp4 -filter_complex [0:v]reverse[v] -map [v] -preset superfast reversed.mp4\n \n# 2.视频倒放，音频不变\n\tffmpeg.exe -i inputfile.mp4 -vf reverse reversed.mp4\n \n# 3.音频倒放，视频不变\n\tffmpeg.exe -i inputfile.mp4 -map 0 -c:v copy -af \"areverse\" reversed_audio.mp4\n \n# 4.音视频同时倒放\n\tffmpeg.exe -i test.mp4 -vf reverse -af areverse -preset superfast outtest.mp4\n \n# 6、查看音视频实际时长\n\tffprobe.exe  -v error -select_streams v:0 -show_entries stream=duration -of default=noprint_wrappers=1:nokey=1 input.mp4\n\tffprobe.exe  -v error -select_streams a:0 -show_entries stream=duration -of default=noprint_wrappers=1:nokey=1 input.mp4\n \n# 7、查看NV21\n\tffplay.exe -i input.nv21 -pix_fmt nv21 -s 4624x3472\n \n# 8、nv21转jpg\n\tffmpeg -y -s 1920x1080 -pix_fmt nv21 -i image.nv21.yuv image.jpg\n \n# 9.jpg转nv21\n\tffmpeg -i input.jpg -pix_fmt nv21 output_1080x1920.yuv\n \n# 10、rgba转png\n\tffmpeg -f rawvideo -pixel_format rgba -video_size 1080x1920 -i input.raw output.png\n \n# 11、jpg转rgba\n\tffmpeg -i input.jpg -vcodec rawvideo -pix_fmt rgba raw1.rgb\n \n# 12、剔除mp4中音频或视频（-map 0:0 -map 0:1）\n\tffmpeg.exe -i input.mp4 -map 0:0 -vcodec copy -acodec copy output.mp4\n\t\t-map 0:0:  # 第1个输入文件的第一个流，也就是主要的视频流。\n\t\t-map 0:1:  # 第1个输入文件的第二个流，是视频的声音。\n\t\t-vcodec copy:  # 拷贝选择的视频流。\n\t\t-acodec copy: # 拷贝选择的声音流\n```\n\n## 12、分离H264或mpeg2video视频格式数据命令：\n\n```python\n#提取H264:\n\tffmpeg -i source.200kbps.768x320_10s.flv -vcodec libx264 -an -f h264 source.200kbps.768x320_10s.h264\n#提取MPEG2:\n\tffmpeg -i source.200kbps.768x320_10s.flv -vcodec mpeg2video -an -f mpeg2video source.200kbps.768x320_10s.mpeg2v\n\t\n#播放YUV\n\tffplay -pixel_format yuv420p -video_size 768x320 -framerate 25 source.200kbps.768x320_10s.yuv\n\n```\n\n## 13、ffmpeg 命令查找重定向(-f fmt 对应的参数)\n\n```python\n# \t⽐如我们在-f fmt打算指定格式时，怎么知道什么样的格式才是适合的format？\n#\t\t可以通过ffmpeg -formats | findstr xx的⽅式去查找。\n#\t\t对于findstr，/i是忽略⼤⼩写\n# ⽐如：\n# \t查找Audio的裸流解复⽤器：ffmpeg -formats | findstr /i audio\n# \t查找Video的裸流解复⽤器：ffmpeg -formats | findstr /i video\n\n```\n\n## 14、ffmpeg其他基础命令：\n\n```python\n#查看视频元信息  比如 编码格式和比特率\n$ ffmpeg -i input.mp4\n#只查看元信息\n$ ffmpeg -i input.mp4 -hide_banner \n\n#将音频和视频合并到一个文件：\n$ ffmpeg -i input.aac -i input.mp4 output.mp4\n\n#截取一张图片：\n$ffmpeg -ss 01:23:45 -i input -vframes 1 -q:v 2 output.jpg\n\n#为音频添加封面：\n$ ffmpeg -loop 1 -i cover.jpg -i input.mp3 -c:v libx264 -c:a aac -b:a 192k -shortest output.mp4\n#\t有两个输入文件，一个是封面图片cover.jpg，另一个是音频文件input.mp3。\n#\t\t-loop 1参数表示图片无限循环，-shortest参数表示音频文件结束，输出视频就结束。\n\n```\n\n## 15、花屏 绿屏\n绿屏的主要是: 无法渲染的画面有些用黑色填充，有些用绿色填充，有些用上一帧画面填充。\n\n===> 视频参数改变， 而解码端的SPS&PPS信息未及时重新获取更新，会导致画面无法正常渲染，继而导致绿屏的现象出现。\n\n## 15.1：全屏花屏：\n 正常花屏：\n\n==>码率特别低的时候出现的大面积马赛克，编码器每秒产生的视频数据太少。\n\n==>视频参数问题：\n\n======>视频源修改过视频参数(如从720P修改1080P),此时客户端用于解码的SPS&PPS如果没有重新获取的话，就会出现整个画面花屏的现象。\n\n======>不会恢复。\n\n## 15.2：局部花屏：\n SO_SNDBUF的Buffer太小，丢失P帧\n\n P帧丢失。\n\n总结：视频播放时，相关SPS和PPS参数不匹配/丢帧\n","tags":["ffmpeg"],"categories":["视频编辑"]},{"title":"ffmpeg 填充改变长宽比 16:9","url":"/2023/08/02/ffmpeg-填充改变长宽比-16-9/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>ffmpeg 9:16和16:9互相转换</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>今天搜集了一下16:9和9:16相互转换的命令。将多余的部分用模糊背景填充，感觉比直接加黑边好很多。</strong></font>\n\n<br>\n\n---\n\n<br>\n\n<font color=#00b2c2 size=5 face=宋体><strong>16:9 >>> 9:16 填充黑色</strong></font>\n\n```shell\nffmpeg -i input.mp4 -vf \"pad=iw:iw*16/9:(ow-iw)/2:(oh-ih)/2\" output.mp4 -y\n```\n\n\n\n## <font color=#00b2c2 size=5 face=宋体><strong>16:9 >>> 9:16</strong></font>\n\n```shell\nffmpeg -i input.mp4 -lavfi \"[0:v]scale=256/81*iw:256/81*ih,boxblur=luma_radius=min(h\\,w)/40:luma_power=3:chroma_radius=min(cw\\,ch)/40:chroma_power=1[bg];[bg][0:v]overlay=(W-w)/2:(H-h)/2,setsar=1,crop=w=iw*81/256\"  output.mp4\n```\n\n![](https://s2.loli.net/2023/08/02/BSHutTpYIiNe2Fz.jpg)\n\n![](https://s2.loli.net/2023/08/02/JMvCPdBLqwi3NKt.jpg)\n\n## <font color=#00b2c2 size=5 face=宋体><strong>9:16 >>> 16:9</strong></font>\n\n```shell\nffmpeg -i input.mp4 -lavfi '[0:v]scale=ih*16/9:-1,boxblur=luma_radius=min(h\\,w)/20:luma_power=1:chroma_radius=min(cw\\,ch)/20:chroma_power=1[bg];[bg][0:v]overlay=(W-w)/2:(H-h)/2,crop=h=iw*9/16' -vb 800K output.mp4\n```\n\n![](https://www.zhangwenbing.com/static/uploads/Bki3dANDX/img/16-9_9-16_BJxGn0VwQ.jpg)\n\n![](https://s2.loli.net/2023/08/02/J4vPM1e8AwkgVq2.jpg)\n","tags":["ffmpeg"],"categories":["视频编辑"]},{"title":"python3 操作sqlite3数据库","url":"/2023/07/31/python3-操作sqlite3数据库/","content":"\n\n\n# Python 如何操作 SQLite 数据库\n\n<!--more-->\n\n##### SQLite 是一种轻型的关系型数据库管理系统，它支持 SQL 语言。它拥有小巧、快速、可靠、跨平台等特点，常用于移动设备、嵌入式系统和小型应用程序的开发。Python 是一种解释型、面向对象、动态数据类型的高级编程语言，适合于快速开发、简洁明了的代码编写。Python 通过 SQLite 模块来操作 SQLite 数据库，提供了非常简单、方便的接口，本文将从多个角度分析 Python 如何操作 SQLite 数据库。\n\n## 一、Python 如何连接 SQLite 数据库\nPython 连接 SQLite 数据库非常简单，只需要引入 sqlite3 模块，使用 connect() 方法即可。connect() 方法的语法如下：\n\n```python\nimport sqlite3\nconn = sqlite3.connect('example.db')\n```\n\n其中 example.db 是数据库文件名，如果不存在则会自动创建。connect() 方法还可以接收多个参数，用于设置连接属性，如：\n\n```python\nconn = sqlite3.connect('example.db', isolation_level=None, timeout=5)\n```\n\n其中 isolation_level 表示事务隔离级别，timeout 表示超时时间，None 表示不限制。\n\n## 二、Python 如何创建 SQLite 数据库表\nPython 的 sqlite3 模块提供了 execute() 方法来执行 SQL 语句。使用 execute() 方法可以执行任何 SQL 语句，包括创建表、插入数据、查询数据等。下面是创建表的示例代码：\n\n```python\nimport sqlite3\nconn = sqlite3.connect('example.db')\nc = conn.cursor()\nc.execute('''CREATE TABLE IF NOT EXISTS stocks\n(date text, trans text, symbol text, qty real, price real)''')\nconn.commit()\nconn.close()\n```\n\n以上代码创建了一个名为 stocks 的表，包含 date、trans、symbol、qty、price 五个字段，分别表示日期、交易类型、股票代码、数量和价格。其中 IF NOT EXISTS 表示如果表已经存在则不再创建。\n\n## 三、Python 如何插入 SQLite 数据库\n插入数据也是使用 execute() 方法，下面是插入数据的示例代码：\n\n```python\nimport sqlite3\nconn = sqlite3.connect('example.db')\nc = conn.cursor()\nc.execute(\"INSERT INTO stocks VALUES ('2006-01-05', 'BUY', 'RHAT', 100, 35.14)\")\nconn.commit()\nconn.close()\n```\n\n\n以上代码插入了一条数据，日期为 2006-01-05，交易类型为 BUY，股票代码为 RHAT，数量为 100，价格为 35.14。\n\n## 四、Python 如何查询 SQLite 数据库\n查询数据也是使用 execute() 方法，下面是查询数据的示例代码：\n\n```python\nimport sqlite3\nconn = sqlite3.connect('example.db')\nc = conn.cursor()\nfor row in c.execute(\"SELECT * FROM stocks WHERE symbol='RHAT'\"):\nprint(row)\nconn.close()\n```\n\n以上代码查询了表 stocks 中股票代码为 RHAT 的数据，并打印出来。\n\n## 五、Python 如何更新 SQLite 数据库\n更新数据使用 execute() 方法的 UPDATE 语句，下面是更新数据的示例代码：\n\n```python\nimport sqlite3\nconn = sqlite3.connect('example.db')\nc = conn.cursor()\nc.execute(\"UPDATE stocks SET qty=200 WHERE symbol='RHAT'\")\nconn.commit()\nconn.close()\n```\n\n以上代码更新了表 stocks 中股票代码为 RHAT 的数据，将数量改为 200。\n\n## 六、Python 如何删除 SQLite 数据库\n删除数据使用 execute() 方法的 DELETE 语句，下面是删除数据的示例代码：\n\n```python\nimport sqlite3\nconn = sqlite3.connect('example.db')\nc = conn.cursor()\nc.execute(\"DELETE FROM stocks WHERE symbol='RHAT'\")\nconn.commit()\nconn.close()\n```\n\n\n以上代码删除了表 stocks 中股票代码为 RHAT 的数据。\n\n## 七、Python 如何事务处理 SQLite 数据库\n事务是一组操作，它们被视为单个工作单元，要么全部被执行，要么全部不执行。在 SQLite 中，使用 BEGIN、COMMIT 和 ROLLBACK 语句来处理事务。Python 的 sqlite3 模块提供了 commit() 和 rollback() 方法来提交或回滚事务。下面是事务处理的示例代码：\n\n```python\nimport sqlite3\nconn = sqlite3.connect('example.db')\nc = conn.cursor()\ntry:\n  c.execute(\"BEGIN\")\n  c.execute(\"UPDATE stocks SET qty=200 WHERE symbol='RHAT'\")\n  c.execute(\"COMMIT\")\nexcept:\n  c.execute(\"ROLLBACK\")\nconn.close()\n```\n\n\n以上代码使用 BEGIN 开始一个事务，如果执行过程中出现异常，则使用 ROLLBACK 回滚事务，否则使用 COMMIT 提交事务。\n\n综上所述，Python 操作 SQLite 数据库非常简单，只需要引入 sqlite3 模块，使用 connect() 方法连接数据库，使用 execute() 方法执行 SQL 语句即可。通过本文的介绍，读者应该能够掌握 Python 如何连接、创建、插入、查询、更新、删除和事务处理 SQLite 数据库的方法。\n","tags":["数据库","sqlite3"],"categories":["数据库"]},{"title":"sqlite3 增删改查","url":"/2023/07/31/sqlite3-增删改查/","content":"\n# sqlite3 增删改查:\n\n<!--more-->\n\n```python\n## 进入 sqlite3\nsqlite3 /home/kaye/student\n\n## 进入 sqlite3 并保存数据库到指定路径\nsqlite3\n\n## 退出 sqlite3\n.exit\n\n## 创建表\ncreate table student (id integer, name text, age integer);\n\n## 查看表结构\n.schema\n\n## 插入数据\ninsert into student (id, name, age) values (1, \"bb\", 11);\ninsert into student values (2, \"cc\", 33);\n\n## 查询数据\nselect * from student;\n\n## 修改数据\nupdate student set age=25 where id=3;\n\n## 删除数据\ndelete from student where id=1;\n\n## 删除表\ndrop table student;\n```\n\n","tags":["数据库","sqlite3"],"categories":["数据库"]},{"title":"ffmpeg xxx格式转mp4","url":"/2023/07/21/ffmpeg-xxx格式转mp4/","content":"\n\n\n# ffmpeg xxx格式 转 mp4 h264\n\n<!--more-->\n\n```shell\n# ffmpeg -i \"<输入视频>\" -vcodec h264 -acodec aac \"<输出视频>\"\n# 例如：\nffmpeg -i \"in.mp4\" -vcodec h264 -acodec aac \"to.mp4\"\n```\n\n","tags":["ffmpeg"],"categories":["视频编辑"]},{"title":"ffmpeg合并多个视频文件","url":"/2023/07/21/ffmpeg合并多个视频文件/","content":"\n\n\n# ffmpeg合并多个视频文件\n\n<!--more-->\n\n## **方法一： 直接合并**\n\n+ 在视频所在文件夹下创建一个文本文件(前提是你所写的 file 文件存在)\n\n```shell\n>>> vim 2.txt\n\nfile '01.mp4'\nfile '02.mp4'\nfile '03.mp4'\nfile '04.mp4'\nfile '05.mp4'\nfile '06.mp4'\nfile '07.mp4'\nfile '08.mp4'\nfile '09.mp4'\nfile '10.mp4'\nfile '11.mp4'\nfile '12.mp4'\n\n>>> :wq\n```\n\n+ 用ffmpeg合并所有视频\n\n```shell\nffmpeg -f concat -safe 0 -i 2.txt -c copy -y o1.mp4\n# -f concat是指合并\n# -safe 为了避免权限报错\n# -c copy 一定要指定，不然会重新封装，数据文件就会变大。\n```\n\n![](https://s2.loli.net/2023/07/21/rWUR1SyHp5Dg9mb.png)\n","tags":["ffmpeg"],"categories":["视频编辑"]},{"title":"centos7下挂载ftp服务器","url":"/2023/07/19/centos7下挂载ftp服务器/","content":"\n\n\n# centos7 下挂载ftp服务器\n\n<!--more-->\n\n使用curlftpfs挂载ftp服务器到本地\n\n[CENTOS下挂载ftp服务器 | 情文のBLOG (mingilin.com)](https://www.mingilin.com/2016/08/23/centos/centos-ftp/)\n\n## 安装\n\n```bash\nyum install curlftpfs\n```\n\n\n\n## 挂载\n\n```shell\ncurlftpfs -o codepage=utf8 ftp://username:password@192.168.192.168 /ftp\n## codepage:        编码\n## username:        FTP用户名\n## password:        FTP密码\n## 192.168.1.111:   FTP地址\n## /ftp:            准备挂载到的路径\n```\n\n\n\n## 卸载\n\n```shell\n## fusermount -u /ftp\numount /ftp\n```\n\n\n\n## 开机挂载\n\n```shell\necho \"curlftpfs#username:password@192.168.1.111 /ftp fuse allow_other,uid=0,gid=0 0 0\" >> /etc/fstab\n```\n\n","tags":["系统","运维","ftp","挂载"],"categories":["linux"]},{"title":"go 网络请求模块封装(支持ja3指纹修改)","url":"/2023/07/17/go-网络请求模块封装-支持ja3指纹修改/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>go 网络请求模块封装(支持ja3指纹修改)：</strong></font>\n\n<!--more-->\n\n\n\n## 下载requests库:\n\n+ 下载最新库\n\n```shell\ngo get github.com/wangluozhe/requests\n```\n\n+ 下载指定版\n\n```\ngo get github.com/wangluozhe/requests@v1.0.4\n```\n\n\n\n## <font color=#b0171f size=4 face=宋体><strong>封装代码示例：</strong></font>\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"github.com/wangluozhe/requests\"\n\t\"github.com/wangluozhe/requests/url\"\n)\n\nfunc main() {\n\tSText := get(\"https://xxx.com\")\n\tfmt.Println(SText)\n}\n\n\nfunc get(url_string string) string {\n\treq := url.NewRequest()\n\theaders := url.NewHeaders()\n\theaders.Set(\"User-Agent\", \"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:87.0) Gecko/20100101 Firefox/87.0\")\n\treq.Headers = headers\n\treq.Ja3 = \"771,4865-4867-4866-49195-49199-52393-52392-49196-49200-49162-49161-49171-49172-51-57-47-53-10,0-23-65281-10-11-35-16-5-51-43-13-45-28-21,29-23-24-25-256-257,0\"\n\tr, err := requests.Get(url_string, req)\n\tif err != nil {\n\t\tfmt.Println(err)\n\t}\n\t//fmt.Println(r.Text)\n\treturn r.Text\n}\n```\n\n","tags":["go","基础"],"categories":["go","爬虫"]},{"title":"go requests，golang版http请求，支持Ja3指纹修改","url":"/2023/07/17/go-requests，golang版http请求，支持Ja3指纹修改/","content":"\n\n\n# requests，golang版http请求，支持Ja3指纹修改\n\n<!--more-->\n\n[(96条消息) requests，golang版http请求，支持Ja3指纹修改_ja3指纹 golang_LeeGene..的博客-CSDN博客](https://blog.csdn.net/qq_42279077/article/details/123853166)\n","tags":["go","基础","go逆向"],"categories":["go","go_gin"]},{"title":"go 声明变量到方式","url":"/2023/07/17/go-声明变量到方式/","content":"\n\n\n# go 声明变量到方式\n\n<!--more-->\n\n```go\npackage main\n\nimport \"fmt\"\nfunc main() {\n\t//第一种：变量的使用方式： 指定变量的类型，并且赋值。\n\tvar num int = 18\n\tfmt.Println(num)\n\n\t//第二种：指定变量的类型，但是不赋值，使用默认值\n\tvar num2 int\n\tfmt.Println(num2)\n\n\t//第三种：如果没有写变量的类型， 那么根据=后面的值进行判定变量的类型（自动类型推断）\n\tvar num3 = \"tom\"\n\tfmt.Println(num3)\n\n\t//第四种：省略var, 主意 := 不能写成=\n\tsex := \"男\"\n\tfmt.Println(sex)\n}\n```\n\n![image-20230717065551364](https://s2.loli.net/2023/07/17/uN4xLbzaESi7sCP.png)\n","tags":["go","基础"],"categories":["go","基础"]},{"title":"go 环境配置","url":"/2023/07/17/go-环境配置/","content":"\n\n\n# go 环境配置\n\n<!--more-->\n\n# sdk搭建配置\n\n+ mac\n  + [官方下载通道](https://go.dev/dl/)\n\n## 运行go文件\n\n```\n# cd 到main目录下\n>>> cd /Users/kate_01/GolandProjects/go_day02/main\n\n# 然后运行go文件即可\n>>> go run test.go\n```\n\n","tags":["环境搭建","开发环境"],"categories":["go","基础"]},{"title":"CentOS7使用curlftps挂载ftp为本地目录","url":"/2023/07/17/CentOS7使用curlftps挂载ftp为本地目录/","content":"\n\n\n# CentOS7使用curlftps挂载ftp为本地目录\n\n<!--more-->\n\n<font color=red size=4 face=宋体><strong>声明：</strong></font><font color=#b0171f size=3 face=宋体><strong>本文转载自   [`ch3nnn`](https://ch3nnn.blog.csdn.net/) >>> [CentOS7使用curlftps挂载ftp为本地目录](https://blog.csdn.net/weixin_43064185/article/details/116748177)</strong></font>。 <font color=#00b2c2 size=5 face=宋体><strong>并修改</strong></font>\n\ncurlftps是什么？在linux下它可以将ftp挂载为本地文件夹，这样的话操作或者管理文件起来会比较方便。\n\n## 一：以下皆以CentOS7下进行操作:\n\n```bash\n# 安装curlftps\nyum -y install epel-release\nyum -y install curlftpfs\n\n# 挂载\n# curlftps ftp://用户名:密码@ftp服务器地址 /挂载的文件夹\n\n# 例如\ncurlftps ftp://kaygb:kaygbpasswd@127.0.0.1 /www/wwwroot/ftp\n```\n\n## 二：编码转换\n\n+ 如果ftp包含特殊字符的话，需要进行ASCII编码转换\n\n| ASCII符号 | 中文名 | 编码之后的值 |\n| --------- | ------ | ------------ |\n| 空格      | 空格   | %20          |\n| ！        | 感叹号 | %21          |\n| &         | and    | %26          |\n| @         | at     | %40          |\n| /         | 斜杠   | %2F          |\n| :         | 冒号   | %3A          |\n| =         | 等于号 | %3D          |\n| ?         | 问好   | %3F          |\n| ~         | 波浪号 | %7E          |\n\n## 三：演示:\n\n+ 如果用户名类似：kaygb/kaygb\n\n+ 那么就要修改成：kaygb%2Fkaygb\n\n+ 最终的命令是\n\n```bash\ncurlftps ftp://kaygb%2Fkaygb:kaygbpasswd@127.0.0.1 /www/wwwroot/ftp\n```\n\n## 四：开放访问权限:\n\n```bash\n# 如果你和我一样，采用了类似可道云或者别的使用www用户的云盘程序，如果采用上述命令的话就会出现www用户无法访问的情况，那么我们就需要更改一下命令来设置访问权限\n# 允许root用户之外的用户访问\ncurlftpfs -o rw,allow_other ftp://kaygb%2Fkaygb:kaygbpasswd@127.0.0.1 /www/wwwroot/ftp\n```\n\n\n## 五：命令解读：\n\n```bash\n# rw：给读写的权限\n# allow_other：允许root用户之外的用户访问（www）\n\n# 指定www用户访问\n# 获取www的uid和gid\n>>> cat /etc/passwd | grep 你的用户名\n\n# 例如\n>>> cat /etc/passwd | grep www\n>>> www:x:1000:1000::/home/www:/bin/bash\n# 1000和1000既为uid和gid的值\n```\n\n## 六：挂载\n\n```bash\ncurlftpfs -o rw,allow_other,uid=1000,gid=1000 ftp://kaygb%2Fkaygb:kaygbpasswd@127.0.0.1 /www/wwwroot/ftp\n# uid和gid需要换成自己的www的uid和gid\n```\n\n## 七：取消挂载\n\n<font color=#f26522 size=4 face=宋体><strong>有三种方法，推荐方法2</strong></font>\n\n+ 方法1：`ps -ef|grep ftp`，然后使用kill来停掉挂载进程\n\n+ 方法2：`fusermount -u/www/wwwroot/ftp`\n\n+ 方法3：`umount /www/wwwroot/ftp`\n","tags":["系统","运维","ftp","挂载"],"categories":["linux"]},{"title":"绕过Cloudflare反爬虫机制的五种方法","url":"/2023/07/16/绕过Cloudflare反爬虫机制的五种方法/","content":"\n\n\n# 绕过Cloudflare反爬虫机制的五种方法\n\n<!--more-->\n\n+ 本文将介绍五种方法，帮助开发者绕过[Cloudflare反爬虫](https://www.cloudbypass.com/)机制，包括使用cloudscraper库、抓取谷歌缓存、使用undetected_chromedriver库、使用付费代理和使用穿云API。\n\n+ 在爬虫开发中，有时候会遇到浏览器正常访问网站，但是代码却无法获取数据，返回403等错误。以下是解决这个问题的五种方法：\n\n![img](https://s2.loli.net/2023/07/16/qOloz5tsmWiBQRj.jpg)\n\n## **方法一：cloudscraper**\n\n对于需要等待的网站（通常等待5秒钟），80%的情况下可以确定使用了5秒盾反爬机制。在Python中，可以使用cloudscraper库绕过等待。\n\n+ 使用方法：\n\n```bash\n# 安装：cloudscraper\npip install cloudscraper\n\n# 更新最新版本：\npip install cloudscraper -U　　\n```\n\n+ 普通使用：\n\n```python\nimport cloudscraper\n\nscraper=cloudscraper.create_scraper()  # 创建实例\nres=scraper.get(url)  # 请求URL\nprint(res.text) # 打印结果\n```\n\n+ 在Scrapy中使用：\n\n```python\nmiddlewares.py\nimport cloudscraper\nclass CloudScraperMiddleware:\n\tdefprocess_response(self,request,response,spider):\n    ifresponse.status == 403:\n      url = request.url\n      req = spider.scraper.get(url,headers={‘referer’:url})\n      return HtmlResponse(url = url,body = req.text, encoding = ”utf-8″, request = request)\n    return response\n\nspider.py\n\nimportcloudscraper\n#启用中间件\ncustom_settings={\n”DOWNLOADER_MIDDLEWARES”:{\n’testspider.middlewares.CloudScraperMiddleware’:520,\n}\n}\ndef__init__(self,**kwargs):\n#创建实例\nself.scraper=cloudscraper.create_scraper()　　\n```\n\n## **方法二：抓取谷歌缓存**\n\n当谷歌抓取网络以索引网页时，会创建一个缓存。大多数受[Cloudflare](https://so.csdn.net/so/search?q=Cloudflare&spm=1001.2101.3001.7020)保护的网站都允许谷歌抓取其网页，因此我们可以抓取这个缓存。\n\n+ 使用方法：\n\n```python\nimport requests\n\nurl = \"https://www.xxx.com/\"\nnew_url = f\"https://webcache.googleusercontent.com/search?q=cache:{url}\"\nresponse = requests.get(new_url)\nprint(response.text)\n#提取所需数据　　\n```\n\n## **方法三：undetected_chromedriver**\n\n如果您使用Selenium抓取网页时被封禁，可以尝试使用undetected_chromedriver库。该库是一个自动化工具，更简单且不容易被封禁，甚至无需下载驱动。\n\n+ 安装方法：\n\n```bash\npip3 install undetected-chromedriver\n```\n\n+ 使用方法：\n\n```python\nimport undetected_chromedriverasuc\nurl = \"https://www.baidu.com/\"\ndriver = uc.Chrome()\ndriver.get(url)\n```\n\n## **方法四：使用付费代理**\n\n目前有很多成熟的代理服务可供使用。通过使用付费代理，可以有效绕过Cloudflare的反爬机制。请选择合适的代理服务商，并根据提供的API密钥设置代理。\n\n+ 使用方法：\n\n```python\nimport requests\n\nurl = \"https://xxxx.com/\"\napi_key = \"一长串密钥\"\nproxy=f\"http://{api_key}:@proxy.zenrows.com:8001\"\nproxies={\"http\": proxy, \"https\": proxy}\nresponse=requests.get(url, proxies=proxies, verify=False)\n#处理响应数据\n```\n\n## **方法五：使用穿云API**\n\n　　穿云API是一个可以绕过Cloudflare的反机器人验证、CAPTCHA验证、WAF和CC防护的解决方案。它提供了HTTPAPI和代理功能，并可设置Referer、浏览器UA和headless状态等浏览器指纹设备特征。\n\n　　使用穿云API可以轻松[绕过Cloudflare验证](https://www.cloudbypass.com/)，即使需要发送大量请求也不必担心被识别为抓取者。\n","tags":["逆向","记录","Cloudflare"],"categories":["逆向_反爬"]},{"title":"测试视频和音频","url":"/2023/07/15/测试视频和音频/","content":"\n\n\n# 视频video标签\n\n<!--more-->\n\n<video src=\"https://macz-down.mac89.com/video/201904/NavicatPremium12119.mp4\" preload=\"metadata\" controls=\"\" style=\"display: inline-block; min-width: 100%; height: 295px;\"></video>\n\n\n\n# 音频audio标签\n\n<audio id=\"audio\" controls=\"\" preload=\"none\"><source id=\"mp3\" src=\"https://other-web-rh01-sycdn.kuwo.cn/1407a2622ac9e9aa10af57a656a91d7b/64b18dea/resource/n3/55/26/3051054552.mp3\"></audio>\n\n+ 消愁 - 毛不易\n\n  <audio id=\"audio\" controls=\"\" preload=\"none\"><source id=\"mp3\" src=\"https://m804.music.126.net/20230715030040/3058f9a32c1a7c2ab4893a0c10bded60/jdymusic/obj/wo3DlMOGwrbDjj7DisKw/28481677347/474c/85c2/535b/b2f2e46a8854595f90c56bf9a5db2ce2.mp3\"></audio>\n\n+ 像我这样的人 - 毛不易\n\n  <audio id=\"audio\" controls=\"\" preload=\"none\"><source id=\"mp3\" src=\"https://m804.music.126.net/20230715030000/c3bd7ebc6b90df3b09570c7047c5ac57/jdymusic/obj/wo3DlMOGwrbDjj7DisKw/28481670328/e30c/18ad/2d86/5b9d878b11940b81e5efcdd1f5771d79.mp3?_authSecret=0000018955af504b086e0aaba3bf1b9a\"></audio>\n\n+ 不染 - 毛不易\n\n  <audio id=\"audio\" controls=\"\" preload=\"none\"><source id=\"mp3\" src=\"https://m8.music.126.net/20230715030021/9b8fb29ff25dd716673887bc6a85d183/ymusic/y7RHah68jgZBoxjkl7ieBw==/509951162915395763\"></audio>\n\n+ Take My Hand - Simple Plan\n\n  <audio id=\"audio\" controls=\"\" preload=\"none\"><source id=\"mp3\" src=\"https://other-web-ra01-sycdn.kuwo.cn/7d16061069e12b3c9e7f27f477d66b0d/64b19743/resource/n3/320/93/52/2280351848.mp3?from$unkown&plat$wapi\"></audio>\n\n+ It's My Life - Bon Jovi\n\n  <audio id=\"audio\" controls=\"\" preload=\"none\"><source id=\"mp3\" src=\"https://m10.music.126.net/20230715031049/9b363379164ade7cef7b779f50147f6c/ymusic/obj/w5zDlMODwrDDiGjCn8Ky/3066286606/07fe/758c/6f26/5fdcc90d2122f5eb933c39419e656119.mp3\"></audio>\n\n+ 挚爱 - 陈勋奇\n\n  <audio id=\"audio\" controls=\"\" preload=\"none\"><source id=\"mp3\" src=\"https://other-web-ri01-sycdn.kuwo.cn/a47b6dffd701eeb7463410c9d519bf25/64b19842/resource/n2/60/27/3030200018.mp3\"></audio>\n\n"},{"title":"Mac Pycharm激活教程","url":"/2023/07/14/Mac-Pycharm激活教程/","content":"\n\n\n# mac2020-2023\n\n<!--more-->\n\n原始地址：https://www.yuque.com/ningmengna-6ulrv/whpu0w/iysvakbi9ugew6bf\n\n 支持mac系统 软件版本2020-2023的激活 \n\n 1️⃣第一步：下载压缩包 解压 “macjihuo”文件夹右键-新建终端窗口 \n\n下载链接1（优先使用）：https://wwsf.lanzouw.com/iE4Dl10ieycf\n\n下载链接2（备用链接）：https://note.youdao.com/s/MvR7sZSA\n\n![image.png](https://s2.loli.net/2023/07/14/Vmpaln8dIbf4hCk.png)\n\n\n\n如果没有这个选项>看本篇末尾 《打开新建终端方法》\n\n 2️⃣第二步：运行脚本，输入对应软件的命令-回车（看下图） \n\n```\n如果你要激活idea：        则输入   sh idea.sh\n\n如果你要激活pycharm： 则输入   sh pycharm.sh\n\n如果你要激活datagrip： 则输入   sh datagrip.sh\n\n如果你要激活clion：       则输入   sh clion.sh\n\n如果你要激活goland：   则输入   sh goland.sh\n\n如果你要激活webstorm  则输入   sh webstorm.sh\n\n如果你要激活phpstorm  则输入   sh phpstorm.sh\n\n如果你要激活dataspell   则输入   sh dataspell.sh\n\n如果你要激活rider          则输入   sh rider.sh\n```\n\n\n\n![image.png](https://s2.loli.net/2023/07/14/jKARag92XpZTWB3.png)\n\n\n\n<font color=red size=5 face=宋体><strong>显示Success!  Activate  to 2099即为激活成功!</strong></font>\n\n| 运行终端显示Please start xxx first!                        | 解决办法                                          |\n| ---------------------------------------------------------- | ------------------------------------------------- |\n| ![img](https://s2.loli.net/2023/07/14/4meCuihl8nMqxO2.png) | ①先打开软件一下 ②然后关闭软件后，再运行sh脚本即可 |\n\n#### 3️⃣重启软件后 没有弹出激活弹窗 说明激活成功了 \n\n**软件里点击 Help-register，有效期显示2099 2025 2023年 都是永久使用的！**\n\n激活成功页面 只要显示有”永久回退许可证”（you hava perpetual fallback license for this version）\n\n就不用管时间显示问题，不卸载软件就能一直使用，有问题可随时售后哈~\n\n您拥有此版本永久回退许可证\n\n![image.png](https://s2.loli.net/2023/07/14/paAXcTkvtuUyld8.png)\n\n\n\n查看激活时间有效期>[点击查看](https://www.yuque.com/ningmengna-6ulrv/whpu0w/cow42xg97vfctpu7)          软件汉化中文版>[点击查看](https://www.yuque.com/ningmengna-6ulrv/whpu0w/ieaydrhroqgh19u0)\n\n<font color=red size=4 face=宋体><strong>以上1-3步骤--已激活成功！ 重启软件后 还弹出激活弹窗，说明激活失败。往下看解决！</strong></font>\n\n \n\n✅首先检查下这三种情况 1、确定提示Success了么？提示成功后一定要重启软件，请重新打开软件哦。\n\n​    \n\n![img](https://s2.loli.net/2023/07/14/35692SnU8cloTLr.png)\n\n\n\n2、软件是官网专业版么(不支持Toolbox)，软件去官网下载[点击查看](https://www.yuque.com/docs/share/eb60e112-05e3-4062-a037-b743919c877b?# 《软件下载安装教程》)\n\n3、软件是2020以上的专业版么，如果是2017.3-2019版本[点击查看](https://www.yuque.com/ningmengna-6ulrv/whpu0w/ksen487x1v38k02r)\n\n✅如果以上还是不能解决，说明是您之前用过别的激活文件，或者在别的店铺购买激活过，把之前的激活插件删除干净再看我的教程激活❤️ 不知道怎么删插件的，也可以直接使用[备用方法-点击查看](https://www.yuque.com/ningmengna-6ulrv/whpu0w/milrbgks39b6b74e)进行激活一下！\n\n激活不成功，用过插件激活的 请使用[备用方法]： 请打开：https://www.yuque.com/ningmengna-6ulrv/whpu0w/milrbgks39b6b74e\n","tags":["Pycharm","破解"],"categories":["工具"]},{"title":"Mac pycharm破解后，程序意外退出","url":"/2023/07/13/Mac-pycharm破解后，程序意外退出/","content":"\n\n\n### Mac pycharm破解后，程序意外退出\n\n<!--more-->\n\n#### 解决方法：\n\n```shell\n# 打开 /Users/{USER_NAME}/Library/LaunchAgents/jetbrains.vmoptions.plist\ncd /Users/{USER_NAME}/Library/LaunchAgents\n\n# 删除文件夹下的jetbrains.vmoptions.plist\n#  问题解决\n\n/Users/{USER_NAME}/Library/LaunchAgents/jetbrains.vmoptions.plist\n```\n\n","tags":["错误","Pycharm","破解"],"categories":["工具"]},{"title":"Mac 安装 navicat 破解版(修复密码保存问题)","url":"/2023/07/11/Mac-安装-navicat-破解版-修复密码保存问题/","content":"\n\n\n# Navicat Premium 15 for Mac(数据库开发工具)修复密码保存问题 v15.0.30 中文版\n\n<!--more-->\n\n###### 下载链接：[40大洋购买_分享](https://bd.bcebos.com/v1/xly-icafe/navicatpremium15cj-20230711202331-3kp28g.dmg)\n\n###### 下载链接：[其中版本12,亲测可用(压缩包格式)](https://bd.bcebos.com/v1/xly-icafe/mac%E5%B9%B3%E5%8F%B0-20230712132120-kbghtg.zip)\n\n###### 下载链接：汉化包[zh-Hans.lproj.zip](https://bd.bcebos.com/v1/xly-icafe/zh-hans.lproj-20230712132502-qoyl5p.zip)\n\n<video src=\"https://macz-down.mac89.com/video/201904/NavicatPremium12119.mp4\" preload=\"metadata\" controls=\"\" style=\"display: inline-block; min-width: 100%; height: 295px;\"></video>\n\n![img](https://s2.loli.net/2023/07/11/QmXB2VuUtK3SGyl.png)\n\n![img](https://s2.loli.net/2023/07/11/h6JKqBD1kOc8EIy.jpg)\n\n![img](https://s2.loli.net/2023/07/11/7xlPren1dQ3E5K4.jpg)\n\n![img](https://s2.loli.net/2023/07/11/jnGfPAEevIKb5yd.jpg)\n\n![img](https://s2.loli.net/2023/07/11/jAYG451bwlVFhXq.jpg)\n\n\n\n支持 macOS Ventura 13.x\n\n151.12 MB2021.07.03200积分简体中文国外软件Mac OS 13.x,Mac OS 12.x,Mac OS 11.x\n\n[安装软件遇到提示损坏，打不开，报错，来自xx不明的开发者？点我查看解决方法](https://www.macz.com/news/1.html)\n\nNavicat Premium 15 Mac版是Mac平台上的一款数据库开发工具，Navicat Premium 15 Mac版可以让你以单一程序同時连接到 MySQL、MariaDB、SQL Server、SQLite、Oracle 和 PostgreSQL 数据库。\n\n![img](https://s2.loli.net/2023/07/11/uUTbI8PXh7M32pW.png)\n\nnavicat premium 安装教程\n\nnavicat premium镜像包下载完成后打开，双击【NavicatPremium15zhw.pkg】按照安装引导器进行安装即可！\n\n**修复 macOS 11 Big Sur 闪退的问题**\n\n15以上的系统报此问题处理方法；\n\n\n\n![img](https://s2.loli.net/2023/07/11/m9F4MLe1qdG5jDx.png)\n1.打开[任何来源。](https://www.macz.com/news/1.html)\n2.打开终端，执行下面的命令。\nsudo xattr -r -d com.apple.quarantine /Applications/Navicat\\ Premium.app\n3.回车，出现Password🔑，输入电脑开机密码，密码不显示，输入即可回车\n\n**修复密码保存问题教程：**\n\n1、打开钥匙串应用，然后在钥匙串的右上角搜索框中搜索 navicat，如有结果，请将搜索到的 navicat 钥匙串删除。如没有结果请忽略此步骤。\n2、去下载 15.0.20.1 版本安装。如果以前安装过其它版本/官方试用版本，在安装前请 App Cleaner & Uninstaller 下载安装，用它将 Navicat 卸载干净。\n3、运行安装的 15.0.20.1 版本，随便连接一个数据库，连接的时候要选择保存密码，连接成功后，退出 Navicat。\n4、本页面下载安装 Navicat 最新版本，然后直接覆盖安装，然后运行。\n5、运行后会弹出 Navicat Premium 想要使用您存储在钥匙串的 xxxx 机密信息，输入当前用户密码，然后点击 始终允许。（放心操作，没有安全问题）\n\nNavicat Premium for Mac软件介绍\n\nNavicat premium是一款数据库管理工具。将此工具连接数据库，你可以从中看到各种数据库的详细信息。包括报错，等等。当然，你也可以通过他，登陆数据库，进行各种操作。Navicat Premium是一个可多重连线资料库的管理工具，它可以让你以单一程式同时连线到 MySQL、SQLite、Oracle 及 PostgreSQL 资料库，让管理不同类型的资料库更加的方便。\n\n![img](https://s2.loli.net/2023/07/11/lBnDmRyVWGzCxHE.jpg)\n\nNavicat Premium 破解版功能特色\n\n无缝数据迁移\n\n数据传输，数据同步和结构同步可帮助您更轻松快捷地迁移数据，从而减少开销。提供详细的分步指南，以跨各种DBMS传输数据。通过数据和结构同步比较和同步数据库。在几秒钟内设置和部署比较，并获取详细的脚本以指定要执行的更改。\n\n多元化的操作工具\n\n设置数据源连接后，可以使用“导入向导”将数据从多种格式或从ODBC传输到数据库中。将数据从表/集合，视图或查询结果导出为Excel，Access，CSV等格式。使用我们的内置编辑器添加，修改和删除记录，您可以在Tree View，JSON View和类似电子表格的经典Grid View中方便地进行编辑。Navicat为您提供有效管理数据并确保流程平稳所需的工具。\n\n简单的SQL /查询编辑\n\nVisual SQL / Query Builder将帮助您创建，编辑和运行SQL语句/查询，而不必担心语法和命令的正确用法。通过获取关键字建议并从编码中去除重复内容，使用“代码完成”和可自定义的代码段快速编码。使用我们的调试组件，例如设置断点，单步执行程序，查看和修改变量值以及检查调用堆栈，可以快速找到并纠正PL / SQL和PL / PGSQL编码错误。\n\n智能数据库设计器\n\n使用我们专业的对象设计器创建，修改和管理所有数据库对象。使用复杂的数据库设计和建模工具将数据库转换为图形表示形式，以便您可以轻松地建模，创建和理解复杂的数据库。\n\n![img](https://s2.loli.net/2023/07/11/wyYkKWMhxzpUTBu.jpg)\n\n提高生产力\n\n我们功能强大的本地备份/还原解决方案以及针对MongoDump，Oracle Data Pump和SQL Server Backup Utility的直观GUI，可指导您完成备份过程并减少潜在的错误。为可重复部署的过程设置自动化，例如在特定时间或日期执行数据库备份，MapReduce作业和脚本执行。无论您身在何处，都可以随时完成工作。\n\n智能模式分析器\n\n使用我们的内置模式可视化工具发现和探索您的MongoDB模式。分析文档并在集合中显示丰富的结构，以便您可以了解数据的架构，查找架构异常并轻松检查异常值。\n\n简化协作\n\n将您的连接设置，模型，查询和虚拟组同步到我们的Navicat Cloud服务，以便您可以实时访问它们，并随时随地与您的同事共享。借助Navicat Cloud，您可以利用一天中的每一分钟来最大限度地提高生产力。\n\n先进的安全连接\n\n通过SSH隧道和SSL建立安全连接，可确保每个连接都是安全，稳定和可靠的。支持不同的数据库服务器身份验证方法，例如MySQL和MariaDB的PAM身份验证，MongoDB的Kerberos和X.509身份验证以及PostgreSQL的GSSAPI身份验证。Navicat 12提供了更多的身份验证机制和高性能环境，因此您不必担心通过不安全的网络进行连接。\n\n![img](https://s2.loli.net/2023/07/11/5QmM8Jbptrcahxq.jpg)\n\nNavicat Premium 15更新日志\n\n2021年3月8日Navicat Premium（macOS）版本15.0.26\nBug修复：\n在黑暗模式下无法读取网格数据。\n通过单击表查看器中的列标题，无法对最后一列进行排序。\n编辑粘贴的记录时发生重复的输入错误。\n在某些情况下，无法通过SSH隧道连接到服务器。\n在某些情况下，启动Navicat时挂起。\n同步MySQL数据时发生“不同的主键类型”错误。\n小错误修复和改进。\n","tags":["工具","数据库","navicat"],"categories":["工具"]},{"title":"mysql基础命令","url":"/2023/07/11/mysql基础命令/","content":"\n\n\n### 命令行下数据库操作命令\n\n<!--more-->\n\n```sql\n# 连接 mysql\nmysql>>> /usr/local/mysql-8.0.33-macos13-x86_64/bin/mysql -h 127.0.0.1 -P 3306 -u root -p\n\n# 重置 mysql 密码\nmysql>>> set password = password('root123')\n\n#  查看默认数据库\nmysql>>> show databases;\n\n# 指令 退出\nmysql>>> exit;\n\n\n# 以默认编码格式创建数据库\nmysql>>> create database day25db;\n\n# 创建数据库 以utf-8的形式创建\nmysql>>> create database <数据库名称> DEFAULT CHARSET utf8 collate utf8_general_ci;\nmysql>>> create database day26db DEFAULT CHARSET utf8 collate utf8_general_ci;\n\n# 删除数据库\nmysql>>> drop database day25db;\n\n# 选择进入数据库\nmysql>>> use day26db;\n\n# 查看数据表\nmysql>>> show tables;\n\nMac 安装 navicat 破解版(修复密码保存问题)\n\n```\n\n","tags":["数据库","mysql"],"categories":["数据库"]},{"title":"mac os 安装mysql 以及配置","url":"/2023/07/11/mac-os-安装mysql-以及配置/","content":"\n\n\n### mac os 安装mysql 以及配置\n\n<!--more-->\n\n#### mac 默认安装路径 `/usr/local/mysql-xxxx`\n\n```shell\n# 在mysql 安装目录下创建 etc/my.config\n\n[mysqld]\nport = 3306\nbasedir=/usr/local/mysql\ndatadir=/usr/local/mysql/data\npid-file=/var/run/mysqld/mysqld.pid\n```\n\n\n\n+ 启动|停止 sqlserver\n\n  ```shell\n  sudo /usr/local/mysql-8.0.33-macos13-x86_64/support-files/mysql.server start      # 添加强权启动\n  sudo /usr/local/mysql-8.0.33-macos13-x86_64/support-files/mysql.server stop       # 添加强权停止\n  \n  sudo mysql.server start      # 添加强权启动\n  sudo mysql.server stop       # 添加强权停止\n  \n  # 添加到环境变量\n  ln -s /usr/local/mysql-8.0.33-macos13-x86_64/support-files/* /Users/kate_01/bash_files\n  \n  # 连接 mysql\n  /usr/local/mysql-8.0.33-macos13-x86_64/bin/mysql -h 127.0.0.1 -P 3306 -u root -p\n  \n  # 重置 mysql 密码\n  mysql> set password = password('root123')\n  \n  #  查看默认数据库\n  mysql> show databases;\n  \n  # 指令 退出\n  mysql> exit;\n  ```\n\n+ 忘记 mysql 账户密码重置\n\n  + 1、修改配置文件，在`mysql`节点下的`skip-grant-tables=1`\n\n    ```\n    [mysqld]\n    port = 3306\n    basedir=/usr/local/mysql\n    datadir=/usr/local/mysql/data\n    skip-grant-tables=1\n    ```\n\n  + 2、重启mysql，再次登陆时，不需要密码直接可以进去了\n\n    + windows重启\n\n      ```\n      net stop mysql57     # 停止\n      net start mysql57    # 启动\n      ```\n\n    + Mac 重启\n\n      ```\n      sudo mysql.server restart    # 重启\n      ```\n\n  + 3、进入数据库\n\n    ```\n    >>> mysql -u root -p     # 重启后 不需要密码 即可进入数据\n    ```\n\n  + 4、进入数据库后执行修改命令，修改密码\n\n    ```\n    use mysql;\n    update user set authentication_string = password('新密码'),password_last_changed=now() where user=\"root\"\n    ```\n\n  + 5、保存退出后，删除`mysql`节点下的`skip-grant-tables=1`\n\n  + 6、再次重启，即可使用修改后的新密码登陆数据库了。\n\n![image-20230711170007270](https://s2.loli.net/2023/07/11/sbMBmQ25Z6pe17t.png)\n\n![image-20230711171119661](https://s2.loli.net/2023/07/11/VCiw1Nflg7FEGBQ.png)\n","tags":["mysql","命令行","配置"],"categories":["数据库"]},{"title":"必备工具","url":"/2023/07/11/必备工具/","content":"\n\n\n## 必备工具获取、下载\n\n<!--more-->\n\n#### 1、Typora 版本v1.0\n\n+ [`Mac Os`版下载](https://bd.bcebos.com/v1/xly-icafe/typora-0.9.9.34.1-20230711135144-mzvutn.dmg)\n+ [`windows`版下载](https://bd.bcebos.com/v1/xly-icafe/typora-setup-x64-20230711135722-voidbp.exe)\n\n<br>\n\n------\n\n<br>\n\n#### 2、Pycharm专业版+激活\n\n+ 官方渠道下载 IDE： [`点击进入`](https://www.jetbrains.com/pycharm/download/other.html)\n\n+ 亲测可用：`mac2021激活`[点击下载](https://bd.bcebos.com/v1/xly-icafe/macjihuo-20230714173437-xqdtdy.zip)\n\n+ [`linux` zip版下载](https://bd.bcebos.com/v1/xly-icafe/linux-20230711135957-rf7v0e.zip)\n\n+ [`Mac` zip版下载](https://bd.bcebos.com/v1/xly-icafe/mac-20230711140244-5mamhz.zip)\n\n+ [`windows` zip版下载](https://bd.bcebos.com/v1/xly-icafe/windows-20230711140345-2wukes.zip)\n\n+ <font color=#f26522 size=4 face=宋体><strong>**Pycharm激活教程:      [点击进入](https://www.yuque.com/lanchuan-vm6pi/buhvby/irtn6mlnmt1vuzgx?singleDoc)**</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>**二次购买：Pycharm激活教程:      [点击进入]([激活教程-mac版，支持2017-2023所有专业版 (yuque.com)](https://www.yuque.com/ningmengna-6ulrv/pfdno5/qtzl0p93s0icva9d))**</strong></font>\n\n<br>\n\n------\n\n<br>\n\n#### 3、Qv2ray 主程序 + 核心\n\n+ [Qv2ray_简易安装 程序三端](https://bd.bcebos.com/v1/xly-icafe/qv2ray_%E7%AE%80%E6%98%93%E5%AE%89%E8%A3%85%20%E7%A8%8B%E5%BA%8F%E4%B8%89%E7%AB%AF-20230711145621-gvow7b.zip)\n\n+ [Qv2ray 主程序下载](https://github.com/Qv2ray/Qv2ray/releases)\n\n+ [QV2ray_核心下载](https://github.com/v2ray/v2ray-core/releases)\n\n+ QV2ray 各类插件下载\n\n  + 插件 ：[Trojan](https://github.com/Qv2ray/QvPlugin-Trojan/releases/tag/v3.0.0-pre3)\n\n  + 插件 ：[SSR](https://github.com/Qv2ray/QvPlugin-SSR/releases/tag/v3.0.0-pre3)\n  + 插件 ：[NaiveProxy](https://github.com/Qv2ray/QvPlugin-NaiveProxy/releases/tag/v3.0.0-pre3)\n  + 插件 ：[Trojan-Go](https://github.com/Qv2ray/QvPlugin-Trojan-Go/releases/tag/v3.0.0-pre3)\n  + 插件 ：[SS](https://github.com/Qv2ray/QvPlugin-SS/releases/tag/v3.0.0-pre3)\n  + 插件 ：[Command](https://github.com/Qv2ray/QvPlugin-Command/releases/tag/v3.0.0-pre3)\n\n<br>\n\n------\n\n<br>\n\n#### 4、mysql安装下载网址\n\n+ [`mysql安装下载网址`](https://downloads.mysql.com/archives/community/)\n\n<br>\n\n------\n\n<br>\n\n#### 5、App Cleaner & Uninstaller for mac(mac应用清理和卸载软件)v8.2.1中文激活版\n\n[`App Cleaner & Uninstaller_激活版下载`](https://bd.bcebos.com/v1/xly-icafe/app%20cleaner%20%26%20uninstaller%20for%20mac%28mac%E5%BA%94%E7%94%A8%E6%B8%85%E7%90%86%E5%92%8C%E5%8D%B8%E8%BD%BD%E8%BD%AF%E4%BB%B6%29v8.2.1%E4%B8%AD%E6%96%87%E6%BF%80%E6%B4%BB%E7%89%88-20230713200358-ylswgj.dmg)\n\n<br>\n\n------\n\n<br>\n\n#### 6、mysql安装下载网址\n\n+ [`mysql安装下载网址`](https://downloads.mysql.com/archives/community/)\n\n<br>\n\n------\n\n<br>\n\n#### 7、fanmugua + HttpCanary(安卓抓包工具)\n\n[`fanmugua + HttpCanary(安卓抓包工具)`](https://bd.bcebos.com/v1/xly-icafe/%E7%95%AA%E6%9C%A8%E7%93%9C%2B%E6%89%8B%E6%9C%BAapk%E6%8A%93%E5%8C%85-20230928122154-gnuj5h.zip)\n\n<br>\n\n------\n\n<br>\n","tags":["必备工具"],"categories":["工具"]},{"title":"Mac_python多版本共存","url":"/2023/07/11/Mac_python多版本共存/","content":"\n\n\n### python多版本共存\n\n<!--more-->\n\n#### 1. Mac Os 多版本共存：\n\n##### 1.1 配置 brew 命令行 安装工具\n\n+ 我选的是中科大的国内源。\n\n  之后终端自动安装`brew`。安装好之后记得运行下面命令。\n\n  ```shell\n  # 拉取脚本\n  /bin/zsh -c \"$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)\"\n  \n  # 立即生效配置\n  source /Users/zhangchengcai/.zprofile\n  \n  # 这里的 zhangchengcai   替换成  你自己的用户目录 \n  ```\n\n+ 查看是否安装完成\n\n  ```\n  brew --version\n  ```\n\n+ 成功之后，可以安装一个火狐浏览器\n\n  ```\n  brew install --cask firefox\n  ```\n\n  ![img](https://s2.loli.net/2023/07/11/RHsVhjdEpq4IMLS.png)\n\n##### brew相关命令：\n\n```shell\n# 安装brew软件包管理器\n/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n\n# 卸载brew软件包管理器\n/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)\"\n\n# 常用命令：\nbrew install gcc    //安装软件\nbrew uninstall gcc  //卸载软件\nbrew search gcc     //搜索软件\nbrew upgrade gcc    //更新软件\nbrew list           //查看安装列表\nbrew update         //更新Homebrew\n\n# 查看gcc可用所有版本\nbrew search gcc\n\n# gcc ✔        gcc@4.9 ✔    gcc@7 ✔      apple-gcc42  gcc@5        gcc@6\n# 指定版本安装\n\nbrew install gcc@7\n```\n\n\n\n##### 1.2 安装多版本python\n\n + 使用命令行 安装 多版本python\n\n   ```shell\n   # 目前存在的 可用的 命令行安装版本 >>> \n   # python@3.7  python@3.8  python@3.9  python@3.10  python@3.11\n   \n   # 直接使用命令行安装即可\n   brew install python@3.7\n   ```\n\n   \n\n![image-20230711123327438](https://s2.loli.net/2023/07/11/YIlmzPBRgCvL42X.png)\n\n+ 添加环境变量\n\n  ```shell\n  # 添加环境变量文件夹\n  mkdir ~/bash_files\n  \n  # 打开 .zshrc\n  open ~/.zshrc\n  \n  # 将下面的环境变量添加到末尾\n  # mac m1 对 brew 安装目录 /opt/homebrew/Cellar\n  export PATH=$PATH:/Users/kate_01/bash_files:/usr/local/Cellar/ffmpeg/6.0:/bin:/usr/local/ffmpeg/bin\n  \n  # 立即生效\n  source ~/.zshrc\n  \n  ```\n\n  ![添加环境变量到本地](https://s2.loli.net/2023/07/11/uF2KDv5BymLqRaC.png)\n\n+ `brew` 安装好的 python 主程序默认文件夹在 `/usr/local/Cellar` 、 `mac m1 对 brew 安装目录 /opt/homebrew/Cellar`中\n\n  ![image-20230711131409016](https://s2.loli.net/2023/07/11/i8sYOy973fvXAWj.png)\n\n  ```shell\n  # 默认到 pip 和 python 程序 在\n  /usr/local/Cellar/python@3.9/3.9.17_1/bin\n  ```\n\n  ![image-20230711131818314](https://s2.loli.net/2023/07/11/mwvHc5NiCLgu42K.png)\n\n  \n\n","tags":["教程","Mac","多版本共存"],"categories":["python"]},{"title":"python多版本共存","url":"/2023/07/11/python多版本共存/","content":"\n\n\n### python多版本共存\n\n<!--more-->\n\n#### 1. Mac Os 多版本共存：\n\n##### 1.1 配置 brew 命令行 安装工具\n\n+ 我选的是中科大的国内源。\n\n  之后终端自动安装`brew`。安装好之后记得运行下面命令。\n\n  ```shell\n  # 拉取脚本\n  /bin/zsh -c \"$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)\"\n  \n  # 立即生效配置\n  source /Users/zhangchengcai/.zprofile\n  \n  # 这里的 zhangchengcai   替换成  你自己的用户目录 \n  ```\n\n+ 查看是否安装完成\n\n  ```\n  brew --version\n  ```\n\n+ 成功之后，可以安装一个火狐浏览器\n\n  ```\n  brew install --cask firefox\n  ```\n\n  ![img](https://s2.loli.net/2023/07/11/RHsVhjdEpq4IMLS.png)\n\n##### 1.2 安装多版本python\n\n + 使用命令行 安装 多版本python\n\n   ```shell\n   # 目前存在的 可用的 命令行安装版本 >>> \n   # python@3.7  python@3.8  python@3.9  python@3.10  python@3.11\n   \n   # 直接使用命令行安装即可\n   brew install python@3.7\n   ```\n\n   \n\n![image-20230711123327438](https://s2.loli.net/2023/07/11/YIlmzPBRgCvL42X.png)\n\n+ 添加环境变量\n\n  ```shell\n  # 添加环境变量文件夹\n  mkdir ~/bash_files\n  \n  # 打开 .zshrc\n  open ~/.zshrc\n  \n  # 将下面的环境变量添加到末尾\n  export PATH=$PATH:/Users/kate_01/bash_files:/usr/local/Cellar/ffmpeg/6.0:/bin:/usr/local/ffmpeg/bin\n  \n  # 立即生效\n  source ~/.zshrc\n  \n  ```\n\n  ![添加环境变量到本地](https://s2.loli.net/2023/07/11/uF2KDv5BymLqRaC.png)\n\n+ `brew` 安装好的 python 主程序默认文件夹在 `/usr/local/Cellar` 中\n\n  ![image-20230711131409016](https://s2.loli.net/2023/07/11/i8sYOy973fvXAWj.png)\n\n  ```shell\n  # 默认到 pip 和 python 程序 在\n  /usr/local/Cellar/python@3.9/3.9.17_1/bin\n  ```\n\n  ![image-20230711131818314](https://s2.loli.net/2023/07/11/mwvHc5NiCLgu42K.png)\n\n  \n\n","tags":["教程","Mac","多版本共存"],"categories":["python"]},{"title":"django_安装mysql5.7(Mac)","url":"/2023/07/02/django-安装mysql5-7(Mac)/","content":"\n## django_安装mysql5.7(Mac)\n\n<!--more-->\n\n+ 第1步：安装和初始化\n  + [下载地址](https://downloads.mysql.com/archives/community/)\n  + 密码：123456789  用户名：root\n","tags":["python","django","mac"],"categories":["python","django"]},{"title":"Java和安卓环境 配置","url":"/2023/07/02/Java和安卓环境-配置/","content":"\n# Java和安卓环境 配置\n\n<!--more-->\n\n今日概要：\n\n- Java常见加密（Java -> python实现 ）\n\n- 安卓开发（基于java做安卓app开发）\n\n  - 环境搭建\n  - 快速上手\n\n\n```\n- 安卓基础：页面数据 + 网络请求 + 数据存储 + 常见语句 -> 正常安卓开发 -> Java层面\n- 安卓进阶（JNI开发）\n\t- 基础，基于Java开发，简单算法基于Java实现。\n\t- C语言（xxx.so），反编译so文件从而得到C语言的代码。\n```\n\n\n\n\n\n\n\n## 1.Java常见加密\n\n\n\n### 1.1 隐藏字节\n\n```java\nTreeMap map = new TreeMap();\nmap.put(\"sign\",x);\n\n# 搜索关键字 sign\n```\n\n```java\nString a = new String(new byte[]{-26, -83, -90, -26, -78, -101, -23, -67, -112});\nTreeMap map = new TreeMap();\nmap.put(a,x);\n    \n# hook机制，找到TreeMap中的put方法，替换成我自己的某个方法。\nfunction newPut(key,value){\n    console.log(key,value); 再去获取调用栈。\n    \n}\n```\n\n\n\n\n\n```java\nString salt = \"xxssasdfasdfadsf\";\n```\n\n```java\nString v4 = new String(new byte[]{-26, -83, -90, -26, -78, -101, -23, -67, -112});\n```\n\n- 示例1：\n\n  ```java\n  String v1 = new String(new byte[]{26, 83, 90, 26, 78, 101, 23, 67, 112});\n  ```\n\n  ```python\n  # 字节列表\n  byte_list = [26, 83, 90, 26, 78, 101, 23, 67, 112]\n  \n  # 字节列表 -> python的字节数组\n  bs = bytearray()\n  for item in byte_list:\n      bs.append(item)\n      \n  # python的字节数组 -> 编码 -> 字符串\n  str_data = bs.decode('utf-8')\n  print(str_data)\n  ```\n\n- 示例2：\n\n  ```java\n  String v4 = new String(new byte[]{-26, -83, -90, -26, -78, -101, -23, -67, -112});\n  \n  # java字节：有符号 -128 ~ 127\n  # python：无符号  0 ~ 255\n  ```\n\n  ```python\n  byte_list = [-26, -83, -90, -26, -78, -101, -23, -67, -112]\n  \n  bs = bytearray()  # python字节数组\n  for item in byte_list:\n      if item < 0:\n          item = item + 256\n      bs.append(item)\n  \n  str_data = bs.decode('utf-8')  # data = bytes(bs)\n  print(str_data)\n  ```\n\n  \n\n```\n注意事项：什么编码？（utf-8)\n\tString v4 = new String(new byte[]{-26, -83, -90, -26, -78, -101, -23, -67, -112});\n```\n\n```python\n# 类似于Java中的字节数组\ndata = \"张三懵逼了\"\ndata_bytes = data.encode('utf-8')\n\n\ndata_list = bytearray()\nfor item in data_bytes:\n    data_list.append(item)\n\nres = data_list.decode('utf-8')\nprint(res)\n```\n\n\n\n提醒：MD5加密盐、AES加密key、iv;\n\n\n\n### 1.2 uuid\n\n抖音udid\n\n![image-20211012191034675](https://s2.loli.net/2023/07/02/qELJ9BDIPVs7nCX.png)\n\n```java\nimport java.util.UUID;\n\npublic class Hello {\n    public static void main(String[] args){\n        String uid = UUID.randomUUID().toString();\n        System.out.println(uid);\n    }\n}\n```\n\n```python\nimport uuid\n\nuid = str(uuid.uuid4())\nprint(uid)\n```\n\n```\n29cd5f50-4b4c-457b-9a59-33a12e3edd10\n```\n\n```\n1.第一类使用uuid\n\t抓包发现，每次请求值不一样：d7cb3695-5105-4aaa-b0a8-8188e0977143\n\n2.第一次运行生成UUID\n\t- 刚开始运行：调用uuid算法生成一个值。\n\t- 写入XML文件\n\t- 再使用\n\t\t- 优先去XML文件中找\n\t\t- uuid算法\n\n\t此时测试：\n\t\t- 清除app数据\n\t\t- 必须卸载app，重新安装\n```\n\n\n\n\n\n### 1.3 随机值\n\n抖音：openudid\n\n![image-20211012190908863](https://s2.loli.net/2023/07/02/XsRjD8PJmFpQEwW.png)\n\n```java\nimport java.math.BigInteger;\nimport java.security.SecureRandom;\n\npublic class Hello {\n\n    public static void main(String[] args) {\n        // 随机生成80位，10个字节\n        BigInteger v4 = new BigInteger(80, new SecureRandom());\n        // 让字节以16进制展示\n        String res = v4.toString(16);\n        System.out.println(res);\n\n    }\n}\n```\n\n```python\nimport random\n\ndata = random.randbytes(10)  # pytho3.9\n\nele_list = []\nfor item in data:\n    # 184    十进制  -> 十六进制\n    # hex(item)  # \n    ele = hex(item)[2:]\nres = \"\".join(ele_list)\nprint(res)\n```\n\n```python\ndata = \"\".join([ hex(item)[2:] for item in random.randbytes(10)])\n```\n\n\n\n#### 小补充：十六进制\n\n```python\nimport random\n\ndata = random.randbytes(10)  # pytho3.9\n\nele_list = []\nfor item in data:\n    ele = hex(item)[2:].rjust(2,\"0\")\nres = \"\".join(ele_list)\nprint(res)\n```\n\n```python\ndata = \"\".join([ hex(item)[2:].rjust(2,\"0\") for item in random.randbytes(10)])\n```\n\n\n\n转换十六进制字符串：\n\n- 内置函数\n\n  ```\n  v1 = hex(199)\n  \n  '0xc7'\n  ```\n\n- 字符串格式化\n\n  ```\n  v2 = \"%x\" %(199,)\n  \n  'c7'\n  ```\n\n  ```python\n  v3 = \"%02x\" %(5,)\n  \n  '05'\n  ```\n\n\n\n```python\nimport random\n\ndata = random.randbytes(10)\n\nele_list = []\nfor item in data:\n    ele = \"%02x\" %(item,)\n    ele_list.append(ele)\n\nres = \"\".join(ele_list)\nprint(res)\n\nopen_udid = \"\".join([\"%02x\" % i for i in random.randbytes(10)])\nprint(open_udid)\n```\n\n\n\n\n\n\n\n### 1.4 时间戳\n\n抖音：_ticket\n\n![image-20211012192006825](https://s2.loli.net/2023/07/02/WnasiLj6gM4XbHh.png)\n\n```java\npublic class Hello {\n\n    public static void main(String[] args) {\n        String t1 = String.valueOf(System.currentTimeMillis() / 1000);\n        String t2 = String.valueOf(System.currentTimeMillis());\n\n        System.out.println(t1);\n        System.out.println(t2);\n    }\n}\n```\n\n```python\nimport time\n\nv1 = int(time.time())\nv2 = int(time.time()*1000)\n```\n\n```\nv1 = str(int(time.time()))\nv2 = str(int(time.time()*1000))\n```\n\n\n\n\n\n### 1.5 十六进制的字符串\n\n\n\n![image-20211012191556212](https://s2.loli.net/2023/07/02/eKGNnq7IQXbLruc.png)\n\n\n\n在Java中字节是有符号：-128 ~ 127 \n\n```python\n# name_bytes = \"武沛齐\".encode('utf-8')\nname_bytes = [10, -26, -83, -90, -26, -78, -101, -23, -67, -112]\n\ndata_list = []\n\nfor item in name_bytes:\n    item = item & 0xff   # item<0时，让item+256\n    ele = \"%02x\" % item\n    data_list.append(ele)\n    \nprint(\"\".join(data_list))\n```\n\n\n\n\n\n### 1.6 md5加密\n\n```python\nimport hashlib\n\nobj = hashlib.md5()\nobj.update('xxxxx'.encode('utf-8'))\n\n# java中没有这个功能。\nv1 = obj.hexdigest()\nprint(v1) # fb0e22c79ac75679e9881e6ba183b354\n\nv2 = obj.digest()\nprint(v2) # b'\\xfb\\x0e\"\\xc7\\x9a\\xc7Vy\\xe9\\x88\\x1ek\\xa1\\x83\\xb3T'\n```\n\n\n\n抖音：X-SS-STUB\n\n```\n每次发送POST请求时，抖音都会携带一些请求头：\n\tX-SS-STUB = \"fjaku9asdf\"\n\n读取请求体中的数据，对请求体中的数据进行md5加密。\n```\n\n![image-20211012192151809](https://s2.loli.net/2023/07/02/JKeTzFQc1ZrlGtq.png)\n\n```java\nimport java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.Arrays;\nimport java.util.Base64;\n\npublic class Hello {\n\n    public static void main(String[] args) throws NoSuchAlgorithmException {\n        String name = \"武沛齐\";\n        \n        MessageDigest instance = MessageDigest.getInstance(\"MD5\");\n        byte[] nameBytes = instance.digest(name.getBytes());\n        // System.out.println(Arrays.toString(nameBytes));\n\n        // String res = new String(nameBytes);\n        // System.out.println(res);\n\n        // 十六进制展示\n        StringBuilder sb = new StringBuilder();\n        for(int i=0;i<nameBytes.length;i++){\n            int val = nameBytes[i] & 255;  // 负数转换为正数\n            if (val<16){\n                sb.append(\"0\");\n            }\n            sb.append(Integer.toHexString(val));\n        }\n        String hexData = sb.toString();\n        System.out.println(hexData); // e6ada6e6b29be9bd90\n    }\n}\n```\n\n```python\nimport hashlib\n\nm = hashlib.md5()\nm.update(\"武沛齐\".encode(\"utf-8\"))\n\nv1 = m.digest()\nprint(v1) # b'\\x175\\x10\\x12G$)\\xd5-\\x0c\\r#\\xd4h\\x17='\n\nv2 = m.hexdigest()\nprint(v2) # 17351012472429d52d0c0d23d468173d\n```\n\n\n\n\n\n关于加盐：\n\n```java\nimport java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.Arrays;\nimport java.util.Base64;\n\npublic class Hello {\n\n    public static void main(String[] args) throws NoSuchAlgorithmException {\n        String name = \"武沛齐\";\n        MessageDigest instance = MessageDigest.getInstance(\"MD5\");\n        instance.update(\"xxxxxx\".getBytes());\n        \n        byte[] nameBytes = instance.digest(name.getBytes());\n        \n        System.out.println(Arrays.toString(nameBytes));\n\n        String res = new String(nameBytes);\n        System.out.println(res);\n\n        // 十六进制展示\n        StringBuilder sb = new StringBuilder();\n        for(int i=0;i<nameBytes.length;i++){\n            int val = nameBytes[i] & 255;  // 负数转换为正数\n            if (val<16){\n                sb.append(\"0\");\n            }\n            sb.append(Integer.toHexString(val));\n        }\n        String hexData = sb.toString();\n        System.out.println(hexData); // e6ada6e6b29be9bd90\n    }\n}\n```\n\n\n\n```java\nimport hashlib\n\nm = hashlib.md5(\"xxxxxx\".encode('utf-8'))\nm.update(\"武沛齐\".encode(\"utf-8\"))\n\nv2 = m.hexdigest()\nprint(v2) # 17351012472429d52d0c0d23d468173d\n```\n\n\n\n### 1.7 sha-256加密\n\nB站：x/report/andriod2，请求体\n\n![image-20211012191522515](https://s2.loli.net/2023/07/02/A9eEnw2fLjs3g4K.png)\n\n![image-20211012191556212](https://s2.loli.net/2023/07/02/eKGNnq7IQXbLruc.png)\n\n```java\nimport java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.Arrays;\nimport java.util.Base64;\n\npublic class Hello {\n\n    public static void main(String[] args) throws NoSuchAlgorithmException {\n        String name = \"武沛齐\";\n        MessageDigest instance = MessageDigest.getInstance(\"SHA-256\");\n        byte[] nameBytes = instance.digest(name.getBytes());\n        // System.out.println(Arrays.toString(nameBytes));\n\n        // String res = new String(nameBytes);\n        // System.out.println(res);\n\n        // 十六进制展示\n        StringBuilder sb = new StringBuilder();\n        for(int i=0;i<nameBytes.length;i++){\n            int val = nameBytes[i] & 255;  // 负数转换为正数\n            if (val<16){\n                sb.append(\"0\");\n            }\n            sb.append(Integer.toHexString(val));\n        }\n        String hexData = sb.toString();\n        System.out.println(hexData); // e6ada6e6b29be9bd90\n    }\n}\n```\n\n```python\nimport hashlib\n\nm = hashlib.sha256()\nm.update(\"武沛齐\".encode(\"utf-8\"))\n\nv2 = m.hexdigest()\nprint(v2)\n```\n\n\n\n\n\n\n\n\n\n### 1.8 AES加密\n\n对称加密\n\n- key & iv ，明文加密。【app端】\n- key & iv ，解密。【API】\n\n```\n情况A: 请求体密文（抓包乱码）\n情况B: sign，AES加密+base64编码\n```\n\n刷B站播放时，发送POST请求。\n\nAES加密（请求体中的数据） -> 密文（JS央视频 key & iv & 加密）。\n\n![image-20211012192408372](https://s2.loli.net/2023/07/02/1VzpfikFgvECG8a.png)\n\n![image-20211012192555254](https://s2.loli.net/2023/07/02/nJsKfSjO4uAkRvi.png)\n\n```java\nimport javax.crypto.BadPaddingException;\nimport javax.crypto.Cipher;\nimport javax.crypto.IllegalBlockSizeException;\nimport javax.crypto.NoSuchPaddingException;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\nimport java.io.UnsupportedEncodingException;\nimport java.security.InvalidAlgorithmParameterException;\nimport java.security.InvalidKeyException;\nimport java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.Arrays;\nimport java.util.Base64;\n\npublic class Hello {\n\n    public static void main(String[] args) throws Exception {\n        String data = \"武沛齐\";\n        String key = \"fd6b639dbcff0c2a1b03b389ec763c4b\";\n        String iv = \"77b07a672d57d64c\";\n\n        // 加密\n        byte[] raw = key.getBytes();\n        SecretKeySpec skeySpec = new SecretKeySpec(raw, \"AES\");\n        IvParameterSpec ivSpec = new IvParameterSpec(iv.getBytes());\n        \n        Cipher cipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");\n        cipher.init(Cipher.ENCRYPT_MODE, skeySpec, ivSpec);\n        byte[] encrypted = cipher.doFinal(data.getBytes());\n        \n        // System.out.println(Arrays.toString(encrypted));\n        \n    }\n}\n```\n\n```python\n# pip install pycryptodome\nfrom Crypto.Cipher import AES\nfrom Crypto.Util.Padding import pad\n\nKEY = \"fd6b639dbcff0c2a1b03b389ec763c4b\"\nIV = \"77b07a672d57d64c\"\n\n\ndef aes_encrypt(data_string):\n    aes = AES.new(\n        key=KEY.encode('utf-8'),\n        mode=AES.MODE_CBC,\n        iv=IV.encode('utf-8')\n    )\n    raw = pad(data_string.encode('utf-8'), 16)\n    return aes.encrypt(raw)\n\ndata = aes_encrypt(\"武沛齐\")\nprint(data)\nprint([ i for i in data])\n\n```\n\n\n\n### 1.9 gzip压缩\n\n抖音注册设备：设备。\n\n> 注册设备：生成一些值，值中包括：   （cdid、手机型号、手机品牌....） 后端读取到时候，发现cdid是一个全新的请求。那么抖音就会生成 `device_id、install_id、tt`\n\n```\n（cdid、手机型号、手机品牌....） --> gzip压缩(字节)  --> 加密   -->   密文\n```\n\n\n\n```java\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.math.BigInteger;\nimport java.security.SecureRandom;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.io.OutputStream;\nimport java.util.zip.GZIPInputStream;\nimport java.util.zip.GZIPOutputStream;\n\npublic class Hello {\n\n    public static void main(String[] args) throws IOException {\n\n        // 压缩\n        String data = \"武沛齐\";\n        // System.out.println(Arrays.toString(data.getBytes()));\n        ByteArrayOutputStream v0_1 = new ByteArrayOutputStream();\n        GZIPOutputStream v1 = new GZIPOutputStream((v0_1));\n        v1.write(data.getBytes());\n        v1.close();\n        \n        // [11,22,31,14,45]\n        byte[] arg6 = v0_1.toByteArray();  //gzip压缩后：arg6\n        // System.out.println(Arrays.toString(arg6));\n\n        // 解压缩\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        ByteArrayInputStream in = new ByteArrayInputStream(arg6);\n        GZIPInputStream ungzip = new GZIPInputStream(in);\n        byte[] buffer = new byte[256];\n        int n;\n        while ((n = ungzip.read(buffer)) >= 0) {\n            out.write(buffer, 0, n);\n        }\n        byte[] res = out.toByteArray();\n        // System.out.println(Arrays.toString(res));\n        System.out.println(out.toString(\"UTF-8\"));\n\n    }\n}\n```\n\n```python\nimport gzip\n\n\n# 压缩\n\"\"\"\ns_in = \"我是武沛齐\".encode('utf-8')\ns_out = gzip.compress(s_in)\n\nprint([i for i in s_out])\n\"\"\"\n\n# 解压缩\n\"\"\"\nres = gzip.decompress(s_out)\nprint(res)\nprint(res.decode('utf-8'))\n\"\"\"\n```\n\n提醒：java、Python语言区别。（个人字节是不同，不影响整个的结果），。 \n\n\n\n### 1.10 base64编码\n\n```java\nimport java.util.Base64;\n\npublic class Hello {\n\n    public static void main(String[] args) {\n        String name = \"武沛齐\";\n        // 加密\n        Base64.Encoder encoder  = Base64.getEncoder();\n        String res = encoder.encodeToString(name.getBytes());\n        System.out.println(res); // \"5q2m5rKb6b2Q\"\n\t\t\n        // 解密\n        Base64.Decoder decoder  = Base64.getDecoder();\n        byte[] origin = decoder.decode(res);\n        String data = new String(origin);\n        System.out.println(data); // 武沛齐\n\n    }\n}\n```\n\n```python\nimport base64\n\nname = \"武沛齐\"\n\nres = base64.b64encode(name.encode('utf-8'))\nprint(res) # b'5q2m5rKb6b2Q'\n\n\ndata = base64.b64decode(res)\norigin = data.decode('utf-8')\nprint(origin) # \"武沛齐\"\n```\n\n\n\n\n\n\n\n\n\n## 2.安卓开发（环境搭建）\n\n目标：了解正向开发常见流程（逆向）。\n\n想要开发安卓程序：\n\n- Java语言 + JDK\n- 安卓的工具（SDK）+ 类库\n- IDE - android studio\n\n\n\n详细见：环境搭建\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","tags":["JAVA","安卓"],"categories":["安卓开发"]},{"title":"day07 Java和安卓环境","url":"/2023/07/02/day07-Java和安卓环境/","content":"\n","tags":["html","css"],"categories":["前端"]},{"title":"Mac OS 环境变量配置","url":"/2023/07/01/Mac-OS-环境变量配置/","content":"\n### <font color=#00b2c2 size=5 face=宋体><strong>Mac OS 环境变量配置：</strong></font>\n\n<!--more-->\n\n##### 请输入文字信息>>><font color=#f26522 size=4 face=宋体><strong>编辑 `~/.platform-tools` 或者编辑 `~/.zshrc`</strong></font>\n\n```bash\n# 模板文件\n<变量名>=/User/xxx/xxx\nexport PATH=$PATH:$<变量名>/<具体路径>\n\n\n# 例如:\nANDORID_SDK=/User/\nexport PATH=$PATH:$ANDORID_SDK/PSDD\n\n\n# \nUSER_PATH=/Users/kate_01\nexport PATH=$PATH:$/Users/kate_01/bash_files\n```\n\n编辑完成之后立即生效\n\n```bash\nsource ~/.platform-tools    # 立即生效的意思\n```\n\n"},{"title":"python ImportError: urllib3 v2.0 only supports OpenSSL 1.1.1+","url":"/2023/06/14/python-ImportError-urllib3-v2-0-only-supports-OpenSSL-1-1-1/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>ImportError: urllib3 v2.0 only supports OpenSSL 1.1.1+</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>解决办法：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>指定python环境下的 urllib3 特定版本</strong></font>\n\n```\npip3 install --upgrade urllib3==1.26.15\n```\n\n","tags":["错误"],"categories":["python"]},{"title":"python url域名 与 文件路径 拼接的快捷方法","url":"/2023/06/13/python-url域名-与-文件路径-拼接的快捷方法/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>python url域名 与 文件路径 拼接的快捷方法</strong></font>\n\n<!--more-->\n\n```python\n# 使用 urllib 库下的 urljoin\nfrom urllib.parse import urljoin\n\n# index_url = 'http://xx.xxx.com/index.m3u8'  #这里随便什么地址\n# uri = \"/file/0001.ts\"     # 文件路径\n\nurl = urljoin(index_url, uri)\n\n# 得到如下内容\nhttp://xx.xxx.com/file/0001.ts\n```\n\n","tags":["python","基础"],"categories":["python"]},{"title":"python 随机获取ua头","url":"/2023/06/13/python-随机获取ua头/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>python 随机获取ua头：</strong></font>\n\n<!--more-->\n\n```python\n# 安装库\n# pip install -U anti-useragent\n\nfrom anti_useragent import UserAgent\n\ndef get_ua(platform='windows', browser_type='chrome', min_version=80, max_version=100):\n    '''\n    :param platform: 'windows', 'linux', 'android'\n    :param browser_type: 'chrome', 'firefox'\n    :param min_version:\n    :param max_version:\n    :return:\n    '''\n    ua = UserAgent(platform=platform, min_version=min_version, max_version=max_version)[browser_type]\n    return ua\n\nua = get_ua()\nprint(ua)\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>结果:</strong></font>\n\n![image-20230613150250217](https://s2.loli.net/2023/06/13/yuP3XecFKBZYgxs.png)\n","tags":["python","基础"],"categories":["python"]},{"title":"python 解密二层、三层 m3u8文件，获取真实内容","url":"/2023/06/13/python-解密二层、三层-m3u8文件，获取真实内容/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>python 解密二层、三层 m3u8文件，获取真实内容</strong></font>\n\n<!--more-->\n\n原始地址：https://zhuanlan.zhihu.com/p/205224181\n\n+ <font color=#f26522 size=4 face=宋体><strong>Python爬虫实战之电影爬取过程</strong></font>\n  + <font color=#b0171f size=3 face=宋体><strong>实现功能：</strong></font>\n    + <font color=#f26522 size=2 face=宋体><strong>从网站上爬取采用m3u8分段方式的视频文件，对加密的 \"ts\"文件解密，实现两种方式合并\"ts\"文件，为防止IP被封，使用代理，最后删除临时文件。</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>环境 &依赖</strong></font>\n  + <font color=#b0171f size=2 face=宋体><strong>Win10 64bit</strong></font>\n  + <font color=#b0171f size=2 face=宋体><strong>IDE：Pycharm</strong></font>\n  + <font color=#b0171f size=2 face=宋体><strong>Python 3.8</strong></font>\n  + <font color=#b0171f size=2 face=宋体><strong>Python-site-package:requests + BeautifulSoup + lxml + m3u8 + AES</strong></font>\n\n<font color=#f26522 size=3 face=宋体><strong>在PyCharm中创建一个项目会创建一个临时目录存放环境和所需要的package包，所以要在PyCharm 中项目解释器（Project Interpreter）中添加所有需要的包，这张截图是本项目的包列表，红框中是所必须的包，其他有的包我也不知道做什么用的。</strong></font>\n\n\n\n![img](https://pic3.zhimg.com/80/v2-50b64133c162aa2283adf5573fa24cb2_720w.webp)\n\n\n\n<font color=#f26522 size=3 face=宋体><strong>下面开始我们的正餐，爬取数据第一步我们需要解析目标网站，找到我们需要爬取视频的地址，F12打开开发者工具</strong></font>\n\n\n\n![img](https://pic2.zhimg.com/80/v2-0ed4491c4ba64c777e693a2f4295de05_720w.webp)\n\n\n\n\n\n![img](https://pic2.zhimg.com/80/v2-de4d25a7e812cc082aa2978eda866e79_720w.webp)\n\n\n\n<font color=#b0171f size=2 face=宋体><strong>很不幸，这个网站视频是经过包装采用m3u8视频分段方式加载</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>科普一下：m3u8 文件实质是一个播放列表（playlist），其可能是一个媒体播放列表（Media Playlist），或者是一个主列表（Master Playlist）。但无论是哪种播放列表，其内部文字使用的都是 utf-8 编码。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>当 m3u8 文件作为媒体播放列表（Meida Playlist）时，其内部信息记录的是一系列媒体片段资源，顺序播放该片段资源，即可完整展示多媒体资源。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>OK，本着“没有解决不了的困难“的原则我们继续，依旧在开发者模式，从Elements模式切换到NetWork模式，去掉不需要的数据，我们发现了两个m3u8文件一个key文件和一个ts文件</strong></font>\n\n![img](https://pic4.zhimg.com/80/v2-1190c46b1e9795e4c6e8615e7fcf5e43_720w.webp)\n\n\n\n<font color=#b0171f size=2 face=宋体><strong>分别点击之后我们可以 看到对应的地址</strong></font>\n\n\n\n![img](https://pic2.zhimg.com/80/v2-fa7f22c7a2fc733de3d807bf34a478f5_720w.webp)\n\n\n\n<font color=#b0171f size=2 face=宋体><strong>OK，现在地址已经拿到了，我们可以开始我们的数据下载之路了。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>首先进行初始化，包括路径设置，请求头的伪装等，之后我们通过循环去下载所有ts文件，至于如何定义循环的次数我们可以通过将m3u8文件下载之后解析文件得到所有ts的列表，之后拼接地址然后循环就可以得到所有ts文件了。</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>第一层：</strong></font>\n\n```text\n新手学习，Python 教程/工具/方法/解疑＋V：itz992\n#EXTM3U\n\n#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=500000,RESOLUTION=720x406\n\n500kb/hls/index.m3u8\n```\n\n<font color=#b0171f size=2 face=宋体><strong>观察数据，不是真正路径，第二层路径在第三行可以看到，结合我们对网站源码分析再次拼接字符串请求：</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>第二层：</strong></font>\n\n```text\n#EXT-X-VERSION:3\n\n#EXT-X-TARGETDURATION:2\n\n#EXT-X-MEDIA-SEQUENCE:0\n\n#EXT-X-KEY:METHOD=AES-128,URI=\"key.key\"\n\n#EXTINF:2.000000,\n\nIsZhMS5924000.ts\n\n#EXTINF:2.000000,\n\nIsZhMS5924001.ts\n\n#EXT-X-ENDLIST\n```\n\n<font color=#b0171f size=2 face=宋体><strong>之后我们循环得到的TS列表，通过拼接地址下载视频片段。但是问题远远没有这么简单，我们下载的ts文件居然无法播放，通过对第二层下载得到的m3u8文件进行分析我们可以发现这一行代码：</strong></font>\n\n```text\n#EXT-X-KEY:METHOD=AES-128,URI=\"key.key\"\n```\n\n<font color=#b0171f size=2 face=宋体><strong>此网站采用AES方法对所有ts文件进行了加密，其中</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>`METHOD=ASE-128`：说明此视频采用ASE-128方式进行加密，</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>`URI=“key.key”`：代表key的地址</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>综上所诉，感觉好难啊，好绕了，都拿到了视频还看不了，但是我们要坚持我们的初心不能放弃。Fortunately，我们应该庆幸Python强大的模块功能，这个问题我们可以通过下载AES模块解决。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>完成之后我们需要将所有ts合并为一个MP4文件，最简单的在CMD命令下我们进入到视频所在路径然后执行：</strong></font>\n\n```text\ncopy /b *.ts fileName.mp4\n```\n\n<font color=#b0171f size=2 face=宋体><strong>需要注意所有TS文件需要按顺序排好。在本项目中我们使用os模块直接进行合并和删除临时ts文件操作。</strong></font>\n\n\n\n## <font color=#00b2c2 size=5 face=宋体><strong>完整代码：</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>`方法一：`</strong></font>\n\n```text\nimport re\nimport requests\nimport m3u8\nimport time\nimport os\nfrom bs4 import BeautifulSoup\nimport json\nfrom Crypto.Cipher import AES\n\nclass VideoCrawler():\n\n    def __init__(self,url):\n        super(VideoCrawler, self).__init__()\n        self.url = url\n        self.down_path = r\"F:\\Media\\Film\\Temp\"\n        self.final_path = r\"F:\\Media\\Film\\Final\"\n        self.headers = {\n            'Connection': 'Keep-Alive',\n            'Accept': 'text/html,application/xhtml+xml,*/*',\n            'User-Agent': 'Mozilla/5.0 (Linux; U; Android 6.0; zh-CN; MZ-m2 note Build/MRA58K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/40.0.2214.89 MZBrowser/6.5.506 UWS/2.10.1.22 Mobile Safari/537.36'\n        }\n\n    def get_url_from_m3u8(self, readAdr):\n        print(\"正在解析真实下载地址...\")\n        with open('temp.m3u8', 'wb') as file:\n            file.write(requests.get(readAdr).content)\n            m3u8Obj = m3u8.load('temp.m3u8')\n        print(\"解析完成\")\n        return m3u8Obj.segments\n    def run(self):\n        print(\"Start!\")\n        start_time=time.time()\n        os.chdir(self.down_path)\n        html=requests.get(self.url).text\n        bsObj=BeautifulSoup(html,'lxml')\n        tempStr = bsObj.find(class_=\"iplays\").contents[3].string#通过class查找存放m3u8地址的组件\n        firstM3u8Adr = json.loads(tempStr.strip('var player_data='))[\"url\"]#得到第一层m3u8地址\n        tempArr = firstM3u8Adr.rpartition('/')\n        realAdr = \"%s/500kb/hls/%s\" % (tempArr[0],tempArr[2])#一定规律下对字符串拼接得到第二层地址， 得到真实m3u8下载地址，\n        key_url =\"%s/500kb/hls/key.key\"%tempArr[0]#分析规律对字符串拼接得到key的地址\n        key = requests.get(key_url).content\n        fileName = bsObj.find(class_=\"video-title w100\").contents[0].contents[0]#从源码中找到视频名称的规律\n        fileName = re.sub(r'[\\s,!]', '', fileName) #通过正则表达式去掉中文名称中的感叹号逗号和空格等特殊字符串\n        cryptor = AES.new(key,AES.MODE_CBC, key)#通过AES对ts进行解密\n        urlList = self.get_url_from_m3u8(realAdr)\n        urlRoot = tempArr[0]\n        i = 1\n        for url in urlList:\n            resp = requests.get(\"%s/500kb/hls/%s\" % (urlRoot, url.uri), headers=crawler.headers)\n            if len(key):\n                with open('clip%s.ts' % i, 'wb') as f:\n                    f.write(cryptor.decrypt(resp.content))\n                    print(\"正在下载clip%d\" % i)\n            else:\n                with open('clip%s.ts' % i, 'wb') as f:\n                    f.write(resp.content)\n                    print(\"正在下载clip%d\" % i)\n            i += 1\n        print(\"下载完成！总共耗时%d s\" % (time.time()-start_time))\n        print(\"接下来进行合并......\")\n        os.system('copy/b %s\\\\*.ts %s\\\\%s.ts' % (self.down_path, self.final_path, fileName))\n        print(\"删除碎片源文件......\")\n        files = os.listdir(self.down_path)\n        for filena in files:\n            del_file = self.down_path+'\\\\'+filena\n            os.remove(del_file)\n        print(\"碎片文件删除完成\")\n\n\nif __name__ == '__main__':\n    crawler = VideoCrawler(\"地址大家自己找哦\")\n    crawler.start()\n    crawler2 = VideoCrawler(\"地址大家自己找哦\")\n    crawler2.start()\n```\n\n方法二在方法一中我们是下载所有ts片段到本地之后在进行合并，其中有可能顺序会乱，有时候解密的视频还是无法播放合并之后会导致整个视频时间轴不正确而且视频根本不能完整播放，在经过各种努力，多方查资料之后有的问题还是得不到完美解决，最后突发奇想，有了一个新的想法，我们不必把所有ts片段都下载到本地之后进行合并，而是采用另一种思维模式，一开始我们只创建一个ts文件，然后每次循环的时候不是去下载ts文件而是将通过地址得到的视频片段文件流直接添加到我们一开始创建的ts文件中，如果出现错误跳出当前循环并继续下次操作，最后我们直接得到的就是一个完整的ts文件，还不需要去合并所有片段。具体看代码如何实现。\n\n本代码好多地方和上面都一样，我们只需要领悟其中的原理和方法就OK了\n\n```text\nimport re\n\nimport requests\n\nimport m3u8\n\nimport time\n\nimport os\n\nfrom bs4 import BeautifulSoup\n\nimport json\n\nfrom Crypto.Cipher import AES\n\nimport sys\n\nimport random\n\nclass VideoCrawler():\n\ndef __init__(self,url):\n\nsuper(VideoCrawler, self).__init__()\n\nself.url=url\n\nself.down_path=r\"F:\\Media\\Film\\Temp\"\n\nself.agency_url='https://www.kuaidaili.com/free/'  #获取免费代理的网站，如果网站过期或者失效，自己找代理网站替换\n\nself.final_path=r\"F:\\Media\\Film\\Final\"\n\nself.headers={\n\n'Connection':'Keep-Alive',\n\n'Accept':'text/html,application/xhtml+xml,*/*',\n\n'User-Agent':'Mozilla/5.0 (Linux; U; Android 6.0; zh-CN; MZ-m2 note Build/MRA58K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/40.0.2214.89 MZBrowser/6.5.506 UWS/2.10.1.22 Mobile Safari/537.36'\n\n}\n\ndef get_url_from_m3u8(self,readAdr):\n\nprint(\"正在解析真实下载地址...\")\n\nwith open('temp.m3u8','wb') as file:\n\nfile.write(requests.get(readAdr).content)\n\nm3u8Obj=m3u8.load('temp.m3u8')\n\nprint(\"解析完成\")\n\nreturn m3u8Obj.segments\n\ndef get_ip_list(self,url, headers):\n\nweb_data = requests.get(url, headers=headers).text\n\nsoup = BeautifulSoup(web_data, 'lxml')\n\nips = soup.find_all('tr')\n\nip_list = []\n\nfor i in range(1, len(ips)):\n\nip_info = ips[i]\n\ntds = ip_info.find_all('td')\n\nip_list.append(tds[0].text + ':' + tds[1].text)\n\nreturn ip_list\n\ndef get_random_ip(self,ip_list):\n\nproxy_list = []\n\nfor ip in ip_list:\n\nproxy_list.append('http://' + ip)\n\nproxy_ip = random.choice(proxy_list)\n\nproxies = {'http': proxy_ip}\n\nreturn proxies\n\ndef run(self):\n\nprint(\"Start!\")\n\nstart_time=time.time()\n\nself.down_path = r\"%s\\%s\" % (self.down_path, uuid.uuid1())#拼接新的下载地址\n\nif not os.path.exists(self.down_path): #判断文件是否存在，不存在则创建\n\nos.mkdir(self.down_path)\n\nhtml=requests.get(self.url).text\n\nbsObj=BeautifulSoup(html,'lxml')\n\ntempStr = bsObj.find(class_=\"iplays\").contents[3].string#通过class查找存放m3u8地址的组件\n\nfirstM3u8Adr=json.loads(tempStr.strip('var player_data='))[\"url\"]#得到第一层m3u8地址\n\ntempArr=firstM3u8Adr.rpartition('/')\n\nall_content = (requests.get(firstM3u8Adr).text).split('\\n')[2]#从第一层m3u8文件中中找出第二层文件的的地址\n\nmidStr = all_content.split('/')[0]#得到其中有用的字符串，这个针对不同的网站采用不同的方法自己寻找其中的规律\n\nrealAdr = \"%s/%s\" % (tempArr[0], all_content)#一定规律下对字符串拼接得到第二层地址， 得到真实m3u8下载地址，\n\nkey_url = \"%s/%s/hls/key.key\" % (tempArr[0], midStr)#分析规律对字符串拼接得到key的地址\n\nkey_html = requests.head(key_url)#访问key的地址得到的文本\n\nstatus = key_html.status_code#是否成功访问到key的地址\n\nkey = \"\"\n\nif status == 200:\n\nall_content=requests.get(realAdr).text#请求第二层m3u8文件地址得到内容\n\nif \"#EXT-X-KEY\" in all_content:\n\nkey = requests.get(key_url).content#如果其中有\"#EXT-X-KEY\"这个字段说明视频被加密\n\nself.fileName = bsObj.find(class_=\"video-title w100\").contents[0].contents[0]#分析网页得到视频的名称\n\nself.fileName=re.sub(r'[\\s,!]','',self.fileName)#因为如果文件名中有逗号感叹号或者空格会导致合并时出现命令不正确错误，所以通过正则表达式直接去掉名称中这些字符\n\niv = b'abcdabcdabcdabcd'#AES解密时候凑位数的iv\n\nif len(key):#如果key有值说明被加密\n\ncryptor = AES.new(key, AES.MODE_CBC, iv)#通过AES对ts进行解密\n\nurlList=self.get_url_from_m3u8(realAdr)\n\nurlRoot=tempArr[0]\n\ni=1\n\noutputfile=open(os.path.join(self.final_path,'%s.ts'%self.fileName),'wb')#初始创建一个ts文件，之后每次循环将ts片段的文件流写入此文件中从而不需要在去合并ts文件\n\nip_list=self.get_ip_list(self.agency_url,self.headers)#通过网站爬取到免费的代理ip集合\n\nfor url in urlList:\n\ntry:\n\nproxies=self.get_random_ip(ip_list)#从ip集合中随机拿到一个作为此次访问的代理\n\nresp = requests.get(\"%s/%s/hls/%s\" % (urlRoot, midStr, url.uri), headers=crawler.headers,proxies=proxies)#拼接地址去爬取数据，通过模拟header和使用代理解决封IP\n\nif len(key):\n\ntempText=cryptor.decrypt(resp.content)#解密爬取到的内容\n\nprogess=i/len(urlList)#记录当前的爬取进度\n\noutputfile.write(tempText)#将爬取到ts片段的文件流写入刚开始创建的ts文件中\n\nsys.stdout.write('\\r正在下载：%s,进度：%s %%'%(self.fileName,progess))#通过百分比显示下载进度\n\nsys.stdout.flush()#通过此方法将上一行代码刷新，控制台只保留一行\n\nelse:\n\noutputfile.write(resp.content)\n\nexcept Exception as e:\n\nprint(\"\\n出现错误：%s\",e.args)\n\ncontinue#出现错误跳出当前循环，继续下次循环\n\ni+=1\n\noutputfile.close()\n\nprint(\"下载完成！总共耗时%d s\"%(time.time()-start_time))\n\nself.del_tempfile()#删除临时文件\n\ndef del_tempfile(self):\n\nfile_list=os.listdir(self.down_path)\n\nfor i in file_list:\n\ntempPath=os.path.join(self.down_path,i)\n\nos.remove(tempPath)\n\nos.rmdir(self.down_path)\n\nprint('临时文件删除完成')\n\nif __name__=='__main__':\n\nurl=input(\"输入地址：\\n\")\n\ncrawler=VideoCrawler(url)\n\ncrawler.run()\n\nquitClick=input(\"请按Enter键确认退出！\")\n```\n\n问题与解决：\n\n1. 一开始以为电脑中Python环境中有模块就OK了，最后发现在Pycharm中自己虚拟的环境中还需要添加对应模块，\n2. No module named Crypto.Cipher ，网上看了很多最后通过添加pycryptodome模块解决，电脑环境Win10\n3. 文件名不能有感叹号，逗号或者空格等这些特殊字符，不然执行合并命令的时候会提示命令不正确\n4. 在下载中将ts文件流写入文件时会出现这种错误（'Data must be padded to 16 byte boundary in CBC mode',) Data must be padded，我们直接continue跳出当前循环继续下次下载。\n5. 有时出现 “Protocol Error, Connection abort, os.error”,应该是爬取操作太频繁ip被封，针对此问题我们使用免费代理。\n","tags":["python","ffmpeg","多层m3u8"],"categories":["视频编辑"]},{"title":"centos7 使用mount -t cifs 挂载windows共享目录方法与问题解决","url":"/2023/06/13/centos7-使用mount-t-cifs-挂载windows共享目录方法与问题解决/","content":"\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>centos7 使用mount -t cifs 挂载windows共享目录方法与问题解决：</strong></font>\n\n<!--more-->\n\n+ <font color=#f26522 size=4 face=宋体><strong>使用 域账号 密码 访问  //10.100.xx/Android 的windows 共享</strong></font>\n\n```bash\nmount -t cifs -o domain=test.com,username=administrator,password=test123 //192.168.1.10/share /usr/local/b\n```\n\n##### 报错如下\n\n```dart\nmount -t cifs -o username=scj,password=xxxxx //10.100.xx/09.xx /usr/local/b\n# 报错如下\n[root@it519 ~]# mount -t cifs -o username=\"domain\\xx\",password=\"xx\" //10.100.xx/Android /usr/local/a\nmount: //10.100.xx/Android is write-protected, mounting read-only\nmount: cannot mount //10.100.xx/Android read-only\n```\n\n<font color=#f26522 size=4 face=宋体><strong>解决：</strong></font>\n\n```bash\n# 需要安装cifs-utils\nyum install cifs-utils.x86_64\n```\n\n安装完成后继续执行  报错如下\n\n```objectivec\n[root@it519 ~]# mount -t cifs -o username=\"domain\\xx\",password=\"xxx\" //10.100.xx/Android /usr/local/a\nmount error(13): Permission denied\nRefer to the mount.cifs(8) manual page (e.g. man mount.cifs)\n\n# 原因：命令中关于域的格式不对，正确的是:\n# 建议用这个\nmount -t cifs -o domain=test.com,username=administrator,password=test123 //192.168.1.10/share /databackup\n# 或\nmount -t cifs -o username=domain/administrator,password=test123 //192.168.1.10/share /databackup\n```\n\n\n\n```ruby\n# 再次挂载成功\n[root@it519 ~]# mount -t cifs -o domain=test.com,username=xx,password=xxx //10.100.xx /Android /usr/local/a\n# 卸载 挂载  umount\n[root@it519 ~]# umount -v /usr/local/a/\numount: /usr/local/a (//10.100.xxx/Android) unmounted\n```\n\n### 其他报错\n\n\n\n```kotlin\n[root@www ~]# mount -t cifs -o username=name,password=123 //192.168.1.10/share /databackup\n\nmount error(127): Key has expired\nRefer to the mount.cifs(8) manual page (e.g. man mount.cifs)\n\n/var/log/messages内容：\nSep 26 09:56:05 www kernel: Status code returned 0xc0000224 NT_STATUS_PASSWORD_MUST_CHANGE\nSep 26 09:56:05 www kernel: CIFS VFS: Send error in SessSetup = -127\nSep 26 09:56:05 www kernel: CIFS VFS: cifs_mount failed w/return code = -127\n\n原因：帐号的密码过期，将windows帐号的密码改为永不过期。\n\n[root@www /]# mount -t cifs -o username=testuser,password=123 //192.168.214.128/npwpw /databackup\nmount error(5): Input/output error\nRefer to the mount.cifs(8) manual page (e.g. man mount.cifs)\n\nSep 26 11:04:18 www kernel: CIFS VFS: cifs_mount failed w/return code = -5\n\n原因：/databackup已经挂载了，需要先umonut，再mount \n\n让linux 启动自动挂载在/etc/fstab中增加\n\n//192.168.1.100/test /media cifs defaults,username=manifold,password=manifolden 0 \n```\n","tags":["系统","运维","挂载","共享","centos"],"categories":["linux"]},{"title":"centos测网速脚本","url":"/2023/06/13/centos测网速脚本/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>centos7：测网速脚本</strong></font>\n\n<!--more-->\n\n+ <font color=#f26522 size=4 face=宋体><strong>一、centos使用bench.sh 脚本测试速度 【推荐】</strong></font>\n\n```bash\n[root@localhost ~]# wget -qO- 86.re/bench.sh | bash\n\nActionScript\n----------------------------------------------------------------------CPU model : Intel® tooserver.net® CPU E3-1230 V2 @ 3.30GHz\nNumber of cores : 8CPU frequency : 1600.000 MHz\nTotal amount of ram : 15164 MB\nTotal amount of swap : 7647 MB\nSystem uptime : 0days, 1:1:24Load average : 0.05, 0.04, 0.01OS : CentOS 6.5Arch : x86_64 (64 Bit)Kernel : 2.6.32-431.el6.x86_64----------------------------------------------------------------------Node Name IPv4 address Download Speed\nCacheFly 205.234.175.175 6.49MB/s\nLinode, Tokyo, JP 106.187.96.148 2.15MB/s\nLinode, Singapore, SG 139.162.23.4 1.68MB/s\nLinode, London, UK 176.58.107.39 1.51MB/s\nLinode, Frankfurt, DE 139.162.130.8 1.54MB/s\nLinode, Fremont, CA 50.116.14.9 3.18MB/s\nSoftlayer, Dallas, TX 173.192.68.18 2.71MB/s\nSoftlayer, Seattle, WA 67.228.112.250 2.89MB/s\nSoftlayer, Frankfurt, DE 159.122.69.4 1.45MB/s\nSoftlayer, Singapore, SG 119.81.28.170 3.74MB/s\nSoftlayer, HongKong, CN 119.81.130.170 3.62MB/s----------------------------------------------------------------------I/O speed(1st run) : 182 MB/s\nI/O speed(2nd run) : 184 MB/s\nI/O speed(3rd run) : 181 MB/s\nAverage I/O speed : 182.333 MB/s\n```\n\n\n\n+ <font color=#f26522 size=4 face=宋体><strong>二、使用bench.sh 脚本测试速度</strong></font>\n\n```bash\n[root@localhost ~]# wget freevps.us/downloads/bench.sh -O - -o /dev/null|bash\n\nBenchmark started on Sun Oct 9 15:21:07 HKT 2016Full benchmark log: /root/bench.log\nSystem Info-----------Processor : Intel® Xeon® CPU E3-1230 V2 @ 3.30GHz\nCPU Cores : 8Frequency : 1600.000 MHz\nMemory : 15164 MBSwap : 7647 MB\nUptime : 1:20,OS : CentOS release 6.5 (Final)Arch : x86_64 (64 Bit)Kernel : 2.6.32-431.el6.x86_64\nHostname : tooserver.net.localdomain\nSpeedtest (IPv4 only)---------------------Your public IPv4 is 103.65.181.124Location Provider Speed\nCDN Cachefly 4.42MB/s\nAtlanta, GA, US Coloat 748KB/s\nDallas, TX, US Softlayer 4.15MB/s\nSeattle, WA, US Softlayer 2.60MB/s\nSan Jose, CA, US Softlayer 3.82MB/s\nWashington, DC, US Softlayer 2.82MB/s\nTokyo, Japan Linode 1.90MB/s\nSingapore Softlayer 2.68MB/s\nRotterdam, Netherlands id3.net 614KB/s\nHaarlem, Netherlands Leaseweb 1.22MB/s\nDisk Speed----------I/O (1st run) : 182 MB/s\nI/O (2nd run) : 178 MB/sI/O (3rd run) : 180 MB/s\nAverage I/O : 180 MB/s[root@localhost ~]#\n```\n\n+ <font color=#f26522 size=4 face=宋体><strong>三、centos安装speedtest-cli 测试速度</strong></font>\n\n```bash\n[root@localhost ~]# wget --no-check-certificate https://raw.github.com/sivel/speedtest-cli/master/speedtest_cli.py\n[root@localhost ~]# chmod a+rx speedtest_cli.py\n[root@localhost ~]# ./speedtest_cli.py\n\n\nActionScript\nRetrieving speedtest.net configuration…Retrieving tooserver.net server list…Testing from KT (103.65.181.124)…Selecting best server based on latency…Hosted by China Broadband Communications (Hong Kong) [11.64 km]: 95.107 ms\nTesting download speed…Download: 6.29 Mbit/s\nTesting upload speed…Upload: 14.04 Mbit/s\n```\n\n","tags":["系统","运维","测试"],"categories":["linux"]},{"title":"centos7下安装python3.10.11","url":"/2023/06/01/centos7下安装python3-10-11/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>Centos7.9 编译安装python3.10：</strong></font>\n\n<!--more-->\n\n+ <font color=#f26522 size=4 face=宋体><strong>检查编译工具 gcc是否安装</strong></font>\n\n```bash\n# 查看 gcc 版本\ngcc --version\n\n # 没有发现gcc   gcc并未安装\nbash: gcc: command not found... \n\n# 安装gcc\nsudo yum -y install gcc gcc-c++ autoconf make\n\n# 防止 python3 报错， 安装epel扩展软件包\nsudo yum -y install epel-release\n\nsudo yum -y groupinstall \"Development Tools\"\nsudo yum -y install gcc gcc-c++ autoconf make\n\nyum grouplist\nyum grouplist |grep Development\nyum groupinfo Development Tools\n```\n\n<font color=red size=2 face=宋体><strong>安装完毕检查下是否安装成功:gcc --version</strong></font>\n\n![img](https://s2.loli.net/2023/06/01/KpMACndIDSHiTPB.webp)\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>**安装 openssl-1.1.1（python3.10以后必须更新openssl）**</strong></font>\n  + <font color=#b0171f size=2 face=宋体><strong>在Python3.7之后的版本，依赖的openssl，必须要是1.1或者1.0.2之后的版本，或者安装了2.6.4之后的libressl，linux自带的openssl版本过低导致错误</strong></font>\n\n```bash\n# 1. 查看当前openssl的版本信息\nopenssl version #1.0.2 需要升级\n\n# 2. 安装对应的依赖库\nsudo yum -y groupinstall \"Development tools\"\nsudo yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel libffi-devel gdbm-devel db4-devel libpcap-devel xz-devel make\nsudo yum install zlib* -y\nsudo yum install -y gcc gcc-c++ python-devel wget\nsudo yum install -y zlib zlib-dev openssl-devel sqlite-devel bzip2-devel libffi libffi-devel gcc gcc-c++\n \n# 3. 下载openssl安装文件\nmkdir /tmp/softwarebak\ncd /tmp/softwarebak\nwget https://www.openssl.org/source/openssl-1.1.1k.tar.gz\n \n# 4. 解压安装openssl，并进入openssl的目录\ntar -zxvf openssl-1.1.1.k.tar.gz\ncd openssl-1.1.1.k\nexport LANG=zh_CN.UTF-8\nexport LANGUAGE=zh_CN.UTF-8\n\n./config --prefix=/usr/local/openssl shared zlib \nsudo make && make install\n\n# 5. 备份当前openssl\nmv /usr/bin/openssl /usr/bin/openssl.bak\nmv /usr/include/openssl /usr/include/openssl.bak \n\n# 6. 配置使用新版本\nln -s /usr/local/openssl/bin/openssl /usr/bin/openssl\nln -s /usr/local/openssl/include/openssl /usr/include/openssl\n\n# 7. 更新动态链接库数据并重新加载\necho /usr/local/openssl/lib >> /etc/ld.so.conf\nldconfig -v\n\n# 8. 查看是否升级成功\nopenssl version\n\n# 9. 如果缺少libssl.s0.1.1\nln -s /usr/local/openssl/lib/libssl.so.1.1 /usr/lib64/libssl.so.1.1\nln -s /usr/local/openssl/lib/libcrypto.so.1.1 /usr/lib64/libcrypto.so.1.1\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>安装依赖包，接下来的操作我们用adeng用户去执行操作。</strong></font>\n\n```bash\nsudo yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel libffi-devel gdbm-devel db4-devel libpcap-devel xz-devel make\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>下载、解压python3.10.11源码</strong></font>\n\n\n```bash\nwget https://www.python.org/ftp/python/3.10.11/Python-3.10.11.tgz  # 下载python3.10.11源码\n\ntar -xzvf Python-3.10.11.tgz   # 解压\n\ncd Python-3.10.11 # 进入源码目录\n\n#指定编译语言\nexport LANG=zh_CN.UTF-8\nexport LANGUAGE=zh_CN.UTF-8\n```\n+ <font color=#f26522 size=4 face=宋体><strong>**解压之后，切换到安装的bin目录,修改 /tmp/softwarebak/Python-3.10.11/Modules/Setup**</strong></font>\n  + <font color=#00b2c2 size=5 face=宋体><strong>重点：<font color=#b0171f size=2 face=宋体><strong>编辑 >>> vim /tmp/softwarebak/Python-3.10.11/Modules/Setup</strong></font></strong></font>\n  \n  + 1. 在Python3.7之后的版本，依赖的openssl，必须要是1.1或者1.0.2之后的版本，或者安装了2.6.4之后的libressl，linux自带的openssl版本过低。\n  + 2. 在编译之后修改Modules/Setup文件中的部分内容，打开ssl，或者在编译的时候指定–with-ssl参数（我使用的是前面的方式，后一种方式的真实性有待考究）\n  + <font color=#b0171f size=2 face=宋体><strong>shift+g 跳转到末尾 然后在末尾粘贴如下内容,wq保存退出</strong></font>\n\n```bash\n_socket socketmodule.c\n# Socket module helper for SSL support; you must comment out the other\n# socket line above, and possibly edit the SSL variable:\nSSL=/usr/local/openssl\n_ssl _ssl.c \\\n        -DUSE_SSL -I$(SSL)/include -I$(SSL)/include/openssl \\\n        -L$(SSL)/lib -lssl -lcrypto\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>**配置环境、开始编译**</strong></font>\n\n```bash\n#指定安装目录\n./configure --prefix=/usr/local/python3 --with-ssl=/usr/local/openssl\n\n# 或（主要看/usr/local/openssl是否存在）\n#第一个指定安装的路径,不指定的话,安装过程中可能软件所需要的文件复制到其他不同目录,删除软件很不方便,复制软件也不方便.\n\n#第二个是为了安装pip需要用到ssl,后面报错会有提到.\n# ./configure --prefix=/usr/local/python3 --with-ssl # 上面同样的效果，推荐使用上面一行命名\n\n# 如果编译过，就需要清空缓存\nmake clean  # 清空缓存 （重要）\n\n#编译安装\nsudo make && sudo make install && sudo make clean\n```\n\n<br>\n\n---\n\n<br>\n\n```bash\nWARNING: pip is configured with locations that require TLS/SSL, however the ssl module in Python is not available.\nCould not fetch URL https://pypi.org/simple/pip/: There was a problem confirming the ssl certificate: HTTPSConnectionPool(host='pypi.org', port=443): Max retries exceeded with url: /simple/pip/ (Caused by SSLError(\"Can't connect to HTTPS URL because the SSL module is not available.\")) - skipping\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong># 开始编译：open-ssl</strong></font>\n\n```bash\n#进入源码目录\ncd /tmp/softwarebak/Python-3.10.4\n#指定编译语言\nexport LANG=zh_CN.UTF-8\nexport LANGUAGE=zh_CN.UTF-8\n#指定安装目录\nsudo ./configure --prefix=/usr/local/python3 --with-ssl=/usr/local/openssl\n#编译安装\nsudo make && sudo make install && sudo make clean\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>**创建软连接：**</strong></font>\n\n```bash\nsudo ln -s /usr/local/python3/bin/python3.10 /usr/bin/python3\nsudo ln -s /usr/local/python3/bin/pip3.10 /usr/bin/pip3\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>查看python3版本：</strong></font>\n\n```python\npython3 --version\npip3 list\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#b0171f size=3 face=宋体><strong>安装python3，有可能会引起 yum 命令不能用，因为python3 ，导致系统 python2 冲突，得让 python3 和python2 共存</strong></font>\n\n```bash\nsudo vim /usr/bin/yum\nsudo vim /usr/libexec/urlgrabber-ext-down\n# 把文件里面的#!/usr/bin/python 也修改为#! /usr/bin/python2\n```\n\n<br>\n\n---\n\n<br>\n","tags":["python","linux","安装"],"categories":["python"]},{"title":"python 字符串 u 中文转换 utf-8","url":"/2023/06/01/python-字符串-u-中文转换-utf-8/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>python3默认支持utf-8，因此对于uXXXX这种格式的中文，可以直接转换，但经常爬虫抓取回来的中文是uXXXX格式，因此需要进行转换</strong></font>\n\n<!--more-->\n\n```python\ns1='\\u70ed\\u95e8\\u94ed\\u6587\\u63a8\\u8350'\nprint('s1=',s1)\n\ns2='\\\\u70ed\\\\u95e8\\\\u94ed\\\\u6587\\\\u63a8\\\\u8350'\nprint('s2=',s2)\n\ns3=s2.encode('utf-8').decode('unicode_escape')\nprint('s3=',s3)\n\n```\n\n<br>\n\n---\n\n<br>\n\n```\ns1= 热门铭文推荐\ns2= \\u70ed\\u95e8\\u94ed\\u6587\\u63a8\\u8350\ns3= 热门铭文推荐\n```\n\n","tags":["python","转换","字符串"],"categories":["编码、解码"]},{"title":"python 运行js代码并返回值","url":"/2023/06/01/python-运行js代码并返回值/","content":"\n## <font color=#00b2c2 size=5 face=宋体><strong>python 运行js代码并返回值：</strong></font>\n\n<!--more-->\n\n使用pip安装pyexecjs：`pip3 install pyexecjs`\n\n```python\nimport execjs\nimport time\ndef get_videoallurl(vid_data):\n\n    hash_a = vid_data['hash_playkey']\n    vid = vid_data['vid']\n    js_str = '''\n        function add(a) {\n                    return parseInt(a.substring(0, 8), 16).toString(36) + parseInt(a.substring(8, 16), 16).toString(36) + parseInt(a.substring(16, 24), 16).toString(36) + parseInt(a.substring(24, 32), 16).toString(36)\n                }\n        '''\n    test = execjs.compile(js_str)    # compile()方法将返回一个Context对象，可通过这个对象的call方法来执行JS代码中的函数\n    New_hash = test.call('add', hash_a)   # call()方法的第一个参数为要执行的函数名，后面的参数都为该函数所需的参数。\n    now_time = int(round(time.time() * 1000))\n    vid_data['hash_key'] = New_hash\n    vid_data['all_mp4_url'] = new_url\n    return vid_data\n```\n","tags":["python","javascript","爬虫"],"categories":["python"]},{"title":"python 图片压缩到指定大小(KB)","url":"/2023/05/30/python-图片压缩到指定大小-KB/","content":"<font color=#00b2c2 size=5 face=宋体><strong>python 图片压缩到指定大小(KB)</strong></font>\n\n<!--more-->\n\n+ <font color=#f26522 size=4 face=宋体><strong>其实站在巨人的肩膀上，会看得更远 >>> </strong></font>\n+ 本博文参考自CSDN >> [全部梭哈迟早暴富](https://blog.csdn.net/z704630835) <font color=red size=4 face=宋体><strong>>>></strong></font> [https://blog.csdn.net/z704630835/article/details/84968767](https://blog.csdn.net/z704630835/article/details/84968767)\n\n<br>\n\n---\n\n<br>\n\n#### 1、直接给网络图片地址：\n\n```python\nimport requests\nfrom PIL import Image\nfrom io import BytesIO   # 使用PIL 打开网络图片库\n\ndef compress_image(url, file_out, size=98):\n    \"\"\"\n    :param url: 网络图片地址\n    :param file_out:    文件保存地址\n    :param size:  保存的文件大小\n    :return:\n    \"\"\"\n    res = requests.get(url)\n    tempIm = BytesIO(res.content)\n    img = Image.open(tempIm)\n    if img.mode == \"P\":\n        img = img.convert('RGB')\n    img.save(file_out, optimize=True, quality=size)\n\ncompress_image(\"input.jpg\", \"output.jpg\", 98)\n# compress_image(<\"网络地址\">, <\"存储路径\">, <\"保存的图片大小\">)\n```\n\n<br>\n\n---\n\n<br>\n\n#### 2、给bytes：\n\n```python\nimport requests\nfrom PIL import Image\nfrom io import BytesIO   # 使用PIL 打开网络图片库\n\ndef compress_image(bytes_, file_out, size=98):\n    \"\"\"\n    :param url: 网络图片地址\n    :param file_out:    文件保存地址\n    :param size:  保存的文件大小\n    :return:\n    \"\"\"\n    tempIm = BytesIO(bytes_)\n    img = Image.open(tempIm)\n    if img.mode == \"P\":\n        img = img.convert('RGB')\n    img.save(file_out, optimize=True, quality=size)\nurl = \"https://www.xxx.com\"  # 图片地址\nresponse = requests.get(url)\ncompress_image(response.content, \"output.jpg\", 98)\n# compress_image(<\"网络地址\">, <\"存储路径\">, <\"保存的图片大小\">)\n```\n\n<br>\n\n---\n\n<br>\n\n#### 3、本地图片转换：\n\n```python\nfrom PIL import Image\n\ndef compress_image(file_in, file_out, size):\n    img = Image.open(file_in)\n    img.save(file_out, optimize=True, quality=size)\n\ncompress_image(\"input.jpg\", \"output.jpg\", 100)\n\n# compress_image(<\"本地图片地址\">, <\"存储路径\">, <\"保存的图片大小\">)\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=red size=5 face=宋体><strong>重点：</strong></font><font color=#00b2c2 size=4 face=宋体><strong>使用PIL模块存储图像时的报错：</strong></font><font color=red size=4 face=宋体><strong>cannot write mode P as JPEG</strong></font>\n\n![image-20230530234345283](https://s2.loli.net/2023/05/30/7MoFnAcUfK5mROa.png)\n\n<font color=#b0171f size=2 face=宋体><strong>对于这个问题的原因，查了一下，因为我使用的是PIL模块，对于PIL模块来说，其模式包括以下几种：</strong></font>\n\n```tex\n# 参考链接：https://www.jianshu.com/p/e8d058767dfa\n \n模式\n1             1位像素，黑和白，存成8位的像素\nL             8位像素，黑白\nP             8位像素，使用调色板映射到任何其他模式\nRGB           3×8位像素，真彩\nRGBA          4×8位像素，真彩+透明通道\nCMYK          4×8位像素，颜色隔离\nYCbCr         3×8位像素，彩色视频格式\nI             32位整型像素\nF             32位浮点型像素\n```\n\n<br>\n\n---\n\n<br>\n\n<font color=red size=4 face=宋体><strong>报错原因也很明显，因为有图片的模式是“P”，不是\"RGB\"，所以无法直接写入保存，找到这张图片，发现和普通的彩色图片并没有什么区别：</strong></font>\n\n<br>\n\n---\n\n<br><font color=#00b2c2 size=5 face=宋体><strong>具体查看图片模式的方法为：</strong></font>\n\n```\nimg = Image.open('./data/chengqiang/117.jpg')\nprint(img.mode)\n```\n\n\n<br>\n\n---\n\n<br>\n\n<font color=red size=5 face=宋体><strong>解决方法：</strong></font><font color=#00b2c2 size=4 face=宋体><strong>添加一个判定，转一下 rgb</strong></font>\n\n    if img.mode == \"P\":\n        img = img.convert('RGB')\n\n","tags":["python","图片","压缩"],"categories":["python"]},{"title":"python 时间格式返回值","url":"/2023/05/27/python-时间格式返回值/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>python 时间格式返回值：</strong></font>\n\n<!--more-->\n\n```python\nprint(str(time.strftime(\"%Y-%m-%d %H:%M:%S\", time.localtime())))\n```\n","tags":["python","时间"],"categories":["python"]},{"title":"python中unicode编码转换为中文","url":"/2023/05/27/python中unicode编码转换为中文/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>python中unicode编码转换为中文：</strong></font>\n\n<!--more-->\n\n<font color=#b0171f size=2 face=宋体><strong>我们使用python中，遇到爬取网站情况，用到unicode编码，我们需要将它转换为中文，unicode编码转换为中文的方法有四种：使用unicode_escape 解码、使用encode()方法转换，再调用bytes.decode()转换为字符串形式、 使用json.loads 解码（为json 格式）、使用eval（遇到Unicode是通过requests在网上爬取的时候）。具体内容请看本文。</strong></font>\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>**方法一：使用unicode_escape 解码：**</strong></font>\n\n```python\nunicode = b'\\\\u4f60\\\\u597d'\nre = unicode.decode(\"unicode_escape\")\nprint(re)\n\n返回：你好\n```\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>**方法二：使用encode()方法转换，再调用bytes.decode()转换为字符串形式：**</strong></font>\n\n```python\ns = r'\\u4f60\\u597d'\nprint(s.encode().decode(\"unicode_escape\"))\n```\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>**方法三： 使用json.loads 解码（为json 格式）：**</strong></font>\n\n```python\nstr = '\\u4eac\\u4e1c\\u653e\\u517b\\u7684\\u722c\\u866b'\n \nprint json.loads('\"%s\"' %str)\n```\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>**方法四：使用eval（遇到Unicode是通过requests在网上爬取的时候）：**</strong></font>\n\n```python\nresponse = requests.get(url,headers=headers)\nre = eval(\"u\"+\"\\'\"+response.text+\"\\'\")\nprint(re)\n```\n\n<br>\n\n<br>\n\n<br>\n\n---\n","tags":["python","编码、解码","unicode"],"categories":["编码、解码"]},{"title":"Ubuntu20.04 idea/pycharm 搜狗中文输入法不跟随光标问题","url":"/2023/05/27/Ubuntu20-04-idea-pycharm-搜狗中文输入法不跟随光标问题/","content":"\n# <font color=#00b2c2 size=6 face=宋体><strong>Ubuntu20.04 idea/pycharm 搜狗中文输入法不跟随光标问题</strong></font>\n\n<!--more-->\n\n![img](https://s2.loli.net/2023/05/27/JoPT7FZjWrh2aku.png)\n\n该文转载自CSDN：https://blog.csdn.net/w710537643/article/details/114386827\n\n### <font color=#00b2c2 size=5 face=宋体><strong>概述：</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>在 linux 平台下使用搜狗输入法在 IDEA/PYCHARM（pycharm2020.3） 中输入中文时，输入法候选框总是静止在 IDEA 的左下角，而不能跟随光标进行移动。虽然不影响输入结果，但很影响输入体验。并且其实网上确实给了一些解决方法，但好多时候，这些解决方法对小白不太友好，因此，此处我尝试站在巨人的肩膀上，对前辈的一些方法进行整合并且给出比较详细的解决步骤。</strong></font>\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>**系统环境：**</strong></font>\n\n```\nKDE Plama Version:5.19.5\nKDE Frameworks Version:5.73.0\nKernel Version:5.8.6-1-MANJARO\n```\n\n+ <font color=#f26522 size=4 face=宋体><strong>**硬件环境：**</strong></font>\n\n```\n处理器：Intel Core i5-8500 cp @3.00GHz\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>问题定位：</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>具体问题官方其实七年前就有了（参考 </strong></font>https://youtrack.jetbrains.com/issue/JBR-2460<font color=#b0171f size=2 face=宋体><strong>），但是比较坑的是官方也一直没有解决这个问题🐶（此处忍不住吐槽一下哈）。简单来说就是 `Idea` 的 `jre` 运行环境一个 bug，导致输入法无法定位到鼠标位置。因此，我们要解决该问题必须要修改 `JetBrainsRuntime` 的运行代码。</strong></font>\n\n\n\n<br>\n\n---\n\n<br>\n\n<font color=#00b2c2 size=5 face=宋体><strong>解决方法：</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>如果只是想快速解决该问题，而对其原理不感兴趣的话，仅仅使用方法 1 即可。</strong></font>\n\n## <font color=red size=6 face=宋体><strong>方法 1：</strong></font>修改 `JetBrainsRuntime`\n\n+ <font color=#f26522 size=4 face=宋体><strong>1、下载已经修改好的 JRE 环境</strong></font>\n  + <font color=#00b2c2 size=3 face=宋体><strong>下载地址 1：</strong></font>[<font color=#b0171f size=3 face=宋体><strong>**`坚果云 点击下载`**</strong></font>](https://www.jianguoyun.com/p/DQDdJs4QtIDzBxj6y9oD)\n  + <font color=#00b2c2 size=3 face=宋体><strong>下载地址 2：</strong></font>[<font color=#b0171f size=3 face=宋体><strong>**`百毒盘 点击下载`**</strong></font>](https://bd.bcebos.com/v1/xly-icafe/java-11.0.7-jetbrain-20230527114819-6o5hbd.zip)\n\n+ <font color=#f26522 size=4 face=宋体><strong>2、下载完成后解压到任意目录，此处我是解压到了 `~/application` 目录下</strong></font>\n\n![](https://s2.loli.net/2023/05/27/MEcCsvoNSyp4bLq.webp)\n\n+ <font color=#f26522 size=4 face=宋体><strong>3、更改 IDEA 的启动环境</strong></font>\n\n修改文件:` home/idea-2020.1/bin/idea.sh (找到你自己的idea的安装路径)` 在开头处添加\n\n`export IDEA_JDK=xport IDEA_JDK=/home/xu/application/java-11.0.7-jetbrain`（改成自己的 JRE 目录）\n\npycharm 修改方式 `export PYCHARM_JDK=/home/xu/application/java-11.0.7-jetbrain `\n\n![](https://s2.loli.net/2023/05/27/Yb1GgIMTAB4XEVf.png)\n\n<br>\n\n<font color=red size=5 face=宋体><strong>重启软件</strong></font>\n\n<br>\n\n---\n\n<br>\n\n<br>\n\n<br>\n\n## <font color=red size=6 face=宋体><strong>方法 2：</strong></font>使用 path 编译 `JetBrainsRuntime`\n\n+ <font color=#f26522 size=4 face=宋体><strong>1、从 Github 下载 JetBrainsRuntime，执行如下代码：</strong></font>\n\n```bash\ngit clone https://github.com/JetBrains/JetBrainsRuntime.git\n1\n```\n\n+ <font color=#f26522 size=4 face=宋体><strong>2、应用 patch</strong></font>\n\npatch 下载地址: https://github.com/prehonor/myJetBrainsRuntime\n\n```bash\n#将Path放到JetBrainsRuntime的根目录下\ncd JetBrainsRuntime\n# 应用Patch\ngit apply idea.patch\n1234\n```\n\n<font color=#f26522 size=4 face=宋体><strong>3、编译(有风险 缺少大量依赖库，建议提前备份系统快照) `JetBrainsRuntime`</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>这个可以参照官方的提供的方式来进行编译：[戳我](https://github.com/JetBrains/JetBrainsRuntime?utm_source=ld246.com)。但就我个人尝试的情况来看，使用 docker 编译或者直接在自己的 Arch linux 中进行编译都会出现错误。最终可行的方式是使用虚拟机虚拟一个 Ububtu 20.0.4 的环境进行编译。但需要主要的是给该虚拟分配的内存空间应该大于 2G，否则可能出现内存不足，编译错误的情况发生。</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>4、参考方法一种的步骤，应该编译好的 JRE 环境。</strong></font>\n","tags":["工具","错误","编译器","pycharm"],"categories":["工具"]},{"title":"逆向_反爬 指纹攻破策略","url":"/2023/05/26/逆向-反爬-指纹攻破策略/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>逆向_反爬 指纹攻破策略：</strong></font>\n\n<!--more-->\n\n关于 cloudflare 出5秒盾规律：\n\n+  开始我以为是所有的网页都会出现5秒盾，但是后面我发现用浏览器打开有些网页，是不触发5秒盾的\n+ 毕竟5秒盾还是影响用户浏览的。\n+ 经过测试，在requests下会发送很多指纹，这些指纹大大的超过了，一个正常浏览器该有的指纹。\n+ cloudflare 是根据给出的指纹检测的 该请求是由浏览器发出，还是由爬虫发出的\n\n\n\n<br>\n\n---\n\n<br>\n\n<font color=red size=6 face=宋体><strong>解决办法：</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>神奇的 python 第三方库 curl_cffi</strong></font>\n+ 库说明  >>> <font color=red size=3 face=宋体><strong>curl_cffi</strong></font> 库封装支持原生模拟浏览器TLS/JA3 指纹的Python 库\n\n```python\npip3 install curl_cffi   # 安装库\n```\n\n\n\n<br>\n\n<font color=#00b2c2 size=5 face=宋体><strong>请求方式：</strong></font>\n\n```python\nfrom curl_cffi import requests  # 导入 curl_cffi 库\n\n# 请求\nr = requests.get(url, impersonate=\"chrome101\", timeout=(5, 10))\n```\n\n","tags":["逆向","记录"],"categories":["逆向_反爬"]},{"title":"mysql 以元组的方式插入多条数据","url":"/2023/05/22/mysql-以元组的方式插入多条数据/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>mysql 以元组的方式插入多条数据</strong></font>\n\n<!--more-->\n\n```python\n# 以元组的方式插入多条数据\nINSERT INTO `comic_res`.`web_category` (`id`, `title`, `display_order`, `status`, `created_at`, `updated_at`) VALUES (41, '青春', 26, 1, 1666240411, 1666240411),(42, '穿越', 27, 1, 1666240411, 1666240411)\n\n```\n\n","tags":["数据库","mysql"],"categories":["数据库"]},{"title":"Linux_blkid 磁盘信息查询","url":"/2023/05/22/Linux-blkid-磁盘信息查询/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>Linux_blkid 磁盘信息查询</strong></font>\n\n<!--more-->\n\n# blkid\n\n查看块设备的文件系统类型、LABEL、UUID等信息\n\n## 补充说明\n\n在Linux下可以使用 **blkid命令** 对查询设备上所采用文件系统类型进行查询。blkid主要用来对系统的块设备（包括交换分区）所使用的文件系统类型、LABEL、UUID等信息进行查询。要使用这个命令必须安装e2fsprogs软件包。\n\n### 语法\n\n```shell\nblkid -L | -U\nblkid [-c ] [-ghlLv] [-o] [-s ][-t ] -[w ] [ ...]\nblkid -p [-s ] [-O ] [-S ][-o] ...\nblkid -i [-s ] [-o] ...\n```\n\n### 选项\n\n```shell\n-c <file>   # 指定cache文件(default: /etc/blkid.tab, /dev/null = none)\n-d          # don't encode non-printing characters\n-h          # 显示帮助信息\n-g          # garbage collect the blkid cache\n-o <format> # 指定输出格式\n-k          # list all known filesystems/RAIDs and exit\n-s <tag>    # 显示指定信息，默认显示所有信息\n-t <token>  # find device with a specific token (NAME=value pair)\n-l          # look up only first device with token specified by -t\n-L <label>  # convert LABEL to device name\n-U <uuid>   # convert UUID to device name\n-v          # 显示版本信息\n-w <file>   # write cache to different file (/dev/null = no write)\n<dev>       # specify device(s) to probe (default: all devices)\nLow-level probing options:\n-p          # low-level superblocks probing (bypass cache)\n-i          # gather information about I/O limits\n-S <size>   # overwrite device size\n-O <offset> # probe at the given offset\n-u <list>   # filter by \"usage\" (e.g. -u filesystem,raid)\n-n <list>   # filter by filesystem type (e.g. -n vfat,ext3)\n```\n\n### 实例\n\n1、列出当前系统中所有已挂载文件系统的类型：\n\n```shell\nsudo blkid\n```\n\n2、显示指定设备 UUID：\n\n```shell\nsudo blkid -s UUID /dev/sda5\n```\n\n3、显示所有设备 UUID：\n\n```shell\nsudo blkid -s UUID\n```\n\n4、显示指定设备 LABEL：\n\n```shell\nsudo blkid -s LABEL /dev/sda5\n```\n\n5、显示所有设备 LABEL：\n\n```shell\nsudo blkid -s LABEL\n```\n\n6、显示所有设备文件系统：\n\n```shell\nsudo blkid -s TYPE\n```\n\n7、显示所有设备：\n\n```shell\nsudo blkid -o device\n```\n\n8、以列表方式查看详细信息：\n\n```shell\nsudo blkid -o list\n```\n\n","tags":["系统","运维","linux"],"categories":["linux"]},{"title":"FFmpeg_视频添加水印","url":"/2023/05/22/FFmpeg-视频添加水印/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>FFmpeg_视频添加水印：</strong></font>\n\n<!--more-->\n\n```python\nffmpeg -i v2.mp4 -i s_logo.png -filter_complex \"[1:v][0:v]scale2ref=iw*0.1:-1[logo1][base]; [base][logo1]overlay=W-(w+20):20[v]\" -map [v] -map 0:a -y -profile high -level 4.1 v3.mp4\n```\n\n","tags":["ffmpeg"],"categories":["视频编辑"]},{"title":"mongodb 查询多条数据返回错误","url":"/2023/05/22/mongodb-查询多条数据返回错误/","content":"\n## <font color=#00b2c2 size=5 face=宋体><strong>mongodb type it for more</strong></font>\n\n<!--more-->\n\n当使用mongodb shell的时候 ，需要查看更多的数据时候，系统提示 type it for more\n\n可以设置系统参数 DBQuery.shellBatchSize = 300\n\n则可以查看更多300条数据的数据\n\n","tags":["mongodb","数据库","错误"],"categories":["数据库"]},{"title":"关于GitHub静态文件加速","url":"/2023/05/22/关于GitHub静态文件加速/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>关于GitHub静态文件加速：</strong></font>\n\n<!--more-->\n\n```\nhttps://cdn.jsdelivr.net/gh/T25kevin/static@main/static/lib/init.css\nhttps://cdn.jsdelivr.net/gh/<用户名>/<仓库名>@main<仓库下文件路径>\n```\n\n","tags":["Github加速"],"categories":["工具"]},{"title":"猫耳FM（MissEvan）加密参数破解代码及接口汇总","url":"/2023/05/22/猫耳FM（MissEvan）加密参数破解代码及接口汇总/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>猫耳FM（MissEvan）加密参数破解代码及接口汇总</strong></font>\n\n<!--more-->\n\n这次找了个简单的app来练练手，小众app逆向起来还是简单的，猫耳的app既没有壳有没有native层，仅仅只有一个加密参数，这里就直接上代码了。\n\n\n\n# 通用headers：\n\n```javascript\nheader = {\n  'user-agent': 'MissEvanApp/5.5.0 (Android;5.1.1;Android OPPO R17 Pro shamu)',\n  'channel': 'missevan_huawei',\n  'Content-Type':'application/json; charset=UTF-8',\n  'Accept':'application/json',\n  'cookie': 'token=xxx; equip_id=xxx',// token为账号的标识（没有则去除），equip_id为deviceid\n  'authorization': '',//这个就是加密参数，生成代码看下面\n  'x-m-date': '2021-03-23T16:08:44Z',// 时间，可传空字符串\n  'x-m-nonce': '62271935-318e-4ff1-ba91-685579a9cdbc'// nonce，可传空字符串\n}\n```\n\n\n\n# authorization参数生成代码（python）：\n\n```python\n# 此方法的实参为url，请求方法（GET与POST），请求头与请求体（是GET可不传）\ndef fun(url,method,header,body):\n  data = ''\n  qs = url.split('?')[1] if len(url.split('?')) > 1 else ''\n  url = urllib.parse.quote(url.split('?')[0])\n  equip_id = re.findall(r'equip_id=(\\S+?);',header['cookie'])[0] if re.findall(r'equip_id=(\\S+?);',header['cookie']) else re.findall(r'equip_id=(\\S+?)$codeholder_1#39;,header['cookie'])[0]\n  token = re.findall(r'token=(\\S+?);',header['cookie']) if re.findall(r'token=(\\S+?);',header['cookie']) else re.findall(r'token=(\\S+?)$codeholder_1#39;,header['cookie'])\n  token = token[0] if len(token) else None\n\n  data += method + '\\n'\n  data += url + '\\n'\n  data += qs + '\\n'\n  data += 'equip_id:' + equip_id + '\\n'\n  if token != None:\n    data += 'token:' + token + '\\n'\n  data += 'x-m-date:' + header['x-m-date'] + '\\n'\n  data += 'x-m-nonce:' + header['x-m-nonce'] + '\\n'\n  if method == 'POST':\n    sha = sha256()\n    sha.update(body.encode('utf-8'))\n    body = base64.b64encode(sha.digest()).decode('utf-8')\n    data += body + '\\n'\n\n  signature = base64.b64encode(hmac.new(appsecret.encode('utf-8'), data.encode('utf-8'), digestmod=sha256).digest())\n  # 这里直接将参数传进请求头中\n  header['authorization'] = 'MissEvan '+signature.decode('utf-8')\n```\n\n\n\n# 接口：\n\n1.https://app.missevan.com/sound/sound?sound_id=xxx\n\n获取音频资源地址，sound_id参数为音频的id\n\n\n\n2.https://app.missevan.com/you-might-like/get-recommends?persona_id=xxx\n\n”猜你喜欢“列表，persona_id参数意义不明，不过不同数字返回不同列表\n\n\n\n3.https://app.missevan.com/drama/get-drama-by-sound?sound_id=xxx\n\n音频相关信息，sound_id参数为音频的id\n\n\n\n4.https://app.missevan.com/message/get-comments?order=1&type=1&e_id=xxx&page=1&page_size=20&recommend=1&recommend_page_size=10\n\n音频评论列表，e_id参数为音频的id,page与page_size参数指定列表页数与大小\n\n\n\n5.https://app.missevan.com/sound/recommend?sound_id=1226753\n\n音频相关推荐列表，sound_id参数为音频的id\n\n\n\n6.https://app.missevan.com/member/login\n\n登录，此api为post方法，请求体为如下字符串：\n\naccount=xxx&password=xxx\n\naccount为你的手机号，password为密码，会返回token以及用户信息，将token加入cookie中则可使用账号访问\n\n\n\n7.https://app.missevan.com/person/get-user-info?user_id=5922770\n\n用户信息1，user_id参数为用户id\n\n\n\n8.https://app.missevan.com/person/homepage?user_id=5922770\n\n用户信息2，user_id参数为用户id\n","tags":["逆向","记录"],"categories":["逆向_APP"]},{"title":"逆向app记录","url":"/2023/05/22/逆向app记录/","content":"\n函数入口：\n\n<!--more-->\n\n![image-20230309145137516](https://s2.loli.net/2023/05/26/fsRG6vZlICrO7e8.png)\n\n![image-20230309150703294](https://s2.loli.net/2023/05/26/4HF7qlDZmwr51NM.png)\n\n![image-20230309150720478](https://s2.loli.net/2023/05/26/DW1COxUHVk9vGE8.png)\n\n![image-20230309222050257](https://s2.loli.net/2023/05/26/8ZuoQLAgrEBbOYK.png)\n\n","tags":["逆向","记录"],"categories":["逆向_APP"]},{"title":"hook设置相关","url":"/2023/05/22/hook设置相关/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>逆向hook设置相关：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>frida配置</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>PC：frida</strong></font>\n\n```python\npip install frida==14.2.18\npip install frida-tools==9.2.5\n```\n\n+ <font color=#f26522 size=4 face=宋体><strong>设备：frida-server 14.2.18：</strong></font>[点击下载](https://github.com/frida/frida/releases)\n\n```\n下载地址： https://github.com/frida/frida/releases\n  \n安装：\n\t- 【电脑】 解压\n\t- 【电脑】 文件上传到设备\n\t\t- adb push C:\\\\ss.zip /sdcard\n\t\t\n    - 【手机】将frida-server 文件移动到手机的 /data/local/tmp 目录\n    >>> adb shell\n    >>> su -\n    >>> cd sdcard\n    >>> mv frida-server-14.2.18-android-x86_64 /data/local/tmp\n    \n    - 【进入】\n    >>> cd /data/local/tmp\n    \n    - 【授权】 授权可执行的权限\n    >>> chmod 777 frida-server-14.2.18-android-x86_64\n```\n\n  \n\n## <font color=#00b2c2 size=5 face=宋体><strong>adb相关设置</strong></font>\n\n```\n>>> adb kill-server   # 杀掉当前adb\n>>> adb start-server   # 开启adb服务\n>>> adb devices    # 连接虚拟机\n>>> adb connect 127.0.0.1:7555   # 用7555 端口连接\n>>> adb shell   # 进入终端\n\n>>> adb -s emulator-7555 shell getprop ro.product.cpu.abi    # 获取当前手机的操作系统架构   也可以进入shell执行  getprop ro.product.cpu.abi\n\n如果连接多个设备  需要加 -s\n\n>>> su -    # 进入超级用户权限 \n\n>>> adb push    # 上传命令    adb push C:\\\\Users\\\\Administrator\\\\Pictures\\\\4512332948.jpg /sdcard/\nC:\\Users\\Administrator\\Desktop\\反编译工具\nadb push C:\\\\Users\\\\Administrator\\\\Desktop\\\\反编译工具\\\\frida-server-14.2.18-android-x86_64 /sdcard/\n```\n\n\n\n# <font color=#00b2c2 size=5 face=宋体><strong>HOOK运行设置</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>手机</strong></font>\n\n```\n>>> adb shell\n>>> su -\n>>> cd /data/local/tmp/\n>>> ./frida-server-14.2.18-android-x86_64   # 执行frida\n```\n\n\n\n+ <font color=#f26522 size=4 face=宋体><strong>电脑端</strong></font>\n\n  + <font color=#b0171f size=2 face=宋体><strong>端口转码</strong></font>\n\n  ```\n  >>> adb forward tcp:27042 tcp:27042\n  >>> adb forward tcp:27043 tcp:27043\n  ```\n\n+ <font color=#f26522 size=4 face=宋体><strong>电脑编写HOOK脚本 ： Python+Js代码 => xxxx.py文件   用Python解释器去运行</strong></font>\n\n","tags":["逆向","Hook"],"categories":["逆向_APP"]},{"title":"adb相关设置","url":"/2023/05/22/adb相关设置/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>adb相关设置：</strong></font>\n\n<!--more-->\n\n```\n>>> adb kill-server   # 杀掉当前adb\n>>> adb start-server   # 开启adb服务\n>>> adb devices    # 连接虚拟机\n>>> adb connect 127.0.0.1:7555   # 用7555 端口连接\n>>> adb shell   # 进入终端\n\n>>> adb -s emulator-7555 shell getprop ro.product.cpu.abi    # 获取当前手机的操作系统架构   也可以进入shell执行  getprop ro.product.cpu.abi\n```\n\n","tags":["逆向","adb"],"categories":["逆向_APP"]},{"title":"ESXi添加USB硬盘作为数据存储","url":"/2023/05/22/ESXi添加USB硬盘作为数据存储/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>ESXi添加USB硬盘作为数据存储</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>原始博客地址：[ESXi添加USB硬盘作为数据存储 – 丁辉博客 (dinghui.org)](https://www.dinghui.org/esxi-usb-datastore.html)</strong></font>\n\n- <font color=#b0171f size=2 face=宋体><strong>ESXi添加USB硬盘作为数据存储</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>通常在ESXi插上USB硬盘，都是映射给虚拟机使用，但是有些情况下我们需要提供给ESXi使用，直接扫描存储是无法扫描到USB硬盘的，需要做如下处理才能被识别。</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>1、开启主机SSH功能：主机-配置-服务，找到SSH服务，启用；</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>2、先不要插USB硬盘，输入以下命令：</strong></font>\n\n```\n/etc/init.d/usbarbitrator stop\nchkconfig usbarbitrator off\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>3、插入USB硬盘，输入以下命令，可以看到有Is USB:true字样，表示USB设备已经识别出来。</strong></font>\n\n```\nesxcli storage core device list |grep -i usb\n```\n\n![img](https://s2.loli.net/2023/05/22/txpebkovmzZ1ag3.png)\n\n<font color=red size=2 face=宋体><strong>可以看到设备名为：mpx.vmhba34:C0:T0:L0（注意，每款设备编号都会不同）</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>4、输入以下命令，会列出所有的disk，确认一下是否正确识别该设备名。</strong></font>\n\n```\nls /dev/disks/\n```\n\n![img](https://s2.loli.net/2023/05/22/GOL7MRXdcQw12Br.png)\n\n+ <font color=#b0171f size=2 face=宋体><strong>5、输入命令，注意替换（如果是mpx.vmhba34:C0:T0:L0则变成mpx.vmhba34\\:C0\\:T0\\:L0）</strong></font>\n\n```\npartedUtil mklabel /dev/disks/mpx.vmhba34\\:C0\\:T0\\:L0 gpt \npartedUtil getptbl /dev/disks/mpx.vmhba34\\:C0\\:T0\\:L0\n```\n\n![img](https://s2.loli.net/2023/05/22/sCVSHKkWEvr1y8M.png)\n\n![img](https://s2.loli.net/2023/05/22/AFKMBu68Sw1DXOj.png)\n\n+ <font color=#b0171f size=2 face=宋体><strong>6、如上图，得到一串硬盘的数值，这里是4000731136，注意每个硬盘数值都不同。</strong></font>\n\n```\neval expr $(partedUtil getptbl /dev/disks/mpx.vmhba34\\:C0\\:T0\\:L0 | tail -1 | awk '{print $1 \" \\\\* \" $2 \" \\\\* \" $3}') - 1\n```\n\n![img](https://s2.loli.net/2023/05/22/q5oIGFscKu7BSxv.png)\n\n+ <font color=#b0171f size=2 face=宋体><strong>7、如上，会换算出另外一个数值：4000715144，运行如下命令</strong></font>\n\n```\npartedUtil setptbl /dev/disks/mpx.vmhba34\\:C0\\:T0\\:L0 gpt \"1 2048 4000715144 AA31E02A400F11DB9590000C2911D1B8 0\"\n```\n\n![img](https://s2.loli.net/2023/05/22/U1KHpTau2AZ5zjx.png)\n注意：（AA31E02A400F11DB9590000C2911D1B8）是VMFS数据存储分区的GUID，后面的0是属性，不要更改。\n\n+ <font color=#b0171f size=2 face=宋体><strong>8、挂载USB硬盘，注意后面有个:1</strong></font>\n\n```\nvmkfstools -C vmfs5 -S USB_Datastore /dev/disks/mpx.vmhba34\\:C0\\:T0\\:L0:1\n```\n\n[![img](https://s2.loli.net/2023/05/22/BcK2SyYV3vgznbH.png)](https://www.dinghui.org/wp-content/uploads/2021/04/image-7.png)说明：vmfs5是指用vmfs5格式，如果在其它esxi版本不支持vmfs5时，可以改为vmfs6，-S USB_Datastore是存储的名字，可自行定义。\n\n+ <font color=#b0171f size=2 face=宋体><strong>9、这样USB_Datastore就已经创建好了，从ESXi数据存储那里就可以看到多了一个USB_Datastore了。</strong></font>\n\n![img](https://s2.loli.net/2023/05/22/5w63xHpMAtP4RVW.png)\n","tags":["工具","虚拟机"],"categories":["工具"]},{"title":"Hexo使用攻略-添加分类及标签","url":"/2023/05/22/Hexo使用攻略-添加分类及标签/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Hexo使用攻略-添加分类及标签</strong></font>\n\n<!--more-->\n\n本教程针对的是Mac环境下，nexT主题的文章分类和标签设置，其他主题也应该是类似的。添加成功后会在侧边栏或导航栏生成“分类”和“标签”这两个选项，看下图：\n\n[!文章分类、标签](/home/kate/图片、4626959-23b970682d0c20cf.png)\n\n点击“分类”后的页面：\n\n![4626959-23b970682d0c20cf.png](https://s2.loli.net/2023/02/15/1ThNDesyAwrUkmK.png)\n\n点击“标签”后的页面：\n\n![标签](https://s2.loli.net/2023/05/22/2bGDplZvscdLEQI.webp)\n\n\n\nok，大概效果就是这样的，下面进入教程\n\n### 1、创建“分类”选项\n\n#### 1.1 生成“分类”页并添加tpye属性\n\n打开命令行，进入博客所在文件夹。执行命令\n\n```\n$ hexo new page categories\n```\n\n成功后会提示：\n\n```\nINFO  Created: ~/Documents/blog/source/categories/index.md\n```\n\n根据上面的路径，找到`index.md`这个文件，打开后默认内容是这样的：\n\n```\n---\ntitle: 文章分类\ndate: 2017-05-27 13:47:40\n---\n```\n\n添加`type: \"categories\"`到内容中，添加后是这样的：\n\n```\n---\ntitle: 文章分类\ndate: 2017-05-27 13:47:40\ntype: \"categories\"\n---\n```\n\n保存并关闭文件。\n\n#### 1.2 给文章添加“categories”属性\n\n打开需要添加分类的文章，为其添加categories属性。下方的`categories: web前端`表示添加这篇文章到“web前端”这个分类。注意：hexo一篇文章只能属于一个分类，也就是说如果在“- web前端”下方添加“-xxx”，hexo不会产生两个分类，而是把分类嵌套（即该文章属于 “- web前端”下的 “-xxx ”分类）。\n\n```\n---\ntitle: jQuery对表单的操作及更多应用\ndate: 2017-05-26 12:12:57\ncategories: \n- web前端\n---\n```\n\n至此，成功给文章添加分类，点击首页的“分类”可以看到该分类下的所有文章。当然，只有添加了`categories: xxx`的文章才会被收录到首页的“分类”中。\n\n### 2、创建“标签”选项\n\n#### 2.1 生成“标签”页并添加tpye属性\n\n打开命令行，进入博客所在文件夹。执行命令\n\n```\n$ hexo new page tags\n```\n\n成功后会提示：\n\n```\nINFO  Created: ~/Documents/blog/source/tags/index.md\n```\n\n根据上面的路径，找到`index.md`这个文件，打开后默认内容是这样的：\n\n```\n---\ntitle: 标签\ndate: 2017-05-27 14:22:08\n---\n```\n\n添加`type: \"tags\"`到内容中，添加后是这样的：\n\n```\n---\ntitle: 文章分类\ndate: 2017-05-27 13:47:40\ntype: \"tags\"\n---\n```\n\n保存并关闭文件。\n\n#### 2.2 给文章添加“tags”属性\n\n打开需要添加标签的文章，为其添加tags属性。下方的`tags:`下方的`- jQuery` `- 表格`\n`- 表单验证`就是这篇文章的标签了\n\n```\n---\ntitle: jQuery对表单的操作及更多应用\ndate: 2017-05-26 12:12:57\ncategories: \n- web前端\ntags:\n- jQuery\n- 表格\n- 表单验证\n---\n```\n\n至此，成功给文章添加分类，点击首页的“标签”可以看到该标签下的所有文章。当然，只有添加了`tags: xxx`的文章才会被收录到首页的“标签”中。\n\n细心的朋友可能已经发现，这两个的设置几乎一模一样！是的，没错，思路都是一样的。所以我们可以打开scaffolds/post.md文件，在tages:上面加入categories:,保存后，之后执行`hexo new 文章名`命令生成的文件，页面里就有`categories:`项了。\n\nscaffolds目录下，是新建页面的模板，执行新建命令时，是根据这里的模板页来完成的，所以可以在这里根据你自己的需求添加一些默认值。\n\n教程结束，赶紧去设置吧！\n","tags":["hexo"],"categories":["博客"]},{"title":"VMware_所有版本许可证","url":"/2023/05/22/VMware-所有版本许可证/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**激活密钥许可证**</strong></font>\n\n<!--more-->\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>**VM17 激活许可证**</strong></font>\n\n```\nMC60H-DWHD5-H80U9-6V85M-8280D\n\nJU090-6039P-08409-8J0QH-2YR7F\n\n5Y012-8HL8P-0J8U0-032Q6-93KKF\n```\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>**VM16 激活许可证**</strong></font>\n\n```\nZF3R0-FHED2-M80TY-8QYGC-NPKYF\n```\n\n<br>\n\n---\n\n<br><font color=#f26522 size=4 face=宋体><strong>**VM15 激活许可证**</strong></font>\n\n```\nUY758-0RXEQ-M81WP-8ZM7Z-Y3HDA\n\nVF750-4MX5Q-488DQ-9WZE9-ZY2D6\n\nUU54R-FVD91-488PP-7NNGC-ZFAX6\n\nYC74H-FGF92-081VZ-R5QNG-P6RY4\n\nYC34H-6WWDK-085MQ-JYPNX-NZRA2\n```\n\n<br>\n\n---\n\n<br><font color=#f26522 size=4 face=宋体><strong>**VM14 激活许可证**</strong></font>\n\n```\nFF31K-AHZD1-H8ETZ-8WWEZ-WUUVA\n\nCV7T2-6WY5Q-48EWP-ZXY7X-QGUWD\n```\n\n<br>\n\n---\n\n<br><font color=#f26522 size=4 face=宋体><strong>**VM12 激活许可证**</strong></font>\n\n```\n5A02H-AU243-TZJ49-GTC7K-3C61N\n\nVF5XA-FNDDJ-085GZ-4NXZ9-N20E6\n\nUC5MR-8NE16-H81WY-R7QGV-QG2D8\n\nZG1WH-ATY96-H80QP-X7PEX-Y30V4\n\nAA3E0-0VDE1-0893Z-KGZ59-QGAVF\n```\n\n<br>\n\n---\n\n<br><font color=#f26522 size=4 face=宋体><strong>**VM10 激活许可证**</strong></font>\n\n```\n1Z0G9-67285-FZG78-ZL3Q2-234JG\n\n4C4EK-89KDL-5ZFP9-1LA5P-2A0J0\n\nHY086-4T01N-CZ3U0-CV0QM-13DNU\n```\n\n","tags":["错误","虚拟机"],"categories":["工具"]},{"title":"Ubuntu20.04_VMware_显示内核更新错误","url":"/2023/05/22/Ubuntu20-04-VMware-显示内核更新错误/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Ubuntu20.04_VMware_显示内核更新错误</strong></font>\n\n<!--more-->\n\n<font color=red size=6 face=宋体><strong>说明：</strong></font><font color=#b0171f size=3 face=宋体><strong>unable to install all modules. see log /tmp/vmware</strong></font>\n\n```shell\ngit clone https://github.com/mkubecek/vmware-host-modules\ncd vmware-host-modules\ngit checkout workstation-16.1.1\nsudo make\nsudo make install\n```\n\n","tags":["错误","虚拟机"],"categories":["工具"]},{"title":"ubuntu 20.04安装_Hexo_blog到gitee教程","url":"/2023/05/22/ubuntu-20-04安装-Hexo-blog到gitee教程/","content":"\n#### <font color=#00b2c2 size=5 face=\"宋体\"><strong>系统:ubuntu 20.04：</strong></font>\n\n<!--more-->\n\n```shell\n# 安装nodejs npm\nsudo apt update\nsudo apt install nodejs npm\n\n# 查看版本\nnodejs --version\n```\n\n![image-20230214204218762](https://s2.loli.net/2023/02/14/SZ1iWgvyFUYn9t2.png)\n\n\n\n\n\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>1、我们将会安装 Node.js 版本 14.x:</strong></font>\n\n<font color=#f26522 size=3 face=\"宋体\"><strong>1）以 sudo 用户身份运行下面的命令，下载并执行 NodeSource 安装脚本：</strong></font>\n\n```bash\ncurl -sL https://deb.nodesource.com/setup_14.x | sudo -E bash -\n```\n\n\n\n<font color=#f26522 size=3 face=\"宋体\"><strong>这个脚本将会添加 NodeSource 的签名 key 到你的系统，创建一个 apt 源文件，安装必备的软件包，并且刷新 apt 缓存。</strong></font>\n\n<font color=#f26522 size=3 face=\"宋体\"><strong>如果你需要另外的 Node.js 版本，例如`12.x`，将`setup_14.x`修改为`setup_12.x`</strong></font>\n\n<font color=#f26522 size=3 face=\"宋体\"><strong>2）NodeSource 源启用成功后，安装 Node.js 和 npm:</strong></font>\n\n```bash\nsudo apt install nodejs\n```\n\n<font color=#f26522 size=3 face=\"宋体\"><strong>nodejs 软件包同时包含`node`和`npm`二进制包。</strong></font>\n\n<font color=#f26522 size=3 face=\"宋体\"><strong>3）验证 Node.js 和 npm 是否正确安装。打印它们的版本号：</strong></font>\n\n```bash\nnode --version\n```\n\n![image-20230214204628631](https://s2.loli.net/2023/02/14/WEa4s2cqZ8PVyBu.png)\n\n\n\n\n\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>**2、运行 Git Bash 并切换淘宝镜像。**</strong></font>\n\n<font color=#f26522 size=3 face=\"宋体\"><strong>如果不需要切换源，则可跳过此步骤：</strong></font>\n\n```bash\n# 全局切换命令：\nnpm config set registry http://registry.npm.taobao.org/\n\n# 查看版本命令：\nnpm get registry\n\n# 切回官方镜像：\nnpm config set registry http://www.npmjs.org\n```\n\n\n\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>**3、安装HEXO程序**</strong></font>\n\n```bash\nnpm install -g hexo\n\n# 查看版本：\nhexo v\n```\n\n\n\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>**4、创建 hexo 文件夹**</strong></font>\n\n<font color=#f26522 size=3 face=\"宋体\"><strong>hexo 文件夹，是未来博客运转的目标文件夹，写文、主题安装等等都在这里完成。</strong></font>\n\n<font color=#f26522 size=3 face=\"宋体\"><strong>请在指定路径新建文件夹（英文名），右键空白处，选择 Git Bash here，输入指令：</strong></font>\n\n```bash\nhexo init\n```\n\n\n\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>**5、安装主题**</strong></font>\n\n<font color=#f26522 size=3 face=\"宋体\"><strong>现在这个是必须过程了，反正自带的主题也没人用不是么？</strong></font>\n\n<font color=#f26522 size=3 face=\"宋体\"><strong>6.1 在 theme 文件夹下，建立你要使用的主题的同名文件夹，比如 theme/next</strong></font>\n\n<font color=#f26522 size=3 face=\"宋体\"><strong>6.2 cd 到 theme 文件夹，或者直接在 theme 文件夹里右键运行 Git Bash。</strong></font>\n\n<font color=#f26522 size=3 face=\"宋体\"><strong>6.3 输入获取主题的命令：</strong></font>\n\n```shell\ngit clone -b theme https://github.com/niemingzhao/niemingzhao.github.io.git themes/default\n```\n\n![](https://s2.loli.net/2023/02/14/vC7O9xZuoVTRJht.png)\n\n\n\n<font color=red size=3 face=\"宋体\"><strong>**注意：在修改模板的时候，除了需要到主配置下添加模板名以外，还需要将主题下的配置文件修改为 _config.yml**</strong></font>\n\n\n\n\n\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>**6、Hexo 主要命令**</strong></font>\n\n```bash\nhexo clean：清除 public 静态目录\nhexo s：本地启动默认指定 4000 端口预览 (s 是 server 是缩写 也就是启动 hexo 服务)\nhexo g：生成 public 静态目录\nhexo d： 部署\n```\n\n\n\n\n\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>**7、Hexo 插件安装**</strong></font>\n\n```bash\nnpm install hexo-generator-search --save\n# 评论插件\nnpm i --save gitalk\n\n# RSS插件\nnpm install --save hexo-generator-feed\n\n# 安装 文章转换二维码插件\nnpm install --save hexo-helper-qrcode\n\n# gitee版本插件安装\nnpm install --save gitment\n```\n\n\n\n","tags":["linux","Hexo","blog"],"categories":["博客"]},{"title":"安装nodejs-cnpm","url":"/2023/05/22/安装nodejs-cnpm/","content":"\n<strong><a class=\"wp-editor-md-post-content-link\" href=\"https://nodejs.org\">nodejs官方网址</a></strong>\n\n<!--more-->\n\n**Nodejs v16.13.0：**[**官方版**](https://nodejs.org/dist/v16.13.0/node-v16.13.0-linux-x64.tar.xz)、[直链下载](https://bd.bcebos.com/v1/xly-icafe/node-v16.2.0-linux-x64.tar-20240525034348-plibvg.xz)\n\n**Nodejs v20.0.0：**[**官方版**](https://nodejs.org/dist/v20.2.0/node-v20.2.0-linux-x64.tar.xz)、[直链下载](https://bd.bcebos.com/v1/xly-icafe/node-v20.2.0-linux-x64.tar-20240525034121-bpmrw1.xz)\n\n**Nodejs v22.0.0：**[**官方版**](https://nodejs.org/dist/v22.0.0/node-v22.0.0-linux-x64.tar.xz)、[直链下载](https://bd.bcebos.com/v1/xly-icafe/node-v22.0.0-linux-x64.tar-20240525034203-hmckok.xz)\n\n```python\n# 下载nodejs v22\nwget -O node-v22.0.0-linux-x64.tar.xz https://bd.bcebos.com/v1/xly-icafe/node-v22.0.0-linux-x64.tar-20240525034203-hmckok.xz\n\n# 下载完成之后 使用：tar -xf <文件>  解压 *.tar.xz文件\ntar -xf node-v16.13.0-linux-x64.tar.xz\n# 将文件移动到opt文件夹下\nmv node-v16.13.0-linux-x64 /opt\n# 创建全局变量，使node在任何地方都能使用\nsudo ln -s /opt/node-v16.13.0-linux-x64/bin/node /usr/local/bin/node\nsudo ln -s /opt/node-v16.13.0-linux-x64/bin/npm /usr/local/bin/npm\n# 到此 node和 npm 就算安装完成了\nnode -v   # 查看node版本信息\nnpm -v   # 查看npm版本信息\n# 接下来，开始安装cnpm\n# cnpm是npm的国内源，其服务器是淘宝的，所以国内比较快\n# cnpm的执行过程是先去淘宝源下找软件，当淘宝源下没有所需要的包，会自动到npm服务器下寻找包\nnpm install -g cnpm --registry=https://registry.npm.taobao.org  # 定义cnpm淘宝源码\nsudo ln -s /opt/node-v16.13.0-linux-x64/bin/cnpm /usr/local/bin/cnpm  #   创建全局变量\n```\n","tags":["工具","安装","nodejs"],"categories":["工具","安装教程"]},{"title":"宝塔面板_历史版本_脱离官方下载","url":"/2023/05/22/宝塔面板-历史版本-脱离官方下载/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>宝塔面板_历史版本_脱离官方下载：</strong></font>\n\n<!--more-->\n\n<h2>1. 历史版本宝塔下载链接（防止官方删除历史版本，自备！觉得别扭的，请绕道）</h2>\n\n<ul>\n<li><strong>宝塔_5.9.1（目前仍然很多人在用的版本）: <a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/linuxpanel-5.9.1-20220110194703-1yjs8u.zip\">点击下载</a></strong></li>\n<li><strong>宝塔_7.0.1: <a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/linuxpanel-7.0.1-20220110195051-tayf6k.zip\">点击下载</a></strong></li>\n<li><strong>宝塔_7.0.2: <a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/linuxpanel-7.0.2-20220110195123-qyqem3.zip\">点击下载</a></strong></li>\n<li><strong>宝塔_7.0.3: <a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/linuxpanel-7.0.3-20220110195157-yssexv.zip\">点击下载</a></strong></li>\n<li><strong>宝塔_7.1.0: <a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/linuxpanel-7.1.0-20220110195229-gknrfv.zip\">点击下载</a></strong></li>\n<li><strong>宝塔_7.1.1: <a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/linuxpanel-7.1.1-20220110195255-p3429k.zip\">点击下载</a></strong></li>\n<li><strong>宝塔_7.2.0: <a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/linuxpanel-7.2.0-20220110195320-namkvo.zip\">点击下载</a></strong></li>\n<li><strong>宝塔_7.3.0: <a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/linuxpanel-7.3.0-20220110195346-wymfbj.zip\">点击下载</a></strong></li>\n<li><strong>宝塔_7.4.0: <a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/linuxpanel-7.4.0-20220110195410-3zwqjb.zip\">点击下载</a></strong></li>\n<li><strong>宝塔_7.4.2（有pma漏洞）: <a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/linuxpanel-7.4.2-20220110195440-s6mdnj.zip\">点击下载</a></strong></li>\n<li><strong>宝塔_7.4.3: <a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/linuxpanel-7.4.3-20220110195505-kzoodl.zip\">点击下载</a></strong></li>\n<li><strong>宝塔_7.4.5（会有绑定提醒）: <a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/linuxpanel-7.4.5-20220110195541-sl6r0j.zip\">点击下载</a></strong></li>\n<li><strong>宝塔_7.6.0: <a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/linuxpanel-7.6.0-20220110211834-kfdtd3.zip\">点击下载</a></strong></li>\n<li><strong>宝塔_7.7.0: <a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/linuxpanel-7.7.0-20220110211841-kjhxx3.zip\">点击下载</a></strong></li>\n<li><strong>宝塔_7.8.0: <a class=\"wp-editor-md-post-content-link\" href=\"http://download.bt.cn/install/update/LinuxPanel-7.8.0.zip\">点击下载</a></strong></li>\n</ul>\n\n<h2>2. 安装方法</h2>\n\n<ul>\n<li>先使用宝塔官方命令正常安装，之后在进行升级/降级操作</li>\n<li><strong>Centos安装命令：</strong></li>\n</ul>\n\n<pre><code class=\"language-shell line-numbers\">yum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh\n</code></pre>\n\n<ul>\n<li><strong>Ubuntu/Deepin安装命令：</strong></li>\n</ul>\n\n<pre><code class=\"language-shell line-numbers\">wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh && sudo bash install.sh\n</code></pre>\n\n<ul>\n<li><strong>Debian安装命令：</strong></li>\n</ul>\n\n<pre><code class=\"language-shell line-numbers\">wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh && bash install.sh\n</code></pre>\n\n<ul>\n<li><strong>Fedora安装命令:</strong></li>\n</ul>\n\n<pre><code class=\"language-shell line-numbers\">wget -O install.sh http://download.bt.cn/install/install_6.0.sh && bash install.sh\n</code></pre>\n\n<ul>\n<li><strong><em>*Linux面板7.9.0升级命令：*</em></strong></li>\n</ul>\n\n<pre><code class=\"language-shell line-numbers\">curl https://download.bt.cn/install/update_panel.sh|bash\n</code></pre>\n\n<h2>3. 官方手动升级方法</h2>\n\n<pre><code class=\"language-shell line-numbers\">离线升级步骤：\n1、下载离线升级包\n2、将升级包上传到服务器中的/root目录\n3、解压文件：unzip LinuxPanel-*\n4、切换到升级包目录： cd panel\n5、执行升级脚本：bash update.sh\n6、删除升级包：cd .. && rm -f LinuxPanel-*.zip && rm -rf panel\n</code></pre>\n\n<h2>4. 为了更安全，你可以执行以下内容，避免一些问题<del></del></h2>\n\n<pre><code class=\"language-shell line-numbers\">echo '127.0.0.1 bt.cn' >>/etc/hosts\n</code></pre>\n\n<h2><strong>5. 面板管理常用命令：</strong> https://www.bt.cn/btcode.html</h2>\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n","tags":["系统","运维","宝塔"],"categories":["linux","运维"]},{"title":"宝塔面板_TypeError","url":"/2023/05/22/宝塔面板-TypeError/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>宝塔面板_TypeError：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>关于宝塔面板下的 TypeError: ‘NoneType’ object is not subscriptable 错误</strong></font>\n\n<font color=redd size=5 face=宋体><strong>说明：</strong></font><font color=red size=2 face=宋体><strong>该错误的引发原因是因为安装插件 导致/www/server/panel/data/plugin.json 丢失引起的</strong></font>\n\n### **解决方法一：**\n\n+ <font color=#b0171f size=2 face=宋体><strong>重装宝塔面板</strong></font>\n\n### **解决办法二：**\n\n+ <font color=#b0171f size=2 face=宋体><strong>去另一个宝塔面吧下面，复制一份 plugin.json 丢到制定文件夹下即可</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>相对于已经稳定运行了很久的服务器来说， 重装肯定是不可能的，所以无疑第二种是最优的解决方案。</strong></font>\n\n<br>\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n","tags":["系统","运维","宝塔"],"categories":["linux"]},{"title":"搭建属于自己的Linux的http代理服务器（正向代理HTTP/HTTPS）","url":"/2023/05/22/搭建属于自己的Linux的http代理服务器（正向代理HTTP-HTTPS）/","content":"\n<h2>1. 服务器环境：Centos7 宝塔面板</h2>\n\n<!--more-->\n\n<h4><font color=red size=5 face=\"黑体\">方法一：利用Nginx来搭建HTTP正向代理</font></h4>\n\n<h6>起初折腾老半天，请求代理就是不出数据，后来查了下，原来正常情况下，利用Nginx来搭建仅支持http代理访问，想要代理请求SSL的话，需要Nginx编译安装 ngx_http_proxy_connect_module 模块才行。以宝塔面板操作过一遍，已失败告终。等待继续研究。这里就简单说下仅支持http的代理搭建操作。</h6>\n\n<ul>\n<li>资料：\nngx_http_proxy_connect_module 模块\n\nhttps://github.com/chobits/ngx_http_proxy_connect_module</p></li>\n<li>1，宝塔面板，已安装Nginx (我这里用的是Nginx-1.16)</p></li>\n<li><p>2，可以直接在Nginx配置里设置，也可以通过新建一个站点，在站点配置里设置（推荐，下面图也是通过新建一个站点来设置的），并设置一个带端口的ip地址（这里也是你要设置的代理端口）。</p></li>\n</ul>\n\n<p><img src=\"https://s2.loli.net/2022/06/08/dmKNj3JF5LrI6Vg.png\" alt=\"\" />\n\n<ul>\n<li>3，在 server{ ... } 类中相应位置添加如下代码。</li>\n</ul>\n\n<pre><code class=\"language-shell line-numbers\">resolver 114.114.114.114;\nresolver_timeout 5s;\n\nlocation / {\n    proxy_pass $scheme://$host$request_uri;\n    proxy_set_header Host $http_host;\n\n    proxy_buffers 256 4k;\n    proxy_max_temp_file_size 0;\n    \n    proxy_connect_timeout 30;\n    \n    proxy_cache_valid 200 302 10m;\n    proxy_cache_valid 301 1h;\n    proxy_cache_valid any 1m;\n    }\n</code></pre>\n\n<img src=\"https://s2.loli.net/2022/06/08/FZNcyaELQAPMmxw.png\" alt=\"\" />\n\n<ul>\n<li>4，此方法已经在面板的安全组中加了端口放行。若是在Nginx配置中设置的话，需要另外添加</li>\n</ul>\n\n<h4><font color=red size=5 face=\"黑体\">方法二：使用squid搭建自己专属的http/https正向代理服务器</font></h4>\n\n由于我需要httos代理，所以方法一我就放弃了，网上找了下还有个方法就是使用squid来搭建了，测试支持http 和 https 代理访问。\n\n测试呢，此方法相较于Nginx正向代理速度较慢些\n\n<ul>\n<li>1，shell 命令安装squid</li>\n</ul>\n\n<pre><code class=\"language-shell line-numbers\">yum install -y squid\n</code></pre>\n\n<ul>\n<li>2，配置 squid\n\n<ul>\n<li>1，会命令语句的，就直接用 vim 编辑下配置文件</li>\n</ul></li>\n</ul>\n\n<pre><code class=\"language-shell line-numbers\">vim /etc/squid/squid.conf\n</code></pre>\n\n<ul>\n<li>2，像我不太熟的，就到宝塔面板的文件处编辑了\n\n<ul>\n<li>3，配置端口，以及设置下 允许访问所有地址 为 allow （默认是deny，设置用户密码验证的话，保持默认deny）</li>\n</ul></li>\n```python\n# 允许访问所有地址，默认是 deny，这个要主动改一下\nhttp_access allow all\n# Squid normally listens to port 3128\n# 代理服务器端口\nhttp_port 4399\n```\n\n<img src=\"https://s2.loli.net/2022/06/08/cQLxVoGnzqM7HBm.png\" alt=\"\" />\n\n<ul>\n<li>4，启动代理</li>\n</ul>\n\n<pre><code class=\"language-shell line-numbers\">service squid start\n</code></pre>\n\n<ul>\n<li>5，其他shell命令</li>\n</ul>\n```python\n# 启动\nservice squid start\n# 停止\nservice squid stop\n# 重启\nservice squid restart\n# 重新加载配置文件\nservice squid reload\n# 查看是否正在运行\nservice squid status\n```\n\n\n全部命令：{start|stop|status|reload|force-reload|restart|condrestart|try-restart|probe}\n\n<ul>\n<li>6，到了这其实就算完成了，如果要设置用户密码验证的话，就继续。\n\n（注意第3点处 http_access deny all）\n\n</li>\n</ul>\n\n<h4><font color=red size=5 face=\"黑体\">重点：</font></h4>\n\n<ul>\n<li>①，在  http_access deny all  上方添加 如下代码</li>\n</ul>\n\n<pre><code class=\"language-shell line-numbers\">auth_param basic program /usr/lib64/squid/basic_ncsa_auth /etc/squid/passwd\nacl auth_user proxy_auth REQUIRED\nhttp_access allow auth_user\n</code></pre>\n<img src=\"https://s2.loli.net/2022/06/08/iHrgvQWVZG8zsme.png\" alt=\"\" />\n\n<ul>\n<li>②，设置高匿，文件末尾加上如下代码（可省）</li>\n</ul>\n```python\n#文件最后加上  高匿配置\nrequest_header_access X-Forwarded-For deny all\nrequest_header_access From deny all\nrequest_header_access Via deny all\n```\n\n\n<ul>\n<li>③，创建用户密码，shell执行</li>\n</ul>\n\n<pre><code class=\"language-shell line-numbers\">htpasswd -c /etc/squid/passwd proxy_username\n</code></pre>\n\n（proxy_username 自定义哈）\n\n确定后，会提示你输入密码两次\n\n上述完成后就会生成 文件 /etc/squid/passwd\n\n<ul>\n<li>④，重启</li>\n</ul>\n\n<pre><code class=\"language-shell line-numbers\">systemctl restart squid\n</code></pre>\n","tags":["代理","梯子"],"categories":["工具"]},{"title":"关于解决——bash: ping: command not found","url":"/2023/05/22/关于解决——bash-ping-command-not-found/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>关于解决——bash: ping: command not found</strong></font>\n\n<!--more-->\n\n<font color=red size=5 face=宋体><strong>bash: ping: command not found 是因为系统没有包，直接安装即可</strong></font>\n\n```shell\napt-get install iputils-ping\n```\n\n","tags":["错误"],"categories":["linux"]},{"title":"利用阿里云工单客服系统做免费图床","url":"/2023/05/22/利用阿里云工单客服系统做免费图床/","content":"\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>我自己是不用这个图床的，本人有某度！那个还是很稳定的！所以没必要搞很多个，精力耗不起</strong></font>\n\n<!--more-->\n\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>有需要的可以自行测试，另外根据原作者的意思，key过期了</strong></font>\n\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>可以去这里浏览原网页：<a class=\"wp-editor-md-post-content-link\" href=\"https://bbs.itzmx.com/thread-96020-1-1.html\">点击浏览</a></strong></font>\n\nhttps://kfupload.alibaba.com/mupload\nPOST 参数        类型        说明\nfile 表单 文件的二进制数据\nname 参数        随机文件名.jpg\nscene 参数        固定为 aeMessageCenterV2ImageRule\n支持 JPG、PNG、GIF 格式\n文件大小限制为 5MB\n无需身份验证\n5MB的GIF效果图：\n<img src=\"https://ae01.alicdn.com/kf/H5fad35d66dca46108a4898efc0c79f7cT.jpg\" alt=\"5MB图片效果\" />\nURL：https://ae01.alicdn.com/kf/H5fad35d66dca46108a4898efc0c79f7cT.jpg\nURL2：https://sc01.alicdn.com/kf/H5fad35d66dca46108a4898efc0c79f7cT.jpg\ngoogle检索了下还有个店铺接口：https://cbu01.alicdn.com/img/ibank/2018/578/980/8997089875_53215101.jpg\n回源限速800KB，CDN缓存后边缘节点不限速，10Gbps可跑满\n\n请求类型：POST\n\nURL：https://kfupload.alibaba.com/mupload\n\n文件表单名称：file\n\n参数：scene，值写aeMessageCenterV2ImageRule\n\n参数：name，值写随机.jpg\n\n响应类型，文本，URL值为：$json:url$\n要导入的话可以直接复制这个剪贴板导入，记得改成自己的Token就能直接用了：\n\n<pre><code class=\"language-shell line-numbers\">{\n  \"Name\": \"kfupload.alibaba.com\",\n  \"DestinationType\": \"ImageUploader, FileUploader\",\n  \"RequestType\": \"POST\",\n  \"RequestURL\": \"https://kfupload.alibaba.com/mupload\",\n  \"FileFormName\": \"file\",\n  \"Arguments\": {\n    \"scene\": \"aeMessageCenterV2ImageRule\",\n    \"name\": \"itzmx.jpg\"\n  },\n  \"ResponseType\": \"Text\",\n  \"URL\": \"$json:url$\"\n}\n</code></pre>\n\n用来搞视频干啥都行\nhttps://jsbin.com/nofapagalo/edit?html,output\n注：没有并发数限制，但是1分钟（可能是10分钟）内上传达到第255个图片会触发ip封禁10分钟，也就是最多只能传254个文件，后面文件就会跳验证码，验证码使用了cookie记录，只需要把cookie拿下来给脚本用就行了\n服务器不接受xff，用xff伪造IP服务器不认，代码可以不用写这块没必要。\n<img src=\"https://s2.loli.net/2022/06/08/TmJEheiAIwS7RYO.png\" alt=\"\" />\n<img src=\"https://s2.loli.net/2022/06/08/w2hMIplreBzGutW.webp\" alt=\"\" />\n有cookie后可以绕过验证码出现，可以用无痕浏览器测试，每次都会跳验证码，因为不存在cookie，通过插件提交cookie后就不会跳验证了，或者脚本上写个限制1分钟最多传254个文件\n<img src=\"https://s2.loli.net/2022/06/08/CLxIqZOGJ3uW6yl.webp\" alt=\"\" />\n\n<pre><code class=\"line-numbers\">cookie: _uab_collina=159561074724936294593423; cna=ewSiFzONtW4CAXW3AF8ObdHU; x5sec=7b22736370726f78793b32223a2266636564636334376266313139313635616439373061346438356230333964344350717337506746454c3644383966596b5a474f6e41453d227d; isg=BImJ5hTjMiNB-s7XjdWWNVEsmLXj1n0It9DhIiv-2HCvcqiEcyRA2RQjtNZEKhVA; l=eBam3Oe7OP5g1GPGBO5ZPurza77taIRb8sPzaNbMiInca6Nl9eaAVNQqIXGBWdtjgt5cyetrA42DhR32Wba38-M5CY3ZqMKvK3J68e1..\n</code></pre>\n\nffmpeg 无损HLS切片参数例如，注意压制时关键帧设置1秒\nffmpeg -y -i rc-24.mkv -c:a copy -c:v copy -hls_time 1 -hls_list_size 0 -hls_key_info_file videokey.info abc.m3u8\n\n用来搞视频的话，建议crf19，峰值码率40000，缓冲区5000，关键帧1秒，这样可以传BD高清无损！\n","tags":["图床"],"categories":["折腾"]},{"title":"浏览器强制跳转https的解决方法","url":"/2023/05/22/浏览器强制跳转https的解决方法/","content":"\n<h1>谷歌浏览器强制跳转到 https 的解决办法</h1>\n\n<!--more-->\n\n<h2>1. 在谷歌浏览器的地址栏输入：chrome://net-internals/#hsts</h2>\n\n<h2>2. 可以看到如下的页面：</h2>\n\n![](https://s2.loli.net/2022/06/08/5ucC8SWv6hEGOZJ.png)\n\n<h2>3. Delete domain 栏的输入框中输入http访问的域名，点击“delete”按钮。</h2>\n\n<h2>4. Query domain 栏中搜索刚才输入的域名，点击“query”按钮后如果提示“Not found”，完成配置。</h2>\n","tags":["浏览器","跳转"],"categories":["linux"]},{"title":"秋水版SSR教程","url":"/2023/05/22/秋水版SSR教程/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>秋水版SSR教程：</strong></font>\n\n<!--more-->\n\n<h1><a class=\"wp-editor-md-post-content-link\" href=\"https://www.v2rayssr.com/qiushuissr.html\">秋水版SSR</a></h1>\n\n<pre><code class=\"language-shell line-numbers\">wget --no-check-certificate -O shadowsocks-all.sh https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-all.sh\nchmod +x shadowsocks-all.sh\n./shadowsocks-all.sh 2>&1 | tee shadowsocks-all.log\n</code></pre>\n\n<h5>1.1.1.1. 如果上方的脚本无法使用，可以使用下面这一条！</h5>\n\n<pre><code class=\"language-shell line-numbers\">wget --no-check-certificate -O shadowsocks-all.sh https://gitee.com/kanoc/image_data/raw/master/sdsks-all.sh\nchmod +x sdsks-all.sh\n./sdsks-all.sh 2>&1 | tee sdsks-all.log\n</code></pre>\n\n<img src=\"https://s2.loli.net/2022/06/08/KPD8RLf3kTscO4a.png\" alt=\"\" />\n\n<font color=red size=5 face=\"宋体\">SSR命令行</font>\n\n```python\n# 启动SSR：\n/etc/init.d/shadowsocks-r start\n# 退出SSR：\n/etc/init.d/shadowsocks-r stop\n# 重启SSR：\n/etc/init.d/shadowsocks-r restart\n# SSR状态：\n/etc/init.d/shadowsocks-r status\n# 卸载SSR：\n./shadowsocks-all.sh uninstall\n```\n","tags":["代理","梯子"],"categories":["工具"]},{"title":"项目接单网站名录","url":"/2023/05/22/项目接单网站名录/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>项目接单网站名录：</strong></font>\n\n<!--more-->\n\n<h2>1. 程序员客栈</h2>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"https://www.proginn.com\">程序员客栈官网</a>\n程序员客栈中国非常领先的自由工作平台，为中高端程序员、产品经理和设计师等等互联网相关人员提供稳定的线上工作机会，包括自由工作、远程工作和兼职工作，还支持按需雇佣，工作模式非常多，感兴趣的推荐大家尝试一下。虽然名称叫程序员客栈，但是除了程序员，像产品经理，设计师等等互联网相关人员，都能在上面找到适合自己的项目。感兴趣的可以体验一下。\n\n<h2>2. 码市</h2>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"https://codemart.com\">码市官方网站</a>\n码市是 Coding 推出的互联网软件外包服务平台,意在连接需求方与广大开发者。让项目的需求方快速的找到合适的开发者,完成项目开发工作。\n\n<h2>3. 猪八戒网</h2>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"https://luoyang.zbj.com\">猪八戒官网</a>\n猪八戒网创建于2006年，是服务中小微企业的人才共享平台。开创式地为人才与雇主搭建起双边市场，通过线上线下资源整合与大数据服务，实现人才与雇主精准无缝对接。找兼职的地方，主要是入门级项目，不适合专业程序员，只适合新手。\n\n<h2>4. 开源众包</h2>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"https://zb.oschina.net\">开源众包官网</a>\n开源众包–专业的软件众包平台,350万+ 优质开发者为您提供网站、APP、微信/小程序、企业应用等软件开发服务,有效降低企业 IT 软件开发成本、解决技术资源不足等问题。\n开源中国的众包平台，主要是以众包为主。\n\n<h2>5. 智城外包网</h2>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"http://www.taskcity.com\">智城外包网官方网站</a>\n智城外包网，聚合全国软件团队资源，官方认证，1小时响应，零交易佣金，托管安全保障。十年口碑运营，万家靠谱团队。免费比价，免费一站式外包项目管理工具。平台汇集软件咨询专家，软件技术专家，软件开发专家，软件开发公司，软件外包公司，软件外派公司。在线竞标模式，让IT外包项目和短期IT招聘、人力派遣需求可以获得高性价比的候选。海量资源池包括：网站设计、网站开发、手机应用开发、移动应用开发、安卓应用开发、苹果应用开发、微信应用开发、Java技术、C＃技术、Web前端开发、IT人力外包、IT人力外派、IT人力短期招聘、技术合伙人、通用软件开发，SaaS软件实施，软件运维等服务门类。\n\n<h2>6. 实现网</h2>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"https://shixian.com\">实现网官网</a>\n北京实现与爱科技有限公司是一个互联网工程师兼职平台。解决创业公司招人难、成本高的问题。\n创业公司通过实现网可以快速预约知名互联网企业的工程师、设计师到自己的团队工作。上午预约工程师，最快晚上即可到班兼职。\n互联网工程师可以在实现网注册成为技术顾问，利用业余时间助力创业公司，并且获得以时薪为单位的报酬。\n目前已有9000+工程师或设计师可在线预约和支付，支付后工程师会到团队里坐班沟通，快速推进创业者的产品开发进度。\n实现网为企业提供BAT等名企背景的、靠谱的开发设计兼职人才和自由职业者，满足企业项目外包、驻场开发、远程兼职、技术咨询等短期人力需求。已服务2000多家企业，包括好未来、方正、人人贷、秒拍等知名企业。\n\n<h2>7. 猿急送</h2>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"https://www.yuanjisong.com\">猿急送</a>\n猿急送，一个高级技术共享平台，这里汇聚知名互联网公司的技术、设计、产品大牛，通过实际坐班、远程等方式，一对一为创业公司解决问题，提高创业效率。\n猿急送为您提供兼职程序员，兼职工程师信息，猿急送是一个高级技术共享平台，是优质的程序员兼职网站，这里汇聚BAT等知名互联网公司的技术开发、产品、设计大牛，通过实际坐班等方式，一对一为创业公司解决程序员、工程师等开发、产品设计人力问题。\n\n<h2>8. 人人开发</h2>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"http://rrkf.com\">人人开发官方网站</a>\n人人开发基于可视化快速开发平台\n捷得（Joget）捷得云（Joget Cloud）（PaaS），集众多开发者资源，为企业提供企业管理软件服务。应用市场提供应用产品、插件的在线试用和销售，服务市场以威客众包模式提供管理软件定制开发服务，各类企业级应用开发服务，例如：协同OA产品，ERP，CRM，人事管理，项目管理，资产管理，设备管理等。\n\n<h2>9. 开发邦</h2>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"https://www.kaifabang.com\">开发邦官方网站</a>\n\n公司位于北京中关村科技园区核心区海淀园，成立于2010年，专注于为客户提供互联网软件技术开发与咨询服务，致力于利用互联网软件技术为客户提高效率、降低成本、提升效能、优化管理。\n团队核心成员均具有十年以上软件互联网技术开发经验，毕业于工科名校。至今，已成功执行近百个项目，涵盖管理软件、互联网系统、移动APP、前端互动开发等。\n先后为华为公司、商汤科技、工信部中国软件评测中心、神州数码、深鉴科技、中软集团、中国万网、中石油吐哈气举中心、华北电力大学、中科院科技政策与管理研究所、浪潮集团、ADI、世界五百强伊顿中国、北京外国语大学、51talk、勤邦生物、安龙基因等知名企业及机构提供过互联网软件技术开发与技术咨询服务。\n开发邦致力于成为企业业务互联网软件服务与咨询的定制方案提供商。\n\n<h2>10. 电鸭社区</h2>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"https://eleduck.com\">电鸭社区官方网站</a>\n电鸭社区旨在帮助更多人走上「只工作，不上班」的自由工作之路，我们是一个「分布式组织」，通过分享及行动带来积极的影响，相信点滴的力量能改变潮水的方向。\n\n<h2>11. 快码</h2>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"https://kuaimacode.com\">快码官方网站</a>\n深圳快码科技成立于2014年11月，是一家创新型的互联网公司，致力于通过创新的开发方式，为软件技术开发行业带来改变，提供更快速、更高性价比的软件定制服务。\n\n<h2>12. 英选</h2>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"https://www.yingxuan.io\">英选官方网站</a>\n英选，可信赖的软件外包服务。用优秀的人，做漂亮的产品，写干净的代码。平台以定制开发外包服务为主，也是外包项目平台。\n\n<h2>13. Upwork</h2>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"https://www.upwork.com\">官方网站</a>\nUpwork 是全球最大的、最优秀的、最规范的综合类人力外包服务平台，由著名的 Elance 和 oDesk 合并。这里聚集 900 万来自全球各地的自由工作者，你肯定可以在找到适合你的职位。\n\n<h2>14. Freelancer</h2>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"https://www.freelance.com\">Freelancer官方网站</a>\nFreelancer 的工作类型覆盖了很多不同的领域，由程序开发到市场营销、广告、会计、法务等一系列的可以远程的工作。\n\n<h2>15. Remoteok</h2>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"https://remoteok.io/\">Remoteok官方网站</a>\nRemoteok 不仅提供最初的兼职类远程工作，还有全职类，签署合同类和实习类的工作。网站创始人 Pieter Levels 本身就是一名数字游民，他同样是 Nomadlist 的创始人。\n\n<h2>16. Toptal</h2>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"https://www.toptal.com\">Toptal官方网站</a>\nToptal 是一个高端一些的自由职业者平台，适合比较有经验和工作尽力的远程工作者。它将企业与全球的软件工程师，设计师和业务顾问联系起来。\n\n<h2>17. AngelList</h2>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"https://angel.co/remote\">AngelList官方网站</a>\nAngelList 主要是服务于初创公司和天使投资人的平台，这里还有初创公司提供的远程工作的机会，如果对远程加入初创公司感兴趣的，可以尝试一下。\n\n<h2>18. Topcoder</h2>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"https://www.topcoder.com\">Topcoder官方网站</a>\nTopcoder 通过算法比赛吸引世界顶级的程序员，他会将一下大型项目分割成很多小模块，通过竞赛的模式交给用户来做，优胜者可以拿到制定模块的奖金。\n","tags":["接单项目"],"categories":["接单项目"]},{"title":"一个软件搞定所有音乐，无视版权","url":"/2023/05/22/一个软件搞定所有音乐，无视版权/","content":"\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>放松心情的时候，往往都想来上一首歌，但是市面上的音乐软件，版权杂乱，往往一个音乐软件是找不到自己所想要听的歌。</strong></font>\n\n<!--more-->\n\n<font color=#00b2c2 size=5 face=\"宋体\">现在老夫来带一款来自github的开源软件 -- </font> <font color=red size=6 face=\"宋体\"><strong>Listen 1</strong></font>\n\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>来拯救你那无处安放，有骚动的心！软件最大特点：解锁鹅厂、某易云、某我. . .等市面所有音乐软件因版权，而发黑的链接！达到可以直接播放的目的，也就是，以前你听歌需要N歌软件，那么现在，你只需要一个就够了！</strong></font>\n\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>遗憾的是：软件目前功能稍有BUG，当然，这些bug是对于懂程序的人来所，如果你就单纯的听音乐。你可能无法发现这些bug。所有你可以放心食用</strong></font>\n\n<ul>\n<li><font color=#f26522 size=5 face=\"宋体\"><strong>浏览器插件：</strong></font>\n\n<ul>\n<li><font color=#102b6a size=5 face=\"宋体\"><strong>Firefox插件：</strong></font><strong><a class=\"wp-editor-md-post-content-link\" href=\"https://addons.mozilla.org/zh-CN/firefox/addon/listen1/\"><font color=#ef5b9c size=4 face=\"宋体\">点击进入Firefox插件中心</font></a></strong></li>\n<li><font color=#102b6a size=5 face=\"宋体\"><strong>Microsoft Edge插件：</strong></font><strong><a class=\"wp-editor-md-post-content-link\" href=\"https://microsoftedge.microsoft.com/addons/detail/hneiglcmpeedblkmbndhfbeahcpjojjg\"><font color=#ef5b9c size=4 face=\"宋体\">点击进入Microsoft Edge插件中心</font></a></strong></li>\n<li><font color=#102b6a size=5 face=\"宋体\"><strong>Chrome 插件版 V2.21.6：</strong></font><strong><a class=\"wp-editor-md-post-content-link\" href=\"https://github.com/listen1/listen1_chrome_extension/archive/v2.21.6.zip\"><font color=#ef5b9c size=4 face=\"宋体\">点击下载</font></a></strong></li>\n</ul></li>\n<li><font color=#f26522 size=5 face=\"宋体\"><strong>客户端下载：</strong></font>\n\n<ul>\n<li><font color=#102b6a size=5 face=\"宋体\"><strong>安卓：</strong></font><strong><a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/listen1_0.8.2.apk-20211106103255-fxfdwn.zip\"><font color=#ef5b9c size=4 face=\"宋体\">点击下载</font></a></strong></li>\n<li><font color=#102b6a size=5 face=\"宋体\"><strong>Windows 桌面版安装包：</strong></font><strong><a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/listen1_2.21.6_win-20211106103217-jkgf2r.exe\"><font color=#ef5b9c size=4 face=\"宋体\">点击下载</font></a></strong></li>\n<li><font color=#102b6a size=5 face=\"宋体\"><strong>Mac Universal 桌面版：</strong></font><strong><a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/listen1_2.21.6_mac_universal-20211106103400-rp3ith.dmg\"><font color=#ef5b9c size=4 face=\"宋体\">点击进入下载页面</font></a></strong></li>\n<li><font color=#102b6a size=5 face=\"宋体\"><strong>Linux 64位桌面版：</strong></font><strong><a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/listen1_2.21.6_linux_x86_64-20211106103435-yjknbv.appimage\"><font color=#ef5b9c size=4 face=\"宋体\">点击下载</font></a></strong></li>\n<li><font color=#102b6a size=5 face=\"宋体\"><strong>Windows 桌面绿色版64位：</strong></font><strong><a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/listen1_2.21.6_win_x64-20211106102449-eofmd6.7z\"><font color=#ef5b9c size=4 face=\"宋体\">点击下载</font></a></strong></li>\n<li><font color=#102b6a size=5 face=\"宋体\"><strong>Windows 桌面绿色版32位：</strong></font><strong><a class=\"wp-editor-md-post-content-link\" href=\"https://bd.bcebos.com/v1/xly-icafe/listen1_2.21.6_win_ia32-20211106103130-offfio.7z\"><font color=#ef5b9c size=4 face=\"宋体\">点击下载</font></a></strong>\n界面是这样的：\n<img src=\"https://s2.loli.net/2022/06/08/1Uq6FsgeIQENkrY.png\" alt=\"d9bec25a85627a48\" /></li>\n</ul></li>\n</ul>\n\n<font color=#00b2c2 size=7 face=\"宋体\">    安装：</font>\n\n<ul>\n<li>Chrome插件版\n\n<ul>\n<li>下载Chrome插件版压缩包，并解压缩</li>\n<li>打开 Chrome 扩展页面，勾选右上角「开发者模式」</li>\n<li>选择「加载已解压的扩展程序…」，选择刚刚解压缩的文件夹</li>\n<li>开始使用</li>\n</ul></li>\n<li>Firefox插件版\n\n<ul>\n<li>下载Firefox插件版，并解压缩</li>\n<li>打开 about:config 页面，xpinstall.signatures.required 设置为 false</li>\n<li>选择「附加组件」，齿轮图标，选择从文件安装附加组件，选择下载的xpi文件</li>\n<li>开始使用</li>\n</ul></li>\n<li><p>至于<del>windos和linux 就不说了！linux安装软件不会，你还是用回windos吧！</del></p></li>\n<li><p>至于. . . windos不会的. . .老夫就爱莫能助了！</p></li>\n</ul>\n","tags":["破解","软件"],"categories":["工具"]},{"title":"硬件安装版linux下，安装VMware排坑记","url":"/2023/05/22/硬件安装版linux下，安装VMware排坑记/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>硬件安装版linux下，安装VMware排坑记：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>1. 1.linux升级内核</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>查看linux源</strong></font>\n\n```python\n# 查看源码信息\ncat /etc/apt/sources.list\n# 官方源没有5.14.0内核头，所以要修改成阿里源\n# 阿里源\ndeb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib\ndeb-src http://mirrors.aliyun.com/kali kali-rolling main non-free contrib\n```\n\n<font color=#f26522 size=4 face=宋体><strong>2. 2.linux升级内核</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>更新系统以及依赖</strong></font>\n\n```python\nsudo -i\n# 输入root密码\napt update\napt upgrade\napt dist-upgrade\nreboot\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>安装内核头文件</strong></font>\n\n```shell\napt-get install Linux-headers-$(uname -r)\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>检车内核头文件是否安装</strong></font>\n\n```shell\ndpkg-query -s linux-headers-$(uname -r)\n```\n\n<font color=#f26522 size=4 face=宋体><strong>3. 安装VMware</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>下载Linux版本VMware虚拟机</strong></font>\n  [点击下载](https://customerconnect.vmware.com/downloads/details?downloadGroup=WKST-1620-LX&productId=1038&rPId=75716)\n  [百度云直下版本](https://bd.bcebos.com/v1/xly-icafe/vmware-workstation-full-16.2.0-18760230.x86_64-20220126040532-c2o1rc.bundle)\n  [百度云直下最16.2.5版本](https://bd.bcebos.com/v1/xly-icafe/vmware-workstation-full-16.2.5-20904516.x86_64-20221223172537-3gywfr.bundle)\n  [阿里云盘下载](https://www.aliyundrive.com/s/NARUSYFXZuR)\n\n```python\n# 下载完成之后赋予文件执行权限\nchmod +x VMware-Workstation-Full-16.2.0-18760230.x86_64.bundle\nsudo ./VMware-Workstation-Full-16.2.0-18760230.x86_64.bundle\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>VMware16 pro 注册码</strong></font>\n\n```python\n# 每一行，为单独的一个祖册吗\nZF3R0-FHED2-M80TY-8QYGC-NPKYF\nYF390-0HF8P-M81RQ-2DXQE-M2UT6\nZF71R-DMX85-08DQY-8YMNC-PPHV8\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>卸载 VMware</strong></font>\n\n```python\nsudo vmware-installer -u vmware-workstation\n```\n\n","tags":["破解","软件"],"categories":["工具"]},{"title":"MongoDB_增、删、改、查","url":"/2023/05/22/MongoDB-增、删、改、查/","content":"\n<font color=#f26522 size=5 face=\"宋体\"><strong>Mongodb增、删、改、查：</strong></font>\n\n<!--more-->\n\n<font color=#00b2c2 size=3 face=\"宋体\"><strong>增：</strong></font>\n\n<pre><code class=\"language-mongodb line-numbers\"># 新增 pymongo\nImage_Push.<集合名>.insert_one({'name': '李四', 'age': '15'})   # 增加一条数据\n</code></pre>\n\n<font color=#00b2c2 size=3 face=\"宋体\"><strong>删：</strong></font>\n\n<pre><code class=\"language-mongodb line-numbers\"># 删除一条数据 pymongo\nImage_Push.<集合名>.delete_one({'name': '李四', 'age': '15'})   # 增加一条数据\n</code></pre>\n\n<font color=#00b2c2 size=3 face=\"宋体\"><strong>改：</strong></font>\n\n<pre><code class=\"language-mongodb line-numbers\"># 修改、更新 pymongo\nImage_Push.<集合名>.update({'age': '15'},{\"$set\": {'age': 30}})   # 查找age=15的数据, 更新为 age=30\n</code></pre>\n\n<font color=#00b2c2 size=3 face=\"宋体\"><strong>查：</strong></font>\n\n<pre><code class=\"language-mongodb line-numbers\">db.集合名.find()  # 查询集合中的所有数据\ndb.集合名.find({'age': '1'})   # 查询 集合中 age = 1  的数据\ndb.集合名.find({'age': '6', 'sex': '男'})   # 查询集合中  同时满足 age=6 和 sex=男 的数据    and（与操作）\ndb.集合名.find('$or': [{'age': '6'},{'sex': '男'}])   # 查询集合中  满足 age=6 或者 sex=男 的数据  or（或操作)\ndb.集合名.find('$or': [{'age': '6'},{'sex': '男'}])   # 查询集合中  满足 age=6 或者 sex=男 的数据  or（或操作)\ndb.集合名.find({'city': '北京', '$or': [{'age': '6'},{'sex': '男'}]})  # 与或同时操作 满足 city=北京, age=6或sex=男的数据\n\n\n#使用第二个参数，指定显示的列   (1显示  0 不显示)\ndb.集合名.find({'age': '1'}, {'age':1})  # 查询 集合中 age=1 的数据  只显示 age列\ndb.集合名.find({'age': '1'}, {'age':0})  # 查询 集合中 age=1 的数据  显示除了 age列\ndb.集合名.find({'age': '1'}, {'age':0, '_id':0})  # 查询 集合中 age=1 的数据  显示除了 age列 把 '_id' 也去掉\n\n\n# 使用正则查询数据库\ndb.test.find({\"title\":{\"$regex\":\".*<包含内的数据>.*\"}})\n\n# 随机查询30条数据 pymongo\nImage_Push.<集合名>.aggregate([{\"$sample\": {\"size\": 30}}])\n</code></pre>\n\n<font color=#00b2c2 size=3 face=\"宋体\"><strong>操作符：</strong></font>\n\n<pre><code class=\"language-mongodb line-numbers\">$gt   #  大于\n$lt   # 小于\n    例如： db.集合名.find({'age': {'$lt': '30'}})   查询 age <= 30 的数据\n$eq   # 等于\n$gte   # 大于等于\n$lte   # 小于等于\n$ne    # 不等于\n$in   # in   在里面\n$nin  # not in  不在里面\n$not  # 取反\n$exists   # 是否存在  布尔值  ## db.集合名.find({'age': {'$exists': True}})  ## 集合中存在age的数据\n</code></pre>\n\n<font color=#00b2c2 size=3 face=\"宋体\"><strong>复杂查询：</strong></font>\n\n<pre><code class=\"language-mongodb line-numbers\">测试数据: {'status': ['age': '6'], 'sex': '男'}\n\nmongodb单个数据下存在 [ ]列表的时候，用.方法查询\n    例如：db.集合名.find({'status.age': '6'}) \n</code></pre>\n\n<font color=#f26522 size=5 face=\"宋体\"><strong>Mogodb排序分页：</strong></font>\n\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>1.准备：</strong></font>\n\n<pre><code class=\"language-mongodb line-numbers\">use test3\ndb.c1.insert({_id:1,name:\"a\",sex:1,age:1})\ndb.c1.insert({_id:2,name:\"b\",sex:1,age:2})\ndb.c1.insert({_id:3,name:\"c\",sex:2,age:3})\ndb.c1.insert({_id:4,name:\"d\",sex:2,age:4})\ndb.c1.insert({_id:5,name:\"e\",sex:2,age:5})\n</code></pre>\n\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>2. 排序：</strong></font>\n\n<pre><code class=\"language-mongodb line-numbers\">语法：db.<集合名>.find().sort(json数据)\n\n# 说明:键——就是要排序的列/字段、值：1是升序，-1是降序\n# 例如：db.c1.find().sort({age:-1}) # c1是由开始写入数据时隐式创建\n</code></pre>\n\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>3. 分页：</strong></font>\n\n<pre><code class=\"language-mongodb line-numbers\">语法：db.<集合名>.find().sort().skip(数字).limit(数字)\n\n# skip——跳过指定数据数量（可选），查询新的数据 # 第一页不需要跳过，因为是新数据\n# limit——查询指定数量数据\n# 例如：db.c1.find().sort({age:-1}).limit(2) # 查询降序 两条数据\n# 例如：db.c1.find().sort({age:-1}).skip(2).limit(3) # 查询降序 跳过两条数据 ，显示三条数据\n# skip计算公式：（当前页 - 1）* 每页显示数量\n</code></pre>\n\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>4. 小总结：</strong></font>\n\n<pre><code class=\"language-mongodb line-numbers\">db.<集合名>.find()\n.sort({列:1/-1})——排序\n.skip(数字)——跳过指定数量\n.limit(数字)——限制查询条数\n.count()——统计总数量\n如果不够，在百度ro谷歌\n</code></pre>\n","tags":["mongodb","数据库"],"categories":["数据库"]},{"title":"那些让人惊奇的云项目","url":"/2023/05/22/那些让人惊奇的云项目/","content":"\n<h1>有云服务器时能自建的项目</h1>\n\n<!--more-->\n\n<ul>\n<li>ss：https://github.com/lrinQVQ/script https://github.com/mritd/dockerfile/tree/master/shadowsocks</li>\n<li>网盘\n\n<ul>\n<li>Seafile：国产，C，同步盘，但必须依赖Py2.7</li>\n<li>https://github.com/nextcloud/docker https://docs.nextcloud.com/server/17/user_manual/ ：owncloud的同作者，PHP。https://github.com/e-alfred/ocdownloader 离线下载插件</li>\n<li>Cloudreve：国产，GO，支持OSS</li>\n<li>zFile：国产，Java</li>\n<li>https://github.com/syncthing/syncthing GO</li>\n<li>BTSync</li>\n<li>oneindex</li>\n<li>OLAINDEX：使用OneDrive API</li>\n<li>https://github.com/zhaojun1998/zfile 评测：https://xiaoyou66.com/archives/769</li>\n<li>https://www.directorylister.com/ indexer，PHP</li>\n<li>https://github.com/prasathmani/tinyfilemanager PHP</li>\n<li>sparkleshare</li>\n<li>rclone</li>\n<li>https://freefilesync.org/</li>\n</ul></li>\n<li>文件浏览器：https://larsjung.de/h5ai/ （PHP）、https://github.com/filebrowser/filebrowser （GO）</li>\n<li>gitlab</li>\n<li>爬虫</li>\n<li>论坛：discuz（PHP，维护不快），Flarum（PHP），vanilla (PHP)</li>\n<li>监控程序/API的：https://github.com/ivbeg/awesome-status-pages 合集。https://cachethq.io/ （合集中最活跃的但是PHP）、https://github.com/hunterlong/statping （GO）、https://github.com/bazzite/statusfy （JS）。https://uptimerobot.com/ 不开源，有免费版、https://www.atlassian.com/zh/software/statuspage 有免费版、https://github.com/nicolargo/glances (Py)、https://eheh.org/ 国产、https://www.fundebug.com/</li>\n<li>监控服务器状态：https://github.com/netdata/netdata C+Python，star非常多，有中文翻译。https://github.com/grafana/grafana TS+GO，star数稍少，但commit数和贡献者数非常多。https://github.com/open-falcon/falcon-plus GO，相对而言star数少很多，但是国产的，需要mysql；https://github.com/CokeMine/ServerStatus-Hotaru</li>\n<li>各种可以装的软件的收集：https://github.com/Kickball/awesome-selfhosted 、https://www.softaculous.com/softaculous/apps 、 https://github.com/luong-komorebi/Awesome-Linux-Software 、https://statusfy.co/</li>\n<li>自己挂广告</li>\n<li>图床：https://xiaoyou66.com/archives/774 https://molunerfinn.com/PicGo/ https://github.com/wisp-x/lsky-pro https://github.com/chevereto/Chevereto-Free</li>\n<li>可视化日志：https://goaccess.io</li>\n<li>BT下载：https://github.com/jpillora/cloud-torrent</li>\n<li>创建网页版的Shell：https://github.com/instantbox/instantbox</li>\n<li>jupyter notebook: https://xiaoyou66.com/archives/1095</li>\n<li>OSS: https://github.com/minio/minio https://www.digitalocean.com/community/tutorials/how-to-set-up-an-object-storage-server-using-minio-on-ubuntu-18-04 但协议是最严格的AGPL</li>\n<li>短链接：UOURLS（PHP，需要二次开发）Polr（也是PHP，不过偏向开箱即用）https://github.com/ellisonleao/pyshorteners</li>\n<li>https://apex.sh/up/ 一键部署几种语言的Serverless应用到AWS</li>\n<li>https://github.com/chrislusf/seaweedfs 分布式文件系统，支持S3的API；https://github.com/syncthing/syncthing</li>\n<li>当我有服务器时我做了什么（别人的集合）：https://shanyue.tech/op</li>\n<li>后台控制面板：https://www.jianshu.com/p/3bc7404af887</li>\n<li>搜索引擎：https://github.com/benbusby/whoogle-search https://github.com/milvus-io/milvus</li>\n<li>控制面板：https://github.com/cockpit-project/cockpit</li>\n<li>性能测试：<code>curl -L bench.sh | bash</code></li>\n<li>CMS: https://www.storyblok.com/</li>\n<li>CI\n\n<ul>\n<li>https://www.jetbrains.com/teamcity/</li>\n<li>https://drone.io/</li>\n</ul></li>\n</ul>\n\n<h2>1. 自建Paas</h2>\n\n集合：https://paasfinder.org\n\n<ul>\n<li>https://dokku.com/</li>\n<li>openstack，开源IaaS，机器最好有10G以上的内存</li>\n<li>rancher, openshift, CloudFoundry, flynn</li>\n<li>https://www.rainbond.com/ 国产的</li>\n<li>https://letscoded.com</li>\n<li>https://www.koding.com/</li>\n<li>https://kodcloud.com/ 有使用者表示“每次访问都会采集服务端和客户端的隐私信息，里面流氓脚本一大堆”</li>\n<li>https://github.com/caprover/caprover</li>\n<li>https://convox.com/</li>\n<li>https://nanobox.io/</li>\n<li>https://caprover.com/</li>\n<li>https://rio.io/</li>\n<li>https://github.com/teamhephy/workflow</li>\n<li>https://www.kintohub.com/ 基于k8s</li>\n</ul>\n","tags":["云","免费项目"],"categories":["免费项目"]},{"title":"那些让人惊奇的云项目(第二弹)","url":"/2023/05/22/那些让人惊奇的云项目-第二弹/","content":"\n<h2>1. 网页</h2>\n\n<!--more-->\n\n<h3>1.1. 域名</h3>\n\n<ul>\n<li>理论上DDNS也会提供，不过不是二级的</li>\n<li>https://my.freenom.com/clientarea.php  tk、ml、ga、cf、gq顶级域名</li>\n<li>https://nic.eu.org/ 欧盟下的，个人免费注册；http会被重置</li>\n<li>https://dns.txizd.cn/ 三级</li>\n<li>https://dns.yzjia.xin/ 三级</li>\n<li>http://cc.1xie.xyz</li>\n<li>https://github.com/fransallen/thedev.id https://github.com/js-org/js.org 要开PR</li>\n<li>https://www.freedomain.pro/ co.nr</li>\n<li>http://www.com.nu/</li>\n<li>https://domainoji.com/ https://www.punycoder.com/ emoji/idn域名转换；https://emojipedia.org/ emoji搜索</li>\n<li>https://nic.ua/en/domains 乌克兰 pp.ua</li>\n<li>https://www.azote.org 法国 asso.st，fr.nf，fr.cr，ze.cx，infos.st</li>\n<li>https://www.nom.za 南非</li>\n<li>https://www.sitelutions.com 纽埃 rr.nu</li>\n<li>https://www.ipq.co 哥伦比亚共和国</li>\n<li>https://fofa.so/ 用来搜索域名的</li>\n</ul>\n\n<h3>1.2. 证书</h3>\n\n<ul>\n<li>https://freessl.cn</li>\n<li>https://freessl.org</li>\n<li>https://allinssl.com/zh/</li>\n<li>https://zerossl.com/</li>\n</ul>\n\n<h3>1.3. DNS</h3>\n\n<ul>\n<li>https://www.dns.la/</li>\n<li>https://www.bajiedns.com/</li>\n<li>https://www.dnsdun.com/</li>\n<li>https://nip.io/ 自动根据域名中的IP返回DNS查询结果。xip.io挂了</li>\n<li>https://dnsmadeeasy.com/</li>\n</ul>\n\n<h3>1.4. <a class=\"wp-editor-md-post-content-link\" href=\"https://github.com/ZE3kr/Cloudflare-CNAME-Setup/blob/master/README.zh.md\">Cloudflare CNAME/IP/NS 接入</a></h3>\n\n<ul>\n<li>https://cdn.liang.ke/</li>\n<li>https://cf.tlo.xyz/</li>\n<li>https://dns.porta1.net/</li>\n<li>https://cdn.bnxb.com/</li>\n<li>https://cdn.wzfou.com/</li>\n<li>https://cdn.moeelf.com/</li>\n</ul>\n\n<h3>1.5. CDN</h3>\n\n<ul>\n<li>https://su.baidu.com/product/cdn.html</li>\n<li>http://cdn.meierlian.net/</li>\n<li>https://www.yunaq.com/jsl/ 仅限80端口</li>\n<li>https://www.cdnfine.com/</li>\n<li>https://wangzhan.qianxin.com/ 前身是360网页卫士</li>\n<li>https://www.merlincdn.com/ 注册送$10，不清楚有没有限时，额度有个自选的</li>\n<li>https://github.com/EtherDream/freecdn 自动选择合适的CDN的程序</li>\n</ul>\n\n<h3>1.6. 短网址</h3>\n\n<ul>\n<li>https://1t.click/ 、https://sina.lt/ 新浪的</li>\n<li>https://u.nu/</li>\n<li>http://suo.im/</li>\n<li>https://tinyurl.com/ 无法直接访问</li>\n<li>https://bitly.com/ 无法直接访问</li>\n<li>https://sl.iyong.com/</li>\n<li>https://v.ht 国外的</li>\n</ul>\n\n<h2>2. 国内源/镜像</h2>\n\n<ul>\n<li>https://github.com/china-speed/china-speed.github.io apt/docker/pip/npm收集</li>\n<li>https://www.7ed.net Google Fonts/Libraries、CDNJS、Gravatar、Github RAW、Imgur、SM.MS反代；曾用cdn.staticdn.net cdn.con.sh</li>\n<li>https://cdn.geekzu.org/cached.html Google Fonts/Libraries、Gravatar反代</li>\n<li>https://sb.sb/blog/css-cdn/ loli.net域名，Google Fonts/Libraries、Gravatar反代</li>\n<li>https://npm.taobao.org/mirrors 一部分GitHub开源项目的release</li>\n</ul>\n\n<h3>2.1. GitHub</h3>\n\n<ul>\n<li>jsdelivr、statically：相当于只支持raw</li>\n<li>https://doc.fastgit.org/zh-cn/node.html 主站网页、assets、<del>raw、release</del></li>\n<li>https://gitclone.com/ 支持http clone</li>\n<li>https://github.zhlh6.cn/ 支持ssh</li>\n<li>https://pd.zwc365.com/</li>\n<li>https://github.com/XIU2/UserScript/blob/master/GithubEnhanced-High-Speed-Download.user.js</li>\n<li>http://www.toolzl.com/tools/githubjiasu.html 支持release</li>\n<li>https://github.com/zwc456baby/file-proxy https://pd.zwc365.com/</li>\n<li>https://github.wuyanzheshui.workers.dev/ https://github.rc1844.workers.dev/ 网页版</li>\n<li>https://github.com/nulastudio/mclone 安装后用git mclone即可自动用mirror</li>\n<li>https://shrill-pond-3e81.hunsh.workers.dev/ https://gh.api.99988866.xyz/ https://g.ioiox.com/ (https://github.com/hunshcn/gh-proxy)</li>\n<li>https://github.bajins.com/ 网页版</li>\n<li>https://gh.haval.gq 没处理css和js的网页版</li>\n<li>https://ghproxy.com/</li>\n<li><del>github.com.cnpmjs.org</del> 网页版，触发了滥用检测</li>\n<li><del>https://d.serctl.com/</del> 活着但是日本Linode，IP干扰大，几乎不可访问</li>\n<li><del>zll.us</del></li>\n<li><del>https://githubd.com</del></li>\n<li><del>widora：http://gg.widyun.com http://g.widyun.com/ http://g.widora.cn/ 支持release</del></li>\n<li><del>https://git.best/</del></li>\n<li><del>http://gitd.cc/</del></li>\n<li><del>https://www.toolwa.com/github/</del> 网站本身活着，但线路一是用不了的jsproxy，线路二是fastgit</li>\n</ul>\n\n<h3>2.2. 前端库</h3>\n\n<ul>\n<li>国内的，基本都是同步的cdnjs，否则要么不全要么老；链接格式只有bootcdn.cn的与cdnjs完全相同，其余的都没有ajax/libs/部分，字节的还多一部分\n\n<ul>\n<li>https://www.bootcdn.cn/ 由bootcss网站支持；https://cdn.bootcss.com/ 没公开但能用</li>\n<li>https://www.staticfile.org/ 七牛云。版本默认选的最老的，不知道怎么想的</li>\n<li>https://cdn.baomitu.com/ 360</li>\n<li>https://cdn.bytedance.com/ 字节跳动，直接把所有库按首字母列出来</li>\n<li>https://jshub.com 有点旧，感觉是模仿bootcdn的</li>\n<li>https://cdnjs.net/ 有可能2019年后就没更新了</li>\n<li>https://lib.sinaapp.com/ 新浪，少且旧，jq最新3.1</li>\n<li>http://jscdn.upai.com/ 又拍云，极少且极旧，无https</li>\n<li>https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js 非公开，不更新</li>\n</ul></li>\n<li>国外的\n\n<ul>\n<li>https://www.jsdelivr.com/ 有国内CDN。支持GitHub。https://esm.run 支持ESM</li>\n<li>https://cdnjs.com/ CF自己的，访问慢</li>\n<li>https://unpkg.com/ 用的CF的CDN，实验性支持ESM</li>\n<li>https://statically.io/ 用的Fastly的CDN。只支持GitHub，加min后缀自动压缩，还有图片压缩服务和网页快照截图功能</li>\n<li>https://jspm.org/ 仅ESM</li>\n<li>https://www.skypack.dev/ snowpack团队的，ESM，高度为浏览器优化</li>\n<li>https://esm.sh/ 仅ESM，自动转换的</li>\n<li>https://ajax.aspnetcdn.com 微软的，只有jq相关的很少几个，但路径格式与jq官网相同方便替换</li>\n</ul></li>\n<li>Font Awesome\n\n<ul>\n<li>前面那些前端库仍可用</li>\n<li>https://use.fontawesome.com/releases/v5.15.0/css/all.css 官方的，但注意它其实对应的是min.css</li>\n<li>http://apps.bdimg.com/libs/fontawesome/4.4.0/css/font-awesome.min.css 非公开，不更新</li>\n</ul></li>\n</ul>\n\n<h2>3. 储存</h2>\n\n<h3>3.1. OSS</h3>\n\n<ul>\n<li>https://www.zhihu.com/question/51309695 有哪些优秀且免费的云存储服务？</li>\n<li>https://www.zhihu.com/question/34445630/answer/449868590 网易云，免费50G空间，20G流量</li>\n<li>https://developer.qiniu.com/af/kb/1574/free-credit-information https://www.qiniu.com/events/free 七牛云</li>\n<li>https://www.upyun.com/league 又拍云，10G储存15G流量</li>\n<li>https://www.ucloud.cn/site/product/ufile.html 实名认证用户20GB免费云存储空间和20GB/月免费下载流量</li>\n<li>http://www.cuplayer.com/price/ 酷播云，视频储存</li>\n<li>https://u-file.cn/ 好像需要申请</li>\n<li>https://get.robin.io/ 5GB</li>\n</ul>\n\n<h3>3.2. 网盘</h3>\n\n<ul>\n<li>https://www.quqi.com/ 曲奇云盘，但好像没有电脑端</li>\n<li><del>http://ddl.escience.cn/ 科研在线</del></li>\n<li>https://own-cloud.cn/ 小麦云盘</li>\n<li>https://cowtransfer.com/ 奶牛快传，<del>现在也提供网盘功能</del></li>\n<li>https://www.wenshushu.cn/</li>\n<li>https://www.liupan.net/</li>\n<li>https://teracloud.jp 10G空间，支持 WebDAV；推荐码NDMSQ</li>\n<li>https://www.furk.net/ 很慢，1G/D且5G/W</li>\n<li>https://www.lanzou.com/ 蓝奏云，单个文件限100M</li>\n<li>亿方云</li>\n<li>天翼云盘、沃家云盘、和彩云</li>\n<li>https://www.zoho.com.cn/workdrive/</li>\n<li>超星云盘</li>\n<li>腾讯微云</li>\n<li>https://www.asuswebstorage.com</li>\n<li>https://pan.bitqiu.com/ 比特球云盘</li>\n<li>https://www.90pan.com/ 速度有4M</li>\n<li>https://github.com/xausky/DockerRegisterCloud 把docker registry变成网盘</li>\n<li>https://6pan.cn/ https://2dland.cn/</li>\n<li>https://www.mediafire.com/</li>\n<li>https://github.com/apachecn/CDNDrive</li>\n</ul>\n\n<h3>3.3. Onedrive</h3>\n\n<ul>\n<li>https://products.office.com/en-us/student?tab=students</li>\n<li>https://t.odmail.cn/</li>\n<li>http://od.obagg.com</li>\n<li>http://onedrive.readmail.net/</li>\n<li>http://xkx.me/</li>\n<li>https://xlu.me/</li>\n<li>http://xix.men:3000/</li>\n<li>https://xyxywan.gitee.io/web/ 有桌面office但需审批</li>\n<li>https://get.porta1.net/</li>\n<li>https://zhuanlan.zhihu.com/p/105438817 免费申请office E5开发者订阅，附无限续期+私人网盘教程</li>\n<li>Index：https://github.com/spencerwooo/onedrive-vercel-index https://github.com/vcheckzen/FODI https://github.com/qkqpttgf/OneManager-php</li>\n</ul>\n\n<h3>3.4. 文件分享</h3>\n\n<ul>\n<li>https://catbox.moe/ 上传速度不稳定，快的时候有600K，单次上限200MB</li>\n<li>https://www.zippyshare.com/ 上传速度为0</li>\n<li><del>https://send.firefox.com/ 上传速度能到2M，但有时传到一半会断掉；VPS的下载速度能到21MB/s</del></li>\n<li>https://www.up-4ever.org/ 上传速度不到1M，需要关闭广告过滤扩展才能用，有的后缀不让传，下载等30秒人机验证后倒是能创建出直链，单次上限200MB</li>\n<li>https://transfer.sh/</li>\n<li>https://uguu.se/ 单次上限100MB</li>\n<li>https://anonfiles.com/</li>\n<li>https://letsupload.co/</li>\n<li>https://secufiles.com/</li>\n<li>https://wetransfer.com/</li>\n<li>https://wormhole.app/</li>\n</ul>\n\n<h3>3.5. 离线下载</h3>\n\n<ul>\n<li>https://www.loadbt.com 免费用户2G；曾经有中文且crowdin上翻译完成但现在不提供选项了</li>\n<li>https://zhuanlan.zhihu.com/p/37785481 19款离线下载服务对比</li>\n</ul>\n\n<h3>3.6. 图床</h3>\n\n<ul>\n<li>http://www.zmonster.me/2013/12/06/image-host-service.html 国内外图床及其对比</li>\n<li>https://www.zhihu.com/question/21667151</li>\n<li>https://sm.ms/</li>\n<li>https://moxtu.cc</li>\n<li>https://postimages.org/</li>\n<li>https://imgbox.com/</li>\n<li>https://imgbb.com/</li>\n<li>https://www.freeimagehosting.net/</li>\n<li>https://imgchr.com/</li>\n<li>https://pic.xiaojianjian.net/</li>\n<li>https://imgurl.org/</li>\n<li>https://postimages.org/</li>\n<li>https://img.kuibu.net/</li>\n<li>https://www.superbed.cn/ pic.imgdb.cn</li>\n<li>https://imgs.thankjava.com/</li>\n<li>https://www.moepicx.cc</li>\n<li>https://www.hualigs.cn/</li>\n<li>https://jpg.dog/</li>\n<li>https://www.z4a.net/</li>\n<li>https://moetu.org/</li>\n<li>https://imgbb.com/</li>\n<li>https://www.picgd.com/</li>\n<li>https://tuchuang.richuyun.com/</li>\n<li>http://pan.duiai.cc/</li>\n<li>https://osrpay.com/</li>\n<li>https://233.pictures</li>\n<li>https://images.weserv.nl/ image cache & resize service 相当于图片的CDN</li>\n<li>https://imgtu.com/</li>\n<li>https://img.blueskyxn.com/</li>\n</ul>\n\n<h3>3.7. 下载百度网盘的</h3>\n\n<ul>\n<li>https://xdown.org/baiduyun/</li>\n<li><del>https://www.baiduwp.com/</del> 挂了</li>\n<li>https://github.com/TkzcM/baiduwp</li>\n</ul>\n\n<h3>3.8. BT Trackers</h3>\n\n<ul>\n<li>https://github.com/ngosang/trackerslist</li>\n<li>https://github.com/XIU2/TrackersListCollection</li>\n<li>https://github.com/DeSireFire/animeTrackerList</li>\n</ul>\n\n<h2>4. (盗版)资源</h2>\n\n<ul>\n<li>https://discx.yuntu.io/ 光盘</li>\n</ul>\n\n<h3>4.1. 软件</h3>\n\n<ul>\n<li>https://masuit.com/</li>\n<li>https://www.lanzous.com/u/roustar31cn</li>\n</ul>\n\n<h3>4.2. 书</h3>\n\n<ul>\n<li>https://t.me/ebookdl 亲测确实能搜到</li>\n<li>https://github.com/hoodiearon/w3-goto-world/tree/master/集成实用夹/书籍与文档</li>\n<li>https://smtebooks.com/</li>\n<li>https://foxgreat.com/ 搜不到C#的书</li>\n<li>https://dokumen.pub 网站不是英文的</li>\n<li>https://www.wowebook.org 下载页面为turbobit.net，很慢，而且有的要开会员</li>\n<li>https://www.zhihu.com/question/21202757 有哪些好的电子书下载网站推荐？</li>\n<li>https://zhuanlan.zhihu.com/p/53064677 有了这十几个网站，没有你找不到的电子书！</li>\n<li>https://www.jiumodiary.com/ 鸠摩搜书，也能搜到百度网盘的内容</li>\n<li>https://gist.github.com/baiwfg2/af827b8b75eebf8ab29f5531a0d265ce</li>\n<li><del>https://www.allitebooks.com/</del> 超好但是挂了，不清楚现在的几个是否有关：https://www.allitebooks.in/ https://allitebook.xyz/ https://allitbooks.net/</li>\n<li>https://www.jb51.net/books/ 下载需要关注公众号获取提取码</li>\n<li>https://zh.4lib.org/</li>\n<li>http://sd.blackball.lv/books/</li>\n<li>https://sobooks.cc/ 不是专门计算机的</li>\n<li>http://www.kgbook.com/ 不是专门计算机的</li>\n<li>https://z-lib.org/ 无法直接访问</li>\n<li>https://www.zhihu.com/question/19709630 有哪些网站可以获取免费的国外的原版书籍（电子版）</li>\n<li>https://github.com/EbookFoundation/free-programming-books 免费的</li>\n</ul>\n\n<h3>4.3. 音乐</h3>\n\n<ul>\n<li>https://myfreemp3cc.com/ 好像可以用</li>\n<li>http://tool.liumingye.cn/music/ 新版：https://music.liumingye.cn/ 电影：http://lab.liumingye.cn</li>\n<li>http://tool.yijingying.com/musictools/ 一部分用不了</li>\n<li>https://www.boxpaper.club/musicdownloader/ 未测试</li>\n<li>http://music.moresound.tk/ 暂时所有的都用不了，但是网站还在，不知是否有特殊的方法</li>\n<li>https://www.52pojie.cn/thread-929831-1-1.html 集合</li>\n<li>https://listen1.github.io/listen1/ 只是整合可以直接听的</li>\n<li>https://github.com/lyswhut/lx-music-desktop</li>\n<li>http://www.guqiankun.com/tools/music/</li>\n<li>挂了的：https://music.2333.me/ https://github.com/maicong/music</li>\n</ul>\n\n<h3>4.4. GeoIP2数据库</h3>\n\n<ul>\n<li>https://geolite.clash.dev/</li>\n<li>https://github.com/Dreamacro/maxmind-geoip/releases</li>\n<li>https://static.clash.to/GeoIP2/GeoIP2-Country.tar.gz （RixCloud 公共库）</li>\n<li>https://quantumult.crossutility.com/download/geoip/database/GeoLite2-Country.mmdb</li>\n</ul>\n\n<h3>4.5. 字体</h3>\n\n<ul>\n<li>https://zenozeng.github.io/Free-Chinese-Fonts/</li>\n<li>https://www.webfont.com/onlinefont/index</li>\n<li>https://www.marksimonson.com/fonts</li>\n</ul>\n\n<h2>5. 安全</h2>\n\n<ul>\n<li>https://github.com/euphrat1ca/security_w1k1</li>\n<li>https://github.com/No-Github/1earn</li>\n</ul>\n\n<h3>5.1. 恶意软件分析沙箱</h3>\n\n<ul>\n<li>https://habo.qq.com/ 腾讯哈勃。现在只能分析很少的一部分，详细报告需要高级会员，而申请通道已经关闭了</li>\n<li>https://www.maldun.com/ 魔盾安全。有效，但是貌似速度很慢，我是直接第二天再去看的</li>\n<li>https://s.threatbook.cn/ 微步。貌似出来不久</li>\n<li>https://www.hybrid-analysis.com 国外的</li>\n<li>https://app.sndbox.com</li>\n<li>https://scan.anxinsec.com/</li>\n</ul>\n\n<h3>5.2. 服务器安全软件</h3>\n\n<ul>\n<li>https://www.yunsuo.com.cn/download.html</li>\n<li>https://scanner.baidu.com webshell检测引擎</li>\n</ul>\n\n<h2>6. Git平台</h2>\n\n<ul>\n<li>https://code.aliyun.com</li>\n<li>https://xiaolvyun.baidu.com</li>\n<li>https://opendev.org Ubuntu, Gitea</li>\n<li>https://salsa.debian.org/ GitLab</li>\n</ul>\n\n<h2>7. Paste Bin</h2>\n\n<ul>\n<li>https://pastebin.com/</li>\n<li>https://ghostbin.com/</li>\n<li>https://rentry.co/</li>\n<li>https://hastebin.com/</li>\n<li>https://pastebin.ubuntu.com/</li>\n<li>https://www.cacher.io/ 功能很多</li>\n<li>https://write.as/ 其实是博客</li>\n<li>https://del.dog/</li>\n<li>https://psty.io</li>\n<li>https://telegra.ph RST了</li>\n</ul>\n\n<h2>8. 搜索引擎</h2>\n\n<ul>\n<li>https://goobe.io/ 程序员搜索</li>\n<li>https://fofa.so/ 类似于钟馗之眼的搜索引擎</li>\n<li>http://www.sousuoyinqingtijiao.com 搜索引擎提交入口（但没有Google）</li>\n<li>https://2tool.top/ 聚合搜索引擎网页快照</li>\n<li>https://www.cn-ki.net/ 学术搜索；http://cnki.cn-ki.net/ 知网</li>\n</ul>\n\n<h2>9. Docker平台（非免费）</h2>\n\n<ul>\n<li>https://www.tenxcloud.com/ 时速云</li>\n<li>https://www.daocloud.io/ 有一点点免费测试环境 http://docs.daocloud.io/app-deploy-mgmt/cloud-limited-resources</li>\n<li>https://www.mopaas.com/ 魔泊云</li>\n<li>https://www.alauda.cn/ 灵雀云</li>\n<li>https://canister.io/solo</li>\n<li>https://hostpresto.com/docker-hosting 免费六个月</li>\n</ul>\n\n<h2>10. CI</h2>\n\n<ul>\n<li>https://www.shippable.com/pricing.html</li>\n<li>https://codefresh.io/</li>\n</ul>\n\n<h2>11. 图标</h2>\n\n<ul>\n<li>https://octicons.github.com/</li>\n</ul>\n\n<h2>12. 云办公相关</h2>\n\n<ul>\n<li>https://uzer.me/ 有office，ps，ai，cad，matlab，visio，ff。论坛挂了</li>\n<li>http://www.gleasy.com/ 格子云，到哪都能办公</li>\n<li>http://www.everydo.com/ 文档管理系统</li>\n</ul>\n\n<h2>13. PDF</h2>\n\n<ul>\n<li>https://www.hipdf.com/</li>\n<li>https://smallpdf.com/cn</li>\n</ul>\n\n<h2>14. 爬虫</h2>\n\n<ul>\n<li>https://www.bazhuayu.com/ 八爪鱼；国外版 https://www.octoparse.com/</li>\n<li>http://www.houyicaiji.com/</li>\n<li>http://www.gooseeker.com/</li>\n<li>以下是国外的</li>\n<li>https://www.zyte.com</li>\n<li>https://apify.com/</li>\n<li>https://www.diffbot.com/</li>\n<li>https://www.import.io/</li>\n</ul>\n\n<h2>15. 微信消息推送</h2>\n\n<ul>\n<li>https://sct.ftqq.com/ Server酱</li>\n<li>http://www.xtuis.cn/ 虾推啥</li>\n<li>https://pushplus.hxtrip.com/ push+</li>\n<li>https://qmsg.zendee.cn/ Qmsg酱</li>\n<li>https://wxpusher.zjiecode.com 开源</li>\n<li>https://letserver.run/ Server饭，开源</li>\n<li>https://github.com/songquanpeng/message-pusher 开源</li>\n</ul>\n\n<h2>16. CI</h2>\n\n<ul>\n<li>Circle CI 老牌</li>\n<li>AppVeyor 以Win出名</li>\n<li>https://cloud.drone.io 有人说文档烂</li>\n<li>https://semaphoreci.com/</li>\n<li>https://buildkite.com/</li>\n</ul>\n\n<h2>17. 其它中的其它</h2>\n\n<ul>\n<li>https://img.xjh.me/ 随机图片 https://api.lolicon.app/#/setu 随机色图</li>\n<li>http://shaofan.org/jetbrains-active/ Jetbrains在线激活工具</li>\n<li>https://apiary.io/ API Design Stack，与Oracle合作</li>\n<li>https://www.sap.cn/products/cloud-platform/pricing.html ERP系统；注册Beta版是免费的，但要填姓名公司电话</li>\n<li>https://developer.okta.com/ adds authentication, authorization, and user management to your web or mobile app within minutes.</li>\n<li>https://www.chanzhi.org/dynamic.html https://www.chanzhi.org/book/chanzhieps/5.html https://www.zentao.net/ 蝉知和禅道，前者是CMS，后者是项目管理系统。不过是PHP</li>\n<li>https://www.kancloud.cn/ https://www.yuque.com/ https://www.baklib.com/ MD平台</li>\n<li>http://www.ypppt.com/ ppt</li>\n<li>https://enterprise.glyptodon.com/ 网页版Windows远程桌面</li>\n<li>https://squoosh.app/ 图片压缩，谷歌出的工具</li>\n<li>http://www.freeyun.net/ 软件授权管理一站式解决方案</li>\n<li>https://prerender.io/ 预渲染动态网页</li>\n<li>https://termible.io 还在内测的在线终端，基于Docker</li>\n<li>https://heyterm.com/zh-cn/ WebSSH</li>\n<li>https://www.freepik.com/ 免费psd图像资源</li>\n<li>https://pyup.io/ 监测Python依赖</li>\n<li>https://waifulabs.com/ AI生成二次元头像</li>\n<li>https://appcenter.ms/ 存放release</li>\n<li>https://bell-sw.com/ OpenJDK</li>\n<li>https://dev.to/doobled/listing-the-best-services-for-free-domain-email-addresses-in-2020-3hkb 几个邮箱测评</li>\n<li>https://newrelic.com 遥测？</li>\n<li>https://mailchimp.com/ 群发邮件</li>\n<li>性能测试：<code>wget -qO- 86.re/bench.sh | bash</code></li>\n<li>https://github.com/fangzesheng/free-api 免费的接口</li>\n<li>https://github.com/zhaojh329/rtty web tty</li>\n<li>https://www.plasticscm.com/ 不同于git的版本控制系统，可以玩玩</li>\n<li>https://trinket.io/ Py的Turtles运行环境，谷歌的Blocks，适合小孩子学</li>\n<li>手机原生应用推送：https://www.getui.com/push https://www.jiguang.cn/push</li>\n<li>服务器监控：https://www.oneapm.com https://www.tingyun.com/ https://www.jiankongbao.com/</li>\n<li>https://www.authing.cn/pricing 统一身份验证</li>\n</ul>\n\n<h2>18. 别人的收集</h2>\n\n<ul>\n<li>https://www.freehao123.com/</li>\n<li>https://51.ruyo.net/</li>\n<li>https://github.com/Sicmatr1x/Free-Resource</li>\n<li>https://www.producthunt.com/</li>\n</ul>\n\n<h2>19. 挂了的</h2>\n\n<ul>\n<li>Ohosti “骗人的，去年申请的现在还在Pending中”</li>\n<li>https://vitu.ai</li>\n</ul>\n","tags":["云","免费项目"],"categories":["免费项目"]},{"title":"那些让人惊奇的云项目(第三弹_网络和ddns)","url":"/2023/05/22/那些让人惊奇的云项目-第三弹-网络和ddns/","content":"\n<hr />\n\nDDNS需要公网IP，基本上就是隔一段时间访问一下接口，连接和传输数据是不会消耗服务商的流量的。\n\n<!--more-->\n\n内网穿透需要消耗服务器的流量。\n还有点对点/内网打洞的技术，但是需要两边都安装软件：xtcp，n2n，moon，zerotier one\n\n<h2>1. frp</h2>\n\n<ul>\n<li>https://www.natfrp.org/ Sakura Frp</li>\n<li>https://bob.kim/frp 博主自己搭的</li>\n<li>https://www.lu8.win/ ngrok、frp、n2n、nps、免费域名</li>\n<li>https://napyy.com/</li>\n<li>https://qydev.com 限速1M</li>\n</ul>\n\n<h2>2. ngrok</h2>\n\n1.x开源但现在已经停止维护了；2.x不开源。\n\n<ul>\n<li>https://ngrok.com/ 官网，服务器在国外</li>\n<li>https://natapp.cn/ 免费的需实名认证</li>\n<li>https://www.ngrok.cc/ Sunny Ngrok，不过官网说也支持frp</li>\n<li>https://www.tunnelnat.com/ 虽然也写了frp，但好像只有ngrok有免费通道</li>\n</ul>\n\n<h2>3. 其它开源的</h2>\n\n<ul>\n<li>https://github.com/ffay/lanproxy Java</li>\n<li>http://wdom.net/ 免费20分钟</li>\n<li>https://github.com/inlets/inlets</li>\n</ul>\n\n<h2>4. 其它不开源的</h2>\n\n<ul>\n<li>https://hsk.oray.com/ 花生壳，注册需要手机号；DDNS和内网穿透都支持？后者免费速度1M。</li>\n<li>https://www.kingdriod.cn/ 神卓，免费速度1M；需要实名认证上传身份证</li>\n<li>http://www.luyouxia.com/ 路由侠</li>\n<li>https://www.notr.tech/ 免费3小时</li>\n<li>https://www.nsloop.com/ 量子互联，写的不限流量</li>\n<li>http://www.mofasuidao.cn/ 魔法隧道，写的是“免费创建账户”</li>\n<li>http://www.youtusoft.com/ 网络通</li>\n<li>https://xiaomy.net/ 网云穿</li>\n<li>https://localhost.run/ 无需注册？</li>\n</ul>\n\n<h2>5. 免费DDNS</h2>\n\n<ul>\n<li>https://dyndnss.net/eng/</li>\n<li>https://freedns.afraid.org/</li>\n<li>https://www.duckdns.org/</li>\n<li>https://www.noip.com/</li>\n<li>https://www.spdyn.de/ 只有德语？</li>\n<li>https://dynv6.com/</li>\n</ul>\n","tags":["云","免费项目"],"categories":["免费项目"]},{"title":"那些让人惊奇的云项目(第四弹_云)","url":"/2023/05/22/那些让人惊奇的云项目-第四弹-云/","content":"\n<h1>云</h1>\n\n<!--more-->\n\nIaaS指提供系统（可以自己选）或者储存空间之类的硬件，软件要自己手动装；PaaS提供语言环境和框架（可以自己选）；SaaS只能使用开发好的软件（卖软件本身）；BaaS一般类似于非关系数据库，但各家不通用，有时还有一些其它东西。\n\n<h2>1. 其他人的集合</h2>\n\n<ul>\n<li>https://education.github.com/pack GitHub学生包，需用教育邮箱验证。各种福利，可从DigitalOcean上手</li>\n<li>https://github.com/ripienaar/free-for-dev</li>\n<li>https://github.com/AchoArnold/discount-for-student-dev</li>\n<li>https://github.com/ivmm/Student-resources</li>\n<li>https://www.freeforstudents.org/</li>\n<li>https://github.com/255kb/stack-on-a-budget</li>\n<li>https://github.com/Ibexoft/awesome-startup-tools-list</li>\n<li>https://www.cokemine.com/</li>\n</ul>\n\n<h2>2. Paas</h2>\n\n<ul>\n<li>https://www.heroku.com/ java go py docker。国内访问不佳</li>\n<li>https://fly.io/docs/pricing/ py node go 静态，感觉很完美</li>\n<li>https://www.deta.sh/ py3.7 node12 内存128MB，依赖250MB，大概率不支持DBMS，支持定时任务。有类dict数据库和10GB存储且可独立使用</li>\n<li>https://www.pythonanywhere.com/ 限制非常多，几乎就和虚拟主机差不多了，免费账户不允许访问白名单之外的网站。但好歹能提供一个自动https的web app</li>\n<li>https://www.divio.com/ docker</li>\n<li>https://www.clever-cloud.com/en/pricing 看介绍送20€，但应该只会送一次，可以用4个月</li>\n<li>https://cloud.google.com/appengine/docs/ 标准环境有一点储存空间和流量，要求启用API即要求绑卡，柔性环境(.NET)必须启用结算。国内无法访问</li>\n<li>https://clustered.com/pricing 现在只免费14天，永久免费的plan还没出，但至少从2020年11月就是这样了</li>\n<li>https://www.koyeb.com docker node py go，首页被RST</li>\n<li>https://railway.app/ node py go java，用了类似于heroku的buildpacks，RST</li>\n</ul>\n\n<h3>2.1. .net</h3>\n\n<ul>\n<li>https://appharbor.com 看起来比较好，支持3.1。好像不支持5：https://support.appharbor.com/discussions/problems/117063-net-5-support</li>\n<li>https://freeasphosting.net/ 网站说了一大堆学习的东西，不过说支持.NET5</li>\n<li>https://www.gearhost.com/ 看起来比较好，支持3.1。还支持PHP7和node。现在开了CF屏蔽大陆IP</li>\n<li>https://order.aspify.com/en/freehosting/ 100MB硬盘100MB数据库，支持5。但之前不让注册说服务在中国不可用</li>\n<li>https://somee.com/ 被墙了，且IP被封了</li>\n<li>https://www.myasp.net/hosting_plans 免费两个月但好像能免费续期</li>\n</ul>\n\n<h2>3. 云端空间/IDE</h2>\n\n<ul>\n<li>https://cloudstudio.net VSC，服务器在上海，每日限时四小时</li>\n<li>https://www.gitpod.io/ VSC，免费版每月50小时，支持在本地打开；专业版在学生包里免费6个月但要求Primary Email是学校的账户</li>\n<li>GitHub Workspaces：可能收费</li>\n<li>https://workspaces.openshift.com/ 魔改VSC，不支持扩展，国内访问慢；之前是codenvy和che.openshift.io</li>\n<li>https://repl.it/ 有免费版；专业版在学生包里免费3个月</li>\n<li>https://paiza.cloud/en/ 日产，好像还支持SSH连上去</li>\n<li>https://codetasty.com/</li>\n<li>https://www.suishencode.com/ 国内的，code-server，不知道为什么全网都搜不到信息</li>\n<li>https://next.tech/ 学生包中有</li>\n<li>https://ide.goorm.io/pricing 可以建立五个工作区，可以用SSH连上去。好像是自制的，界面完成度蛮高的，有终端，但没有intellisense，只能玩玩</li>\n<li>https://www.tutorialspoint.com/codingground.htm http://codepad.org/ https://ideone.com/ https://coliru.stacked-crooked.com/ https://wandbox.org/ https://tio.run https://code.xueersi.com/ide/code/1 https://jsrun.net/ 无需登录，能执行许多语言，但只能说能运行代码，称不上IDE</li>\n</ul>\n\n<h3>3.1. 前端在线IDE</h3>\n\n<ul>\n<li>https://jsbin.com 简洁，无需注册</li>\n<li>https://codepen.io/ 可不注册</li>\n<li>https://stackblitz.com/</li>\n<li>https://codesandbox.io/</li>\n<li>https://bit.dev/</li>\n<li>https://runkit.com 类似于jupyter notebook，也能创建api，以及把js的codeblock变得可运行</li>\n<li>https://www.codeply.com/</li>\n<li>https://plnkr.co/ 比较简陋</li>\n<li>https://jsfiddle.net/ 我这里打不开，且感觉是他们封的我们</li>\n</ul>\n\n<h3>3.2. Jupyter Notebook/Lab</h3>\n\n<ul>\n<li>https://colab.research.google.com/ 有免费gpu额度，国内无法直接打开。免费版无终端</li>\n<li>https://tianchi.aliyun.com/notebook-ai/home 免费gpu 60小时/年。登录要用阿里云账号，不想记住密码，每次都要用手机扫很麻烦，有时还要短信二次验证</li>\n<li>https://aistudio.baidu.com/aistudio/projectoverview/private 内存8G，磁盘100G，work目录永久保存，实名认证有一些GPU资源；长时间不用无法自动重连</li>\n<li>https://www.kaggle.com 验证电话后有免费gpu和外网，能连续运行9小时，有机器学习的教程</li>\n<li>https://www.heywhale.com/home/project 国产</li>\n<li>https://datalore.jetbrains.com/</li>\n<li>https://cocalc.com/doc/jupyter-notebook.html</li>\n<li>https://jupyter.org/try 官方，资源非常少，有C++；mybinder可以从GitHub仓库建立临时NB</li>\n<li>https://kogence.com/app/landing/pricing</li>\n<li>https://deepnote.com 免费额度750小时，5G空间</li>\n<li>https://www.dclab.run/project_list.html 国产</li>\n<li>https://software.intel.com/content/www/cn/zh/develop/tools/devcloud.html</li>\n</ul>\n\n<h2>4. 数据库</h2>\n\n<ul>\n<li>https://db4free.net/ mysql 200M</li>\n<li>https://www.freemysqlhosting.net/ mysql 5.5，5MB，每周会收到要手动操作来延期的邮件</li>\n<li>https://mlab.com/ https://www.mongodb.com/pricing 500MB；后者学生包中有</li>\n<li>https://app.redislabs.com/ redis，30M</li>\n<li>https://www.elephantsql.com/plans.html pg</li>\n<li>https://remotemysql.com/ mysql 100M</li>\n<li>https://www.elephantsql.com/ pg 20M</li>\n<li>https://www.freesqldatabase.com/ mysql 5MB</li>\n</ul>\n\n<h2>5. BaaS</h2>\n\n<ul>\n<li>https://bmob.cn/</li>\n<li>https://leancloud.cn/pricing/</li>\n<li>https://firebase.google.cn/pricing 用处：https://zhuanlan.zhihu.com/p/95334890</li>\n<li>https://www.zhihu.com/question/34124789/answer/72495188</li>\n<li>https://maxleap.cn/s/web/zh_cn/devcenter-pricing.html</li>\n<li>https://www.8base.com GraphQL</li>\n<li>JSON\n\n<ul>\n<li>https://jsonstores.com/ 100个JSON对象，每个最大2MB</li>\n<li>https://jsonbin.io/</li>\n<li>https://extendsclass.com/json-storage.html</li>\n<li>https://json.psty.io/</li>\n<li>https://www.jsonstorage.net/ 有无需注册的</li>\n<li>https://db.neelr.dev/ 无需注册，打开网页时自动生成一个TOKEN。但国内打不开</li>\n</ul></li>\n</ul>\n\n<h2>6. Managed K8S</h2>\n\n<ul>\n<li>https://www.openshift.com/products/online/ 每60天清除</li>\n<li>https://okteto.com/pricing 免费版2CPU，4G内存，10G储存。刚注册送一个月pro，不付款自动降到免费版。免费版24小时不活动就sleep。原意是为开发者日常开发使用的</li>\n<li>https://usekrucible.com 一个月能用25小时，自己分配</li>\n<li>https://kubernauts.sh/ 宣传免费版有1CPU，1G内存；申请注册后没收到任何邮件，无法登录</li>\n<li>https://labs.play-with-k8s.com/ 好像每天只有四小时；https://labs.play-with-docker.com/</li>\n<li>zarvis.ai staroid.com 网页都用的是Google的服务器，无法直接访问</li>\n<li>https://kubesail.com/ 停止免费版了，不过还是能作为管理平台</li>\n<li>https://loft.sh/ 好像只是客户端或者管理平台</li>\n<li>挂了的：k8spin.cloud tryk8s.com</li>\n</ul>\n\n<h2>7. Serverless/Node Paas（无状态的api）</h2>\n\n<ul>\n<li>https://glitch.com/</li>\n<li>https://workers.cloudflare.com/ ；https://github.com/booster-labs/rocket-booster</li>\n<li>https://vercel.com/ node go py</li>\n<li>https://deno.com/deploy</li>\n<li>https://pipedream.com/</li>\n<li>https://keen.io/</li>\n<li>https://www.openode.io/pricing</li>\n<li>https://www.cloud66.com/node/ 免费一个月</li>\n<li>https://www.jexia.com/</li>\n<li>https://www.openode.io/</li>\n<li>https://encore.dev/ RST</li>\n<li>谷歌的functions有一些免费额度，但一定会产生部署费用，最少$0.03/mo</li>\n<li>国内的云服务厂商一般都有FaaS服务，也有一定的免费额度，但问题是公网流出流量是没有免费额度的</li>\n<li>https://www.slappforge.com/sigma 仅开发平台</li>\n<li>https://catalyst.zoho.com/ 有免费的</li>\n</ul>\n\n<h2>8. 静态网页托管（必须要能自动更新）</h2>\n\n<ul>\n<li>https://surge.sh/</li>\n<li>https://www.netlify.com/</li>\n<li>https://render.com/ 收费版有PaaS，但免费版只能Static</li>\n<li>https://cloudcannon.com</li>\n<li>https://tiiny.host 只能存活7天？</li>\n<li>https://pages.cloudflare.com/</li>\n</ul>\n\n<h2>9. 也许可用的IaaS</h2>\n\n<ul>\n<li>euserv，德国的，只有IPV6，亲测确实可以，但硬盘很慢 https://github.com/YG-tsj/EUserv-warp</li>\n<li>https://open.iot.10086.cn/cloud/introduction/cloud-server OneNET移动的，MQ、对象储存、可视化、CI都有一定的免费额度</li>\n<li>https://activity.xinruiyun.cn/free/ 新睿云，发个广告可以免费用一个月的ECS</li>\n<li>https://www.oracle.com/cn/cloud/free/ 体验文章：https://51.ruyo.net/14138.html 不支持prepaid card；https://www.blueskyxn.com/202109/5232.html</li>\n<li>https://51.ruyo.net/14583.html Azure</li>\n<li>https://www.atlantic.net/ <del>免费12个月</del>现在好像变成免费一个月了，需要信用卡</li>\n<li>谷歌云、Amazon、Azure、Yandex Cloud：注册后都会送一些额度</li>\n</ul>\n\n<h3>9.1. <a class=\"wp-editor-md-post-content-link\" href=\"https://www.ibm.com/cn-zh/cloud/free\">IBM Cloud</a></h3>\n\n<ul>\n<li>Lite(轻量)版无需信用卡，没有到期时间，完全不会变到付费套餐上，额度到了就无法使用，30天不活动自动删除，一共44项服务</li>\n<li>Cloud Foundry：PaaS 256M内存，支持Java Node .NET GO PHP Py。10天不活动就休眠。apic.mybluemix.net和mybluemix.net都被墙了。要用ibmcloud命令行</li>\n<li>对象储存：25GB储存，5GB出站；Cloudant JSON文档数据库：1GB；DB2数据库：200MB，每90天要邮件延期</li>\n<li>机器翻译：但无ja-zh模型，只能和en互转，每月100万字符</li>\n<li>API Gateway：转发一次到另一个endpoint上，能用于静态文件的反代，能设定密钥验证和限制速率，显示调用频率。免费调用100万次但是没写每月，之后限速</li>\n<li>Cloud for Education：持续时间一小时的ECS，能用RDP连上但卡到完全无法使用，好像无外部互联网连接</li>\n<li>机器学习</li>\n<li>Docker Registry：储存0.5GB，流量5GB</li>\n<li>Event Streams：Kafka</li>\n<li>那些“软件”虽然有非常多免费的，但必须部署到k8s上；k8s也有免费套餐，但lite无法创建，因为流量和IP可能要收费</li>\n<li>函数计算：虽然有一点免费额度，但是无lite版</li>\n</ul>\n\n<h3>9.2. <a class=\"wp-editor-md-post-content-link\" href=\"https://cloud.tencent.com/act/free\">腾讯云</a></h3>\n\n<ul>\n<li>对象储存：免费半年</li>\n<li>CDN：免费半年</li>\n<li>Serverless：免费一年</li>\n<li>文件储存：免费10G</li>\n<li>机器翻译：免费500万字符/月，开通免费版必不会收任何费用</li>\n<li>云托管 CloudBase Run：不知道干什么用的</li>\n</ul>\n\n<h3>9.3. <a class=\"wp-editor-md-post-content-link\" href=\"https://free.aliyun.com\">阿里云</a></h3>\n\n<ul>\n<li>ECS：https://www.aliyun.com/daily-act/ecs/free 需要实名认证且未购买过任何产品，有个t6的ECS可以免费试用一年</li>\n<li>MaxCompute大数据计算服务开发者版https://www.aliyun.com/product/odps</li>\n<li>云效DevOps有一些免费额度，包括5GB Maven仓库</li>\n<li>机器翻译通用版：每月100万字符免费额度</li>\n</ul>\n\n<h2>10. 低代码平台/aPaaS</h2>\n\n<ul>\n<li>指不用写很多代码就能设计出软件，有可视化工具</li>\n<li>大部分都是BPM平台，即 表单+工作流审批，适合企业建立业务逻辑在线办公</li>\n<li>往往与平台本身严重绑定，难以复用和维护，切换平台代价大，开发者自身难以提升</li>\n</ul>\n\n<h3>10.1. 国内的</h3>\n\n<ul>\n<li>https://github.com/taowen/awesome-lowcode 收集</li>\n<li>https://www.aliwork.com/ 宜搭，阿里+钉钉</li>\n<li>https://www.apicloud.com/ 云端开发管理类</li>\n<li>https://www.mingdao.com/ 明道云</li>\n<li>https://www.jiandaoyun.com/ 简道云</li>\n<li>https://www.huoban.com/ 伙伴云</li>\n<li>https://qingflow.com/ 轻流</li>\n<li>https://www.steedos.com/pricing/platform/ 华炎魔方，开源，私有部署免费</li>\n<li>https://baidu.gitee.io/amis/docs/index 开源，偏程序员</li>\n<li>https://modao.cc/ 墨刀，原型设计工具</li>\n<li>https://www.imgcook.com/ 淘宝，由设计稿生成界面</li>\n<li>https://www.huaweicloud.com/product/appcube.html 华为云应用魔方，太新</li>\n<li>https://www.informat.cn/ 织信</li>\n<li>https://seatable.cn/ 在线协同表格和信息管理工具，类似于excel，本体不开源但开源了一些组件</li>\n<li>https://www.baishuyun.com/ 百数云</li>\n<li>网页感觉不太好的\n\n<ul>\n<li>https://www.iyunbiao.com/ 云表</li>\n<li>https://www.grapecity.com.cn/solutions/huozige 活字格</li>\n<li>https://www.learun.cn/ 力软敏捷框架</li>\n<li>https://www.ivx.cn 号称零代码开发Web App和小程序，前身是ih5.cn，不是BPM</li>\n<li>https://wuyuan.io/ https://enhancer.io/ 无远开发平台，个人使用免费，商业收费</li>\n<li>https://www.wudaima.com/ 宜创无代码，官网的footer的链接都是废的，一点也不透明</li>\n<li>https://www.bn100.com/ 柏思科技/Workfine</li>\n</ul></li>\n<li>收费的\n\n<ul>\n<li>https://h3yun.com/ 氚云，只免费15天，集成钉钉 https://www.cloudpivot.cn/ 云枢 https://www.h3bpm.com/ 都是“奥哲”公司的</li>\n<li>https://www.newdao.net/ 牛刀，免费两周</li>\n<li>https://www.clickpaas.com/ 不支持个人</li>\n<li>https://www.dadayun.cn/ 搭搭云 没有注册的地方</li>\n</ul></li>\n<li>没有https的： http://www.joget.cn/ 捷得 、http://www.putdb.com/ WebBuilder 、http://www.mf999.com/ 魔方网表(纯表单类)、http://www.delit.cn/ 度量快速开发平台、http://www.jinyunweb.com 进云、http://dev.easydo.cn 易开发、http://www.jepaas.com/ 、</li>\n</ul>\n\n<h3>10.2. 国外的</h3>\n\n<ul>\n<li>https://anvil.works/ py全栈，前端Drag and Drop UI，后端和数据储存用的是该网站的库</li>\n<li>https://www.outsystems.com/pricing-and-editions/ 开发移动应用，是该行的老大；前端组件比较多，后台相对弱一点儿；注册需要姓名，邮箱</li>\n<li>https://www.mendix.com/ 开发移动应用，后台能力比较强（有微流系统）</li>\n<li>https://free.caspio.com/ Database-Powered Apps</li>\n<li>https://thunkable.com 开发移动应用</li>\n<li>https://www.appsheet.com/ 无法直接打开</li>\n<li>https://www.zoho.com/creator/ 网页在我这里打开巨慢。可以一直用免费版只要不使用高级特性</li>\n<li>https://airtable.com/</li>\n<li>https://zenkit.com/ 无法直接打开</li>\n<li>Google的App Maker（G Suite收费）、微软的PowerApps（收费10$/mo）</li>\n<li>https://www.dronahq.com/</li>\n<li>https://zhuanlan.zhihu.com/p/375252561</li>\n<li>https://www.odoo.com/zh_CN/ 开源</li>\n<li>https://bubble.io/ 新出的</li>\n</ul>\n\n<h2>11. 未分类</h2>\n\n<ul>\n<li>https://www.litespeedtech.com/experience-litespeed-for-free 一个月有效？需要姓名，电话，邮箱，地址。好像只有wordpress，还是只有软件？</li>\n<li>https://github-students.educationhost.co.uk/ 免费一年</li>\n<li>有可能与Jupyter有关：\n\n<ul>\n<li>https://www.dataquest.io/plans-pricing/</li>\n<li>https://mode.com/compare-plans/</li>\n<li>https://kyso.io/pricing</li>\n</ul></li>\n<li>https://studio.azureml.net/ 可视化机器学习实验工具，可不登陆使用</li>\n<li>https://quic.cloud/ Wordpress cache cdn</li>\n<li>https://apis.baidu.com/</li>\n<li>https://platform.sh/pricing/ 好像只免费30天</li>\n</ul>\n","tags":["云","免费项目"],"categories":["免费项目"]},{"title":"BBR puls脚本","url":"/2023/05/22/BBR-puls脚本/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>BBR puls脚本</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>-- 就是爱生活 | 94ish.me --</strong></font>\n\n```\nwget -N --no-check-certificate \"https://raw.githubusercontent.com/chiakge/Linux-NetSpeed/master/tcp.sh\" && chmod +x tcp.sh && ./tcp.sh\n```\n\n<img src=\"https://s2.loli.net/2022/06/08/5ylZN1kzbxA4Sgh.png\" alt=\"\" />\n\n<font color=#b0171f size=3 face=宋体><strong>重启之后不用在下载脚本，直接使用</strong></font>\n\n```shell\n# 启动脚本\n./tcp.sh\n\n# 在[4 - 8]中选你要开的加速。\n# 1、安装 BBR/BBR魔改版内核对应4，5，6（原版，魔改，暴力魔改）\n# 2、安装BBRplus版内核，对应7（plus）\n# 3、安装Lotserver（锐速）内核，对应8（锐速）\n# 4、开启后在使用  “./tcp.sh”，显示开启成功，则启动成功！\n```\n\n","tags":["BBR加速"],"categories":["工具"]},{"title":"C语言—_控制语句","url":"/2023/05/22/C语言—-控制语句/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>C语言—_控制语句：</strong></font>\n\n<!--more-->\n\n```\n if 、else、break、continue、for、while、do、switch case、goto、default\n   条件语句：\n       if语句：if 、 else\n       switch语句： switch case、 default\n   循环控制语句：\n       for、while、 do、 goto\n   辅助控制语句：\n       break、continue\n```\n\n","tags":["c语言"],"categories":["c语言"]},{"title":"C语言基本结构","url":"/2023/05/22/C语言基本结构/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>C语言基本结构：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>C语言的基本格式：</strong></font>\n\n```c\n#include   //头文件\n# main 主函数  任意一个C程序中只能有且只能有一个\nint main() {\n    printf(\"Hello, World!\\n\");\n    return 0;\n}\n```\n\n","tags":["c语言"],"categories":["c语言"]},{"title":"centos7 防火墙相关配置","url":"/2023/05/22/centos7-防火墙相关配置/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>centos  之所以叫centos 最主要是因为centos的稳定+对企业的友好</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=2 face=宋体><strong>而防火墙确实centos的一大特色，当然不是说其他的linux版本，或者其他系统没有防火墙，是因为centos的防火墙更有特点而已</strong></font>\n\n<font color=#f26522 size=2 face=宋体><strong>而写这篇博客是因为，自己写了个python项目，在centos7下很顺畅的运行，但是本机能访问，局域网都不能访问，最终确定了是防火墙的问题！</strong></font>\n\n+ <font color=red size=3 face=宋体><strong>防火墙相关命令</strong></font>\n\n```python\nsystemctl start firewalld.service    # 启动防火墙\nsystemctl stop firewalld.service    # 停止防火墙\nfirewall-cmd --state  # 查看防火墙状态\nnetstat -lnpt   # 查看监听的端口\nnetstat -lnpt |grep 5672  # 检查 5672端口 被哪个进程占用\nps 6832  # 查看 6832 进程的详细信息\nkill -9 6832   # 强制终止6832进程\n\nfirewall-cmd --permanent --zone=public --add-port=8080/tcp     # 开放8080/tcp 端口\nfirewall-cmd --permanent --zone=public --remove-port=8080/tcp  # 删除8080/tcp 端口\n\nfirewall-cmd --permanent --zone=public --add-port=8080/udp     # 开放8080/udp 端口\nfirewall-cmd --permanent --zone=public --remove-port=8080/udp  # 删除8080/udp 端口\n\nfirewall-cmd --reload   # 配置了立即生效\n\nfirewall-cmd --zone=public --list-ports    # 查看防火墙所有开放的端口\n```\n\n","tags":["系统","运维","防火墙"],"categories":["linux"]},{"title":"centos7下安装python3.8","url":"/2023/05/22/centos7下安装python3-8/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>centos7下安装python3.8</strong></font>\n\n<!--more-->\n\n<br>\n\n---\n\n<br><font color=#f26522 size=4 face=宋体><strong>1. 查看当前python版本：</strong></font>\n\n```shell\n[root@iZwz99sau950q2nhb3pn0aZ ~]# python\nPython 2.7.5 (default, Aug  7 2019, 00:51:29)\n\n[GCC 4.8.5 20150623 (Red Hat 4.8.5-39)] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>>\n```\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>2. 安装依赖包</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>编译python源码时，需要一些依赖包，一次安装完毕</strong></font>\n\n```shell\nsudo yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel libffi-devel gdbm-devel db4-devel libpcap-devel xz-devel make\nsudo yum install -y zlib zlib-dev openssl-devel sqlite-devel bzip2-devel libffi libffi-devel gcc gcc-c++\n\n# ubuntu 配置环境\nsudo apt-get install -y gcc make build-essential libssl-dev zlib1g-dev libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev libncursesw5-dev xz-utils tk-dev libffi-dev liblzma-dev\n```\n\n<br>\n\n---\n\n<br><font color=#f26522 size=4 face=宋体><strong>3. 安装wget</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>这个包是为了下载python源码用的</strong></font>\n\n```\nyum install wget\n```\n\n<br>\n\n---\n\n<br><font color=#f26522 size=4 face=宋体><strong>4. 下载源码包</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>我是下载的最新的python3.8，如果想安装其他版本，去python官网下载页面下载对应的版本即可。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>但是这个下载链接比较慢，我是用迅雷下载到本地之后，再scp到服务器的。</strong></font>\n\n```python\nwget https://www.python.org/ftp/python/3.8.1/Python-3.8.1.tgz\n# 国内用这个\nwget https://repo.huaweicloud.com/python/3.8.1/Python-3.8.1.tgz\nwget https://www.python.org/ftp/python/3.10.5/Python-3.10.5.tgz\n```\n\n<font color=#f26522 size=4 face=宋体><strong><br>\n\n---\n\n<br>5. 解压安装</strong></font>\n\n```\n# 解压压缩包\ntar -zxvf Python-3.8.1.tgz  \n\n# 进入文件夹\ncd Python-3.8.1\n\n# 配置安装位置\n# ./configure prefix=/usr/local/python3 注意不要加 --enable-optimizations\n./configure prefix=/usr/local/python3\n\n# 如果编译过，就需要清空缓存\nmake clean  # 清空缓存 （重要）\n\n# 安装\nmake && make install\n```\n\n<font color=#f26522 size=4 face=宋体><strong><br>\n\n---\n\n<br>6. 如果最后没提示出错，就代表正确安装了，在/usr/local/目录下就会有python3目录</strong></font>\n\n```\n[root@iZwz99sau950q2nhb3pn0aZ local]# cd /usr/local/\n[root@iZwz99sau950q2nhb3pn0aZ local]# ls\naegis  bin  etc  games  include  lib  lib64  libexec  python3  sbin  share  src\n```\n\n<font color=#f26522 size=4 face=宋体><strong><br>\n\n---\n\n<br>7. 添加软连接</strong></font>\n\n```\n#添加python3的软链接 \nln -s /usr/local/python3/bin/python3.8 /usr/bin/python3 \n\n#添加 pip3 的软链接 \nln -s /usr/local/python3/bin/pip3.8 /usr/bin/pip3\n```\n\n<br>\n\n---\n\n<br><font color=#f26522 size=4 face=宋体><strong>8. 好了，我们来测试一下python3</strong></font>\n\n```\n[root@iZwz99sau950q2nhb3pn0aZ local]# python3\nPython 3.8.1 (default, Feb  4 2020, 11:28:31) \n[GCC 4.8.5 20150623 (Red Hat 4.8.5-39)] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>>\n```\n\n<font color=#b0171f size=2 face=宋体><strong>这里我没有链接到python上，是因为yum要用到python2才能执行，所以现在输入python的话还是会进入python2.7，输入python3才会进入python3.8\n如果执意想要链接到python的话，就得修改一下yum的配置：</strong></font>\n\n```\nvi /usr/bin/yum \n#! /usr/bin/python 修改为 #! /usr/bin/python2\nvi /usr/libexec/urlgrabber-ext-down \n#! /usr/bin/python 修改为 #! /usr/bin/python2\n```\n\n","tags":["python","linux","安装"],"categories":["python"]},{"title":"centos、kali镜像下载","url":"/2023/05/22/centos、kali镜像下载/","content":"\n<font color=#00b2c2 size=6 face=\"宋体\"><strong>centos_7</strong></font>\n\n<!--more-->\n\n   + 版本号：7（发布时间：2009）\n       + x86_64-DVD\n           + <font color=#000080 size=2 face=\"宋体\"><strong>标准版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-2009.iso\">点击下载</a>\n           + <font color=#000080 size=2 face=\"宋体\"><strong>完整版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/centos/7/isos/x86_64/CentOS-7-x86_64-Everything-2009.iso\">点击下载</a>\n           + <font color=#000080 size=2 face=\"宋体\"><strong>最小安装版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/centos/7/isos/x86_64/CentOS-7-x86_64-Minimal-2009.iso\">点击下载</a>\n           + <font color=#000080 size=2 face=\"宋体\"><strong>联网版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/centos/7/isos/x86_64/CentOS-7-x86_64-NetInstall-2009.iso\">点击下载</a>\n\n<font color=#00b2c2 size=6 face=\"宋体\"><strong>centos_8</strong></font>\n   + 版本号：8（发布时间：不详）\n       + aarch64-DVD\n           + <font color=#000080 size=2 face=\"宋体\"><strong>标准版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/centos/8/isos/aarch64/CentOS-8.4.2105-aarch64-dvd1.iso\">点击下载</a>\n       + x86_64-DVD\n           + <font color=#000080 size=2 face=\"宋体\"><strong>标准版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/centos/8/isos/x86_64/CentOS-8.4.2105-x86_64-dvd1.iso\">点击下载</a>\n\n<font color=#00b2c2 size=6 face=\"宋体\"><strong>kali</strong></font>\n   + 版本号：镜像安装版kali-2020.4（发布时间：2020.4）\n       + amd64_iso(就是x86_64位)\n           + <font color=#000080 size=2 face=\"宋体\"><strong>标准版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/kali-images/kali-2020.4/kali-linux-2020.4-installer-amd64.iso\">点击下载</a>\n           + <font color=#000080 size=2 face=\"宋体\"><strong>联网版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/kali-images/kali-2020.4/kali-linux-2020.4-installer-netinst-amd64.iso\">点击下载</a>\n       + i386_iso(就是x86_32位)\n           + <font color=#000080 size=2 face=\"宋体\"><strong>标准版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/kali-images/kali-2020.4/kali-linux-2020.4-installer-i386.iso\">点击下载</a>\n           + <font color=#000080 size=2 face=\"宋体\"><strong>联网版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/kali-images/kali-2020.4/kali-linux-2020.4-installer-netinst-i386.iso\">点击下载</a>\n   + 版本号：镜像安装版kali-2021.3（发布时间：2021.3）\n       + amd64_iso(就是x86_64位)\n           + <font color=#000080 size=2 face=\"宋体\"><strong>标准版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/kali-images/kali-2021.3/kali-linux-2021.3-installer-amd64.iso\">点击下载</a>\n           + <font color=#000080 size=2 face=\"宋体\"><strong>live版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/kali-images/kali-2021.3/kali-linux-2021.3-live-amd64.iso\">点击下载</a>\n           + <font color=#000080 size=2 face=\"宋体\"><strong>联网版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/kali-images/kali-2021.3/kali-linux-2021.3-installer-netinst-amd64.iso\">点击下载</a>\n       + i386_iso(就是x86_32位)\n           + <font color=#000080 size=2 face=\"宋体\"><strong>标准版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/kali-images/kali-2021.3/kali-linux-2021.3-installer-i386.iso\">点击下载</a>\n           + <font color=#000080 size=2 face=\"宋体\"><strong>live版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/kali-images/kali-2021.3/kali-linux-2021.3-live-i386.iso\">点击下载</a>\n           + <font color=#000080 size=2 face=\"宋体\"><strong>联网版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/kali-images/kali-2021.3/kali-linux-2021.3-installer-netinst-i386.iso\">点击下载</a>\n       + arm64_iso(就是x86_32位)\n           + <font color=#000080 size=2 face=\"宋体\"><strong>标准版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/kali-images/kali-2021.3/kali-linux-2021.3-installer-arm64.iso\">点击下载</a>\n           + <font color=#000080 size=2 face=\"宋体\"><strong>live版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/kali-images/kali-2021.3/kali-linux-2021.3-live-arm64.iso\">点击下载</a>\n           + <font color=#000080 size=2 face=\"宋体\"><strong>联网版 下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://mirrors.ustc.edu.cn/kali-images/kali-2021.3/kali-linux-2021.3-installer-netinst-arm64.iso\">点击下载</a>\n","tags":["镜像","centos","kali"],"categories":["镜像"]},{"title":"Chromium_OS_镜像","url":"/2023/05/22/Chromium-OS-镜像/","content":"\n<h3>1. Chromium OS</h3>\n\n<!--more-->\n\n<ul>\n<li><font color=#00b2c2 size=5 face=\"宋体\"><strong>PC</strong></font>\n\n<ul>\n<li>版本号：v9.1（发布时间：2020-03-26）\n\n<ul>\n<li>FydeOS for PC v9.1\n\n<ul>\n<li><font color=   #000080 size=2 face=\"宋体\"><strong>下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"\"><del>ED2K</del></a>、<a class=\"wp-editor-md-post-content-link\" href=\"magnet:?xt=urn:btih:F3689EE748D1DBEF2DFC10415EAB7AD1EE5302AD&dn=FydeOS_PC_v9.1-stable.img.xz&xl=1765284912\">BT</a></li>\n</ul></li>\n</ul></li>\n<li>版本号：v10.0（发布时间：2020-07-24）\n\n<ul>\n<li>FydeOS for PC v10.0\n\n<ul>\n<li><font color=   #000080 size=2 face=\"宋体\"><strong>下载链接：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"\"><del>ED2K</del></a>、<a class=\"wp-editor-md-post-content-link\" href=\"magnet:?xt=urn:btih:BD57136F51ACD60E5412085E4066EA4496C6601E&dn=FydeOS_PC_v10.0-stable.img.xz&xl=1789463424\">BT</a></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul>\n","tags":["chrome-os","镜像"],"categories":["镜像"]},{"title":"Linux下_给cp和mv命令中添加进度条","url":"/2023/05/22/Linux下-给cp和mv命令中添加进度条/","content":"\n<h2>1. <mark>修改后的方法</mark></h2>\n\n<!--more-->\n\n<ul>\n<li>系统说明：\n\n<ul>\n<li>本人使用Debian 11</li>\n<li>KDE Plasma版本： 5.20.5</li>\n<li>KDE 框架版本： 5.78.0</li>\n<li>Qt 版本：5.15.2</li>\n<li>内核版本：5.10.0-9-amd64</li>\n</ul></li>\n</ul>\n\n<a class=\"wp-editor-md-post-content-link\" href=\"https://wwwqe.lanzoui.com/iR7cKvxp82j\">蓝奏云下载</a>\n<strong>1. 解压文件（coreutils-8.32.tar.gz）</strong>\n\n<pre><code class=\"language-shell line-numbers\">tar -xzvf coreutils-8.32.tar.gz\n</code></pre>\n\n<strong>2. 进入coreutils-8.32</strong>\n\n<pre><code class=\"language-shell line-numbers\">cd coreutils-8.32\n</code></pre>\n\n<strong>2. 安装编译环境</strong>\n\n<pre><code class=\"language-shell line-numbers\">sudo apt install gcc make build-essential manpages-dev\n</code></pre>\n\n<strong>3. 编译补丁</strong>\n\n<pre><code class=\"language-shell line-numbers\"># 增加环境\npatch -p1 -i advcpmv-0.8-8.32.patch\n# 开始编译\n./configure\nmake\n</code></pre>\n\n<strong>4. 安装补丁</strong>\n\n<pre><code class=\"language-shell line-numbers\"># 将补丁复制到系统变量文件夹中\nsudo cp src/cp /usr/local/bin/cp\nsudo cp src/mv /usr/local/bin/mv\n</code></pre>\n\n<h2>2. <mark>原方法</mark></h2>\n\n<strong>1. 下载补丁包</strong>\n\n<pre><code class=\"language-shell line-numbers\">wget http://ftp.gnu.org/gnu/coreutils/coreutils-8.32.tar.xz\n</code></pre>\n\n<strong>2.解压补丁包</strong>\n\n<pre><code class=\"language-shell line-numbers\">tar xJf coreutils-8.32.tar.xz\n</code></pre>\n\n<strong>3. 进入补丁文件夹</strong>\n\n<pre><code class=\"language-shell line-numbers\">cd coreutils-8.32/\n</code></pre>\n\n<strong>4. 下载copy补丁</strong>\n\n<pre><code class=\"language-shell line-numbers\">wget https://raw.githubusercontent.com/jarun/advcpmv/master/advcpmv-0.8-8.32.patch\n</code></pre>\n<img src=\"https://s2.loli.net/2022/06/08/joqVudecLTNs26w.png\" alt=\"cp-mv-1\" />\n<strong>5. 应用补丁</strong>\n\n<pre><code class=\"language-shell line-numbers\">patch -p1 -i advcpmv-0.8-8.32.patch\n./configure\nmake\n</code></pre>\n\n<img src=\"https://s2.loli.net/2022/06/08/SJ6MZ7UgRcBWinu.png\" alt=\"cp-mv-3\" />\n<img src=\"https://s2.loli.net/2022/06/08/8kHDzYER61Nb7pU.png\" alt=\"cp-mv-4\" />\n<strong>6. 安装补丁</strong>\n\n<pre><code class=\"language-shell line-numbers\"># 将补丁复制到系统变量文件夹中\nsudo cp src/cp /usr/local/bin/cp\nsudo cp src/mv /usr/local/bin/mv\n</code></pre>\n\n<h4>2.1.1. 使用方法</h4>\n\n<pre><code class=\"language-shell line-numbers\"># 移动命令\nmv -g <原位置> <现位置>\n# 复制命令\ncp -g <原位置> <现位置>\n# 复制命令(包含文件夹)\ncp -g -r <原位置> <现位置>\n</code></pre>\n","tags":["系统","运维","linux"],"categories":["linux"]},{"title":"css基本代码、语法","url":"/2023/05/22/css基本代码、语法/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>css基本代码、语法：</strong></font>\n\n<!--more-->\n\n```python\nbackground-color: red; # 背景颜色红色\nbackground-image: url(images/1.jpg) # 背景图片\nbackground-size: (像素值、百分比值、contain（自适应拉伸）、cover（自适应裁剪）) # 背景尺寸\nbackground-position: (left”、“right”、“top”、“bottom”和“center”、 “left top”（默认）)背景定位\n```\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n","tags":["html","css"],"categories":["前端"]},{"title":"Linux(debian)下配置ftp服务器","url":"/2023/05/22/Linux-debian-下配置ftp服务器/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Linux(debian)下配置ftp服务器：</strong></font>\n\n<!--more-->\n\n<font color=#00b2c2 size=4 face=\"宋体\"><strong>如果配置不够，或者想增加用户名可以去这里寻找答案：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://help.aliyun.com/document_detail/60152.html\"><font color=#102b6a size=3 face=\"宋体\"><strong>点击进入</strong></fout></a>\n<font color=#00b2c2 size=4 face=\"宋体\"><strong>视频教程（有可能你打不开）：</strong></font><a class=\"wp-editor-md-post-content-link\" href=\"https://www.youtube.com/watch?v=v1dEgUrm_Ig\"><font color=#102b6a size=3 face=\"宋体\"><strong>点击进入</strong></fout></a>\n\n<h1><font color=#00b2c2 size=5 face=\"宋体\"><strong>除了FTP服务器，更为简单的挂载远程服务器的是直接用ssh挂载：</strong></font></h1>\n\n<pre><code class=\"language-shell line-numbers\"># 安装sshfs服务\nsudo apt install sshfs\nsshfs <用户名>@<ip地址>:<想要挂载的远程路径> <挂载到本地的路径>\n# 例如：\nsshfs kk@211.34.109.38:/mnt/share /mnt/share\n# 取消挂载\nfusermount  -u  /mnt/share\n# fusermount  -u <本地挂载的目录>\n</code></pre>\n\n<h1><font color=#00b2c2 size=5 face=\"宋体\"><strong>debian下配置ftp服务器：</strong></font></h1>\n\n<font color=#102b6a size=3 face=\"宋体\"><strong>由于开发需要使用ftp功能，一时之间有点蒙，这玩意一直都会用，但怎么配置还是有点蒙，然后花了两个小时去恶补了下相关知识！</strong></font>\n\n<h1><font color=#00b2c2 size=5 face=\"宋体\"><strong>安装ftp：</strong></font></h1>\n\n<font color=#102b6a size=3 face=\"宋体\">直接使用命令安装即可</fout>\n\n<pre><code class=\"language-shell line-numbers\">sudo apt install vsftpd\n# 重点：这里是vsftpd不是ftp！！！\n</code></pre>\n\n<h1><font color=#00b2c2 size=5 face=\"宋体\"><strong>ftp服务启动：</strong></font></h1>\n\n<font color=#102b6a size=3 face=\"宋体\">第一种方式：</fout>\n\n<pre><code class=\"language-shell line-numbers\">/etc/init.d/vsftpd {start|stop|restart|reload|status}\n# 重点：中括号前面的不变，后面的是命令\n</code></pre>\n\n<font color=#102b6a size=3 face=\"宋体\">第二种方式：</fout>\n\n<pre><code class=\"language-shell line-numbers\">service vsftpd {start|stop|restart|reload|status}\n# 重点：中括号前面的不变，后面的是命令\n</code></pre>\n\n<font color=#102b6a size=3 face=\"宋体\">第三种方式：</fout>\n\n<pre><code class=\"language-shell line-numbers\">systemctl {start|stop|restart|reload|status} vsftpd.service\n# 重点：只有中括号中的命令在变\n# 个人更喜欢第三种，简单粗暴，有深度！\n</code></pre>\n\n<h1><font color=#00b2c2 size=5 face=\"宋体\"><strong>开机自启：</strong></font></h1>\n\n<font color=#102b6a size=3 face=\"宋体\">自动启动：</fout>\n\n<pre><code class=\"language-shell line-numbers\">systemctl enable vsftpd.service\n</code></pre>\n\n<font color=#102b6a size=3 face=\"宋体\">取消自动启动：</fout>\n\n<pre><code class=\"language-shell line-numbers\">systemctl disable vsftpd.service\n</code></pre>\n\n<h1><font color=#00b2c2 size=5 face=\"宋体\"><strong>修改配置：</strong></font></h1>\n\n<font color=#102b6a size=3 face=\"宋体\">apt方式安装的ftp，配置文件默认在'/etc/vsftpd.conf</fout>\n\n<pre><code class=\"language-shell line-numbers\">vim /etc/vsftpd.conf\n</code></pre>\n\n<font color=#102b6a size=3 face=\"宋体\">我的配置如下：</fout>\n\n<pre><code class=\"language-shell line-numbers\"># Example config file /etc/vsftpd.conf\n#\n# The default compiled in settings are fairly paranoid. This sample file\n# loosens things up a bit, to make the ftp daemon more usable.\n# Please see vsftpd.conf.5 for all compiled in defaults.\n#\n# READ THIS: This example file is NOT an exhaustive list of vsftpd options.\n# Please read the vsftpd.conf.5 manual page to get a full idea of vsftpd's\n# capabilities.\n#\n#\n# Run standalone?  vsftpd can run either from an inetd or as a standalone\n# daemon started from an initscript.\nlisten=NO\n#\n# This directive enables listening on IPv6 sockets. By default, listening\n# on the IPv6 \"any\" address (::) will accept connections from both IPv6\n# and IPv4 clients. It is not necessary to listen on *both* IPv4 and IPv6\n# sockets. If you want that (perhaps because you want to listen on specific\n# addresses) then you must run two copies of vsftpd with two configuration\n# files.\nlisten_ipv6=YES\n#\n# Allow anonymous FTP? (Disabled by default).\nanonymous_enable=YES\n#\n# Uncomment this to allow local users to log in.\nlocal_enable=YES\n#\n# Uncomment this to enable any form of FTP write command.\n#write_enable=YES\n#\n# Default umask for local users is 077. You may wish to change this to 022,\n# if your users expect that (022 is used by most other ftpd's)\n#local_umask=022\n#\n# Uncomment this to allow the anonymous FTP user to upload files. This only\n# has an effect if the above global write enable is activated. Also, you will\n# obviously need to create a directory writable by the FTP user.\nanon_upload_enable=YES\n#\n# Uncomment this if you want the anonymous FTP user to be able to create\n# new directories.\n#anon_mkdir_write_enable=YES\n#\n# Activate directory messages - messages given to remote users when they\n# go into a certain directory.\ndirmessage_enable=YES\n#\n# If enabled, vsftpd will display directory listings with the time\n# in  your  local  time  zone.  The default is to display GMT. The\n# times returned by the MDTM FTP command are also affected by this\n# option.\nuse_localtime=YES\n#\n# Activate logging of uploads/downloads.\nxferlog_enable=YES\n#\n# Make sure PORT transfer connections originate from port 20 (ftp-data).\nconnect_from_port_20=YES\n#\n# If you want, you can arrange for uploaded anonymous files to be owned by\n# a different user. Note! Using \"root\" for uploaded files is not\n# recommended!\n#chown_uploads=YES\n#chown_username=whoever\n#\n# You may override where the log file goes if you like. The default is shown\n# below.\n#xferlog_file=/var/log/vsftpd.log\n#\n# If you want, you can have your log file in standard ftpd xferlog format.\n# Note that the default log file location is /var/log/xferlog in this case.\n#xferlog_std_format=YES\n#\n# You may change the default value for timing out an idle session.\n#idle_session_timeout=600\n#\n# You may change the default value for timing out a data connection.\n#data_connection_timeout=120\n#\n# It is recommended that you define on your system a unique user which the\n# ftp server can use as a totally isolated and unprivileged user.\n#nopriv_user=ftpsecure\n#\n# Enable this and the server will recognise asynchronous ABOR requests. Not\n# recommended for security (the code is non-trivial). Not enabling it,\n# however, may confuse older FTP clients.\n#async_abor_enable=YES\n#\n# By default the server will pretend to allow ASCII mode but in fact ignore\n# the request. Turn on the below options to have the server actually do ASCII\n# mangling on files when in ASCII mode.\n# Beware that on some FTP servers, ASCII support allows a denial of service\n# attack (DoS) via the command \"SIZE /big/file\" in ASCII mode. vsftpd\n# predicted this attack and has always been safe, reporting the size of the\n# raw file.\n# ASCII mangling is a horrible feature of the protocol.\n#ascii_upload_enable=YES\n#ascii_download_enable=YES\n#\n# You may fully customise the login banner string:\n#ftpd_banner=Welcome to blah FTP service.\n#\n# You may specify a file of disallowed anonymous e-mail addresses. Apparently\n# useful for combatting certain DoS attacks.\n#deny_email_enable=YES\n# (default follows)\n#banned_email_file=/etc/vsftpd.banned_emails\n#\n# You may restrict local users to their home directories.  See the FAQ for\n# the possible risks in this before using chroot_local_user or\n# chroot_list_enable below.\n#chroot_local_user=YES\n#\n# You may specify an explicit list of local users to chroot() to their home\n# directory. If chroot_local_user is YES, then this list becomes a list of\n# users to NOT chroot().\n# (Warning! chroot'ing can be very dangerous. If using chroot, make sure that\n# the user does not have write access to the top level directory within the\n# chroot)\nchroot_local_user=YES\nchroot_list_enable=YES\n# (default follows)\nchroot_list_file=/etc/vsftpd.chroot_list\n#\n# You may activate the \"-R\" option to the builtin ls. This is disabled by\n# default to avoid remote users being able to cause excessive I/O on large\n# sites. However, some broken FTP clients such as \"ncftp\" and \"mirror\" assume\n# the presence of the \"-R\" option, so there is a strong case for enabling it.\n#ls_recurse_enable=YES\n#\n# Customization\n#\n# Some of vsftpd's settings don't fit the filesystem layout by\n# default.\n#\n# This option should be the name of a directory which is empty.  Also, the\n# directory should not be writable by the ftp user. This directory is used\n# as a secure chroot() jail at times vsftpd does not require filesystem\n# access.\nsecure_chroot_dir=/var/run/vsftpd/empty\n#\n# This string is the name of the PAM service vsftpd will use.\npam_service_name=vsftpd\n\npasv_min_port=37564\n#设置被动模式下，建立数据传输可使用的端口范围的最大值。\npasv_max_port=43997\n#\n# This option specifies the location of the RSA certificate to use for SSL\n# encrypted connections.\nrsa_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem\nrsa_private_key_file=/etc/ssl/private/ssl-cert-snakeoil.key\nssl_enable=NO\n\n#\n# Uncomment this to indicate that vsftpd use a utf8 filesystem.\n#utf8_filesystem=YES\n\n</code></pre>\n","tags":["系统","运维","linux"],"categories":["linux"]},{"title":"Django_学习笔记","url":"/2023/05/22/Django-学习笔记/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Django_学习笔记：</strong></font>\n\n<!--more-->\n\n<font color=#00b2c2 size=5 face=宋体><strong>1. 安装python(已经安装python跳过，Linux默认已经安装了python)</strong></font>\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n\n\n<font color=red size=4 face=宋体><strong>1. python篇</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>1. 检测是否安装python</strong></font>\n\n```shell\npython -V\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>2. 检测python包安装情况</strong></font>\n\n```shell\npip3 list\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>3. 安装virtualenv</strong></font>\n\n```shell\npip3 install virtualenv\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>4. 创建python环境文件夹</strong></font>\n\n```shell\npython3 -m venv django_venv     # (bash 运行结果，会在当前文件夹创建一个django_venv的文件夹)\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>5. 进入创建的虚拟环境</strong></font>\n\n```shell\n# source /bin/activate\nsource ./django_venv/bin/activate\n# 备注：如果进入虚拟环境成功，在命令行前面会有一个小括号\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>6. 进入成功后，安装django环境</strong></font>\n\n```shell\npip3 install django #国外服务器下载\npip3 install django==2.2     #  指定安装django版本2.2\npip3 install django -i https://pypi.douban.com/simple   #  国内豆瓣源加速连接\n```\n\n<font color=red size=2 face=宋体><strong>python和django版本有兼容问题，具体对应版本如下:</strong></font>\n\n![](https://s2.loli.net/2022/06/08/Xf5MS9YHPajdnWR.png)\n\n\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n<font color=red size=4 face=宋体><strong>2. djiango篇</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>1. 创建网站项目工程</strong></font>\n\n```shell\n# django-admin startproject <网站工程名>\ndjango-admin startproject mysite\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>2. 开启python—django网站服务</strong></font>\n\n```shell\npython3 manage.py runserver 0.0.0.0:8000\nnohup python3 manage.py runserver 0.0.0.0:8000 > manage.log 2>&1 &\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>3. django 框架中添加子应用</strong></font>\n\n```shell\n# python manage.py startapp <子应用名称>\npython manage.py startapp index  # 创建了一个名叫 的文件夹\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>4. 如果django安装成功 使用python进入之后，使用命令会显示django版本信息</strong></font>\n\n```shell\n>>>import django\n>>>django.__version__\n```\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n","tags":["python","django"],"categories":["python","django"]},{"title":"html_下各类标签含义","url":"/2023/05/22/html-下各类标签含义/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>html_下各类标签含义：</strong></font>\n\n<!--more-->\n\n```html\n<center></center>   居中标签\n<head></head>      浏览器头\n<body></body>     浏览器\n<title></title>      head下的title标签  就是浏览器头名称\n<p></p>     段落标签\n<br>    换行标签\n<hr>      分割线标签\n<u></u>  下划线标签\n<sub></sub>  下标\n<sup></sup>  上标\n\n<h2><strong>加粗标签</strong></h2>\n\n<b></b>      加粗显示\n<strong></strong>     突出文本，强调内容\n\n倾斜标签\n<em></em>\n<i></i>\n\n删除线标签\n<s></s>\n<del></del>\n\ncolor='<颜色>'       颜色\nwidth='<宽度>'          宽度\n\nalign='left'      靠左边\nalign='right'      靠右边\n\n<      左尖角号\n>      右尖角号\n\n\\        空格占位符   受字体影响\n\\         空格占位符   宽度是一个中文宽度，不受字体影响\n\\©        符号 ©，版权\n™                商标™\n®                 商标®\n\n<div></div>    划分区域\n<span><\\span>    更没有实际意义，主要用于文本独立装饰的是否，内容多宽，就占用多宽的空间距离\n\n无序列表标签\n    1、ul里面只能放li标签，li里面可以放其他标签\n    2、默认的是黑色的实心圆\n    3、type   disc(默认的实心圆)   circle(空心圆)    square(正方形圆)  none(不显示圆)\n<ul>\n    <li>内容</li>\n    <li>内容</li>\n</ul>\n\n\n有序列表标签\n<ol>标签只能用来存放\\<li>标签，数字是自动生成的)\n1、li标签里面可以随意放任何标签，但是在ol标签里面只能放li标签\n2、数字是自动生成的 \n3、ol标签拥有属性\n    type属性:共5个\n    取值范围: 1、a、A、i、I\n    start:取值只能是一个数字\n<ol>\n    <li>1.把冰箱打开</li>\n    <li>2.大象装进去</li>\n    <li>3.冰箱关上</li>\n</ol>\n\n自定义列表\n\n<dl>\n    <dt>我是图片</dt>\n    <dd>我是文字</dd>\n</dl>\n\nimg标签属性\n\nsrc  链接\nalt 是当图片实效，无法显示之后出现的文字\ntitle  图片的名字\nwidth  宽度\nheight   高度\n\n超链接标签\n\n超链接<a></a> 标签\ntarget=\"_self\"     默认值是:_self  在前页面打开超链接\ntarget=\"_blank\"    新窗口打开超链接\n超链接可以包裹图片或者文字等等\n\n<h5>例如：</h5>\n\n<pre data-language=HTML><code class=\"language-markup line-numbers\"><a href=\"\">\n    <img src=\"\" alt=\"\">\n</a>\n\n<h1>单元格</h1>\n</code></pre>\n\n<pre data-language=HTML><code class=\"language-markup line-numbers\"><table>  <!-- 创建表格 -->\n    <tr>     <!-- tr表示行 -->\n        <td>1</td>     <!-- td表示单元格 -->\n        <td>2</td>\n    </tr>\n    <tr>\n        <td>3</td>\n        <td>4</td>\n    </tr>\n</table>\n\n<!--\ntable 表格属性\n1、宽度 width\n2、高度 height\n3、 边框 border\n4、边框颜色 bordercolor\n5、背景颜色  bgcolor\n6、水平对齐  align=\"left或者right 或者center\"\n7、cellspacing = \"单元格与单元格之间的间距\"\n8、cellpadding= \"单元格与内容之间的空隙\"\n百分比是相当于父元素的百分比，而非屏幕的百分比\n-->\n\n<!--\n行 tr 属性\n1、高度 height\n2、背景颜色  bgcolor\n3、文字水平对齐  align=\"left或者right 或者center\"\n4、文字锤子对其  valign=\"\"top或者middle或者bottom\n-->\n<!--\ntd 下夸行合并 colspan=\"2\"\ntd 下夸列合并  rowspan=\"2\"\n-->\n</code></pre>\n\n<img src=\"https://s2.loli.net/2022/06/08/mgGdypov1PTbnkJ.png\" alt=\"单元表格\" />\n\n<pre data-language=HTML><code class=\"language-markup line-numbers\">表单标签form 和input\n\n\n<form action=\"向何处发送表单数据\" method=\"post或者get\">\n    <input type=\"text\">\n    <!--\n    A、 属性 type 定义输入框的类型\n        a、文本框 type=\"text\"   密码框  type=\"password\"\n        b、提交框 type=\"submit\"  和  <button>提交按钮</button>> 一样\n        c、按钮框 type=\"button\"  单纯的按钮\n        d、重置框 type=\"reset\" 清空的效果\n    B、属性 placeholder 描述输入字段预期值的剪短提示信息。兼容到IE8以上\n    C、属性 name 必须设置，否则在提交表单时，用户输入其中的数据不会被发送到服务器\n    D、属性 value\n    -->\n</form>\n</code></pre>\n\ncss样式表引入\n\n<!--第一种引入样式    加载页面的同时，加载css-->\n<link rel=\"stylesheet\" type=\"text/css\" href=\"css/html前端_18-css外部样式.css\">\n<!--stylesheet 样式      type属性 为css          href为路径-->\n<!--第二种导入方式    #  特性是在页面加载完之后，才会加载css-->\n<style>\n    @import url(css/html前端_18-css外部样式.css);\n</style>\n</code></pre>\n\n选择器添加属性\n\n/*class类选择器*/\ndiv.idm{background-color: sienna;}    /*其中div是标签，idm是class类*/\ndiv.idm#xiao{color: red;}      /*其中div是标签，idm是class类 #xiao 是id值*/\n</code></pre>\n\n通配符\n\nmargin    外边距\npadding   内边距\n\n*{margin:0;padding:0;}    /* 设置所有元素外边距为0，内边距为0*/\n</code></pre>\n\n组群选择器\n\n<!--组群选择器用逗号隔开-->\n<style>\n    div,p,h1{\n        color: red;\n    }\n</style>\n</code></pre>\n\n后代选择器\n\n<!-- 特性  是先匹配所有的p标签，然后在匹配div标签\n后代选择器\n例如： 选择div下的p标签-->\n<style>\n    div p {\n        color: red;\n    }\n</style>\n\n伪类选择器\n\n<!--\n伪类选择器\n语法：\n    a:link{属性: 属性值;}   超链接的初始状态;\n    a:visited{属性: 属性值;}    超链接被访问后的状态;\n    a:hover{属性: 属性值;}    鼠标悬停，即鼠标划过超链接时的状态;\n    a:active{属性: 属性值;}    超链接被激活时的状态，即鼠标按下时超链接的状态\nlink--visited--hover--active\n\n说明：\nA：当这4个超链接伪类选择符联合使用时，应注意他们的顺序，正常顺序为：\n    a:link > a:visited > a:hover > a:active ,错误的顺序有时会使超链接的样式实效；\nB：为了简化代码，可以把伪类选择器中相同的声明提出来放在a选择符中；\n    例如： a{color:red;} a:hover{color:green}  表示超链接的初始和访问过后的状态一样；鼠标划过的状态和点击时的状态一样\n-->\n<img src=\"https://s2.loli.net/2022/06/08/iNHdzGOKsuIBfvS.png\" alt=\"选择器的权重\" />\n</code></pre>\n```\n\n![选择器的权重](https://s2.loli.net/2022/06/08/iNHdzGOKsuIBfvS.png)\n","tags":["教程","html"],"categories":["前端"]},{"title":"django_SQLite_3.9.0_required(found3.7.17)_错误解决方案","url":"/2023/05/22/django-SQLite-3-9-0-required-found3-7-17-错误解决方案/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>django_SQLite_3.9.0_required(found3.7.17)_错误解决方案：</strong></font>\n\n<!--more-->\n\n<font color=#00b2c2 size=5 face=宋体><strong>解决 django—SQLite报错</strong></font>\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>错误信息</strong></font>\n\n```\ndjango.core.exceptions.ImproperlyConfigured: SQLite 3.9.0 or later is required (found 3.7.17).\n```\n\n<br>\n\n---\n\n<br><font color=#f26522 size=4 face=宋体><strong>1. 进入你的虚拟环境文件夹</strong></font>\n\n```python\nvim django_venv/lib/python3.8/site-packages/django/db/backends/sqlite3/base.py\n\n找到check_sqlite_version() 函数调用语句  ==> 第66行  注释\n```\n\n<font color=#b0171f size=2 face=宋体><strong>将django_venv/lib/python3.8/site-packages/django/db/backends/sqlite3/base.py 下的check_sqlite_version()函数禁用</strong></font>\n\n![](https://s2.loli.net/2022/06/08/azvcJnsmBe1RWfF.png)\n\n<br>\n\n---\n\n<br><font color=#f26522 size=4 face=宋体><strong>2. 出现如下错误，继续处理，否则略过</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>django.db.utils.NotSupportedError: deterministic=True requires SQLite 3.8.3 or higher</strong></font>\n\n```python\n# 将208行的\ndeterministic=True,\n# 改为\ndeterministic=False,\n```\n\n![](https://s2.loli.net/2022/06/08/Wo2rHfMtcFlDBS6.png)\n\n![](https://s2.loli.net/2022/06/08/hq5WjezyHZCfiBv.png)\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n","tags":["python","django","错误"],"categories":["python","error"]},{"title":"Django路由配置","url":"/2023/05/22/Django路由配置/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Django路由配置</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>1. Django路由配置</strong></font>\n\n- <font color=red size=3 face=宋体><strong>**初始化django配置**</strong></font>\n- <font color=red size=3 face=宋体><strong>**主路由**</strong></font>\n\n<br>\n\n---\n\n<br>\n\n- <font color=red size=3 face=宋体><strong>**主路由(不变)**</strong></font>\n\n```python\nfrom django.contrib import admin\nfrom django.urls import path, include\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('', include('app.urls'))           # 绑定到子路由语句\n]\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=red size=3 face=宋体><strong>子路由(带问号访问方式http://192.168.48.182:8000/index/?name=name&age=age)</strong></font>\n\n```python\nfrom django.urls import path\nfrom .views import index\nurlpatterns = [\n    path('index', index.as_view()),\n]\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=red size=3 face=宋体><strong>views配置(带问号访问方式http://192.168.48.182:8000/?name=name&age=age)</strong></font>\n\n```python\nfrom django.shortcuts import render\nfrom django.views.generic import View\nfrom django.http import HttpResponse\n# Create your views here.\nclass index(View):\n    def get(self, request):\n        name = request.GET.get('name', '')\n        age = request.GET.get('age', 10)\n        return HttpResponse(name + age)\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=red size=3 face=宋体><strong>子路由(直接访问http://192.168.48.182:8000/index/name/age)</strong></font>\n\n```python\nfrom django.urls import path\nfrom .views import index\nurlpatterns = [\n    path('index//', index.as_view()),\n]\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=red size=3 face=宋体><strong>views配置(直接访问http://192.168.48.182:8000/index/name/age)</strong></font>\n\n```python\nfrom django.shortcuts import render\nfrom django.views.generic import View\nfrom django.http import HttpResponse\n\n# Create your views here.\nclass index(View):\n    def get(self, request, name, age):\n        return HttpResponse(name + age)\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=red size=3 face=宋体><strong>templates创建完成后的settings.py的配置</strong></font>\n\n```python\nfrom pathlib import Path\n# Build paths inside the project like this: BASE_DIR / 'subdir'.\nBASE_DIR = Path(__file__).resolve().parent.parent\n# Quick-start development settings - unsuitable for production\n# See https://docs.djangoproject.com/en/3.2/howto/deployment/checklist/\n# SECURITY WARNING: keep the secret key used in production secret!\nSECRET_KEY = 'django-insecure-5ttic0454bv9_&yj99u3z@7u0x6(h!1@3^2&^fn462znki3q)*'\n# SECURITY WARNING: don't run with debug turned on in production!\nDEBUG = True\nALLOWED_HOSTS = ['*']\n# Application definition\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'app'\n]\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n]\nROOT_URLCONF = 'django_02.urls'\nTEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [os.path.join(BASE_DIR, 'templates')],\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n            ],\n        },\n    },\n]\nWSGI_APPLICATION = 'django_02.wsgi.application'\n# Database\n# https://docs.djangoproject.com/en/3.2/ref/settings/#databases\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': BASE_DIR / 'db.sqlite3',\n    }\n}\n# Password validation\n# https://docs.djangoproject.com/en/3.2/ref/settings/#auth-password-validators\nAUTH_PASSWORD_VALIDATORS = [\n    {\n        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',\n    },\n]\n# Internationalization\n# https://docs.djangoproject.com/en/3.2/topics/i18n/\nLANGUAGE_CODE = 'zh-hans'\nTIME_ZONE = 'Asia/Shanghai'\nUSE_I18N = True\nUSE_L10N = True\nUSE_TZ = False\n# Static files (CSS, JavaScript, Images)\n# https://docs.djangoproject.com/en/3.2/howto/static-files/\nSTATIC_URL = '/static/'\nSTATICFILES_DIRS = [os.path.join(BASE_DIR, 'static')]\n# Default primary key field type\n# https://docs.djangoproject.com/en/3.2/ref/settings/#default-auto-field\nDEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'\n```\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n\n\n","tags":["python","django"],"categories":["python","django"]},{"title":"Django下使用MongoDB数据库教程","url":"/2023/05/22/Django下使用MongoDB数据库教程/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Django下使用MongoDB数据库教程：</strong></font>\n\n<!--more-->\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>1、安装</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>要在Django下使用mongodb数据库，首先在虚拟环境下安装mongodb包</strong></font>\n\n```shell\npip install pymongo\n```\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>2、配置settings</strong></font>\n\n```\nfrom pymongo import MongoClient   # 导入模块，mongo客户端\n```\n\n![](https://s2.loli.net/2022/06/08/bicEP2eHOylFaxJ.png)\n\n<br>\n\n---\n\n<br><font color=#f26522 size=4 face=宋体><strong>3、创建python文件</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>在APP下创建一个mongo_models.py文件</strong></font>\n\n```python\nfrom django.conf import settings\nconn = settings.MONGOCLIENT['user_one']\n\nclass user(object):\n    db = conn['user_one']\n\n    @classmethod\n    def insert(cls, **params):\n        return cls.db.insert(params)\n\n    @classmethod\n    def get(cls, **params):\n        return cls.db.find_one(params)\n    @classmethod\n    def gets(cls, **params):\n        return list(cls.db.find(params))\n    @classmethod\n    def update(cls, _id, **params):\n        return cls.db.update({'_id': _id}, {'$set': params})\n\n```\n\n<br>\n\n---\n\n<br><font color=#f26522 size=4 face=宋体><strong>4、创建python文件_mongo数据库引擎</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>安装mongoengine</strong></font>\n\n```shell\npip install mongoengine\n```\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n","tags":["python","mongodb","django","数据库"],"categories":["python","django-数据库"]},{"title":"Flask_基础教程","url":"/2023/05/22/Flask-基础教程/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Flask_基础教程：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>Flask轻量级框架，入门配置教程</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>安装Flask</strong></font>\n\n```shell\npip install flask\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>基本使用</strong></font>\n\n```python\nfrom flask import Flask    # 导入Flask包\napp = Flask(__name__, template_folder='templates')  #  默认模板文件夹是templates    # 实例化Flask到app  __name__ Flask本身\n@app.route('/index')    # 定义路由 为/index\n\n\ndef index():\n    return 'Hello World'   # 访问返回内容\nif __name__ == '__main__':\n    app.run()    # 运行 Flask\n\n```\n\n<br>\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>重点：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>Flask其实是有werkzeug 下拓展出来的</strong></font>\n\n```python\nfrom werkzeug.wrappers import Request, Response\nfrom werkzeug.serving import run_simple\n\n@Request.application\ndef hello(request):\n    return Response('Hello World!')\n\nif __name__ == '__main__':\n    run_simple('localhost', 4000, hello)   # 监听端口localhost:4000   返回函数 hello()下内容\n```\n\n<br>\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>Flask 框架下的get与post写法：</strong></font>\n\n```python\nfrom flask import Flask,render_template, request, redirect\napp = Flask(__name__, template_folder='templates')\napp.secret_key = 'sdqx4q4we2w'  # session_cookie 加盐\n\n\n@app.route('/login', methods=['GET','POST'])\ndef login():\n    if request.method == 'GET':\n        return render_template('login.html')\n    # request.args   # 获取GET传来的参数\n    # request.form   # 获取POST传递过来的参数\n    user = request.form.get('user') # 获取POST过来的值 USER\n    pwd = request.form.get('pwd')  # 获取POST过来的值  pwd\n    if user == 'alex' and pwd =='123':\n        session['user_info'] = user   # 将个人信息存入 session给浏览器\n        return redirect('/index')    # 跳转页面\n    else:\n        return render_template('login.html', msg = '用户名或密码错误')  # flask 的两种传参方式\n        # return render_template('login.html', **{'msg': '用户名或密码错误'})\n\n\n@app.route('/index')\ndef index():  # 默认get请求\n    return '登陆成功'\n\n\nif __name__ == '__main__':\n    app.run()    # 运行 Flask\n\n```\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n","tags":["python","flask"],"categories":["python_flask"]},{"title":"Hexo 添加分类及标签","url":"/2023/05/22/Hexo-添加分类及标签/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Hexo 添加分类及标签：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>1. 创建“分类”选项</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>生成“分类”页并添加tpye属性,进入博客目录。执行命令下方命令</strong></font>\n\n```\nhexo new page categories\n```\n\n<font color=#b0171f size=2 face=宋体><strong>categories文件夹下会有index.md这个文件，打开后默认内容是这样的：</strong></font>\n\n```\n---\ntitle: categories\ndate: 2019-04-22 14:47:40\n---\n\n```\n\n<font color=#b0171f size=2 face=宋体><strong>添加type: “categories”到内容中，添加后是这样的：</strong></font>\n\n```\n---\ntitle: 分类\ndate: 2019-04-24 15:30:30\ntype: categories\n---\n\n```\n\n\n\n<font color=#b0171f size=2 face=宋体><strong>保存并关闭文件。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>给文章添加“categories”属性</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>打开需要添加分类的文章，为其添加categories属性。下方的categories:Hexo表示这篇文章添加到到“Hexo”这个分类。注意：一篇文章只会添加到一个分类中，</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>如果是多个默认放到第一个分类中。</strong></font>\n\n```\n---\ntitle: Hexo 添加分类及标签\ndate: 2017-05-26 12:12:57\ncategories: Hexo\n---\n\n```\n\n```\n---\ntitle: linux安装VMware坑\ndate: 2021-11-01 20:05:30\ncategories: \n- [Hexo]\n- [Linux笔记]\ntags:\n---\n```\n\n<font color=#b0171f size=2 face=宋体><strong>至此，成功给文章添加分类，点击首页的“分类”可以看到该分类下的所有文章。当然，只有添加了categories: xxx的文章才会被收录到首页的“分类”中。</strong></font>\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>2. 创建“标签”选项</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>生成“标签”页并添加tpye属性</strong></font>\n\n```\nhexo new page tags\n```\n\n<font color=#b0171f size=2 face=宋体><strong>在tags文件夹下，找到index.md这个文件，打开后默认内容是这样的：</strong></font>\n\n```\n---\ntitle: 标签\ndate: 2019-04-22 14:22:08\n---\n```\n\n<font color=#b0171f size=2 face=宋体><strong>添加type: “tags”到内容中，添加后是这样的：</strong></font>\n\n```\n---\ntitle: 标签\ndate: 2019-04-24 15:40:24\ntype: tags\n---\n```\n\n<font color=#b0171f size=2 face=宋体><strong>保存并关闭文件。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>给文章添加“tags”属性,打开需要添加标签的文章，为其添加tags属性。</strong></font>\n\n```\n---\ntitle: Hexo 添加分类及标签\ndate: 2019-04-24 15:40:24\ncategories:\n- Hexo\ntags:\n- 博客\n---\n```\n\n","tags":["hexo"],"categories":["博客"]},{"title":"hexo文章分类","url":"/2023/05/22/hexo文章分类/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>hexo文章分类：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>1、进入博客目录，创建页面。</strong></font>\n\n```\nhexo new page categories\n```\n\n<br>\n\n---\n\n<br>\n\n<font color=#b0171f size=2 face=宋体><strong>完成后有提示：</strong></font>\n\n```\nINFO Created: /opt/blog/source/categories/index.md\n```\n\n<br>\n\n---\n\n<br><font color=#f26522 size=4 face=宋体><strong>2、修改上一步生成的md文件，添加type: “categories”到文件中，改好后是这样的：</strong></font>\n\n```\n—\ntitle: 文章分类\ndate: 2020-02-18 05:07:50\ntype: “categories”\n—\n```\n\n<font color=red size=2 face=宋体><strong>至此，文章分类已经创建完成，下面需要给博文指定分类。</strong></font>\n\n<br>\n\n---\n\n<br><font color=#f26522 size=4 face=宋体><strong>3，打开博文md文件，添加分类属性：</strong></font>\n\n```\ncategories:\n– server\n```\n\n<br>\n\n---\n\n<br><font color=#f26522 size=4 face=宋体><strong>4，重新发布即可看到。</strong></font>\n\n<font color=red size=2 face=宋体><strong>注意，一篇博文只能属于一个分类，设置多个分类时将会成为分类嵌套。</strong></font>\n\n<br><br><br>\n\n---\n\n","tags":["hexo"],"categories":["博客"]},{"title":"HLS下 ffmpeg命令详解","url":"/2023/05/22/HLS下-ffmpeg命令详解/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>FFMPEG下命令繁多，特此记录关于HLS的相关命令，以备不时之需</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>如果看到有需要的命令，然后在来更新</strong></font>\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#b0171f size=3 face=宋体><strong>通过m3u8下载视频，并合成mp4</strong></font>\n\n```python\nffmpeg -i  -c copy <保存路径>\n# 例如： ffmpeg -i 'https://xxx.com/aaa.m3u8' -c copy '/home/ll/aaa.mp4'\n# 不改变视频流的码率，直接合成mp4   这是最快的一种下载视频的方法\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#b0171f size=3 face=宋体><strong>添加headers到 命令中下载视频</strong></font>\n\n```python\nffmpeg -headers $'User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.130 Safari/537.36\\r\\nHost: xxx.com' -i 'xxx.m3u8' -c copy 'xxx.mp4'\n# 这种就是简单的直接将 headers 请求头文件加如hls请求中去，然后获取数据\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#b0171f size=3 face=宋体><strong>ffmpeg 添加 headers 详解中高级方法</strong></font>\n\n```python\nffmpeg -headers 'Origin: https://xxx.com\\r\\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.130 Safari/537.36\\r\\nReferer: https://xxx.com' -threads 0 -i '地址' -c copy -y -f mpegts '文件名.ts' -v trace\n\n#  >>>  使用-headers’头一\\r\\n头二’添加header\n# 注意顺序 ，放在命令行最后面无法生效困扰了半天..\n# 后来输出了一下信息才发现问题\n# -v trace 用于输出当前的header信息方便调试\n# 在Linux终端下正常使用，Windows下应该大同小异。\n# 设置UA可以使用单独的-user-agent指令\n# 在输出文件名前使用-fs 1024K限制为1024K\n```\n\n<br>\n\n---\n\n<br>\n\n+ <font color=#b0171f size=3 face=宋体><strong>ffmpeg 添加 headers 转码 线程 高级方法</strong></font>\n\n```python\nffmpeg -headers 'User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.130 Safari/537.36\\r\\nHost: xxx.net\\r\\nReferer: https://xxx.com/\\r\\n' -i 'https://xxx.m3u8' -threads 5 -preset ultrafast -y -c:v libx264 -strict -2 '测试2.mp4'\n\n\n#  >>>  使用-headers’头一\\r\\n头二’添加header\n#  >>>  需要注意的是 在添加 headers 的时候 ,   在headers 结束时   需要添加\\r\\n 来结束，否则会收到错误 \n#  >>>  No trailing CRLF found in HTTP header. Adding it        当然这是错误提示，不是报错，并不影响程序运行， ffmpeg 会主动添加 \\r\\n来结束headers\n# 注意顺序 ，放在命令行最后面无法生效困扰了半天..\n# threads 5   线程转码\n# -y -c:v libx264 -strict -2     转换h264 编码视频\n# 后来输出了一下信息才发现问题\n# -v trace 用于输出当前的header信息方便调试\n# 在Linux终端下正常使用，Windows下应该大同小异。\n# 设置UA可以使用单独的-user-agent指令\n# 在输出文件名前使用-fs 1024K限制为1024K\n```\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n","tags":["ffmpeg"],"categories":["视频编辑"]},{"title":"前端 html css属性","url":"/2023/05/18/前端-html-css属性/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>前端 html css属性</strong></font>\n\n<!--more-->\n\n<br>\n\n<br>\n\n------\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>css之文本属性</strong></font>\n\n```python\nfont-size   # 字体大小    单位是px 浏览器默认是16px   设计图常用字号是12px\n\nfont-family    # 字体    当字体是中文字体、英文字体中有空格时，需要加引号；多个字体中间用逗号链接，先解析第1个字体，如果没有，则解析第2个字体，以此类推\n\ncolor    # 颜色      color：red；   color:#ff0;   color:rgb(255,0,0); 0-255\n\nfont-weight     # 加粗 font-weight:bolder(更粗的)、bold(加粗)、normal(常规)、font-weight:100-900;       100-500不加粗   600-900加粗\n\nfont-style   # 倾斜   font-style:italic(倾斜字体)、oblique(倾斜的文字)、normal(常规显示)\n\ntext-align   # 文字水平对齐     text-align:left;    水平靠左      text-align:right;   水平靠右        text-align:center;   水平居中          text-align:justify;  水平两端对齐  但是只对多行起作用\nline-height       # 行高            line-height的数据=height的数据，可以实现单行文本垂直居中\ntext-indent        #  首行缩进      text-indent 可以取负值，    text-indent属性只对第一行起作用   2em  不管字体大小，都是空出两个字体\nletter-spacing       # 字间距   控制文字和文字之间的间距\ntext-decoration       #  文本修饰      none（没有）、 underline（下划线）、overline（上划线）、line-through（删除线）\nfont               # 文字简写         fout-style   font-weight    font-size   line-height  fout-family         fout:italic    顺序不能变，必须同时指定fontsize和font-family属性时才起作用\n```\n\n<br>\n\n<br>\n\n------\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>背景图片</strong></font>\n\n```python\nbackground-size:  图片大小    例如 background-size: 20px 20px     可以是百分比   cover 完全覆盖、contain  宽高放大至当前盒子最大\nbackground-color: 背景颜色;\nbackground-image: 背景图片;    例如 background-image: url();\nbackground-repeat: 背景图片的平铺;     background-repeat: no-repeat(不平铺)、repeat(默认平铺)、repeat-x(x轴平铺)、repeat-y(y轴平铺)\nbackground-position: 背景图片定位;     background-position: 水平位置   锤子位置  可以给负值\nbackground-attachment: 背景图片的固定;   background-attachment: scroll(滚动)、fixed(固定,固定在浏览器的窗口里面)\n```\n\n\n\n![图片属性](https://s2.loli.net/2022/06/08/Mb2xYeqFTdaBuHX.png)\n\n<br>\n\n<br>\n\n------\n\n<br><font color=#f26522 size=4 face=宋体><strong>浮动</strong></font>\n\n```python\n浮动\nfloat:right;    右浮动。\nfloat: left;    左浮动\nfloat: none;    不浮动\n\n第一种 清浮动\n直接写死，让前元素的宽高等于现元素，不常用\n\n第二种 在现元素中使用\nclear: left;   清除左浮动\nclear: right;  清除右浮动\nclear: none;   不清除浮动\nclear: both;   清除前面所有浮动\n\n第三种 在已经使用浮动的父元素中使用空盒子，然后  style=\"clear:both\"\n第四中 在父元素中使用 overflow: hidden style=\"overflow: hidden;\"\n```\n\n<br>\n\n<br>\n\n------\n\n<br><font color=#f26522 size=4 face=宋体><strong>盒子模型——padding属性</strong></font>\n\n```css\npadding: 10px;       一个值   四个方向都是10px\npadding: 10px 20px       两个值    上下10px    左右20px\npadding: 10px   20px  30px         三个值   上10px    左右20px     下30px\npadding:  10px 20px 30px 40px      四个值   逆时针    上  右  下 左 \n```\n\n<br>\n\n<br>\n\n------\n\n<br><font color=#f26522 size=4 face=宋体><strong>盒子模型——边框属性（border）</strong></font>\n\n```css\nborder: 1px  solid red        边框大小为1px       solid(实线)        红色\n\nborder:支持属性    样式>>>   solid(实线)     double(双实线)      dashed(虚线)    dotted(点状线)\n\n可拆分成\nborder-width:    可设置4个值     逆时针    上  右  下 左\nborder-color:     可设置4个值     逆时针    上  右  下 左\nborder-style:     可设置4个值     逆时针    上  右  下 左\n\n\n盒子特性\n上下盒子外边距会取最大的一个值\n左右盒子会相互叠加\n\n\n外边距会作用在父盒子身上\n    解决办法：\n        1、子盒子margin-top ==> 父盒子的padding-top    ,将子盒子的外边距转换成父盒子的内边距，注意高度计算\n        2、给父盒子设置边框  border\n        3、添加浮动效果，子盒子或者父盒子都可以\n        4、overflow: hidden.    BFC构建\n```\n\n<br>\n\n<br>\n\n<br>\n\n------\n\n","tags":["html","前端","css"],"categories":["前端"]},{"title":"Java 命名规则建议","url":"/2023/05/18/Java-命名规则建议/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>Java 命名规则建议</strong></font>\n\n<!--more-->\n\n<br>\n\n<br>\n\n------\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>是建议，不是一定！但在Java中最好是按照建议来命名</strong></font>\n\n\n\n![Java命名建议](https://s2.loli.net/2022/06/08/XzcEo1klWLTnieC.png)\n\n\n\n<br>\n\n<br>\n\n------\n\n<br><font color=#f26522 size=4 face=宋体><strong>Java下数据类型，与占用空间 和表数范围</strong></font>\n\n```java\nlong yearsalary = 3000000000L;   //把整形常量定义为long类型  如果数值超过21亿，则不能使用int类型，需要在数值末尾增加L(大小写不限)， 并且在数值前面增加long类型\n\nfloat a= 1.78;   错误示范，    浮点类型数，默认是double类型， 如果要转换成float  需要在1.78后面 加 F   例如  float a=1.78F;\n```\n\n<br>\n\n<br>\n\n------\n\n<br>\n\n![数据类型](https://s2.loli.net/2022/06/08/soGpZDavwYLWhTk.png)<br>\n\n<br>\n\n------\n\n<br>![转义字符](https://s2.loli.net/2022/06/08/RisebdpoTW4xtu6.png)\n\n<br>\n\n<br>\n\n<br>\n\n------\n\n","tags":["Java","笔记"],"categories":["Java"]},{"title":"Java 生成与运行","url":"/2023/05/18/Java-生成与运行/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Java 生成与运行</strong></font>\n\n<!--more-->\n\n<br>\n\n<br>\n\n------\n\n<br>\n\n##### <font color=#f26522 size=4 face=宋体><strong>Java 生成与运行：</strong></font>\n\n```shell\njavac       # java文件到  class文件               例如  javac 测试.java        # 编译需要加后缀\njava       # 运行java文件编译后的class文件          例如：java 测试      # 执行不需要加后缀\njavadoc  -d <新的文件名称>  -<参数> -<参数>  测试.java          例如：    javadoc -d <新的测试> -author -version 测试.java            # 在测试.java 的文件下 重新生成 文件夹名称为新的测试    包含作者   版本等信息   的html文件包\n```\n\n\n\n<br>\n\n<br>\n\n------\n\n<br><font color=#f26522 size=4 face=宋体><strong>Java 关键字</strong></font>\n\n[oracle官网——关键字表](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html)\n\n<br>\n\n<br>\n\n<br>\n\n------\n\n","tags":["Java","笔记"],"categories":["Java"]},{"title":"Java 学习笔记——01","url":"/2023/05/18/Java-学习笔记——01/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>Java 学习笔记——01：    </strong></font>\n\n<!--more-->\n\n##### <font color=#f26522 size=4 face=宋体><strong>Java学习笔记</strong></font>\n\n<br>\n\n<br>\n\n------\n\n<br>\n\n- <font color=#b0171f size=3 face=宋体><strong>字符常量</strong></font>\n\n  ```java\n  final double pi=3.14\n  //final 规定变量 pi 不可以后续改变\n  ```\n\n<br>\n\n<br>\n\n------\n\n<br>\n\n- <font color=#b0171f size=3 face=宋体><strong>关于控制台输出（打印）</strong></font>\n\n  ```java\n  System.out.printf();   // 可以使用%s %d ... 快捷输入变量\n  System.out.println();  // 输出换行\n  System.out.print();   //直接输出，不换行\n  ```\n\n<br>\n\n<br>\n\n------\n\n<br>\n\n- <font color=#b0171f size=3 face=宋体><strong>算数运算符</strong></font>\n\n  \n\n ![算数运算符](https://s2.loli.net/2022/06/08/kYzaIsHLNlgmS2B.png)\n\n<br>\n\n<br>\n\n------\n\n<br>\n\n- <font color=#b0171f size=3 face=宋体><strong>关系运算符 与 逻辑运算符</strong></font>\n\n ![img](https://s2.loli.net/2022/06/08/iQxh87ywnA3BVle.png)\n\n<br>\n\n<br>\n\n------\n\n<br>\n\n- <font color=#b0171f size=3 face=宋体><strong>位运算符</strong></font>\n\n ![img](https://s2.loli.net/2022/06/08/6PHO1vBMrQs4I3X.png)\n\n<br>\n\n<br>\n\n------\n\n<br>\n\n- <font color=#b0171f size=3 face=宋体><strong>运算符优先级</strong></font>\n\n ![img](https://s2.loli.net/2022/06/08/2RwoZeup9FtxVgQ.png)\n\n<br>\n\n<br>\n\n<br>\n\n------\n\n","tags":["Java","笔记"],"categories":["Java"]},{"title":"Java 运算符优先级","url":"/2023/05/18/Java-运算符优先级/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Java 运算符优先级：</strong></font>\n\n<!--more-->\n\n<br>\n\n<br>\n\n------\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>运算符优先级</strong></font>\n\n![](https://s2.loli.net/2022/06/08/2RwoZeup9FtxVgQ.png)\n\n<br>\n\n<br>\n\n------\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>关系运算符 与 逻辑运算符的判断</strong></font>\n\n![](https://s2.loli.net/2022/06/08/iQxh87ywnA3BVle.png)\n\n<br>\n\n<br>\n\n<br>\n\n------\n\n","tags":["Java"],"categories":["Java"]},{"title":"Java API中文文档","url":"/2023/05/18/Java-API中文文档/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Java API中文文档：</strong></font>\n\n<!--more-->\n\n<br>\n\n------\n\n<br>\n\n<font color=#f26522 size=3 face=宋体><strong>最近在学习JAVA的过程中，需要用到API帮助文档。终于被我找到了免费的JDK1.8 API 中文帮助文档，希望对正在学习JAVA的您也有帮助！</strong></font>\n\n<font color=red size=7 face=宋体><strong>干货！！！</strong></font>\n\n<br>\n\n------\n\n<br>\n\n<font color=#00b2c2 size=5 face=宋体><strong>**Java API中文文档：**[点击下载](https://bd.bcebos.com/v1/xly-icafe/jdk1.8中文版-20220217194041-qs1w1v.chm)</strong></font>\n\n![](https://s2.loli.net/2022/06/08/hz1bKTMNOdpreUH.png)\n\n<br>\n\n<br>\n\n<br>\n\n------\n\n","tags":["Java","文档"],"categories":["Java"]},{"title":"linux kill命令详解","url":"/2023/05/18/linux-kill命令详解/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>linux kill命令详解：</strong></font>  \n\n<!--more-->\n\n+ <font color=#f26522 size=3 face=宋体><strong>linux下各类命令详解</strong></font>\n\n```shell\n# 我们开网页，经常性开10. 20. 30 个，甚至更多的浏览器窗口，来满足我们一边文档，一边代码的输出，但是当我们用完了，想要结束的时候，确实很麻烦，需要一个一个去点击。\n# 诶！ 这个时候，我们就可以用到 --kill命令了\n# 例如：\nkill 2338    #结束进程2338\nkill -9 2338    # 强制结束进程 2338\nkillall edge    # 结束来自应用程序为 Edge的进程\nkill -9 edge   # 强制结束来自应用程序为 Edge的进程 所有edge\npkill edge      # 其实与killall edge 的效果差不多，但是没必要较真，想要了解的朋友自己去百度\npkill -9 edge\n```\n\n<br>\n\n<br>\n\n<br>\n\n------\n\n","tags":["系统","linux","命令"],"categories":["linux"]},{"title":"linux 手动实现rc.local","url":"/2023/05/18/linux-手动实现rc-local/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>linux 手动实现rc.local：</strong></font>\n\n<!--more-->\n\n<font color=#b0171f size=2 face=宋体><strong>Ubuntu 16.04 版本开始去除了 rc.local 文件，自启动服务方面基本由 systemd 全面接管了。想要添加一些开机运行的操作只能创建 systemd 服务或者添加 desktop 文件，有点麻烦。干脆把 rc.local 重新实现。</strong></font>\n\n<br>\n\n------\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>原理：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>创建一个 systemd 服务，开机执行指定脚本（rc.local）的内容。</strong></font>\n\n<br>\n\n------\n\n<br>\n\n<font color=blue size=4 face=宋体><strong>**实现：**</strong></font>\n\n+ <font color=red size=4 face=宋体><strong>1. rc-local.service 文件</strong></font>\n  + 在 Ubuntu 20.04 中这个文件存在。看起来只是把 rc.local 功能隐藏起来了。如果你的版本没有这个文件，可以自己创建一个，然后把内容添加上去。\n\n```shell\nsudo nano /lib/systemd/system/rc-local.service\n```\n\n- <font color=#b0171f size=2 face=宋体><strong>添加以下内容：</strong></font>\n\n```shell\n[Install]\nWantedBy=multi-user.target\nAlias=rc-local.service\n```\n\n<br>\n\n------\n\n<br>\n\n<font color=blue size=4 face=宋体><strong>**完整内容：**</strong></font>\n\n![](https://s2.loli.net/2022/06/08/anMG6W4ANJPbtCY.png)\n\n<br>\n\n------\n\n<br>\n\n+ <font color=red size=4 face=宋体><strong>2. rc.local 文件</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>创建 rc.local 文件</strong></font>\n\n```shell\nsudo nano /etc/rc.local\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>文件内容：</strong></font>\n\n```shell\n#!/bin/sh\n\n# 这里添加要开机执行的脚本和命令等等\n\nexit 0\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>添加可执行权限</strong></font>\n\n```shell\nsudo chmod +x /etc/rc.local\n```\n\n<br>\n\n------\n\n<br>\n\n+ <font color=red size=4 face=宋体><strong>3. **创建软链接**</strong></font>\n\n```\nsudo ln -s /lib/systemd/system/rc-local.service /etc/systemd/system/rc-local.service\n```\n\n<br>\n\n------\n\n<br><font color=#00b2c2 size=5 face=宋体><strong>重启系统 rc.local 就生效了。</strong></font>\n\n<font color=red size=5 face=宋体><strong>重点注意：</strong></font>\n\n+ <font color=#b0171f size=3 face=宋体><strong>不要在 rc.local 文件中添加阻塞或者死循环操作，会进不了系统的，试试就逝世。</strong></font>\n\n<br>\n\n<br>\n\n<br>\n\n------\n\n","tags":["系统","linux","命令"],"categories":["linux"]},{"title":"linux debian下无法使用中科大源进行rar安装_自编译教程","url":"/2023/05/18/linux-debian下无法使用中科大源进行rar安装-自编译教程/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>debian下无法使用中科大源进行rar安装_自编译教程</strong></font>\n\n<!--more-->\n\n<br>\n\n------\n\n<br><font color=#f26522 size=4 face=宋体><strong>由于在中科大源下无法使用rar解压、压缩命令，但是网上很多windos过来的压缩包，所以就很头疼，然后这里整理一个自编译安装的教程</strong></font>\n\n<br>\n\n------\n\n<br><font color=#b0171f size=4 face=宋体><strong>下载源码，源码我已经从官网下载好了，放在 <font color=blue size=4 face=宋体><strong>蓝奏云</strong></font></strong></font>\n\n- <font color=#b0171f size=3 face=宋体><strong>rarlinux-x64-6.0.2   [点击下载](https://wwwqe.lanzouo.com/ihpbgx7ptyd)</strong></font>\n- <font color=#b0171f size=3 face=宋体><strong>当然，如果你觉得不放心，这是人之常情的事情，那么你也可以去官方下载，[官方点击下载](https://www.rarlab.com/download.htm)</strong></font>\n\n<br>\n\n------\n\n<br>\n\n<font color=red size=4 face=宋体><strong>开始解压并编译</strong></font>\n\n```shell\ntar -xzvf rarlinux-x64-6.0.2.tar.gz\ncd ./rar\nsudo make\n```\n\n![](https://s2.loli.net/2022/06/08/q4Nvf9uS3GQaXWT.png)\n\n<font color=red size=4 face=宋体><strong>到这里就已经完成了编译，并且它会自动的复制到对应的文件中，你就可以直接使用了</strong></font>\n\n<br>\n\n<br>\n\n<br>\n\n------\n\n","tags":["系统","linux","编译"],"categories":["linux"]},{"title":"linux dpkg查找已安装软件","url":"/2023/05/18/linux-dpkg查找已安装软件/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>linux dpkg查找已安装软件：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>linux下 查找已经安装的包，这很重要！</strong></font>\n\n<font color=#b0171f size=3 face=宋体><strong>主要是用来确认是否已经安装了软件，如果软件出错，可以查找到包名，卸载</strong></font>\n\n```shell\ndpkg -l|grep samba   # 查找samba\n```\n\n<br>\n\n<br>\n\n<br>\n\n------\n\n","tags":["系统","linux","命令"],"categories":["linux"]},{"title":"linux PS命令详解","url":"/2023/05/18/linux-PS命令详解/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>linux PS命令详解：</strong></font>\n\n<!--more-->\n\n<br>\n\n------\n\n<br><font color=#f26522 size=4 face=宋体><strong><font color=red size=4 face=宋体><strong>命令：</strong></font>ps -ef|grep详解</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>ps命令将某个进程显示出来</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>grep命令是查找</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>中间的|是管道命令 是指ps命令与grep同时执行</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>PS是LINUX下最常用的也是非常强大的进程查看命令</strong></font>\n\n<br>\n\n------\n\n<br>\n\n<font color=#b0171f size=4 face=宋体><strong>grep命令是查找，是一种强大的文本搜索工具，它能使用[正则表达式](https://www.baidu.com/s?wd=%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F&tn=44039180_cpr&fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1d9uWD3PhP9n1b4m1nduAcz0ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3EPjfvrHnzPWT3)搜索文本，并把匹配的行打印出来。</strong></font>\n\n<font color=#b0171f size=4 face=宋体><strong>**grep全称是Global Regular Expression Print，表示全局正则表达式版本，它的使用权限是所有用户。**</strong></font>\n\n<br>\n\n------\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong><font color=red size=4 face=宋体><strong>**以下这条命令是检查java 进程是否存在：**</strong></font>**ps -ef |grep java**</strong></font>\n\n![](https://s2.loli.net/2022/06/09/Ig1kvBzHcVCYsFQ.png)\n\n```shell\nUID      # 程序被该 UID 所拥有\nPID      # 就是这个程序的 ID \nPPID     # 则是其上级父程序的ID\nC        # CPU使用的资源百分比\nSTIME    # 系统启动时间\nTTY      # 登入者的终端机位置\nTIME     # 使用掉的CPU时间。\nCMD      # 所下达的是什么指令\n```\n\n<br>\n\n------\n\n<br><font color=#b0171f size=4 face=宋体><strong><font color=red size=4 face=宋体><strong>命令：</strong></font>ps -e|grep dae</strong></font>\n\n![](https://s2.loli.net/2022/06/09/qzExaJbnupBVjwQ.png)\n\n<br>\n\n------\n\n<br><font color=#b0171f size=4 face=宋体><strong><font color=red size=4 face=宋体><strong>命令：</strong></font>ps -f|grep dae</strong></font>\n\n![](https://s2.loli.net/2022/06/09/s89eDSz1ln7VvyZ.png)\n\n<br>\n\n------\n\n<br><font color=#b0171f size=4 face=宋体><strong><font color=red size=4 face=宋体><strong>命令：</strong></font>ps -ef|grep dae</strong></font>\n\n![](https://s2.loli.net/2022/06/09/S1OuE38Pb9XyHV2.png)\n\n<br><br><br>\n\n------\n\n","tags":["系统","linux","命令"],"categories":["linux"]},{"title":"linux 终端光标操作技巧","url":"/2023/05/18/linux-终端光标操作技巧/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>linux 终端光标操作技巧：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>linux 命令行 光标移动技巧等：</strong></font>\n\n```shell\nCtrl+a   # 跳到本行的行首，\nCtrl+e   # 则跳到页尾。\nCtrl+u   # 删除当前光标前面的文字\nctrl+k   # 删除当前光标后面的文字\nCtrl+w和Alt+d  # 对于当前的单词进行删除操作，w删除光标前面的单词的字符，d则删除后面的字符\nAlt+Backsapce  # 删除当前光标后面的单词，\n# 如果删除错误，使用Ctrl+y进行恢复Ctrl+L进行清屏操作\n\nctrl+a   # 光标移到行首。\nctrl+b   # 光标左移一个字母\nctrl+c   # 杀死当前进程。\nctrl+d   # 退出当前 Shell。\nctrl+e   # 光标移到行尾。\nctrl+h   # 删除光标前一个字符，同 backspace 键相同。\nctrl+k   # 清除光标后至行尾的内容。\nctrl+l   # 清屏，相当于clear。\nctrl+r   # 搜索之前打过的命令。会有一个提示，根据你输入的关键字进行搜索bash的history\nctrl+u   # 清除光标前至行首间的所有内容。\nctrl+w   # 移除光标前的一个单词\nctrl+t   # 交换光标位置前的两个字符\nctrl+y   # 粘贴或者恢复上次的删除\nctrl+d   # 删除光标所在字母;注意和backspace以及ctrl+h的区别，这2个是删除光标前的字符\nctrl+f   # 光标右移\nctrl+z    # 把当前进程转到后台运行，使用’ fg ‘命令恢复。比如top -d1 然后ctrl+z ，到后台，然后fg,重新恢复\n\n# esc组合\nesc+d:   # 删除光标后的一个词\nesc+f:   # 往右跳一个词\nesc+b:   # 往左跳一个词\nesc+t:   # 交换光标位置前的两个单词。\n```\n\n","tags":["系统","linux","命令"],"categories":["linux"]},{"title":"Linux下创建Raid0磁盘阵列","url":"/2023/05/18/Linux下创建Raid0磁盘阵列/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Linux下创建Raid0磁盘阵列</strong></font>\n\n<!--more-->\n\n<br>\n\n------\n\n<br><font color=#f26522 size=4 face=宋体><strong>创建raid0</strong></font>\n\n```shell\n# 1、更新仓库\nsudo apt update\n# 2、安装mdadm\nsudo apt install -y mdadm\n# 3、查看设备信息\nlsblk\n# 使用命令开始组磁盘阵列\nmdadm -C /dev/md0 -a yes -l 0 -n 5 /dev/sd{a1,b1,c1,d1,d2}\n# 这段等同于mdadm -C /dev/md0 -a yes -l 0 -n 5 /dev/sda1 /dev/sdb1 /dev/sdc1 /dev/sdd1 /dev/sdd2\n# 翻译一下这条命令，意思就是创建磁盘设备 /dev/md0 , md0 是一个raid0设备，设备由5个设备组成，分别是sda1,sdb1,sdc1,sdd1,sdd2\n```\n\n<br>\n\n------\n\n<br><font color=#f26522 size=4 face=宋体><strong>解除raid0</strong></font>\n\n```shell\nmdadm -S /dev/md0   # 停止/dev/md0设备\nmdadm --misc --zero-superblock /dev/<设备名称>    # raid下创建了几个设备，就自行几条\n```\n\n<br><br><br>\n\n------\n\n","tags":["系统","运维","linux","命令"],"categories":["linux"]},{"title":"Linux下挂载磁盘or网络磁盘","url":"/2023/05/18/Linux下挂载磁盘or网络磁盘/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Linux下挂载磁盘or网络磁盘：</strong></font>\n\n<!--more-->\n\n<br>\n\n------\n\n<br><font color=#f26522 size=4 face=宋体><strong>前言：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>磁盘自动化挂载</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>网络共享挂载</strong></font>\n\n<br>\n\n------\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>直接挂载</strong></font>\n\n```shell\n# 查看磁盘信息\nlsblk\n# 这个样子就是没有挂载\nmkdir /home/<用户名>/share  # 在指定用户名下创建一个share文件夹来转载磁盘\nmount /dev/sda /home/<用户名>/share    # 将sda硬盘挂载到/home/<用户名>/share 这个目录下\n```\n\n![](https://s2.loli.net/2022/06/09/O5tfZRacdP2UGK9.png)\n\n<br>\n\n------\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>**UUID挂载：**</strong></font>\n\n```shell\nmount -U  76c825c3-1f61-463f-a229-f2294e605eb3 /media/usb\n```\n\n<br>\n\n------\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>**网络磁盘挂载：**</strong></font>\n\n```shell\nmount -t cifs -o username=<用户>,password=<用户密码>,uid=1000 //192.168.33.133/<共享的文件夹> <本地承载挂载过来的文件夹目录路径>\n```\n\n<br><br><br>\n\n------\n\n","tags":["系统","运维","linux","命令"],"categories":["linux"]},{"title":"linux下smb共享文件","url":"/2023/05/18/linux下smb共享文件/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>linux下smb共享文件：</strong></font>\n\n<!--more-->\n\n<br>\n\n------\n\n<br><font color=#f26522 size=4 face=宋体><strong>前言：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>平时的数据需要存放在特定的地方，以方便随拿随用。但随着多端、智能设备的普及，这种需求就更加迫切了。</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>**但假如你有一个linux设备，就可以很好的解决这个问题，在家庭设备中添加一个linux设备，并不会像windos那样耗电，你可以像你家一年365天常开的电视盒子的功耗差不多。**</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>**其实电视盒子就是一个内嵌的linux系统，但我并不推荐刚接触linux的人去魔改盒子，有很大几率让你的盒子变成砖。**</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>**但你如果真的需要，可以去买一个矿渣。例如：老母鸡（玩客云）、猫盒. . . .**</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>**这种东西几十块钱就可以搞定，只需要你稍微动下手，就完全OK的。**</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>**即使是百兆网口，就基本能满足你的需求了。百兆网口的实际读写速度大概在20m/s左右。**</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>**好了，重点！linux共享文件服务——samba**</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>**我相信，能够看到这篇博文的，应该都不需要在普及啥是samba了，咱们直接切入主题**</strong></font>\n\n<br>\n\n------\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>安装samba服务：</strong></font>\n\n```bash\n# 以下，我直接以debian命令安装\n# 如果你的系统是centos ，可直接将apt ==> yum 使用\nsudo apt update  # 更新系统源\nsudo apt install samba  # 安装samba服务\n```\n\n<br>\n\n------\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>创建共享目录：</strong></font>\n\n```bash\nmkdir ~/share   # 在当前用户目录下创建一个叫share的文件夹\n# 当然你也可以指定用户目录下创建文件夹，例如：\n# mkdir /home/xiaoxi/share   #  在用户xiaoxi的用户之下，创建一个share文件夹,前提是xiaoxi这个用户存在\nchmod -R 777 ~/share   # 赋予刚才创建的share文件夹，最高执行权限\n\n```\n\n<br>\n\n------\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>修改samba配置：</strong></font>\n\n```bash\nvim /etc/samba/smb.conf   #  编辑smb.conf 配置文件\n# 假如提示vim未找到，直接使用 sudo apt install vim 安装以下即可\n# 在global全局中添加一条\n#\nguest account = root  # 这一条很重要，意思就是所有登录的用户，都以root权限读写，如果没有这条命令，很可能，你分享之后，能拿出来，却把文件放不进去\n#\n# 在smb.conf最后添加\n[share]  #  分享后，在网络中显示的名字\npath = /home/xiaoxi/share   #  本地你想要分享的文件夹路径，注意：这里的路径是绝对路径\navailable = yes\nbrowseable = yes\npublic = yes\nwritable = yes\n```\n\n<br>\n\n------\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>samba命令：</strong></font>\n\n```bash\n# 需要注意的是，安装完成后的服务，并不是samba，而是smbd\nservice smbd status     #  查看状态\nservice smbd stop     #  停止服务\nservice smbd start     #  启动服务\nservice smbd restart    #  重启服务\n```\n\n<br>\n\n------\n\n<br><font color=red size=5 face=宋体><strong>结语：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>**samba往往需要与自动挂载磁盘结合，达到开机自动启动挂载分享的目的。**</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>**有空在写自动挂载方法把**</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>**哟西！感觉又特么进了一步**</strong></font>\n\n<br><br><br>\n\n------\n\n","tags":["系统","运维","linux","命令"],"categories":["linux"]},{"title":"Mogodb排序分页","url":"/2023/05/18/Mogodb排序分页/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Mogodb排序分页：</strong></font>\n---\n\n<!--more-->\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**1.准备：**</strong></font>\n\n```\nuse test3\ndb.c1.insert({_id:1,name:\"a\",sex:1,age:1})\ndb.c1.insert({_id:2,name:\"b\",sex:1,age:2})\ndb.c1.insert({_id:3,name:\"c\",sex:2,age:3})\ndb.c1.insert({_id:4,name:\"d\",sex:2,age:4})\ndb.c1.insert({_id:5,name:\"e\",sex:2,age:5})\n```\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>**2. 排序：**</strong></font>\n\n```mongodb\n语法：db.<集合名>.find().sort(json数据)\n\n\n# 说明:键——就是要排序的列/字段、值：1是升序，-1是降序\n# 例如：db.c1.find().sort({age:-1}) # c1是由开始写入数据时隐式创建\n```\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>**3. 分页：**</strong></font>\n\n```mongodb\n语法：db.<集合名>.find().sort().skip(数字).limit(数字)\n\n\n# skip——跳过指定数据数量（可选），查询新的数据 # 第一页不需要跳过，因为是新数据\n# limit——查询指定数量数据\n# 例如：db.c1.find().sort({age:-1}).limit(2) # 查询降序 两条数据\n# 例如：db.c1.find().sort({age:-1}).skip(2).limit(3) # 查询降序 跳过两条数据 ，显示三条数据\n# skip计算公式：（当前页 - 1）* 每页显示数量\n```\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>**4. 小总结：**</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>db.<集合名>.find()</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>.sort({列:1/-1})——排序</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>.skip(数字)——跳过指定数量</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>.limit(数字)——限制查询条数</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>.count()——统计总数量</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>如果不够，在百度ro谷歌</strong></font>\n\n<br>\n\n<br>\n\n<br>\n\n------\n\n","tags":["mongodb","数据库"],"categories":["数据库"]},{"title":"MongoDB 创建超级管理员账户密码","url":"/2023/05/18/MongoDB-创建超级管理员账户密码/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>MongoDB 创建超级管理员账户密码：</strong></font>\n\n<!--more-->\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>1. 进入数据库：</strong></font>\n\n```javascript\nuse admin   # 进入数据库超级用户库\ndb.createUser({user:'root', pwd:'123456', roles:['root']})      # 创建管理员账号密码     #   创建一个root的用户名， 密码是123456， 他的角色是root用户超级管理员\n```\n\n<br>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>2. 登录：</strong></font>\n\n```javascript\nuse admin   # 进入admin库\ndb.auth('root', '123456')    # 登录超级用户root     # db.auth('用户名', '密码')\n```\n\n![](https://s2.loli.net/2022/06/09/7apYgE28fGiWvl5.png)\n\n<font color=red size=2 face=宋体><strong>对于非root用户的权限设置：</strong></font>\n\n![](https://s2.loli.net/2022/06/09/4uUMhNvGLy9SqKV.png)\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n","tags":["mongodb","数据库"],"categories":["数据库"]},{"title":"MongoDB 关于python下使用mongodb的_id值查询数据坑","url":"/2023/05/18/MongoDB-关于python下使用mongodb的-id值查询数据坑/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>MongoDB 关于python下使用mongodb的_id值查询数据坑：</strong></font>\n\n<!--more-->\n\n<font color=#b0171f size=2 face=宋体><strong>pymongo下查询_id值坑！</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>这个坑有点大</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>一般我们使用 _id 值查询的时候结构是这样的</strong></font>\n\n```\ndb.<集合名>.find({\"_id\": ObjectId(\"61ae375007e3e461a29e48c0\")})\n```\n\n<br>\n\n---\n\n---\n\n<br>\n\n<font color=#00b2c2 size=4 face=宋体><strong>然而在python下这种写法会报错，错误内容大体就是，找不到object模块。</strong></font>\n\n<font color=#00b2c2 size=4 face=宋体><strong>最后在一个牛人的博客下找到了解决办法！<font color=red size=4 face=宋体><strong>其实就是没有导入包</strong></font></strong></font>\n\n```python\nfrom bson.objectid import ObjectId\n\n# 下面这条命令在python中无法直接使用，你需要自己设置环境   这里我就不放我的设置环境了！\ndb.<集合名>.find({\"_id\": ObjectId(\"61ae375007e3e461a29e48c0\")})\n\n```\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n","tags":["python","mongodb","数据库"],"categories":["数据库"]},{"title":"MongoDB_命令记录","url":"/2023/05/18/MongoDB-命令记录/","content":"\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>由于记录过于详细，很多命令分了不同文档细化，特别开出一个文档记录相关命令：</strong></font>\n\n<!--more-->\n\n```python\n\n# MongoDB_基本操作语法：\n\nshow databases       # 展示数据库\nuse admin     # 进入 admin数据库表(隐式创建:在mongodb中选择不存在的数据库不会报错，后期当该数据库有数据时，系统会自动创建)\nshow collections     # 查看集合 多个集合\ndb.createCollection(‘集合名’)    # 创建集合\ndb.集合名.drop()       # 删除集合\n\n================================\n\n# 删除数据库\n\t# 1、通过use 进入数据库\n    # 2、使用db.dropDatabase() 删除数据库\n\n\n================================\n## 整合以单条数据模式查看\ndb.books.find().pretty()\n\n# 创建用户名\ndb.createUser({user:'root', pwd:'123456', roles:['root']})      # 创建管理员账号密码     #   创建一个root的用户名， 密码是123456， 他的角色是root用户超级管理\n\n# 登录\ndb.auth('root', '123456')    # 登录超级用户root     # db.auth('用户名', '密码')\n\n# 库的创建与删除\nuse koko    #  隐式创建kako数据库\nshow dbs   # show databases  的简写，展示所有数据库\ndb.dropDatabase()    #删除数据库，  首先进入某个数据库，然后在使用该命令\n\n# 集合操作\nshow collections    # 展示该数据库下的集合\ndb.col.drop()      # 进入数据库，在该数据库下删除 col 集合！\n\n\n# 1—插入数据\ndb.col.insert({user:'张三', sex:'男', age:19})     # 直接插入数据\n\n# 2—以变量的方式插入\ndocument = {'title':'朝花夕拾', 'author':'鲁迅'}     # 定义一个字典变量\ndb.books.insert(document)       # 插入document变量的数据\n\n# 3—以save()的方式插入数据___(现已经弃用更新)\n#### 如果_id字段重合，那么save()会变成更新操作，如果不指定_id那么，save()就是插入操作\ndocument = {'title':'呐喊', 'author':'鲁迅'}      # 定义一个字典变量\ndb.books.save(document)           #  在books集合中插入数据\ndocument = { '_id': ObjectId(\"61a1cf8bee408bbb6d3a44d2\"), 'title':'这是一个坑', 'author':'鲁迅',}\n\n\n\n# 更新操作\ndb.books.update({_id:100}, {$set:{title:'吹牛逼'}})       # 查找_id等于100的数据，更改他的title值为 吹牛逼\ndb.books.update({_id:ObjectId(\"61a1cf8bee408bbb6d3a44d2\")}, {$set:{title:'吹牛逼'}})   \n\n# 删除数据\ndb.books.remove({author:'鲁迅'})  # 删除字段author=鲁迅的所有数据\ndb.books.remove({author:'鲁迅'}, {justOne:true})    # 只删除字段author=鲁迅的第一条数据  $$$ 重点，严格区分大小写，大小写错误可能删除该字段下的所有数据\n```\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n","tags":["mongodb","数据库"],"categories":["数据库"]},{"title":"MongoDB_无法重启超级大坑","url":"/2023/05/18/MongoDB-无法重启超级大坑/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>MongoDB 无法重启超级大坑：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>在mongodb下，因为在没有停止服务，就去修改配置文件的坑！超级大. . .</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>一般我们在使用linux的时候都习惯修改完配置文件之后，直接重启服务，从而达到重新加载配置的目的，但是在mongodb下这个坑却有点大</strong></font>\n\n![](https://s2.loli.net/2022/06/09/Uy3cAtxPgprumDR.png)\n\n<br><br><font color=blue size=4 face=宋体><strong>解决办法如下（此方法适用于 yum源安装的mongodb）</strong></font>\n\n---\n\n<font color=red size=3 face=宋体><strong>**删除配置文件，重启服务**</strong></font>\n\n```shell\nrm -rf /tmp/mongodb-27017.sock      # 删除由于未曾停止服务，修改配置之后的进程锁文件\nsudo systemctl restart mongod         # 重启mongodb服务\n```\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n","tags":["mongodb","数据库"],"categories":["数据库"]},{"title":"Typora快捷键记录","url":"/2023/05/18/Typora快捷键记录/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>Typora快捷键记录： </strong></font>\n\n<!--more-->\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>Typora快捷用法：让你的写作更高效</strong></font>\n\nTypora是一款轻量级的Markdown编辑器，它的快捷用法可以让你的写作更加高效。下面我将介绍一些常用的快捷用法，帮助你更好地使用Typora。\n\n <font color=#f26522 size=4 face=宋体><strong>1. 标题</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>Typora支持六级标题，你可以使用快捷键Ctrl+数字键来快速添加标题。例如，Ctrl+1添加一级标题，Ctrl+2添加二级标题，以此类推。</strong></font>\n\n```\nCtrl+数字键   添加标题 1 ~ 6 级标题\n```\n\n<font color=#f26522 size=4 face=宋体><strong>2. 列表</strong></font> \n\n+ <font color=#b0171f size=2 face=宋体><strong>Typora支持有序列表和无序列表。你可以使用快捷键Ctrl+Shift+O来添加有序列表，使用Ctrl+Shift+U来添加无序列表。 </strong></font>\n\n```\nCtrl+Shift+O   有序列表\nCtrl+Shift+U   无序列表\n```\n\n<font color=#f26522 size=4 face=宋体><strong>3. 引用</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>引用是一种常用的写作方式，Typora支持引用。你可以使用快捷键Ctrl+Shift+Q来添加引用。</strong></font>\n\n```\nCtrl+Shift+Q   引用\n```\n\n<font color=#f26522 size=4 face=宋体><strong>4. 加粗和斜体</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>加粗和斜体是常用的文本格式，Typora支持快捷键Ctrl+B来添加加粗，Ctrl+I来添加斜体。</strong></font>\n\n```\nCtrl+B   加粗\n```\n\n<font color=#f26522 size=4 face=宋体><strong>5. 插入图片</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>Typora支持插入图片，你可以使用快捷键Ctrl+Shift+I来插入图片。</strong></font>\n\n```\nCtrl+Shift+I    插入图片\n```\n\n<font color=#f26522 size=4 face=宋体><strong>6. 插入链接</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>Typora支持插入链接，你可以使用快捷键Ctrl+K来插入链接。</strong></font>\n\n```\nCtrl+K    插入链接\n```\n\n<font color=#f26522 size=4 face=宋体><strong>7. 表格</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>Typora支持表格，你可以使用快捷键Ctrl+T来添加表格。</strong></font>\n\n```\nCtrl+T    添加表格\n```\n\n<font color=#f26522 size=4 face=宋体><strong>8. 代码块</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>Typora支持代码块，你可以使用快捷键Ctrl+Shift+K来添加代码块。</strong></font>\n\n```\nCtrl+Shift+K    添加代码块\n```\n\n\n\n<br>\n\n<br>\n\n<font color=#00b2c2 size=3 face=宋体><strong>以上是Typora的一些常用快捷用法，它们可以让你的写作更加高效。如果你想了解更多快捷用法，可以在Typora中按下快捷键Ctrl+/来查看所有快捷键。</strong></font>\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n","tags":["工具","Markdown"],"categories":["工具"]},{"title":"MongoDB基本操作","url":"/2023/05/18/MongoDB基本操作/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>MongoDB基本操作：</strong></font>\n\n<!--more-->\n\n<br><font color=#f26522 size=4 face=宋体><strong>1. 基本概念</strong></font>\n\n+ 生活中：仓库、架子、物品\n\n+ 计算机：数据库(database)、集合(collection)、数据/文档(document)\n\n<br><font color=#f26522 size=4 face=宋体><strong>2. 查看数据库</strong></font>\n\n```\nshow  databases      # 展示数据库\n```\n\n![](https://s2.loli.net/2022/06/09/TyhxKGYmI48bJv6.png)\n\n<br><font color=#f26522 size=4 face=宋体><strong>3. 选择数据库</strong></font>\n\n```\nuse database   # 进入数据库\n# 假如没有该数据库，那么该数据库会被隐式创建\n# 如果数据库中没有集合名，而我们展示了此集合名。那么这种方法，也被称为隐式创建，有数据后会创建\n```\n\n![](https://s2.loli.net/2023/05/18/TN4eXFZLvdqBzS3.png)\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>4. 查看集合</strong></font>\n\n```\nshow collections\n# 查看该数据库下集合\n```\n\n![](https://s2.loli.net/2022/06/09/CcoKUrFuvE3RGMD.png)\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>5. 创建集合</strong></font>\n\n![](https://s2.loli.net/2022/06/09/7xcDBu4C3aLRqEz.png)\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>6. 删除集合</strong></font>\n\n```\ndb.集合名.drop()\n# 删除集合\n```\n\n![](https://s2.loli.net/2022/06/09/ZhPyefgFou64q71.png)\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>7. 删除数据库</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>1. 通过use语法选中数据库</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>2. 通过db.dropDatabase()删除数据库</strong></font>\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>8. 小总结</strong></font>\n\n+ <font color=#b0171f size=3 face=宋体><strong>数据库(查看、创建、选择、删除)</strong></font>\n\n  - <font color=#00b2c2 size=2 face=宋体><strong>1.查看：show databases</strong></font>\n\n  - <font color=#00b2c2 size=2 face=宋体><strong>2.创建：有单独语法，但是忽略，隐式创建</strong></font>\n\n  - <font color=#00b2c2 size=2 face=宋体><strong>3.选择：use 数据库名</strong></font>\n\n  - <font color=#00b2c2 size=2 face=宋体><strong>4.删除：</strong></font>\n    - 1.通过use选中数据库\n    - 2.通过db.dropDatabase()删除数据库\n  \n+ <font color=#b0171f size=3 face=宋体><strong>集合（查看、创建、删除)</strong></font>\n  - <font color=#00b2c2 size=2 face=宋体><strong>1.查看：show collections</strong></font>\n  - <font color=#00b2c2 size=2 face=宋体><strong>2.创建：db.createCollection(‘集合名’)</strong></font>\n  - <font color=#00b2c2 size=2 face=宋体><strong>3.//忽略，后期插入数据，隐式创建集合</strong></font>\n  - <font color=#00b2c2 size=2 face=宋体><strong>4.删除:db.集合名.drop()</strong></font>\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n","tags":["mongodb","数据库"],"categories":["数据库"]},{"title":"MP4视频切片成TS,并生成m3u8文件","url":"/2023/05/18/MP4视频切片成TS-并生成m3u8文件/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>MP4视频切片成TS,并生成m3u8文件：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>python mp4 切片_FFmpeg MP4视频切片成TS m3u8播放：</strong></font>\n\n<br>\n\n<font color=#b0171f size=3 face=宋体><strong>1. 看看原视频是不是MP4啦 如果不是就需要转成MP4</strong></font>\n\n```Bash\n# 转换成mp4文件\nffmpeg -i 原文件 -y -c:v libx264 -strict -2 D:\\home\\lsh.mp4\n```\n\n<br>\n\n<font color=#b0171f size=3 face=宋体><strong>2. 把MP4转成ts文件</strong></font>\n\n```bash\n# 将mp4文件  转换成ts后缀，方便切割\nffmpeg -y -i D:\\home\\999.mp4 -vcodec copy -acodec copy -vbsf h264_mp4toannexb D:\\home\\999.ts\n```\n\n<br>\n\n<font color=#b0171f size=3 face=宋体><strong>3. 再把ts 切成好多个小的ts</strong></font>\n\n```bash\n# 将第二步转换的 大ts文件 切成 很多小的ts文件，并生成m3u8文件    其中的30 就是将小的ts，以30秒为单位切割，如果你修改为10   那么切出来的小的ts视频的时长  就是10左右一个的\nffmpeg -i D:\\home\\999.ts -c copy -map 0 -f segment -segment_list D:\\home\\999\\index.m3u8 -segment_time 30 D:\\home\\999\\nxb-%04d.ts\n```\n\n<br><font color=#b0171f size=3 face=宋体><strong>4. 如果你的视频文件本身就是MP4格式的，那么可以直接转换切片</strong></font>\n\n```\nffmpeg -i xxx.mp4 -f segment -segment_time 60 -segment_format mpegts -segment_list /home/higherlevel/video-folder/video_name.m3u8 -c copy -bsf:v h264_mp4toannexb -map 0 /home/higherlevel/video-folder/course-%04d.ts\n```\n\n<br><font color=#b0171f size=3 face=宋体><strong>5. 在python下只需要将路径存为变量 即可实线自动化切片</strong></font>\n\n```bash\nimport os\nos.system() #即可\n```\n\n<br><font color=#b0171f size=3 face=宋体><strong>6. ffmpeg 取消控制台打印信息，不打印log日志</strong></font>\n\n```bash\nffmpeg 后面加上 -loglevel quiet\n```\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n","tags":["ffmpeg","m3u8","切片","转码"],"categories":["视频编辑"]},{"title":"mysql_宝塔下数据库管理密码错误","url":"/2023/05/18/mysql-宝塔下数据库管理密码错误/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>mysql_宝塔下数据库管理密码错误：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>错误类型：数据库管理密码错误！</strong></font>\n\n![](https://s2.loli.net/2022/06/09/bJtePg3cA98CHXG.jpg)\n\n<font color=#f26522 size=4 face=宋体><strong>该错误的引发的最高两种可能性：</strong></font>\n\n+ **1. 密码不正确**\n\n+ **2. 存在空密码**\n\n<br>\n\n<br><font color=red size=5 face=宋体><strong>第一种解决方案(密码不正确)：</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>通过屏蔽mysql的登录密码，先进入mysql内部，再通过update命令更新密码</strong></font>\n\n<br>\n\n+ <font color=#b0171f size=3 face=宋体><strong>1、关闭mysql</strong></font>\n\n```Bash\nservice mysqld stop   //linux下使用   \nnet stop mysql    //window下使用 \n```\n\n<font color=#00b2c2 size=2 face=宋体><strong>注：如果window命令无效，查看服务里面的具体名称，然后以管理员模式重启cmd</strong></font>\n\n![](https://s2.loli.net/2022/06/09/7ZCg4bnl1BwkeRO.png)\n\n![](https://s2.loli.net/2022/06/09/fGekTwxMlqWribE.png)\n\n<br>\n\n+ <font color=#b0171f size=3 face=宋体><strong>**2、屏蔽权限**</strong></font>\n\n```bash\nmysqld_safe --skip-grant-table //linux下使用\nmysqld --skip-grant-table  //window下使用\n// 或者使用如下命令\n// mysqld_safe --user=mysql --skip-grant-tables --skip-networking & //linux下使用\n// 屏幕出现： Starting demo from .....\n\n```\n\n<br>\n\n+ <font color=#b0171f size=3 face=宋体><strong>**3、新开起一个终端输入**</strong></font>\n\n```bash\nmysql -u root mysql\nmysql> UPDATE user SET Password=PASSWORD('123456') where USER='root';\nmysql> FLUSH PRIVILEGES;   //更新命令   记得要这句话，否则如果关闭先前的终端，又会出现原来的错误\nmysql> \\q\n```\n\n<br>\n\n<br><font color=red size=5 face=宋体><strong>第二种解决方案(存在空密码)：</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>有时候，mysql虽然拥有了账号和对应的密码。但是，由于存在空密码的情况，会默认登录到空密码中。</strong></font>\n\n  <font color=#f26522 size=4 face=宋体><strong>需要把空密码的账号删除，可以通过如下命令查看所有账户</strong></font>\n\n<br>\n\n+ <font color=#b0171f size=3 face=宋体><strong>**1.关闭mysql**</strong></font>\n\n```bash\nservice mysqld stop\n```\n\n<br>\n\n+ <font color=#b0171f size=3 face=宋体><strong>**2.屏蔽权限**</strong></font>\n\n```bash\nmysqld_safe --skip-grant-table\n// 屏幕出现： Starting demo from .....\n\n```\n\n<br>\n\n+ <font color=#b0171f size=3 face=宋体><strong>**3.新开起一个终端输入**</strong></font>\n\n```bash\nmysql -u root mysql\nmysql> delete from user where USER='';  //删除空密码\nmysql> FLUSH PRIVILEGES;//记得要这句话，否则如果关闭先前的终端，又会出现原来的错误\nmysql> \\q\n\n// 复制代码的时候记得看 有些是操作标识， 别吧   mysql>  这种复制进去\n```\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n","tags":["数据库","错误","mysql"],"categories":["数据库"]},{"title":"MySql_无法远程root登录","url":"/2023/05/18/MySql-无法远程root登录/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>MySql_无法远程root登录：</strong></font>\n\n<!--more-->\n\n- <font color=#f26522 size=4 face=宋体><strong>远程工具连接到数据库，需要开启root远程登陆</strong></font>\n\n<br>\n\n- <font color=#b0171f size=3 face=宋体><strong>**1. 登录mysql**</strong></font>\n\n```shell\n[root@htuidc ~]# mysql -u root -p\nEnter password:    # 输入密码\n```\n\n<br>\n\n- <font color=#b0171f size=3 face=宋体><strong>**2. 开启远程连接**</strong></font>\n\n```shell\n[root@htuidc ~]# GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '' WITH GRANT OPTION;\n\n## 将   替换成你自己的密码\n\n## root为mysql用户，为用户密码\n```\n\n<br>\n\n- <font color=#b0171f size=3 face=宋体><strong>**3. 刷新权限**</strong></font>\n\n```shell\n[root@htuidc ~]# FLUSH PRIVILEGES; \n```\n\n<br>\n\n- <font color=#b0171f size=4 face=宋体><strong>**4. 安装iptables**</strong></font>\n\n```shell\n[root@htuidc ~]# yum install -y iptables\n```\n\n<br>\n\n- <font color=#b0171f size=4 face=宋体><strong>**5. 编辑开放端口列表，增加3306端口，重启防火墙即可。**</strong></font>\n\n```shell\n[root@htuidc ~]# firewall-cmd --permanent --zone=public --add-port=8080/tcp\n[root@htuidc ~]# firewall-cmd --reload\n## 开放3306到防火墙，并立即生效\n```\n\n<br>\n\n<br>\n\n<br>\n\n---\n\n","tags":["数据库","mysql"],"categories":["数据库"]},{"title":"MySql数据库 操作指南","url":"/2023/05/18/MySql数据库-操作指南/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>MySql数据库 操作指南：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>创建数据表：</strong></font>\n\n```mysql\nuse text_ceshi;   # 进入数据库\ncreate table articles(id int null, nav_id varchar(256) null, ) default charset=utf8;\n\n```\n\n---\n\n<br>\n\n<br>\n\n<font color=#00b2c2 size=5 face=宋体><strong>增删改查：</strong></font>\n\n+ <font color=#f26522 size=4 face=宋体><strong>新增数据</strong></font>\n\n```mysql\ninsert into 表名 (列名,列名,列名) values (对应的值,对应的值,对应的值)\n\ninsert into tb1(name,password) values('吴佩琪','123123')\n\n```\n\n+ <font color=#f26522 size=4 face=宋体><strong>删除数据</strong></font>\n\n```mysql\ndelete from 表名        删除整个表\ndelete from 表名 where 条件           \n    例如    delete from tb1 where name=\"吴佩琪\" and password=\"123\"\n```\n\n+ <font color=#f26522 size=4 face=宋体><strong>修改数据库</strong></font>\n\n```mysql\nupdate 表名 set 列名=值\nupdate 表名 set 列名=值 where 条件;\n   例如： update users set name=concat(name,\"123\") where id=2;                     \n   concat()   是mysql内部的一个函数，可以拼接字符串\n```\n\n+ <font color=#f26522 size=4 face=宋体><strong>查询数据</strong></font>\n\n```mysql\nselect * from 表名    查询整张表的数据\nselect 列名,列名,列名 from 表名;     查询三个列的值\nselect 列名,列名 as 列名,列名 from 表名\nselect  *  from  表名  where  条件;\n\n```\n\n---\n\n<br>\n\n<br><font color=#00b2c2 size=5 face=宋体><strong>开放防火墙，并立即生效：</strong></font>\n\n```shell\n[root@htuidc ~]# firewall-cmd --permanent --zone=public --add-port=8080/tcp2[root@htuidc ~]# firewall-cmd --reload3## 开放3306到防火墙，并立即生效shell\n\n```\n\n<br>\n\n<br>\n\n<br>\n\n---\n","tags":["数据库","mysql"],"categories":["数据库"]},{"title":"Navicat_激活教程2021(Linux)","url":"/2023/05/18/Navicat-激活教程2021-Linux/","content":"# <font color=#00b2c2 size=5 face=宋体><strong>Navicat_激活教程2021(Linux)</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>一个强大的数据库管理软件 Navicat 激活教程2021（Linux）</strong></font>\n\nNavicat 是香港卓软数字科技有限公司生产的一系列 MySQL、MariaDB、MongoDB、Oracle、SQLite、PostgreSQL 及 Microsoft SQL Server 的图形化数据库管理及发展软件。它有一个类似浏览器的图形用户界面，支持多重连线到本地和远程数据库。它的设计合乎各种用户的需求，从数据库管理员和程序员，到各种为客户服务并与合作伙伴共享信息的不同企业或公司。 –Wikipedia\n\n---\n\n<br>\n\n<font color=#00b2c2 size=4 face=宋体><strong>环境：</strong></font>\n\n---\n\n+ <font color=#f26522 size=4 face=宋体><strong>1.环境清单：</strong></font>\n\n  + <font color=#b0171f size=3 face=宋体><strong>Navicat包：[官网传送阵](https://www.navicat.com.cn/download/navicat-premium)</strong></font>\n  + <font color=#b0171f size=3 face=宋体><strong>Navicat-Keygen工具(依赖下面三个库)</strong></font>\n  + <font color=#b0171f size=3 face=宋体><strong>capstone</strong></font>\n  + <font color=#b0171f size=3 face=宋体><strong>keystone (需要cmake)</strong></font>\n  + <font color=#b0171f size=3 face=宋体><strong>rapidjson</strong></font>\n  + <font color=#b0171f size=3 face=宋体><strong>AppImage打包工具</strong></font>\n\n---\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>2.环境准备：</strong></font>\n\n  + <font color=#b0171f size=3 face=宋体><strong>Navicat 包下载[BD直下(navicat premium-15.0.23)](https://bd.bcebos.com/v1/xly-icafe/navicat15-premium-cs-20220217092059-kezae2.appimage)</strong></font>\n\n  + <font color=#b0171f size=3 face=宋体><strong>Note: 官网最新版激活失败，可以使用这个旧版本（小编激活官网最新版的时候，卡在激活的第2 步）</strong></font>\n\n  + <font color=#b0171f size=3 face=宋体><strong>准备Navicat-Keygen的编译环境</strong></font>\n\n  + <font color=#b0171f size=3 face=宋体><strong>capstone</strong></font>\n\n    ```shell\n    sudo apt install libcapstone-dev\n    ```\n\n---\n<br>\n\n  + <font color=#b0171f size=3 face=宋体><strong>keystone</strong></font>\n\n    ```shell\n    # 安装编译工具cmake\n    sudo apt install cmake\n    cd ~/下载  # 获取keystone源码并编译安装\n    git clone https://github.com/keystone-engine/keystone.git\n    cd keystone\n    mkdir build  # 创建一个build目录用于存放keystone编译后的库文件\n    cd build\n    ../make-share.sh\n    sudo make install # 安装keystone动态库\n    sudo ldconfig   # 执行dconfig动态链接库为系统所共享\n    sudo apt install rapidjson-dev   # 安装 rapidjson  \n    ```\n\n---\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>3.编译安装Navicat-Keygen：</strong></font>\n\n```shell\n# 下载\ncd ~/下载\ngit clone -b linux --single-branch https://github.com/Orginly/navicat-keygen.git\ncd navicat-keygen\nmake all\nsudo chmod a+x bin/*  # 授权navicat-pacher 和navicat-keygen\n\n```\n\n​\tNote: 如果make all 的时候，提示fatal error: openssl/opensslv.h: 没有那个文件或目录，此时请执行<font color=#00b2c2 size=3 face=宋体><strong>**sudo apt-get install libssl-dev**</strong></font>就可以了\n\n\n---\n<br>\n\n+ <font color=#f26522 size=4 face=宋体><strong>4.下载AppImage打包工具并授权：</strong></font>\n\n```bash\ncd ~/下载  # 下载\nwget 'https://github.com/AppImage/AppImageKit/releases/download/continuous/appimagetool-x86_64.AppImage'\nsudo chmod a+x appimagetool-x86_64.AppImage # 授权\n```\n\n<br>\n\n<br>\n\n<font color=red size=7 face=宋体><strong>**激活：**</strong></font>\n\n---\n<br>\n\n+ <font color=#00b2c2 size=4 face=宋体><strong>**1. 提取AppImage文件:**</strong></font>\n\n```shell\n# 将navicat15-premium-cs.AppImage 移动到 /home/目录下,进入AppImage目录下，打开终端并执行\nwget https://bd.bcebos.com/v1/xly-icafe/navicat15-premium-cs-20220217092059-kezae2.appimage\nmv navicat15-premium-cs-20220217092059-kezae2.appimage ~/下载/navicat15-premium-cs.AppImage\ncd ~/下载\nmkdir navicat15-premium-cs\nsudo mount -o loop navicat15-premium-cs.AppImage navicat15-premium-cs\nsudo cp -r navicat15-premium-cs navicat15\nsudo umount navicat15-premium-cs\nrm -rf navicat15-premium-cs\n```\n\n---\n<br>\n+ <font color=#00b2c2 size=4 face=宋体><strong>**2. navicat-patcher 替换官方公钥:**</strong></font>\n\n```\n# 进入navicat-keygen/bin/目录\ncd ~/下载/navicat-keygen/bin/\nsudo ./navicat-patcher ~/下载/navicat15  # 执行\n```\n\n+ <font color=#b0171f size=3 face=宋体><strong>样式输出</strong></font>\n\n```bash\n**********************************************************\n\\*       Navicat Patcher (Linux) by @DoubleLabyrinth      *\n\\*                  Version: 1.0                          *\n\\**********************************************************\n\nPress ENTER to continue or Ctrl + C to abort.\n\n[+] Try to open libcc.so ... Ok!\n\n[+] PatchSolution0 ...... Ready to apply\n   RefSegment      =  1\n   MachineCodeRva  =  0x0000000001377200\n   PatchMarkOffset = +0x000000000292c840\n\n[*] Generating new RSA private key, it may take a long time...\n[*] Your RSA private key:\n    -----BEGIN RSA PRIVATE KEY-----\n    MIIEowIBAAKCAQEAta5uHinxzLei/iSOBu/Nf8y3X/BuGpmFcxacQIKb60amSHL4\n    vg0RaoWs3f04PapKSX+uGeWjhOzWX9UxRXj2xi1FeNgIKDa9+1cLKIvrOVlTlrpx\n    irXbOvGkF+uOd2mbEd11LgLwbnTKNoqWZuPHPh3hgUWF+fZ6/7rLuWrh+8K/OlHU\n    hOjgKZWoGxO7dXQhDav+iDxW7ab/s5B5/OJcwv+IvI3ZakL12C2fNKYcLtkonCTl\n\n...\n...\n...\n\n\n[*] New RSA-2048 private key has been saved to\n    /home/navicat-keygen/bin/RegPrivateKey.pem\n\n*******************************************************\n\\ *           PATCH HAS BEEN DONE SUCCESSFULLY!         *\n\\*                  HAVE FUN AND ENJOY~                *\n*******************************************************\n```\n\n---\n<br>\n\n<font color=#00b2c2 size=4 face=宋体><strong>**3. 将navicat15 打包:**</strong></font>\n\n```shell\ncd ~/下载\n./appimagetool-x86_64.AppImage navicat15 navicat15.AppImage\n```\n\n---\n<br>\n\n<font color=#00b2c2 size=4 face=宋体><strong>**4. 运行刚打包的navicat15.AppImage:**</strong></font>\n\n```shell\n./navicat15.AppImage\n```\n\n---\n<br>\n\n<font color=#00b2c2 size=4 face=宋体><strong>**5. 使用 navicat-keygen 来生成 序列号 和 激活码:**</strong></font>\n\n- <font color=#b0171f size=2 face=宋体><strong>1. 执行navicat-keygen</strong></font>\n\n\n  ```shell\n  cd ~/下载/navicat-keygen/bin/\n  ./navicat-keygen --text ./RegPrivateKey.pem\n  ```\n\n\n- <font color=#b0171f size=2 face=宋体><strong>你会被要求选择Navicat产品类别、Navicat语言版本和填写主版本号。之后一个随机生成的 序列号 将会给出</strong></font>\n\n  ![](https://s2.loli.net/2022/06/09/xNzVRSmrDHsq78b.png)\n\n\n---\n\n<br>\n\n<font color=red size=3 face=宋体><strong>使用这个 序列号(Serial number) 来暂时激活Navicat。</strong></font>\n\n<font color=red size=3 face=宋体><strong>之后你会被要求填写 用户名 和 组织名, 你可以随意填写，但别太长。</strong></font>\n\n```shell\n[*] Your name: LIBRA\n[*] Your organization: ROOKIE\n```\n\n---\n\n<br>\n\n<font color=#b0171f size=3 face=宋体><strong>之后你会被要求填写请求码。注意不要关闭keygen。</strong></font>\n<font color=#00b2c2 size=3 face=宋体><strong>**断开网络. 找到navicat注册窗口，填写keygen给你的 序列号，然后点击 激活，再点击 手动激活。(通常在线激活会失败，所以在弹出的提示中选择手动激活)**</strong></font>\n\n<font color=red size=3 face=宋体><strong>复制 请求码 到keygen，连按两次回车结束。</strong></font>\n\n![返回的激活码](https://s2.loli.net/2022/06/09/baoMzyGq4xS2L3f.png)\n\n<br>\n\n<br>\n\n<br>\n\n---\n","tags":["破解","软件"],"categories":["工具"]},{"title":"pycharm下使用模板快速创建","url":"/2023/05/18/pycharm下使用模板快速创建/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>pycharm下使用模板快速创建：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>设置=>编辑器=>实时模板=>python</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>缩写 = 你需要设置的快捷键</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>模板文本 = 你想要使用的代码模板</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>重点：记得勾选类别，</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>模板中想要创建后自动定位光标位置到某个地方，可以使用 $title$</strong></font>\n\n\n<br>\n\n<br>\n\n<br>\n\n---","tags":["python","基础","pycharm"],"categories":["python"]},{"title":"python PyQt5_查看所有基类","url":"/2023/05/18/python-PyQt5-查看所有基类/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>PyQt5_查看所有基类：</strong></font>\n\n<!--more-->\n\n+ <font color=#b0171f size=2 face=宋体><strong>建议直接去官网查看基类：</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>QtWidgets所有基类：</strong></font>[<font color=#b0171f size=2 face=宋体><strong>**点击进入**</strong></font>](https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtwidgets/qtwidgets-module.html)\n\n---\n\n<br><font color=red size=4 face=宋体><strong>完整代码：</strong></font>\n\n```python\nfrom PyQt5.QtWidgets import *\nimport sys\n\nclass any_parent(QWidget):\n    def __init__(self):\n        super().__init__()\n        print(QWidget.__subclasses__())\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    window = any_parent()\n    window.show()\n    sys.exit(app.exec_())\n\n```\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>**剖析代码：**</strong></font>\n\n```python\n# 使用__subclasses__()方法，可查看基于某个类的所有基类\nQWidget.__subclasses__() # 查看QWidget的所有基类\nprint(QWidget.__subclasses__())\n\n# 查看QObect的所有基类\nfrom PyQt5.Qt import *\nprint(QObject.__subclasses__())\n\n```\n\n<br>\n\n<br><font color=red size=5 face=宋体><strong>QWidget.subclasses()执行结果如下：</strong></font>\n\n```python\n[<class 'PyQt5.QtWidgets.QAbstractButton'>, <class 'PyQt5.QtWidgets.QFrame'>, <class 'PyQt5.QtWidgets.QAbstractSlider'>, <class 'PyQt5.QtWidgets.QAbstractSpinBox'>, <class 'PyQt5.QtWidgets.QCalendarWidget'>, <class 'PyQt5.QtWidgets.QDialog'>, <class 'PyQt5.QtWidgets.QComboBox'>, <class 'PyQt5.QtWidgets.QDesktopWidget'>, <class 'PyQt5.QtWidgets.QDialogButtonBox'>, <class 'PyQt5.QtWidgets.QDockWidget'>, <class 'PyQt5.QtWidgets.QFocusFrame'>, <class 'PyQt5.QtWidgets.QGroupBox'>, <class 'PyQt5.QtWidgets.QKeySequenceEdit'>, <class 'PyQt5.QtWidgets.QLineEdit'>, <class 'PyQt5.QtWidgets.QMainWindow'>, <class 'PyQt5.QtWidgets.QMdiSubWindow'>, <class 'PyQt5.QtWidgets.QMenu'>, <class 'PyQt5.QtWidgets.QMenuBar'>, <class 'PyQt5.QtWidgets.QOpenGLWidget'>, <class 'PyQt5.QtWidgets.QProgressBar'>, <class 'PyQt5.QtWidgets.QRubberBand'>, <class 'PyQt5.QtWidgets.QSizeGrip'>, <class 'PyQt5.QtWidgets.QSplashScreen'>, <class 'PyQt5.QtWidgets.QSplitterHandle'>, <class 'PyQt5.QtWidgets.QStatusBar'>, <class 'PyQt5.QtWidgets.QTabBar'>, <class 'PyQt5.QtWidgets.QTabWidget'>, <class 'PyQt5.QtWidgets.QToolBar'>, <class 'PyQt5.QtWidgets.QWizardPage'>, <class '__main__.any_parent'>]\n```\n\n","tags":["python","PyQt5"],"categories":["python_PyQt5"]},{"title":"python PyQt5_代码结构","url":"/2023/05/17/python-PyQt5-代码结构/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>PyQt5_代码结构：</strong></font>\n\n<!--more-->\n\n```python\n# 0. 导入需要的包和模块\nfrom PyQt5.Qt import *  # 主要包含了我们常用的一些类, 汇总到了一块\nimport sys\n\n# 创建一个应用程序对象\napp = QApplication(sys.argv)\n# print(app.arguments())\n# print(qApp.arguments())\n\n# 控件的操作\n# 创建控件,设置控件(大小,位置,样式...),事件,信号的处理\n# 2.1 创建控件\n# 当我们创建一个控件之后, 如果说,这个控件没有父控件, 则把它当做顶层控件(窗口)\n# 系统会自动的给窗口添加一些装饰(标题栏), 窗口控件具备一些特性(设置标题,图标)\nwindow = QWidget()\n# window = QPushButton()\n# window = QLabel()\n# 2.2 设置控件\n# window.setText(\"hello sz\")\nwindow.setWindowTitle(\"蛋君威武，霸气！就是忒特娘的怂了\")\nwindow.resize(400, 400)\n\n# 控件也可以作为一个容器(承载其他的控件)\nlabel = QLabel(window)\nlabel.setText(\"xxx\")\nlabel.setWindowTitle(\"xxxxxxx\")\nlabel.move(100, 50)\n# label.show()\n\n# 2.3 展示控件\n# 刚创建好一个控件之后,(这个控件没有什么父控件), 默认情况下不会被展示,只有手动的调用show()才可以\n# 如果说这个控件, 有父控件的,那么一般情况下, 父控件展示之后, 子控件会自动展示\nwindow.show()\n\n# 应用程序的执行, 进入到消息循环\n# 让整个程序开始执行,并且进入到消息循环(无限循环)\n# 检测整个程序所接收到的用户的交互信息\nsys.exit(app.exec_())\n\n# 我们的代码, 到时候的执行方式, 右击, 执行   2, 命令行 python 代码名称\n# 当别人通过命令行启动这个程序的时候,可以设定一种功能(接收命令行传递的参数, 来执行不同的业务逻辑\n# args = sys.argv\n# print(args)\n# if args[1] == '1':\n#     print(\"xxx\")\n# else:\n#     print(\"ooo\")\n\n# sys.exit()\n\n```\n\n","tags":["python","PyQt5"],"categories":["python_PyQt5"]},{"title":"python PyQt5_判定API","url":"/2023/05/17/python-PyQt5-判定API/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>PyQt5_判定API：</strong></font>\n\n<!--more-->\n\n```python\nobjs = [obj, w, btn, label]\nfor o in objs:\n    print(o.isWidgetType()) # 可以遍历所有的api是否为一个控件\n    print(o.inherits('QLabel')) # 遍历所有API是否继承自QLabel\n```\n\n","tags":["python","PyQt5"],"categories":["python_PyQt5"]},{"title":"python PyQt5_信号与槽的建立与基本使用","url":"/2023/05/17/python-PyQt5-信号与槽的建立与基本使用/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>PyQt5_信号与槽的建立与基本使用：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>信号与槽的建立与基本使用：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>信号与槽的使用在PyQt5中十分重要，在GUI编程中尤为重要！</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>其基本原理就是，程序由用户、或者程序内部 > 触发信号 > 执行函数(这个函数就是槽函数，你也可以理解为它其实就是一个普通的函数)。那么该函数会随之而运行，同一个信号可以与一个或者多个槽连接。</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>主要应用场景是：</strong></font>\n  + <font color=#00b2c2 size=2 face=宋体><strong>监听信号，先用用户行为。</strong></font>\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>相关API：</strong></font>\n\n```python\nwidget.信号.connect(槽) # 建立信号与槽之间的联系！\n<对象>.objectNameChanged.disconnect() # 取消<对象>的信号连接\n<对象>.blockSignals() # 暂停、运行，信号槽 blockSignals() 所传递的参数为布尔值\n\nobjectNameChanged(objectName) # 对象名称发生改变时发射此信号\ndestroyed(obj) # 对象销毁的时候，发出信号\nself.obj.seceivers(self.obj.objectNameChanged)  # 查看信号 self.obj.objectNameChanged 下链接的槽.seceivers 方法\n```\n\n","tags":["python","PyQt5"],"categories":["python_PyQt5"]},{"title":"python PyQt5_控件学习","url":"/2023/05/17/python-PyQt5-控件学习/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>控件学习：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>1. 基础控件：</strong></font>\n\n---\n\n<br><font color=#b0171f size=2 face=宋体><strong>**1.1. 按钮：**</strong></font>\n\n```python\nQPushButton # 按钮，可以双击，可以单击，可以右击...\nQCommandLinkButton # 可以加link标签\nQRadioButton # 单选 按钮\nQCheckBox # 复选按钮\n```\n\n---\n\n<br><font color=#b0171f size=2 face=宋体><strong>**1.2. 输入控件：**</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>纯键盘输入：</strong></font>\n\n```python\nQLineEdit    # 单行输入框\nQTextEdit    # 多行文本——可以是富文本、超链接、图片，并不局限于普通文本\nQPlainTextEdit   #  普通文本  只能使用普通文本\nQKeySequenceEdit   # 采集用户输入快捷键\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>**步长调节（QAbstractSpinBox）（键盘+鼠标）：**</strong></font>\n\n```python\nQDateTimeEdit   # 采集时间，可点选上下调节，也可键盘输入  # QDateEdit单独日期   # QDateTime  单独时间\nQSpinBox    # 简单的数字步长调节(整数)\nQDoubleSpinBox   #   浮点数调节\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>**组合框（下拉选择输入）：**</strong></font>\n\n```python\nQComboBox    # 组合框，使用方式：主要是地址点选\nQFontComboBox  # 字体选择\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>**滑块（QAbstractSlider）（鼠标）：**</strong></font>\n\n```python\nQDial   # 旋钮滑块\nQSlider   # 滑块  可做音量调节\nQScrollBar   # 滚动条，可做长篇副文本，图片等窗口展示不出来时可用\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>**橡皮筋选中：**</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>**对话框（QDialog）：**</strong></font>\n\n```python\nQColorDialog   # 颜色对话框   选择颜色\nQFileDialog    # 文件选择对话框，  主要场景是上传文件用的\nQFontDialog   # 字体选择、尺寸等等 对话框\nQInputDialog   # 输入对话框  接收用户输入的，例如要求用户输入验证码，或者注册名字的时候弹窗\n```\n\n+ <font color=#b0171f size=2 face=宋体><strong>**日期：**</strong></font>\n\n```python\nQCalendarWidget   # 日期对话框，例如火车票日期选择\n```\n\n","tags":["python","PyQt5"],"categories":["python_PyQt5"]},{"title":"python PyQt5_Object 父子关系设置与构造","url":"/2023/05/17/python-PyQt5-Object-父子关系设置与构造/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>python PyQt5_Object 父子关系设置与构造：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>继承相关：</strong></font>\n\n```python\n#假如obj1代表一个对象\nobj1.setParent(obj0) # 让obj1继承obj0\nobj1.parent() # 获取obj1的父类\nobj1.children() # 获取obj1的所有直接子对象，并不会获取间接子对象\n\nobj1.findChild(参数1, 参数2, 参数3)\n\nobj1.findChildren(参数1, 参数2, 参数3)\n\n```\n\n---\n\n<br><font color=#f26522 size=4 face=宋体><strong>**示例：**</strong></font>\n\n```python\nobj0 = QObject()\nobj1 = QObject()\nprint('obj0', obj0)\nprint('obj1', obj1)\n\n# 让obj1继承obj0\nobj1.setParent(obj0)\n\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**输出：**</strong></font>\n\n```\n# 输出如下\nobj0 \nobj1 \n\n# 继承之后，地址如下\nobj1 \n\n```\n\n<font color=red size=4 face=宋体><strong>重点：</strong></font><font color=#b0171f size=3 face=宋体><strong>父类继承，只能继承一个，后执行的继承，会覆盖掉先继承的父类</strong></font>\n","tags":["python","PyQt5"],"categories":["python_PyQt5"]},{"title":"python websockets全双工通信","url":"/2023/05/17/python-websockets全双工通信/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>python websockets全双工通信：</strong></font>\n\n<!--more-->\n\n<font color=red size=4 face=宋体><strong>本文搬运自：</strong></font>https://blog.csdn.net/qq_42195302/article/details/120150438\n\n<font color=#f26522 size=4 face=宋体><strong>功能描述：</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>客户端和服务端都可发送或接收数据。发送和接收相互独立，异步并发。</strong></font>\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>运行环境：</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>python3.6.8</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>websockets9.1</strong></font>\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>服务端：</strong></font>\n\n```python\nimport asyncio\nimport websockets\n\nasync def send(websocket):\n    while True:\n        await asyncio.sleep(1)\n        #此协程挂起1s，以切换到其他协程。不加此行不会切换到另一个协程。此处用time.sleep()不能起到这个作用。\n\t    #可以在此产生数据然后send出去。\t\n        await websocket.send(\"hello\")\n        #正常地发送，不会切换到receive()\n        print(\"send hello\")\n\n\nasync def receive(websocket):\n    while True:\n        await asyncio.sleep(1)\n        #此协程挂起1s，以切换到其他协程。不加此行不会切换到另一个协程。此处用time.sleep()不能起到这个作用。\n        greeting = await websocket.recv()\n        #正常地接收，不会切换到send()\n        print(\"receive \"+greeting)\n\n\nasync def hello(websocket, path):\n        a = asyncio.get_event_loop().create_task(send(websocket))\n        b = asyncio.get_event_loop().create_task(receive(websocket))\n        #使用create_task()创建task\n\n        await a\n        await b\n        # ab并发\n        # ab并发，下面这行代码不会执行\n        print(\"wait\")\n        #print(\"wait\")不会执行\n\nstart_server = websockets.serve(hello, \"localhost\", 8766)\n\nasyncio.get_event_loop().run_until_complete(start_server)\nasyncio.get_event_loop().run_forever()\n\n```\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>客户端：</strong></font>\n\n```python\nimport asyncio\nimport websockets\n\nasync def send(websocket):\n    while True:\n        await asyncio.sleep(1)\n        #此协程挂起1s，以切换到其他协程。不加此行不会切换到另一个协程。此处用time.sleep()不能起到这个作用。\n\n        await websocket.send(\"hello\")\n        #正常地发送，不会切换到receive()\n\n        print(\"send hello\")\n\n\nasync def receive(websocket):\n    while True:\n        await asyncio.sleep(1)\n        #此协程挂起1s，以切换到其他协程。不加此行不会切换到另一个协程。此处用time.sleep()不能起到这个作用。\n\n        greeting = await websocket.recv()\n        #正常地接收，不会切换到send()\n        print(\"receive\"+greeting)\n\n\nasync def hello():\n    uri = \"ws://localhost:8766\"\n    async with websockets.connect(uri) as websocket:\n        a = asyncio.get_event_loop().create_task(send(websocket))\n        b = asyncio.get_event_loop().create_task(receive(websocket))\n        await a\n        await b\n        # ab并发，下面这行代码不会执行\n        print(\"wait\")\n        #print(\"wait\")不会执行\n\nasyncio.get_event_loop().run_until_complete(hello())\n\n```\n\n","tags":["python","异步、协程"],"categories":["python_异步"]},{"title":"python PyQt5-pycharm模板","url":"/2023/05/17/python-PyQt5-pycharm模板/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>python PyQt5-pycharm模板：</strong></font>\n\n<!--more-->\n\n```python\n# 导入需要的包和模块\nfrom PyQt5.Qt import *\nimport sys\n\nclass window(QWidget):\n    def __init__(self):\n        super().__init__()\n        self.setWindowTitle(\\$TITLE\\$)\n        self.setFixedSize(500, 200)\n        self.label1()  \n        \n    # label 标签\n    def label1(self):\n        \\$Label\\$\n\nif __name__ == '__main__':\n    # 创建一个应用程序对象\n    app = QApplication(sys.argv)\n    # 调用类、并且实例化\n    window = window()\n    # 展示控件\n    window.show()\n    # 消息循环\n    sys.exit(app.exec_())\n```\n\n","tags":["python","PyQt5"],"categories":["python_PyQt5"]},{"title":"python PyQt5基本使用","url":"/2023/05/17/python-PyQt5基本使用/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>PyQt5基本使用：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>1.1. 安装PyQt5：</strong></font>\n\n```python\n# 这玩意儿是真的恶心，但也真的好用\n# 恶心的是PyQt5 这几个字母，一会大写，一会儿小写，还特娘的有数字，输入起来是真的恶心\n# 但却也是真的特娘的好用，功能忒强大了\npip install PyQt5\n```\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>1.2. PyQt5基本代码结构：</strong></font>\n\n```python\nfrom PyQt5.Qt import * # 主要包含了我们常用的一些类, 汇总到了一块\nimport sys\n# 创建一个应用程序对象\n# sys.argv ==> 当前虚拟环境系统 例如：在(pyqt5_venv)kt@debian:~/Pycharm/项目A 具体路径下执行操作\napp = QApplication(sys.argv)\n# 系统会自动的给窗口添加一些装饰(标题栏), 窗口控件具备一些特性(设置标题,图标)\nwindow = QWidget()\nwindow.setWindowTitle(\"蛋君威武，霸气！就是忒特娘的怂了\")\nwindow.resize(400, 400)\n\n# 展示控件\nwindow.show()\n# 检测整个程序所接收到的用户的交互信息\nsys.exit(app.exec_())\n\n```\n\n---\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>1.3. PyQt5常用控件、代码记录：</strong></font>\n\n```python\nwindow.setFixedSize(500, 200) # setFixedSize() ==> 定死窗口只能以某个数值展示\n```\n\n","tags":["python","PyQt5"],"categories":["python_PyQt5"]},{"title":"Python 各类库的安装","url":"/2023/05/17/Python-各类库的安装/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Python 各类库的安装：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>在python下 各类库的安装，一般来说是比较简单的 直接pip install * 即可</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>但是也有一些库比较特殊，本篇博客将记录各类名字与使用并不一致的库的安装方法</strong></font>\n\n<br>\n\n<font color=#b0171f size=2 face=宋体><strong>cv2库(一个基于BSD许可的跨平台计算机视觉库，内容涵盖人体互动…)</strong></font>\n\n```python\n# 安装命令\npip install opencv-python\n# 导入命令\nimport cv2\n\n# 目前自己配置的库能用的版本是 opencv-python-4.4.0.46\n```\n\n<br>\n\n<font color=#b0171f size=2 face=宋体><strong>PIL库(全称：Python Imaging Library ，python下图像处理标准库)</strong></font>\n\n```python\n# 安装命令\npip3  install pillow\n# 导入命令\nfrom PIL import *   # from PIL import Image\n```\n\n","tags":["python","基础","库"],"categories":["python"]},{"title":"python基础 随机数生成","url":"/2023/05/17/python基础-随机数生成/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>python基础 随机数生成：</strong></font>  \n\n<!--more-->\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>使用zfill填充生成：</strong></font>\n\n```python\nstr(random.randint(0,99999999)).zfill(8)\n```\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>使用string生成：</strong></font>  \n\n```python\nimport string\n\n\"\".join(map(lambda x:random.choice(string.digits), range(8)))\n```\n\n <br>\n\n<font color=#f26522 size=4 face=宋体><strong>使用random sample：</strong></font>  \n\n```python\nimport random\nrandom.sample([\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\"],8)\n\n```\n\n <br>\n\n---\n\n <br><font color=#00b2c2 size=5 face=宋体><strong>随机数字+字母：</strong></font>  \n\n<font color=#f26522 size=4 face=宋体><strong>使用random sample：</strong></font>  \n\n```python\nimport random\nrandom.sample(\"\".join(\"0123456789qazwsxedcrfvtgbyhnujmikolpQAZWSXEDCRFVTGBYHNUJIKOLP\"), 8)\n\n```\n\n","tags":["python","基础"],"categories":["python"]},{"title":"python基础 文件操作相关的函数","url":"/2023/05/17/python基础-文件操作相关的函数/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>python基础 文件操作相关的函数：</strong></font>\n\n<!--more-->\n\n```python\n#复制文件：\nshutil.copyfile(\"oldfile\",\"newfile\") #oldfile和newfile都只能是文件\nshutil.copy(\"oldfile\",\"newfile\") #oldfile只能是文件夹，newfile可以是文件，也可以是目标目录\n\n#复制文件夹：\nshutil.copytree(\"olddir\",\"newdir\") #olddir和newdir都只能是目录，且newdir必须不存在\n\n#重命名文件（目录）\nos.rename(\"oldname\",\"newname\") #文件或目录都是使用这条命令\n\n#移动文件（目录）\nshutil.move(\"oldpos\",\"newpos\") \nshutil.move(\"D:/知乎日报/latest/一张优惠券，换你的通讯录信息，你愿意吗？.pdf\", \"D:/知乎日报/past/\")\n```\n\n---\n\n<br>\n\n<font color=#00b2c2 size=5 face=宋体><strong>**python 异步 读取、写入 文件方式**</strong></font>\n\n```python\nimport aiofiles\n\n# 写入文件\nasync def cpoy_wirte_image(self, path, content):\n    # 异步方式执行with操作,修改为 async with\n    async with aiofiles.open(path, \"wb\") as fp:\n        await fp.write(content)\n        \n# 读取文件\nasync def read_img(self, path):\n\tasync with aiofiles.open(path, \"rb\") as fp:\n\t\tcontent = await fp.read()\n\treturn content\n```\n\n","tags":["python","基础"],"categories":["python_异步"]},{"title":"python基础 运算符的优先顺序","url":"/2023/05/17/python基础-运算符的优先顺序/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>python基础 运算符的优先顺序：</strong></font>\n\n<!--more-->\n\n```javascript\n# 排序\n\n**\n~\n+ - (符号运算符)\n* / // %\n+ - 加减\n<< >>\n&\n^\n|\n== != > >= < <=\nis is not\nnot\nand\nor\n```\n\n![](https://s2.loli.net/2022/06/09/QERqXFYWu1xfGwo.png)\n","tags":["python","基础"],"categories":["python"]},{"title":"python 异步协程","url":"/2023/05/17/python-异步协程/","content":"\n**Python_异步协程：**\n\n<!--more-->\n\n<font color=#00b2c2 size=5 face=宋体><strong>Python_异步协程：</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>基本使用方法：</strong></font>\n\n```python\nasync def func():\nawait asyncio.sleep(3)        # 等待io\nreturn '值'\n\nasync def main():\ntask_list = [asyncio.create_task(func())]\ndone, pending = await asyncio.wait(task_list)       # 定义并发协程    返回值在done中\nasyncio.run(main())            执行\n\n```\n\n\n---\n\n<font color=#f26522 size=4 face=宋体><strong>异步爬虫：</strong></font>\n\n```python\nimport aiohttp\nimport asyncio\n\n\nasync def func(session, url):\nprint('发送请求：', url)\nasync with session.get(url) as response:\ntext = await response.text()\nprint('得到结果：', url, len(text))\nprint('-'*100)\n\nasync def main(data):\nasync with aiohttp.ClientSession() as session:\ntasks = [asyncio.create_task(func(session, url)) for url in data]\nawait asyncio.wait(tasks)\n\nif __name__ == '__main__':\na = ['https://www.biqusa.com/143_143300/', 'https://www.biqusa.com/143_143386/',\n'https://www.biqusa.com/143_143694/', 'https://www.biqusa.com/42_42546/',\n'https://www.biqusa.com/143_143728/']\n\nasyncio.run(main(a))\n\n```\n\n<font color=#f26522 size=4 face=宋体><strong>异步协程和不支持协程的模块 - requests：</strong></font>\n\n```python\nimport aiohttp\nimport asyncio\n\n\nasync def func(session, url):\nprint('发送请求：', url)\nasync with session.get(url) as response:\ntext = await response.text()\nprint('得到结果：', url, len(text))\nprint('-'*100)\n\nasync def main(data):\nasync with aiohttp.ClientSession() as session:\ntasks = [asyncio.create_task(func(session, url)) for url in data]\nawait asyncio.wait(tasks)\n\nif __name__ == '__main__':\na = ['https://www.biqusa.com/143_143300/', 'https://www.biqusa.com/143_143386/',\n'https://www.biqusa.com/143_143694/', 'https://www.biqusa.com/42_42546/', 'https://www.biqusa.com/143_143806/',\n'https://www.biqusa.com/143_143728/']\n\nasyncio.run(main(a))\n\n```\n\n","tags":["python","异步、协程"],"categories":["python_异步"]},{"title":"python nohup命令 后台运行","url":"/2023/05/17/python-nohup命令-后台运行/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>python nohup命令 后台运行</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>nohup 后台运行命令：</strong></font>\n\n```python\n#示例：\nnohup python3 manage.py runserver 0.0.0.0:8899 >8899.log 2>&1 &\n\n# 解析：\n# nohup 运行命令 >日志文件名称 2>&1 &\n# 例如  nohup python3 Main.py &\n# 默认输入为nohup.out\n\n```\n\n","tags":["运维","python"],"categories":["python"]},{"title":"python3_安装CV_2库报错的问题","url":"/2023/05/17/python3-安装CV-2库报错的问题/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>python3_安装CV_2库报错的问题</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**在使用python CV2 库的时候，一直显示报错，报错信息如下**</strong></font>\n\n![](https://s2.loli.net/2022/06/09/WmyjrAQKgw8Be5x.png)\n\n---\n\n\n\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>解决方案：</strong></font><font color=#f26522 size=4 face=宋体><strong>指定安装版本，安装旧版本时，我是过了！这里你也可以尝试以下。</strong></font>\n\n```shell\npip3 install opencv-python==4.2.0.34\n\n# mac 能匹配的库 为 4.4.0.46\n# opencv-python-4.4.0.46\n```\n\n","tags":["python","错误","库"],"categories":["python"]},{"title":"InsecureRequestWarning: Unverified HTTPS request is being made to host","url":"/2023/05/10/InsecureRequestWarning-Unverified-HTTPS-request-is-being-made-to-host/","content":"\n# 关于熊猫代理 warnings.warn\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>错误提示：</strong></font>\n\n```javascript\n~/python3.8_/lib/python3.8/site-packages/urllib3/connectionpool.py:1043: InsecureRequestWarning: Unverified HTTPS request is being made to host 'dtbf.xiongmaodaili.com'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/1.26.x/advanced-usage.html#ssl-warnings\n  warnings.warn(\n```\n\n\n\n<font color=#f26522 size=4 face=宋体><strong># 如果要禁用此警告，但不能只启用验证，请添加此代码</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>在 py 文件头部 导入 urllib3  关闭警告提示即可</strong></font>\n\n```python\nimport urllib3\nurllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)\n```\n\n","tags":["错误","python3","代理"],"categories":["python"]},{"title":"Django_settings.py配置教程","url":"/2023/05/10/Django-settings-py配置教程/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>settings.py配置教程</strong></font>\n\n<!--more-->\n\n```python\n# ALLOWED_HOSTS（当前网站访问权限）\n    # 配置那些计算机有权限访问当前网站 全部网站为*\n    # 例如： ALLOWED_HOSTS = [“*”]\n\n# INSTALLED_APPS（应用注册）\n\t# 例如：’index’ 注意：必须有引号\n\n# BASE_DIR\n\t# BASE_DIR= ‘ ‘ # 返回一个项目的绝对路径\n\n# SECRET_KEY\n\t数据加密，防止网站被跨域攻击\n\n# DEBUG\n\t# 让网站出于开发模式，如果出错，会返回详细情况，如果开发完成，一定要调成false\n\n# MIDDLEWARE\n\t# 中间件\n\n# ROOT_URLCONF\n\t# 网站入口，根路由配置\n\n# TEMPLATES\n\t# 配置html静态文件的\n\n# WSGI_APPLICATION\n\t# 配置开发服务器的\n\n# DATABASES\n\t# 配置数据库的\n\n# AUTH_PASSWORD_VALIDATORS\n\t#配置用户密码加密的\n\n# LANGUAGE_CODE\n\t# 网站默认语言\n    \n# LANGUAGE_CODE\n\t# 网站默认语言\n    \n# 修改中文 讲en-us  >  zh-hans\n\t# LANGUAGE_CODE = 'zh-hans'\n# TIME_ZONE\n\t# UTC= 国际化时间  Asia/Shanghai > 亚洲上海时间\n\t# TIME_ZONE = 'Asia/Shanghai'\n```\n\n","tags":["python","django"],"categories":["python","django"]},{"title":"Sublime Text 4 激活码于汉化教程","url":"/2023/03/20/Sublime-Text-4-激活码于汉化教程/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>Sublime Text 4 激活码于汉化教程：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>2021年5月20日 Sublime Text 4 稳定版终于正式发布了！7月14日 Sublime Text 4 又更新了一版</strong></font>\n\n<font color=red size=4 face=宋体><strong>**1. 大版亮点：**</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>1、许可证更改：Sublime Text License 密钥（注册码）不再与独立的主要版本绑定，而是对购买后 3 年内的所有更新均有效，不过使用更新的版本需要升级 License。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>2、支持多 tab 选项卡：方便分割视图，支持通过界面或内置命令行使用。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>3、支持 Apple Silicon 和 Linux ARM64：Sublime Text for Mac 包含对 Apple Silicon 处理器的原生支持，Linux ARM64 builds 在树莓派等设备中可用。\n4、全新的 UI 界面</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>5、语境感知自动补全：该版本重写了自动补全引擎，使之能够基于项目中的已有代码提供智能补全。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>6、支持 TypeScript、JSX 和 TSX</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>7、语法定义升级：语法高亮引擎全新升级，能够处理非确定性语法、多行语句、lazy embed 和语法继承。此外，内存使用降低，加载速度更快。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>8、GPU 渲染：Sublime Text 4 稳定版在渲染界面时，能够在 Linux、Mac 和 Windows 系统中利用 GPU，从而带来流畅的 UI 界面，分辨率最高可达 8K，且消耗的能源更少。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>9、Python API 升级：Sublime Text 新版本 API 升级至 Python 3.8，同时具备对 Sublime Text 3 软件包的向后兼容性。Python API 新增了许多特性，如允许 LSP 等插件更好地运行。</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>10、兼容性：Sublime Text 4 完全兼容 Sublime Text 3，可以自动接收旧版本的会话和配置。Sublime Text 还支持 3、4 版本的分开运行。</strong></font>\n\n<br>\n\n<font color=#f26522 size=4 face=宋体><strong>官网下载地址：[`点击下载`](https://www.sublimetext.com/download)</strong></font>\n<font color=#f26522 size=4 face=宋体><strong>BDyun-直链下载：</strong></font>\n<font color=#f26522 size=4 face=宋体><strong>版本信息(Sublime Text4)：Build 4126</strong></font>\n\n<font color=#00b2c2 size=4 face=宋体><strong>Mac版：[`点击下载`](https://bd.bcebos.com/v1/xly-icafe/sublime_text_build_4126_mac-20220215070420-foetmn.zip)</strong></font>\n\n<font color=#00b2c2 size=4 face=宋体><strong>Windos版：[`点击下载`](https://bd.bcebos.com/v1/xly-icafe/sublime_text_build_4126_x64_setup-20220215070548-f5atsv.exe)</strong></font>\n\n<font color=#00b2c2 size=4 face=宋体><strong>Linux版：[`X86点击下载`](https://bd.bcebos.com/v1/xly-icafe/sublime_text_build_4126_x64.tar-20220215070629-mdmt8r.xz)、[`ARM64点击下载`](https://bd.bcebos.com/v1/xly-icafe/sublime_text_build_4126_arm64.tar-20220215070654-dgee3e.xz)</strong></font>\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**软件激活：**</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>安装完如果弹窗需要输入授权，直接复制下面注册码粘贴点击 Use License，</strong></font>\n\n<font color=#b0171f size=2 face=宋体><strong>如果没有有弹窗，点击菜单栏的『Help -> Enter License』弹出激活窗口，输入下面的注册码然后点击「Use License」</strong></font>\n\n\n\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>**1.1. 注册码（全部需要复制粘贴）：**</strong></font>\n\n```shell\n—– BEGIN LICENSE —–\n\nMifeng User\n\nSingle User License\n\nEA7E-1184812\n\nC0DAA9CD 6BE825B5 FF935692 1750523A\n\nEDF59D3F A3BD6C96 F8D33866 3F1CCCEA\n\n1C25BE4D 25B1C4CC 5110C20E 5246CC42\n\nD232C83B C99CCC42 0E32890C B6CBF018\n\nB1D4C178 2F9DDB16 ABAA74E5 95304BEF\n\n9D0CCFA9 8AF8F8E2 1E0A955E 4771A576\n\n50737C65 325B6C32 817DCB83 A7394DFA\n\n27B7E747 736A1198 B3865734 0B434AA5\n\n—— END LICENSE ——\n```\n\n![激活码](https://s2.loli.net/2022/06/09/x9pVQDIPgUZ5Wtn.jpg)\n\n---\n\n<br>\n\n<font color=#00b2c2 size=5 face=宋体><strong>**软件汉化：**</strong></font>\n\n+ <font color=#b0171f size=2 face=宋体><strong>1、点击 Tools—Install Package Control，（安装包控件比较慢，并且没有反应，等待数分钟后会有弹窗）</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>2、点击确定按钮</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>3、菜单点击Preferences – Package Control，选择 Install Package</strong></font>\n+ <font color=#b0171f size=2 face=宋体><strong>4、输入 ChineseLocalzations 可见中文包！选中即可安装！</strong></font>\n  ![1630993909-d1be2f8c031ea28](https://s2.loli.net/2022/06/09/M7lZUskgtYI6TQO.jpg)\n","tags":["破解","软件"],"categories":["工具"]},{"title":"Django_templates模版配置","url":"/2023/03/20/Django-templates模版配置/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>Django_templates模版配置：</strong></font>\n\n<!--more-->\n\n<font color=#00b2c2 size=4 face=宋体><strong>**1. djiango篇：**</strong></font>\n\n+ <font color=#f26522 size=3 face=宋体><strong>**1. 进入虚拟环境**</strong></font>\n\n```shell\nsource /bin/activate\n# 例如: source /home/kevin/djiango_venv/bin/activate\n```\n\n- <font color=#f26522 size=3 face=宋体><strong>**2.创建网站项目工程**</strong></font>\n\n```shell\n# django-admin startproject <网站工程名>\n# 创建的工程在当前目录下，而非虚拟环境的目录下\n# 虚拟环境只是一个python_djiango的配置环境，不是整个项目的文件\ndjango-admin startproject mysite\n```\n\n+ <font color=#f26522 size=3 face=宋体><strong>**3.django 框架中添加子应用**</strong></font>\n```shell\n# python manage.py startapp <子应用名称>\npython manage.py startapp index  # 创建了一个名叫 的文件夹\n```\n<font color=#b0171f size=2 face=宋体><strong>**配置完app目录后——settings.py的配置**</strong></font>\n\n\n```python\nALLOWED_HOSTS = [\"*\"]\nINSTALLED_APPS = ['app',]\nLANGUAGE_CODE = 'zh-hans'\nTIME_ZONE = 'Asia/Shanghai'\nUSE_TZ = False\n```\n\n- <font color=#f26522 size=3 face=宋体><strong>**4.创建templates（模版文件）**</strong></font>\n\n  - <font color=#b0171f size=2 face=宋体><strong>直接使用命令创建templates</strong></font>\n\n  ```shell\n  # 需要注意这里的templates是要在项目根目录下创建\n  # 也就是在文件夹下有manage.py的文件夹创建\n  mkdir templates\n  ```\n\n  \n\n  \n\n  - <font color=#b0171f size=2 face=宋体><strong>templates创建完成后的settings.py的配置</strong></font>\n\n  ```python\n  TEMPLATES = [\n      {\n          'BACKEND': 'django.template.backends.django.DjangoTemplates',\n          'DIRS': [os.path.join(BASE_DIR, 'templates')],\n          'APP_DIRS': True,\n          'OPTIONS': {\n              'context_processors': [\n                  'django.template.context_processors.debug',\n                  'django.template.context_processors.request',\n                  'django.contrib.auth.context_processors.auth',\n                  'django.contrib.messages.context_processors.messages',\n              ],\n          },\n      },\n  ]\n  ```\n\n  \n\n- <font color=#f26522 size=3 face=宋体><strong>**5. templates下配置与其他模版一样**</strong></font>\n\n  - <font color=#b0171f size=2 face=宋体><strong>只有在views.py下的配置不一样 # 一般配置为HttpResponse ，而….返回的是render</strong></font>\n\n    ```python\n    class index(View):\n    def get(self, request):\n        # print(request)\n        return render(request, 'index.html')\n    ```\n","tags":["python","django","模板"],"categories":["python","django"]},{"title":"ThreadPoolExecutor多线程返回值","url":"/2023/03/20/ThreadPoolExecutor多线程返回值/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>ThreadPoolExecutor多线程返回值</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**方法一：使用threading：**</strong></font>\n<font color=#b0171f size=2 face=宋体><strong>在threading中，并没有实现返回值的方法，我们可以用数据库或者是全局变量来实现返回值的获取。这里使用的是全局变量。</strong></font>\n\n```python\ndef thread_function(age):\n    for i in age:\n        i += 1\n        q.put(\n            {\n                'age': i\n             }\n        )\ndef run_threading(target, args, count):\n    \"\"\"\n    :param target: 目标函数\n    :param args: 函数参数\n    :param count: 线程数量\n    \"\"\"\n    ts = []\n    for i in range(count):\n        t = Thread(target=target, args=args)\n        ts.append(t)\n    [i.start() for i in ts]\n    [i.join() for i in ts]\n\nif __name__ == '__main__':\n    ages = [1, 3, 4]\n    # 1111\n    run_threading(thread_function, (ages,), 1)\n    output = []\n    while not q.empty():\n        output.append(q.get())\n    print output\n```\n\n\n\n\n\n<font color=red size=5 face=宋体><strong>**输出：**</strong></font>\n\n```python\n[{'age': 2}, {'age': 4}, {'age': 5}]\n\nProcess finished with exit code 0\n```\n\n\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**方法二：使用ThreadPoolExecutor的submit：**</strong></font>\n\n<font color=red size=2 face=宋体><strong>从3.2开始，标准库为我们提供了`concurrent.futures`模块，它提供了`ThreadPoolExecutor`和`ProcessPoolExecutor`两个类，实现了对`threading`和`multiprocessing`的进一步抽象。这里主要关注线程池，不仅可以帮我们自动调度线程，还可以做到：</strong></font>\n\n+ 1. <font color=#b0171f size=2 face=宋体><strong>主线程可以获取某一个线程（或者任务的）的状态，以及返回值。</strong></font>\n+ 2. <font color=#b0171f size=2 face=宋体><strong>当一个线程完成的时候，主线程能够立即知道。</strong></font>\n+ 3. <font color=#b0171f size=2 face=宋体><strong>让多线程和多进程的编码接口一致。</strong></font>\n\n```python\ndef thread_function(age):\n    return age+1\n\ndef run_thread_pool_sub(target, args, max_work_count=3):\n    with ThreadPoolExecutor(max_workers=max_work_count) as t:\n        res = [t.submit(target, i) for i in args]\n        return res\nif __name__ == '__main__':\n    ages = [1, 3, 4]\n    res = run_thread_pool_sub(thread_function, ages)\n    for future in as_completed(res):\n        data = future.result()\n        print data\n```\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>`as_completed()`方法是一个生成器，在没有任务完成的时候，会阻塞，在有某个任务完成的时候，会yield这个任务，就能执行for循环下面的语句，然后继续阻塞住，循环到所有的任务结束。从结果也可以看出，先完成的任务会先通知主线程</strong></font>\n\n\n\n<font color=red size=5 face=宋体><strong>**输出：**</strong></font>\n\n```python\n4\n2\n5\nProcess finished with exit code 0\n```\n\n\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**这里可以看出submit的返回是无序的**</strong></font>\n<font color=#b0171f size=2 face=宋体><strong>**这里看下源码：**</strong></font>\n\n```python\ndef submit(self, fn, *args, **kwargs):\n    with self._shutdown_lock:\n        if self._shutdown:\n            raise RuntimeError('cannot schedule new futures after shutdown')\n        f = _base.Future()\n        w = _WorkItem(f, fn, args, kwargs)\n        self._work_queue.put(w)\n        self._adjust_thread_count()\n        return f\n    submit.__doc__ = _base.Executor.submit.__doc__\n```\n\n\n\n\n\n<font color=red size=2 face=宋体><strong>**注意的是，它就是执行一个单独的函数，并且返回的是future对象(具体请看官方文档)。**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**方法三：使用ThreadPoolExecutor的map：**</strong></font>\n\n```python\ndef thread_function(age):\n    for i in age:\n        yield i+1\n\ndef run_thread_pool(target, args, max_work_count=6):\n    with ThreadPoolExecutor(max_workers=max_work_count) as t:\n        res = t.map(target, args)\n        return res\n\nif __name__ == '__main__':\n    ages = [1, 3, 4]\n    # 2222\n    res = run_thread_pool(target=thread_function, args=(ages,))\n    for j in res:\n        for i in j:\n            print(i)\n```\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**输出：**</strong></font>\n\n```python\n2\n4\n5\n\nProcess finished with exit code 0\n```\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**这里看出map的输出是有序的**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**这里看下map的源码：**</strong></font>\n\n```python\ndef map(self, fn, *iterables, **kwargs):\n    \"\"\"Returns an iterator equivalent to map(fn, iter).\n    Args:\n        fn: A callable that will take as many arguments as there are\n            passed iterables.\n        timeout: The maximum number of seconds to wait. If None, then there\n            is no limit on the wait time.\n    Returns:\n        An iterator equivalent to: map(func, *iterables) but the calls may\n            be evaluated out-of-order.\n    Raises:\n        TimeoutError: If the entire result iterator could not be generated\n            before the given timeout.\n        Exception: If fn(*args) raises for any values.\n    \"\"\"\ntimeout = kwargs.get('timeout')\nif timeout is not None:\n    end_time = timeout + time.time()\n    fs = [self.submit(fn, *args) for args in itertools.izip(*iterables)]\n    # Yield must be hidden in closure so that the futures are submitted\n    # before the first iterator value is required.\n    def result_iterator():\n        try:\n            # reverse to keep finishing order\n            fs.reverse()\n            while fs:\n                # Careful not to keep a reference to the popped future\n                if timeout is None:\n                    yield fs.pop().result()\n                else:\n                    yield fs.pop().result(end_time - time.time())\n        finally:\n            for future in fs:\n                future.cancel()\n        return result_iterator()\n```\n\n\n\n<font color=red size=5 face=宋体><strong>**它的参数是个iterables，所以当参数为列表字典等时，只需要写一个map函数就行了，而且它的返回值也是个iterable。**</strong></font>\n","tags":["python","基础"],"categories":["python"]},{"title":"xmind_2019版_破解版","url":"/2023/03/20/xmind-2019版-破解版/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>xmind_2019版_破解版</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**思维导图软件下载：**</strong></font>\n\n- <font color=#00b2c2 size=4 face=宋体><strong>**xmind(windos)：**</strong></font>\n  - <font color=#b0171f size=3 face=宋体><strong>**2019破解版：**[`点击下载`](https://bd.bcebos.com/v1/xly-icafe/xmind2019思维导图破解版-20211108091111-sjykek.rar)</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**破解教程：**</strong></font>\n\n- <font color=red size=2 face=宋体><strong>如图：你的电脑是32位的，就选32位破解程序，是64的 就选64位破解程序</strong></font>\n- ![img](https://s2.loli.net/2022/06/09/Vsh12aeIzpyRdHm.png)\n- <font color=red size=2 face=宋体><strong>将文件打开得到两个文件，将这两个文件复制到resources目录下，这个目录是你的xmind安装目录下的一个子目录。</strong></font>\n- ![img](https://s2.loli.net/2022/06/09/LD5o8z4TQAcuvXU.png)\n- <font color=red size=2 face=宋体><strong>将文件打开得到两个文件，将这两个文件复制到</strong></font>\n","tags":["破解","软件"],"categories":["工具"]},{"title":"windos 11 镜像下载","url":"/2023/03/20/windos-11-镜像下载/","content":"\n# <font color=red size=7 face=宋体><strong>windos 11 镜像下载：</strong></font>\n\n<!--more-->\n\n<font color=#00b2c2 size=5 face=宋体><strong>**1. Windows 11**</strong></font>\n\n- <font color=#f26522 size=4 face=宋体><strong>**Preview**</strong></font>\n  - <font color=#b0171f size=3 face=宋体><strong>版本号：22454（发布时间：2021-09-11）</strong></font>\n    - Windows 11 Insider Preview (Dev Channel) – Build 22454\n      - <font color=#f26522 size=2 face=宋体><strong>**下载链接：**[`ED2K`](ed2k://|file|Windows11_InsiderPreview_Client_x64_zh-cn_22454.iso|4903213056|A4FD6D7058261FCB31D076BA727FAF77|/)、[`BT`](magnet:?xt=urn:btih:72DCA2544C2135412A0725307FB2C7CD97D22261&dn=Windows11_InsiderPreview_Client_x64_zh-cn_22454.iso&xl=4903213056)</strong></font>\n  - <font color=#b0171f size=3 face=宋体><strong>版本号：22000.194（发布时间：2021-09-23）</strong></font>\n    - Windows 11 Insider Preview (Dev Channel) – Build 22454\n      - <font color=#f26522 size=2 face=宋体><strong>**下载链接：**[`ED2K`](ed2k://|file|Windows11_InsiderPreview_Client_x64_zh-cn__22000.iso|5517273088|DFD1AE88E36516B87382FC3D3D3F46AD|/)、[`BT`](magnet:?xt=urn:btih:7E45EBE420A55426FE28933B70227279517A1B11&dn=Windows11_InsiderPreview_Client_x64_zh-cn__22000.iso&xl=5517273088)</strong></font>\n  - <font color=#b0171f size=3 face=宋体><strong>版本号：22000.132（发布时间：2021-09-11）</strong></font>\n    - Windows 11 Insider Preview (Dev Channel) – Build 22454\n      - <font color=#f26522 size=2 face=宋体><strong>**下载链接：**[`ED2K`](ed2k://|file|Windows11_InsiderPreview_Client_x64_zh-cn_22000.iso|5506693120|0D9E847ABF673C87F60737633AD95675|/)、[`BT`](magnet:?xt=urn:btih:575BBD64A372284C92A304A2492D7E2F7DCE3BFE&dn=Windows11_InsiderPreview_Client_x64_zh-cn_22000.iso&xl=5506693120)</strong></font>\n- <font color=#f26522 size=4 face=宋体><strong>**21H2**</strong></font>\n  - <font color=#b0171f size=3 face=宋体><strong>版本号：Updated October 2021（发布时间：2021-10-19）</strong></font>\n    - Windows 11 (business editions), version 21H2 (updated October 2021) (x64) – DVD (Chinese-Simplified)\n      - <font color=#f26522 size=2 face=宋体><strong>**下载链接：**[`ED2K`](ed2k://|file|zh-cn_windows_11_business_editions_version_21h2_updated_october_2021_x64_dvd_a84e149f.iso|5419143168|B0C4BE7271CD65B2173326239D4F8BA2|/)、[`BT`](magnet:?xt=urn:btih:98BB0A1703D5E36ADCE9BAAA1E02D86C29C4DF95&dn=zh-cn_windows_11_business_editions_version_21h2_updated_october_2021_x64_dvd_a84e149f.iso&xl=5419143168)</strong></font>\n    - Windows 11 (consumer editions), version 21H2 (updated October 2021) (x64) – DVD (Chinese-Simplified)\n      - <font color=#f26522 size=2 face=宋体><strong>**下载链接：**[`ED2K`](ed2k://|file|zh-cn_windows_11_consumer_editions_version_21h2_updated_october_2021_x64_dvd_47addd14.iso|5523668992|64F5B433CC2A9814DC4D04DC265E4D3B|/)、[`BT`](magnet:?xt=urn:btih:5B3F3DA450784FB27609212721562869AF226263&dn=zh-cn_windows_11_consumer_editions_version_21h2_updated_october_2021_x64_dvd_47addd14.iso&xl=5523668992)</strong></font>\n  - <font color=#b0171f size=3 face=宋体><strong>版本号：Release（发布时间：2021-10-04）</strong></font>\n    - Windows 11 (business editions) (x64) – DVD (Chinese-Simplified)\n      - <font color=#f26522 size=2 face=宋体><strong>**下载链接：**[`ED2K`](ed2k://|file|zh-cn_windows_11_business_editions_x64_dvd_f5f6bcbd.iso|5413181440|88CA1AE28F5F8A238647561B5C00E511|/)、[`BT`](magnet:?xt=urn:btih:7D77AF4A99A4C5AEAB1D401755E473BA7EBD7B1C&dn=zh-cn_windows_11_business_editions_x64_dvd_f5f6bcbd.iso&xl=5413181440)</strong></font>\n    - Windows 11 (business editions) (x64) – DVD (Chinese-Simplified)\n      - <font color=#f26522 size=2 face=宋体><strong>**下载链接：**[`ED2K`](ed2k://|file|zh-cn_windows_11_consumer_editions_x64_dvd_904f13e4.iso|5517273088|DFD1AE88E36516B87382FC3D3D3F46AD|/)、[`BT`](magnet:?xt=urn:btih:CF0A537944C001AD86B1CA058E8D877F5F022FC6&dn=zh-cn_windows_11_consumer_editions_x64_dvd_904f13e4.iso&xl=5517273088)</strong></font>\n- <font color=#f26522 size=4 face=宋体><strong>**ARM**</strong></font>\n  - <font color=#b0171f size=3 face=宋体><strong>版本号：Release（发布时间：2021-10-05）</strong></font>\n    - Windows 11, version 21H2 (ARM64) – DVD (Chinese-Simplified)\n      - <font color=#f26522 size=2 face=宋体><strong>**下载链接：**[`ED2K`](ed2k://|file|SW_DVD9_Win_Pro_11_21H2_64ARM_ChnSimp_Pro_Ent_EDU_N_MLF_-2_X22-82731.ISO|5608900608|5D3A8B542CBAB917C7AE43BCD17AC28E|/)、[`BT`](magnet:?xt=urn:btih:0DED4238547697570825E651B4D63849A1FBD4AB&dn=SW_DVD9_Win_Pro_11_21H2_64ARM_ChnSimp_Pro_Ent_EDU_N_MLF_-2_X22-82731.ISO&xl=5608900608)</strong></font>\n","tags":["镜像","windos11"],"categories":["镜像"]},{"title":"V2ray官方一键安装脚本(2021/10)","url":"/2023/03/20/V2ray官方一键安装脚本-2021-10/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>V2ray官方一键安装脚本(2021/10)</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**v2ray一键安装脚本（21/10新）：**</strong></font>\n\n- <font color=#b0171f size=3 face=宋体><strong>之前一直用SSR，但最近两天发现SSR老是自动掉，然后就重新做了个vmess</strong></font>\n- <font color=#b0171f size=3 face=宋体><strong>记录以下过程，以免以后要用到的时候找不到了</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**执行官方安装脚本：**</strong></font>\n\n```shell\napt-get install -y curl\nbash <(curl -L https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install-release.sh)\n```\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**编辑配置文件：**</strong></font>\n\n```python\n# 这是我使用的配置文件，你可以拿去做模板，然后自己修改\nwget --no-check-certificate https://teadan.com/all_bash/v2_s.json  -O -> /usr/local/etc/v2ray/config.json\n# 下载的配置文件放在     /usr/local/etc/v2ray/config.json\n# 其中    port：是你客户端连接的端口\n# id：是你客户端连接时用的UUID，这个你网上搜以下，‘‘随机生成UUID’，就可以生成了\n```\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**重启服务：**</strong></font>\n\n```python\n# 设置开机自自动\nsystemctl enable v2ray.service\n# 如果你不想开机自启动了，可以删除\nsystemctl disable v2ray.service\n# 重启v2ray服务\nservice v2ray restart\n\n```\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**常用命令：**</strong></font>\n\n```python\nservice v2ray restart   # 重启\nservice v2ray force-reload  # 强制重启\nservice v2ray start   # 启动\nservice v2ray stop   # 停止\nservice v2ray status  # 状态查看\nservice v2ray reload   # 重装\n```\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**测试V2Ray配置文件：**</strong></font>\n\n```python\n/usr/local/bin/v2ray -test -config /usr/local/etc/v2ray/config.json\n```\n\n\n\n# <font color=#00b2c2 size=5 face=宋体><strong>安装成功：</strong></font>\n\n```python\nwarning: The following are the actual parameters for the v2ray service startup.\nwarning: Please make sure the configuration file path is correctly set.\n~~~~~~~~~~~~~~~~\n[Unit]\nDescription=V2Ray Service\nDocumentation=https://www.v2fly.org/\nAfter=network.target nss-lookup.target\n\n[Service]\nUser=nobody\nCapabilityBoundingSet=CAP_NET_ADMIN CAP_NET_BIND_SERVICE\nAmbientCapabilities=CAP_NET_ADMIN CAP_NET_BIND_SERVICE\nNoNewPrivileges=true\nExecStart=/usr/local/bin/v2ray -config /usr/local/etc/v2ray/config.json\nRestart=on-failure\nRestartPreventExitStatus=23\n\n[Install]\nWantedBy=multi-user.target\n# In case you have a good reason to do so, duplicate this file in the same directory and make your customizes there.\n# Or all changes you made will be lost!  # Refer: https://www.freedesktop.org/software/systemd/man/systemd.unit.html\n[Service]\nExecStart=\nExecStart=/usr/local/bin/v2ray -config /usr/local/etc/v2ray/config.json\n~~~~~~~~~~~~~~~~\nwarning: The systemd version on the current operating system is too low.\nwarning: Please consider to upgrade the systemd or the operating system.\n```\n\n\n\n\n\n![安装成功示意图](https://s2.loli.net/2022/06/09/1YKf3x6zs9JlaLo.png)\n","tags":["代理","梯子"],"categories":["工具"]},{"title":"centos7 安装 MongoDB","url":"/2023/03/20/centos7-安装-MongoDB/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>centos7 安装 MongoDB：</strong></font>\n\n<!--more-->\n\n------\n\n- <font color=#f26522 size=4 face=宋体><strong>Linux(centos_7) 下安装</strong></font>\n- [`官网自主选择下载`](https://www.mongodb.com/try/download/community)\n- [`MongoDB下载地址`](https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel70-5.0.3.tgz)\n- [`MongoDB_shell地址`](https://fastdl.mongodb.org/linux/mongodb-shell-linux-x86_64-rhel70-5.0.3.tgz)\n- <font color=#f26522 size=4 face=宋体><strong>Linux 可直接用命令下载</strong></font>\n\n```python\n # 先获取root权限\nsudo -i # 然后输入密码\n# 下载mongoDB\nwget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel70-5.0.3.tgz\n# 解压到当前文件夹（最好用wget的方式下载，我用浏览器的方式下载后，发现解压出错）\ntar -xzvf mongodb-linux-x86_64-rhel70-5.0.3.tgz\n# 移动文件到/usr/local/ 目录下，一般放在这个目录下，不用配置环境。\nmv mongodb-linux-x86_64-rhel70-5.0.3 mongodb\nmv mongodb /usr/local/\n```\n\n- <font color=red size=4 face=宋体><strong>mongodb配置</strong></font>\n\n```python\n# 创建数据库存放目录和日志存放目录\nmkdir -p /usr/local/mongodb/data /usr/local/mongodb/logs\n# 启动mongodb服务\n/usr/local/mongodb/bin/mongod --dbpath=/usr/local/mongodb/data --logpath=/usr/local/mongodb/logs/mongodb.log --logappend -port=27017 --fork\n# 后期可直接用命令开启\n/usr/local/mongodb/bin/mongo\n```\n\n\n\n# <font color=#00b2c2 size=5 face=宋体><strong>使用官方命令安装最新版本：</strong></font>\n\n[`教程地址`](https://docs.mongodb.com/manual/tutorial/install-mongodb-on-red-hat/)\n\n+ <font color=#f26522 size=4 face=宋体><strong>安装yum源文件(一)</strong></font>\n\n```python\nvim /etc/yum.repos.d/mongodb-org-5.0.repo\n#\n#\n[mongodb-org-5.0]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/5.0/x86_64/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-5.0.asc\n```\n\n\n\n\n\n- <font color=#f26522 size=4 face=宋体><strong>安装yum源文件(二)</strong></font>\n\n```python\n# 1、安装mongodb\nsudo yum install -y mongodb-org\n#\n#\n# 2、或者，要安装特定版本的 MongoDB，请单独指定每个组件包并将版本号附加到包名称，如下例所示（安装其中一个）：\nsudo yum install -y mongodb-org-5.0.2 mongodb-org-database-5.0.2 mongodb-org-server-5.0.2 mongodb-org-shell-5.0.2 mongodb-org-mongos-5.0.2 mongodb-org-tools-5.0.2\n# 3、您可以指定任何可用的 MongoDB 版本。但是yum ，当新版本可用时升级包。为防止意外升级，请固定封装。要固定包，请将以下exclude指令添加到您的/etc/yum.conf文件中\nexclude=mongodb-org,mongodb-org-database,mongodb-org-server,mongodb-org-shell,mongodb-org-mongos,mongodb-org-tools\n```\n\n\n\n\n\n# <font color=#00b2c2 size=5 face=宋体><strong>安装完成——命令篇：</strong></font>\n\n```python\n# 创建mongo日志文件夹 这两个文件夹如果不存在  官方版安装会无法启动，并且需要赋予权限\nmkdir /var/lib/mongo /var/log/mongodb\nsudo chown -R mongod:mongod /var/lib/mongo\nsudo chown -R mongod:mongod /var/log/mongodb\n\n# 启动 MongoDB\nsudo systemctl start mongod\nsudo systemctl daemon-reload\n\n# 验证 MongoDB 是否已成功启动\nsudo systemctl status mongod\nsudo systemctl enable mongod\n\n# 停止 MongoDB\nsudo systemctl stop mongod\n\n# 重启MongoDB\nsudo systemctl restart mongod\n\n# 开始使用 MongoDB\nmongosh\n\n# 停止 MongoDB\nsudo service mongod stop\n\n# 删除包\nsudo yum erase $(rpm -qa | grep mongodb-org)\n\n# 删除数据目录\nsudo rm -r /var/log/mongodb\nsudo rm -r /var/lib/mongo\n```\n","tags":["mongodb","数据库","linux"],"categories":["数据库"]},{"title":"ubuntu 安装nodejs-cnpm","url":"/2023/03/20/ubuntu-安装nodejs-cnpm/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>安装nodejs-cnpm：</strong></font>\n\n<!--more-->\n\n------\n\n<font color=#f26522 size=4 face=宋体><strong>详情：</strong></font>\n\n+ <font color=#b0171f size=3 face=宋体><strong>`系统 ： `ubuntu 20.04</strong></font>\n+ <font color=#b0171f size=3 face=宋体><strong>`Node 版本 ： `v16.13.0</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**[`nodejs官方网址`](https://nodejs.org/)**</strong></font>\n<font color=#f26522 size=4 face=宋体><strong>**截止2021/10/28最新版本nodejs：[`点击下载`](https://nodejs.org/dist/v16.13.0/node-v16.13.0-linux-x64.tar.xz)**</strong></font>\n\n```shell\n# 下载完成之后 使用：tar -xf <文件>  解压 *.tar.xz文件\ntar -xf node-v16.13.0-linux-x64.tar.xz\n\n# 将文件移动到opt文件夹下\nmv node-v16.13.0-linux-x64 /opt\n\n# 创建全局变量，使node在任何地方都能使用\nsudo ln -s /opt/node-v16.13.0-linux-x64/bin/node /usr/local/bin/node\nsudo ln -s /opt/node-v16.13.0-linux-x64/bin/npm /usr/local/bin/npm\n\n# 到此 node和 npm 就算安装完成了\nnode -v   # 查看node版本信息\nnpm -v   # 查看npm版本信息\n\n# 接下来，开始安装cnpm\n# cnpm是npm的国内源，其服务器是淘宝的，所以国内比较快\n# cnpm的执行过程是先去淘宝源下找软件，当淘宝源下没有所需要的包，会自动到npm服务器下寻找包\nnpm install -g cnpm --registry=https://registry.npm.taobao.org  # 定义cnpm淘宝源码\nsudo ln -s /opt/node-v16.13.0-linux-x64/bin/cnpm /usr/local/bin/cnpm  #   创建全局变量\n```\n","tags":["ubuntu","linux","nodejs"],"categories":["linux"]},{"title":"python 主动抛出异常","url":"/2023/03/20/python-主动抛出异常/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>python_主动抛出异常：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>有时候我们需要使用主动异常来测试，或者重试代码</strong></font>\n\n```python\nraise IndexError\n\ntry:\n    raise IndexError\nexcept IndexError:\n    print(f'主动异常抛出  IndexError ')\n```\n","tags":["错误","基础"],"categories":["python"]},{"title":"GitHub静态文件加速","url":"/2023/03/20/GitHub静态文件加速/","content":"\n### GitHub静态文件加速\n<!--more-->\n```javascript\n# 文件地址\nhttps://cdn.jsdelivr.net/gh/vin/static@main/static/lib/init.css\n\n# 文件地址示例\nhttps://cdn.jsdelivr.net/gh/<用户名>/<仓库名>@main<仓库下文件路径>\n```\n\n","tags":["GitHub","奇淫技巧"],"categories":["工具"]},{"title":"python task 列表返回值的获取","url":"/2023/03/20/python-task-列表返回值的获取/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>python task 列表返回值的获取（异步返回值）：</strong></font>\n\n<!--more-->\n\n技术获取地址 ：https://juejin.cn/s/python%20%E5%8D%8F%E7%A8%8B%E8%BF%94%E5%9B%9E%E5%80%BC\n\n```python\nasync def RunAsync(self, data_list):\n    sem = asyncio.Semaphore(1)\n    async with aiohttp.ClientSession() as session:\n        tasks = [asyncio.create_task(self.get_all_audio(session, sem, data)) for data in data_list]\n        await asyncio.wait(tasks)\n        s_ = [i.result() for i in tasks]\n        print(s_)\n```\n\n![image-20230313165657958](https://s2.loli.net/2023/03/20/AiWjN9ogn28Q1aq.png)\n\n","tags":["基础","异步、协程"],"categories":["python_异步"]},{"title":"HTML特殊符号显示","url":"/2023/03/20/HTML特殊符号显示/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**HTML特殊符号显示**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**想要在html页面中显示特殊符号 需要做转义**</strong></font>\n\n![img](https://s2.loli.net/2022/06/19/9cM1HJdy5XQqLfu.png)\n","tags":["html"],"categories":["前端"]},{"title":"python中多层List展平为一层","url":"/2023/03/20/python中多层List展平为一层/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**python中多层List展平为一层：**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**使用Python脚本的过程中,偶尔需要使用list多层转一层,**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**又总是忘记怎么写搜索关键词,所以总是找了很久,现在把各种方法记录下来,方便自己也方便大家.方法很多,现在就简单写8种,后面再对这8种方法做基准测试.**</strong></font>\n\n\n\n<font color=#b0171f size=3 face=宋体><strong>**1.定义减层方法：**</strong></font>\n\n```python\nimport functools\nimport itertools\nimport numpy\nimport operator\nimport perfplot\nfrom collections import Iterable  # or from collections.abc import Iterable\nfrom iteration_utilities import deepflatten\n\n#使用两次for循环\ndef forfor(a):\n    return [item for sublist in a for item in sublist]\n\n#通过sum\ndef sum_brackets(a):\n    return sum(a, [])\n\n#使用functools內建模块\ndef functools_reduce(a):\n    return functools.reduce(operator.concat, a)\n\n#使用itertools內建模块(平常一般用)\ndef itertools_chain(a):\n    return list(itertools.chain.from_iterable(a))\n\n#使用numpy\ndef numpy_flat(a):\n    return list(numpy.array(a).flat)\n\n#使用numpy\ndef numpy_concatenate(a):\n    return list(numpy.concatenate(a))\n\n#自定义函数\ndef flatten(items):\n    \"\"\"Yield items from any nested iterable; see REF.\"\"\"\n    for x in items:\n        if isinstance(x, Iterable) and not isinstance(x, (str, bytes)):\n            yield from flatten(x)\n        else:\n            yield x\n\ndef pylangs_flatten(a):\n    return list(flatten(a))\n\n#使用库iteration_utilities\ndef iteration_utilities_deepflatten(a):\n    return list(deepflatten(a, depth=1))\n```\n\n<font color=#b0171f size=3 face=宋体><strong>**2.测试：**</strong></font>\n\n```python\na=[[1,2,3],[4,5,6],[7,8,9]]\nprint(a)\n\nprint('--------------------------')\n\nprint(forfor(a))\nprint(sum_brackets(a))\nprint(functools_reduce(a))\nprint(itertools_chain(a))\nprint(numpy_flat(a))\nprint(numpy_concatenate(a))\nprint(pylangs_flatten(a))\nprint(iteration_utilities_deepflatten(a))\n```\n\n<font color=#b0171f size=3 face=宋体><strong>**输出：**</strong></font>\n\n```python\n[[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n--------------------------\n[1, 2, 3, 4, 5, 6, 7, 8, 9]\n[1, 2, 3, 4, 5, 6, 7, 8, 9]\n[1, 2, 3, 4, 5, 6, 7, 8, 9]\n[1, 2, 3, 4, 5, 6, 7, 8, 9]\n[1, 2, 3, 4, 5, 6, 7, 8, 9]\n[1, 2, 3, 4, 5, 6, 7, 8, 9]\n[1, 2, 3, 4, 5, 6, 7, 8, 9]\n[1, 2, 3, 4, 5, 6, 7, 8, 9]\n```\n\n<font color=#b0171f size=3 face=宋体><strong>**2.各种方法的基准测试(消耗时间对比)：**</strong></font>\n\n<font color=#f26522 size=2 face=宋体><strong>**各种方法在小数据上消耗时间差别不大,如果数据很小,没必要为了选择而烦恼,如果数据很大,可以参考下面基准测试的结果来选择减层方法.**</strong></font>\n\n```python\nimport matplotlib.pyplot as plt\nfrom simple_benchmark import benchmark\n\n#基准测试\nb = benchmark(\n    [forfor, sum_brackets, functools_reduce, itertools_chain,numpy_flat, numpy_concatenate, pylangs_flatten,iteration_utilities_deepflatten],\n    arguments={2**i: [[0]*5]*(2**i) for i in range(1, 13)},\n    argument_name='number of inner lists'\n)\n\n#显示测试结果\nplt.subplots(1,1,figsize=(15,10))\nb.plot()\nplt.legend(loc = 'upper left')\nplt.show()\n```\n\n![img](https://s2.loli.net/2022/06/13/Xek5O3vrpCmqIMN.png)\n","tags":["python","基础"],"categories":["python"]},{"title":"js书写的三种方式","url":"/2023/03/20/js书写的三种方式/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**js书写的三种方式:**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**1.直接把代码书写在标签身上:**</strong></font>\n\n```html\n<!-- a标签 -  书写在 href 的属性上 -->\n\n<a href=\"javascript: js代码 ;\"> 点我一下 </a>\n\n<!-- 例如： -->\n<a href=\"javascript: alert('hello world')\"> 点我一下 </a>\n\n<!-- 非a标签 书写在行为属性上  -->\n<div js行为>点我一下</div>\n<!-- 例如: -->\n<div onclick=\"alert('hello world')\">点我一下</div>\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**2.内嵌式JS代码：**</strong></font>\n\n```html\n<!-- <script> 代码</script> -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>内嵌式JS代码</title>\n</head>\n<body>\n    <script>\n        alert('hello word');\n    </script>\n</body>\n</html>\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**3.外链式JS代码：**</strong></font>\n\n```html\n<!-- 外链式js代码，不需要依赖任何行为，打开页面就会执行 -->\n<!-- 通过script 的 src属性调用js文件 -->\n<!-- <script src=\"js文件地址\"></script> -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n</head>\n<body>\n    <!-- 同一目录下存在test.js文件 -->\n    <script src=\"test.js\"></script>\n</body>\n</html>\n```\n","tags":["javascript"],"categories":["前端"]},{"title":"javascript输出内容的三种方式","url":"/2023/03/20/javascript输出内容的三种方式/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**javascript输出内容的三种方式:**</strong></font>\n\n<!--more-->\n\n```javascript\nvar num=100;\nalert(num)\n// alert 会以弹窗的形式输出\nconsole.log(num)\n// console.log 会以控制台输出的方式输出\ndocument.write(num)\n//document.write  会以网页的形式输出\n```\n","tags":["javascript"],"categories":["前端"]},{"title":"javascript注释规范","url":"/2023/03/20/javascript注释规范/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**javascript注释规范：**</strong></font>\n\n<!--more-->\n\n```javascript\n// 变量的运用\n\n//单行注释\n/*\n多行注释  可以换行注释\n*/\nalert(\"hello world\")\n```\n","tags":["javascript"],"categories":["前端"]},{"title":"javascript数据类型","url":"/2023/03/20/javascript数据类型/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**javascript数据类型：**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**一.基本数据类型：**</strong></font>\n\n<font color=#b0171f size=3 face=宋体><strong>**1.数值类型：**</strong></font>\n\n```javascript\n// 返回 number\nvar n1 = 100\nvar n2 = -100\nvar n3 = 100.234\nvar n4 = -100.234\nvar n5 = 2e5   # 科学计数法 表示2*10的5次方\n\nvar n6 = 0x100   表示十六进制 100\nvar n7 = 0o100   表示八进制的 100\nvar n8 = 0b100   表示的二进制 100\n```\n\n<font color=#b0171f size=3 face=宋体><strong>**2.字符串类型：**</strong></font>\n\n```javascript\n// 返回string\n// 在javascript中  一切以单引号  或者双引号包裹起来的变量  都是字符串类型\n// 在JS中  不区分单引号  或者 双引号\n\nvar s1 = 'hello world'   \nvar s2 = \"hello world\"\n```\n\n<font color=#b0171f size=3 face=宋体><strong>**3.布尔类型：**</strong></font>\n\n```javascript\n// 返回 boolean\n\nvar b1 = true  真\nvar b2 = false  假\n```\n\n<font color=#b0171f size=3 face=宋体><strong>**4.空类型:**</strong></font>\n\n```javascript\nundefined  ==>  返回  undefined\nnull ==>  返回 object   比较特殊\n\n// 空类型有两种:\nUndefined   Null\n\n// null : 表示有值，有一个空值  只有在变量赋值为null 的时候  变量才为null\nvar k1 = null\n\n// undefined: 表示没有值   当变量定义  但不赋值的时候   变量为undefined \nvar k2\n```\n","tags":["javascript"],"categories":["前端"]},{"title":"宝塔部署Django进程守护Supervisor","url":"/2023/03/20/宝塔部署Django进程守护Supervisor/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**宝塔部署Django进程守护Supervisor**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**之前用Django写了个接口，但是我们都知道用命令很简单就可以部署了，但是如果一遇到bug，或者意外情况，那么项目将挂掉，为了不让进程挂掉，所以我们需要进程守护。**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**而宝塔运维的可视化进程守护，无疑是最高效，且直观的**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**但是却有个问题，宝塔下的Supervisor管理器都是啥呀？实在让人摸不着头脑！**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**但经过老夫长期以来的单身经验，以及对霓虹国啊微女友的了解. . . .（ps：好像跟我们要说的，没啥关系. . . .）**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**不管怎么说吧！ 问题是解决了！**</strong></font>\n\n---\n\n<font color=#00b2c2 size=5 face=宋体><strong>**1. 终端下运行Django项目**</strong></font>\n\n- <font color=#f26522 size=4 face=宋体><strong>**终端启动django命令：**</strong></font>\n\n```\nsource /xxx/xxx/bin/activate    # 进入django虚拟环境\npython3 /xxx/xxx/manage.py runserver 0.0.0.0:8000   # 在终端下8000 端口运行django项目\n#  当然，我们还可以以后台运行的方式启动django项目\nnohup python3 /xxx/xxx/manage.py runserver 0.0.0.0:8000 > xxx.log 2>&1 &\n```\n\n- <font color=#b0171f size=3 face=宋体><strong>**以上也说了，这种方式，如果遇到意外，该方法会直接让项目崩溃，导致维护精力增加**</strong></font>\n\n<font color=#00b2c2 size=5 face=宋体><strong>**2. Supervisor管理器进程守护运行django**</strong></font>\n\n![img](https://s2.loli.net/2022/06/08/YZVMrL7ATHwWQED.png)\n\n<font color=red size=5 face=宋体><strong>**这里随便乱填，因为他给我，我们用不了，所以要后面修改配置**</strong></font>\n\n```\n[program:MHproject]\ncommand=/www/django_venv/bin/python3 /www/aaa/manage.py runserver 0.0.0.0:1113\n# command=<虚拟环境下的python 绝对路径> <项目启动路径> runserver 0.0.0.0:1113\ndirectory=/www/aaa/\n# 运行目录\nautorestart=true\nstartsecs=3\nstartretries=3\nstdout_logfile=/www/server/panel/plugin/supervisor/log/aaa.out.log\n# 输入日志\nstderr_logfile=/www/server/panel/plugin/supervisor/log/aaa.err.log\n# 错误日志\nstdout_logfile_maxbytes=2MB\nstderr_logfile_maxbytes=2MB\nuser=root\npriority=999\nnumprocs=1\nprocess_name=%(program_name)s_%(process_num)02d\n```\n\n![img](https://s2.loli.net/2022/06/08/9ed8nf5JNFtboiA.png)\n","tags":["运维","linux"],"categories":["linux","运维"]},{"title":"javascript 数据转换","url":"/2023/03/20/javascript-数据转换/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**javascript 数据转换：**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**1.Number(); 方法：**</strong></font>\n\n```javascript\nvar n1 = '100'\nvar n2 = Number(n1);\n结果： n2 = 100\n\nvar n1 = 'abc'\nvar n2 = Number(n1);\n结果： n2 = NaN\n\n/*\n当转换结果为数值的时候 其值为number  \n当转换结果不为数值的时候   其值为  NaN\n*/\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**2.parseInt(); 方法：**</strong></font>\n\n```javascript\nvar n1 = '100'\nvar n2 = parseInt(n1);\n结果： n2 = 100\n\nvar n1 = '100abs'\nvar n2 = parseInt(n1);\n结果： n2 = 100\n\n/*\n当转换结果为数值的时候 第一位为数值的时候， parseInt方法结果为 数值\n当要转换的变量  第一位不为数值的时候  parseInt方法结果为 NaN\n*/\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**3.parseFloat(); 方法：**</strong></font>\n\n```javascript\n与 parseInt 相同  ， 区别在于   parseInt只能转换整型变量   而parseFloat 可以转换 浮点数变量\n/*\n当转换结果为数值的时候 第一位为数值的时候， parseInt方法结果为 数值\n当要转换的变量  第一位不为数值的时候  parseInt方法结果为 NaN\n*/\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**4.String(); 方法：**</strong></font>\n\n```javascript\n转换字符串 \n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**5.toString(); 方法：**</strong></font>\n\n```javascript\n变量.toString()\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**6.Boolean(); 方法：**</strong></font>\n\n```javascript\n转换成布尔值\n\nfalse: 0   NaN '' undefined null     // 这些数值会被转换成 false\n\ntrue :   除了转换成false的值外  所有的值  都会被转换成 true\n```\n","tags":["javascript"],"categories":["前端"]},{"title":"javascript BOM 操作","url":"/2023/03/20/javascript-BOM-操作/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**javascript BOM 操作：**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**1.获取浏览器窗口尺寸：**</strong></font>\n\n```javascript\n// 获取浏览器可视窗口的宽度\nvar w = window.innerWidth.toString()\n// 获取浏览器可视窗口的高度\nvar h = window.innerHeight.toString()\ndocument.write(w, '\\n', h)\n\n1440\n1075\n```\n\n![img](https://s2.loli.net/2022/06/28/pbnrPA142gsm78q.png)\n\n<font color=#f26522 size=4 face=宋体><strong>**2.浏览器的弹出层：**</strong></font>\n\n```javascript\n// 提示框： window.alert('提示信息')   无返回值  点击后消失不见\nwindow.alert('欢迎光临')\n\n// 询问框： window.confirm('提示信息')   有返回值   确定为true  取消为false\nvar res = window.confirm('你爱我吗？')\nconsole.log(res)\n\n// 输入框： window.prompt('提示信息')    有返回值   返回值为输入内容\nvar res = window.prompt('请输入您的银行卡密码')\nconsole.log(res)\n```\n\n![img](https://s2.loli.net/2022/06/28/bxLAk12ORdVqiJl.png)\n\n<font color=#f26522 size=4 face=宋体><strong>**3.开启和关闭标签页：**</strong></font>\n\n```javascript\n// 可视化窗口操作\n// 开启\n// 关闭\n//点击开启按钮  打开百度\n\non.onclick = function () {\n    window.open('https://www.baidu.com')\n}\n//点击关闭按钮 关闭浏览器标签页\noff.onclick = function () {\n    window.close()\n}\n```\n\n![img](https://s2.loli.net/2022/06/28/b7eoBJO2LCGTAnH.png)\n\n<font color=#f26522 size=4 face=宋体><strong>**4.浏览器常见事件：**</strong></font>\n\n```javascript\n// 4.浏览器常见事件：\n资源加载完毕： window.onload = function () {}\n可视尺寸改变：window.onresize = function () {}\n滚动条位置改变：window.onscroll = function () {}\n\n//  该函数会在资源加载完毕之后执行\nwindow.onload = function () {\n    console.log('资源加载完毕')\n}\n// 该函数会根据浏览器改变 而改变\nwindow.onresize = function () {\n    console.log('窗口尺寸发生了改变')\n}\n\n//该函数会根据浏览器滚动条改变 而改变\nwindow.onscroll = function () {\n    console.log('滚动条位置改变')\n}\n```\n\n![img](https://s2.loli.net/2022/06/28/CR8iYETk9Gyv67L.png)\n\n<font color=#f26522 size=4 face=宋体><strong>**5.浏览器的历史记录操作：**</strong></font>\n\n```javascript\n回退页面：window.history.back()\n前进页面：window.history.forward()\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**6.浏览器卷去的尺寸：**</strong></font>\n\n```javascript\n// 卷去的高度：\n//兼容写法:\nwindow.onscroll = function () {\n    var height = document.documentElement.scrollTop || document.body.scrollTop\n    console.log(height)\n}\n\ndocument.documentElement.scrollTop   // 当html有     使用\n实例：\nwindow.onscroll = function () {\n    console.log(document.documentElement.scrollTop.toString())\n}\n\ndocument.body.scrollTop    // 当html没有     使用\nwindow.onscroll = function () {\n    console.log(document.body.scrollTop)\n}\n\n//卷去的宽度：\n// document.documentElement.scrollLeft   //\n// document.body.scrollLeft\n// window.onscroll = function () {\n//     console.log(document.body.scrollLeft)\n// }\n//兼容写法:\n// window.onscroll = function () {\n//     var width = document.documentElement.scrollLeft || document.body.scrollLeft\n//     console.log(width)\n// }\n```\n\n![img](https://s2.loli.net/2022/06/28/i6FyYPQId3AxV8G.png)\n\n![img](https://s2.loli.net/2022/06/28/CWQXFMNgkJbewvh.png)\n\n<font color=#f26522 size=4 face=宋体><strong>**7.浏览器滚动到：**</strong></font>\n\n```javascript\n滚动到: window.scrollTo()\n\n参数方式1： window.scrollTo(left, top)   // 这种方式只能定位到某个位置\n参数方式2： window.scrollTo({left:xx, top:xx,})   // 这种方式可以滚动到某个位置\nwindow.scrollTo({\n    left: xx,  // 宽度\n    top:xx,   //高度\n    behavior: 'smooth'   //定位方式  直  平滑滚动\n})\n```\n\n![img](https://s2.loli.net/2022/06/28/gUDonWieCpAdjrF.png)\n\n<font color=#00b2c2 size=5 face=宋体><strong>**总结：**</strong></font>\n\n![img](https://s2.loli.net/2022/06/28/MmnvaeUDKJEqTko.png)\n\n![img](https://s2.loli.net/2022/06/28/EL9ds8IiQ4lbJyk.png)\n\n![img](https://s2.loli.net/2022/06/28/opL7fH5YEjAKiPa.png)\n\n```javascript\n可视化窗口操作\n\nbody {\n    width: 3000px;\n    height: 3000px;\n}\n    \n// 1.获取浏览器窗口尺寸：\n\n// 获取浏览器可视窗口的宽度\nvar w = window.innerWidth.toString()\n// 获取浏览器可视窗口的高度\nvar h = window.innerHeight.toString()\ndocument.write(w, '\\n', h)\n\n// 2.浏览器的弹出层\n// 提示框： window.alert('提示信息')   无返回值  点击后消失不见\n// 询问框： window.confirm('提示信息')   有返回值   确定为true  取消为false\n// 输入框： window.prompt('提示信息')    有返回值   返回值为输入内容\n\nwindow.alert('欢迎光临')\nvar res = window.confirm('你爱我吗？')\nconsole.log(res)\n\nvar res = window.prompt('请输入您的银行卡密码')\nconsole.log(res)\n\n// 3.开启和关闭标签页：\non.onclick = function () {\n    window.open('https://www.baidu.com')\n}\noff.onclick = function () {\n    window.close()\n}\n\n//4.浏览器常见事件：\n资源加载完毕： window.onload = function () {}\n可视尺寸改变：window.onresize = function () {}\n滚动条位置改变：window.onscroll = function () {}\n\n//  该函数会在资源加载完毕之后执行\nwindow.onload = function () {\n    console.log('资源加载完毕')\n}\n\n// 该函数会根据浏览器改变 而改变\nwindow.onresize = function () {\n    console.log('窗口尺寸发生了改变')\n}\n\n//该函数会根据浏览器滚动条改变 而改变\nwindow.onscroll = function () {\n    console.log('滚动条位置改变')\n}\n\n// 5.浏览器的历史记录操作：\n回退页面：window.history.back()\n前进页面：window.history.forward()\n\n//6.浏览器卷去的尺寸：\n//卷去的高度：\ndocument.documentElement.scrollTop   //<!DOCTYPE html>\ndocument.body.scrollTop\nwindow.onscroll = function () {\n    console.log(document.body.scrollTop)\n}\n//兼容写法:\nwindow.onscroll = function () {\n    var height = document.documentElement.scrollTop || document.body.scrollTop\n    console.log(height)\n}\n//卷去的宽度：\ndocument.documentElement.scrollLeft   //<!DOCTYPE html>\ndocument.body.scrollLeft\nwindow.onscroll = function () {\n    console.log(document.body.scrollLeft)\n}\n//兼容写法:\nwindow.onscroll = function () {\n    var width = document.documentElement.scrollLeft || document.body.scrollLeft\n    console.log(width)\n}\n\n参数方式1： window.scrollTo(left, top)   // 这种方式只能定位到某个位置\n参数方式2： window.scrollTo({left:xx, top:xx, behavior: 'smooth'})   // 这种方式可以滚动到某个位置\n```\n","tags":["javascript"],"categories":["前端"]},{"title":"javascript_定时器","url":"/2023/03/20/javascript-定时器/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**javascript_定时器：**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**定时器分两种：**</strong></font>\n\n![2022-06-29 12-35-07屏幕截图](https://s2.loli.net/2022/06/29/Vzv9Y1jMb4qf8G7.png)\n\n<font color=#f26522 size=4 face=宋体><strong>**定时器有返回值：**</strong></font>\n\n```javascript\n// 定时器不区分种类， 只是表示页面上的第几个定时器\n```\n\n![img](https://s2.loli.net/2022/06/29/NnyGQmuEJ17zqUH.png)\n\n<font color=#f26522 size=4 face=宋体><strong>**关闭定时器：**</strong></font>\n\n![img](https://s2.loli.net/2022/06/29/CWpkM8lbeKmQLYg.png)\n\n![img](https://s2.loli.net/2022/06/29/LjlPuVb2Foemi5X.png)\n\n<font color=#f26522 size=4 face=宋体><strong>**总结：**</strong></font>\n\n![img](https://s2.loli.net/2022/06/29/3TUx9XkunRowtAr.png)\n","tags":["javascript"],"categories":["前端"]},{"title":"javascript_DOM基本操作（一）","url":"/2023/03/20/javascript-DOM基本操作（一）/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**javascript_DOM基本操作（一）：**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**获取元素的5种方法：**</strong></font>\n\n![img](https://s2.loli.net/2022/06/29/U1nvBRatQYMEre8.png)\n\n<font color=#f26522 size=4 face=宋体><strong>**1.根据 id 名称获取：**</strong></font>\n\n```javascript\n// 语法：\ndocument.getElementById('id名称')\n```\n\n![img](https://s2.loli.net/2022/06/29/SI8bBtUXPWjkh9l.png)\n\n![img](https://s2.loli.net/2022/06/29/WBmeFqYMftHPa8I.png)\n\n<font color=#f26522 size=4 face=宋体><strong>**2.根据 元素 类名 获取：****2.根据 元素 类名 获取：**</strong></font>\n\n```javascript\n// 语法：\ndocument.getElementsByClassName('元素类名')\n```\n\n![img](https://s2.loli.net/2022/06/29/R38eT1YVZyzJ27o.png)\n\n![img](https://s2.loli.net/2022/06/29/1VwzI9AdS68lMeT.png)\n\n<font color=#f26522 size=4 face=宋体><strong>**3.根据 元素 标签名 获取：**</strong></font>\n\n```javascript\n// 语法：\ndocument.getElementsByTagName('标签名')\n```\n\n![img](https://s2.loli.net/2022/06/29/q1hg3tmlo42XyGI.png)\n\n![img](https://s2.loli.net/2022/06/29/bdRo57kVCapHlvq.png)\n\n<font color=#f26522 size=4 face=宋体><strong>**4.根据 选择器 获取一个：**</strong></font>\n\n```javascript\n// 语法:\ndocument.querySelector('选择器')\n// 例如:\ndocument.querySelector('div')\ndocument.querySelector('.box')\ndocument.querySelector('#container')\n```\n\n![img](https://s2.loli.net/2022/06/29/Nh7ZqcTew9IW4gM.png)\n\n![img](https://s2.loli.net/2022/06/29/Rr9HVj7OZtznoJg.png)\n\n**5.根据 选择器 获取所有满足条件的：**\n\n```\n// 语法:\ndocument.querySelectorAll('选择器')\n// 例如:\ndocument.querySelectorAll('div')\ndocument.querySelectorAll('.box')\ndocument.querySelectorAll('#container')\n```\n\n![img](https://s2.loli.net/2022/06/29/Pmbd2ecSfhN5aBr.png)\n\n![img](https://s2.loli.net/2022/06/29/zG32Rg8a9Hmh6NA.png)\n","tags":["javascript"],"categories":["前端"]},{"title":"javascript_DOM基本操作（二）","url":"/2023/03/20/javascript-DOM基本操作（二）/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**javascript_DOM基本操作（二）：**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**操作元素的内容：**</strong></font>\n\n```javascript\n// 元素.innerText  会覆盖式的修改\n// 元素.innerHTML  会连标签一起渲染\n```\n\n![img](https://s2.loli.net/2022/06/29/34RQ28UxDXcroCY.png)\n\n```javascript\n// 操作元素的内容\n// 操作内容\n\n// 文本内容\n//获取元素\nvar ele = document.querySelector('div')\nvar btn = document.querySelector('button')\n//获取元素的文本内容\nconsole.log(ele.innerText)\nbtn.onclick = function () {\n    ele.innerText = 'the fucking new text'\n}\n//输出一下文本\nconsole.log(ele.innerHTML)\nbtn.onclick = function () {\n    ele.innerHTML = '<span> the fucking new text </span>'\n}\n\n    \n```\n\n<font color=#f26522 size=4 face=宋体><strong>**操作元素属性：**</strong></font>\n\n![img](https://s2.loli.net/2022/06/29/g1BZXQFzqnIy8Df.png)\n\n<font color=#f26522 size=4 face=宋体><strong>**获取元素属性、修改属性（原生属性）：**</strong></font>\n\n```javascript\n// 操作元素属性\n// 操作属性\n// div 标签\n\n//获取元素\nvar box = document.querySelector('div')\nvar inp = document.querySelector('input')\nvar btn = document.querySelector('button')\n\n//获取元素属性\nconsole.log(box.id)\nconsole.log(inp.type)\n\n//给按钮绑定点击事件\nbtn.onclick = function () {\n    //修改属性值\n    box.id = 'content'\n    inp.type = 'checkbox'\n}\n    \n```\n\n<font color=#f26522 size=4 face=宋体><strong>**获取元素属性、修改属性（自定义属性）：**</strong></font>\n\n```javascript\n// 操作元素属性\n\n// 操作属性\n// div 标签\n    \n//获取元素属性\nvar box = document.querySelector('div')\nvar btn = document.querySelector('button')\n//获取自定义属性\nvar res = box.getAttribute('hello')\nconsole.log(res)\n\n// 给按钮绑定点击事件\nbtn.onclick = function () {\n    //修改自定义属性\n    box.setAttribute('hello', '新来的')\n}\n\n// 给按钮 绑定点击事件\nbtn.onclick = function () {\n    //修改自定义属性\n    box.removeAttribute('hello')\n}\n    \n```\n\n<font color=#f26522 size=4 face=宋体><strong>**操作元素类名：**</strong></font>\n\n![img](https://s2.loli.net/2022/06/29/QxDwsNdifG9gIjZ.png)\n\n```javascript\n// 操作元素类名\n\n// 操作类名\n// div 标签\n\n//获取袁术\nvar box = document.querySelector('div')\nvar btn = document.querySelector('button')\n//获取类名\nconsole.log( box.className)\n\n//给按钮绑定点击事件\nbtn.onclick = function () {\n    box.className = '这是一个新元素'\n}\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**操作元素行内样式：**</strong></font>\n\n![img](https://s2.loli.net/2022/06/29/Ho8Qwreyus6VvIx.png)\n\n```javascript\n// 操作元素的行内样式\n\n// 操作行内样式\n// 返回行内样式\n// 文本内容\n\n//获取元素\nvar box = document.querySelector('div')\nvar btn1 = document.getElementById('btn1')\nvar btn2 = document.getElementById('btn2')\n//输出行内样式\nconsole.log(box.style.width)\nconsole.log(box.style.height)\nconsole.log(box.style.backgroundColor)    //有下划线的时候  需要使用驼峰命名法\nbtn1.onclick = function () {\n    box.style.width = '200px';\n    box.style.height = '400px';\n    box.style.backgroundColor = 'red'\n}\nbtn2.onclick = function () {\n    box.style.width = '100px';\n    box.style.height = '100px';\n    box.style.backgroundColor = 'pink'\n}\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**获取元素非行内样式：**</strong></font>\n\n```javascript\n前端是没有办法操作非行内样式的，只能获取\n```\n\n![img](https://s2.loli.net/2022/06/29/tafyHgjLrwsX6Vv.png)\n\n```javascript\n// 操作元素的行内样式\n\ndiv {\n    font-size: 20px;\n}\n    \n\n// 操作行内样式\n// 文本内容\n\nvar box = document.querySelector('div')\nvar btn = document.querySelector('button')\nconsole.log(window.getComputedStyle(box).width)\nconsole.log(window.getComputedStyle(box).height)\nconsole.log(window.getComputedStyle(box).backgroundColor)\nconsole.log(window.getComputedStyle(box).fontSize)\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**总结：**</strong></font>\n\n![img](https://s2.loli.net/2022/06/29/tTEYvFSLGWo6Ngi.png)\n\n![img](https://s2.loli.net/2022/06/29/oie6V8hp3ju4UJS.png)\n\n![img](https://s2.loli.net/2022/06/29/32svhlbVPm4pW6r.png)\n","tags":["javascript"],"categories":["前端"]},{"title":"javascript_if else if 语句","url":"/2023/03/20/javascript-if-else-if-语句/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**javascript_if else if 语句：**</strong></font>\n\n<!--more-->\n\n```javascript\nvar money = 3000\n//满足哪一个if的条件   就执行哪一个条件后面的 {}\n//前面的如果满足了  就不去考虑后面的内容了\nif (money >= 5000) {\n    console.log('吃米其林三星')\n} else if (money >= 500) {\n    console.log('吃快餐吧')\n} else (money < 500) {\n    console.log('吃个屁，你连500块都没有')\n}\n```\n\n","tags":["javascript"],"categories":["前端"]},{"title":"javascript_switch语句","url":"/2023/03/20/javascript-switch语句/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**javascript_switch语句：**</strong></font>\n\n<!--more-->\n\n```javascript\n//switch 会穿透代码，执行所有case 中的代码\n    //定义一个变量， 当做一直条件\nvar foot = 37\n// 使用 switch 语句进行选择\nswitch (foot) {\n    case 37:\n        console.log('买一双 37 码的鞋子')\n        break\n    case 38:\n        console.log('买一双 37 码的鞋子')\n        break\n    // 当所有条件都不满足的时候， 默认执行default语句\n    default:\n        console.log('没有合适的鞋子，算了！不买了')\n}\n```\n\n![img](https://s2.loli.net/2022/06/30/chQOoR7fsAYpUPa.png)\n","tags":["javascript"],"categories":["前端"]},{"title":"javascript_while 和 do while语句","url":"/2023/03/20/javascript-while-和-do-while语句/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**javascript_while 和 do while语句：**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**while循环：**</strong></font>\n\n```javascript\n//定义初始变量n\nvar n = 0;\nwhile (n < 3) {\n    //一段重复的代码\n    console.log('走过了一个石板')\n    //改变初始值\n    n++\n}\n//后续代码\nconsole.log('继续走后面的路')\n```\n\n![img](https://s2.loli.net/2022/06/30/gd1EQnlbBGu3s2W.png)\n\n<font color=#f26522 size=4 face=宋体><strong>**案例练习：**</strong></font>\n\n```javascript\n// while循环案例\nvar n = 1\nvar total = 1\nwhile (n <= 10) {\n    total *= n\n    console.log('这是total x ', n.toString(), '的值 ==> ', total.toString())\n    n ++\n}\n    \n```\n\n<font color=#f26522 size=4 face=宋体><strong>**do while循环：**</strong></font>\n\n```javascript\n//定义初始变量n\nvar n = 0;\ndo {\n    //一段重复的代码\n    console.log('走过了一个石板')\n    //改变初始值\n    n++\n} while (n < 3)\n//后续代码\nconsole.log('继续走后面的路')\n```\n\n![img](https://s2.loli.net/2022/06/30/dTMpEvShkZ5Lqsf.png)\n\n<font color=#f26522 size=4 face=宋体><strong>**案例练习：**</strong></font>\n\n```javascript\n// do while循环\n// //在浏览器弹出输入框\n// var result = prompt('你爱不爱我 ？')\n// console.log(result)\n\n//在do while 中体现   先执行一次，当答案不正确或者不是我们想要的  会再次弹出输入框\ndo {\n    var result = prompt('你爱不爱我 ？')\n} while (result !== '爱')\ndocument.write('我特么谢谢你 ', result, ' 我')\n\n//我特么谢谢你 爱 我\n```\n","tags":["javascript"],"categories":["前端"]},{"title":"javascript_for 循环语句","url":"/2023/03/20/javascript-for-循环语句/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**javascript_for 循环语句：**</strong></font>\n\n<!--more-->\n\n```javascript\nfor (定义初始变量; 条件判断; 改变初始变量) {\n    重复执行的代码\n    ....\n}\n        //for 循环结构语句\n        // for (定义初始变量; 条件判断; 改变初始变量)\n        for (var i=0; i<3; i++) {\n            // 重复执行的代码\n            console.log('这是第', i, '次执行')\n        }\n        //循环语句结束后  执行的代码\n        console.log('你还要继续走接下来的路')\n```\n\n![img](https://s2.loli.net/2022/06/30/W62su7ViKHAkmwE.png)\n\n<font color=#f26522 size=4 face=宋体><strong>**案例练习：**</strong></font>\n\n```javascript\n# for 循环\nfor (var i=1; i<=100; i++) {\n    if (i % 3 === 0){\n        console.log(i)\n    }\n}\n    \n```\n\n","tags":["javascript"],"categories":["前端"]},{"title":"javascript_数组的常用方法","url":"/2023/03/20/javascript-数组的常用方法/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**javascript_数组的常用方法：**</strong></font>\n\n<!--more-->\n\n![img](https://s2.loli.net/2022/06/30/FjRgShmaDV4QMO7.png)\n\n<font color=#f26522 size=4 face=宋体><strong>**1. push()方法：将数据追加到数组的末尾：**</strong></font>\n\n```javascript\n1.push()\n    语法：数组.push(数据)\n    作用：将数据 <追加> 到数组的 <末尾>\n    返回值：追加数据后数组的 <最新的长度>\n\n例如：\n    var arr = [100, 200, 300, 400]   //准备一个原始数组\n    console.log(arr)   //第一次输出arr \n    res = arr.push('追加的')   //使用方法push\n    console.log(arr)   //第二次输出arr\n    console.log(res)   //输出res\n\n输出结果：\n    第一次arr: [100, 200, 300, 400]\n    第二次arr: [100, 200, 300, 400, '追加的']\n    res返回值: 5\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**2. pop()方法：删除数组的最后一个数据：**</strong></font>\n\n```javascript\n2.pop()\n    语法：数组.pop()    //可以不用传递参数\n    作用：删除数组的 <最后一个> 数据\n    返回值：被删除的数据\n\n例如：\n    var arr = [100, 200, 300, 400]     //准备一个原始数组\n    console.log(arr)   //第一次输出arr \n    res = arr.pop()    //使用方法pop\n    console.log(arr)   //第二次输出arr\n    console.log(res)    //输出res\n输出结果：\n    第一次arr: [100, 200, 300, 400]\n    第二次arr: [100, 200, 300]\n    res返回值: 400\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**3. unshift()方法： 将数据添加到数组的 <最前面> ：**</strong></font>\n\n```javascript\n3.unshift()\n    语法：数组.unshift(数据)\n    作用：将数据 <添加> 到数组的 <最前>\n    返回值：添加数据后数组的  <最新长度>\n\n例如：\n    var arr = [100, 200, 300, 400]     //准备一个原始数组\n    console.log(arr)   //第一次输出arr \n    res = arr.unshift('添加的')   //使用方法unshift\n    console.log(arr)   //第二次输出arr\n    console.log(res)    //输出res\n\n输出结果：\n    第一次arr: [100, 200, 300, 400]\n    第二次arr: ['添加的',100, 200, 300, 400]\n    res返回值: 5\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**4. shift()方法： 删除数组 <最前一个> 数据：**</strong></font>\n\n```javascript\n4.shift()\n    语法：数组.shift()\n    作用: 删除数组 最前一个 数据\n    返回值 ：被删除的数据\n\n\n例如：\n    var arr = [100, 200, 300, 400]       //准备一个原始数组\n    console.log(arr)     //第一次输出arr \n    res = arr.shift()   //使用方法shift\n    console.log(arr)   //第二次输出arr\n    console.log(res)    //输出res\n\n输出结果：\n    第一次arr: [100, 200, 300, 400]\n    第二次arr: [200, 300, 400]\n    res返回值: 100\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**5. reverse()方法： 反转数组：**</strong></font>\n\n```javascript\n5.shift()\n    语法：数组.reverse()\n    作用: 将数组反转\n    返回值 ：反转后的数组\n\n\n例如：\n    var arr = [100, 200, 300, 400]       //准备一个原始数组\n    console.log(arr)     //第一次输出arr \n    res = arr.reverse()    //使用方法reverse\n    console.log(arr)   //第二次输出arr\n    console.log(res)    //输出res\n\n输出结果：\n    第一次arr: [100, 200, 300, 400]\n    第二次arr: [400, 300, 200, 100]\n    res返回值: [400, 300, 200, 100]\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**6. splice()方法： 删除 数组中若干数据，并选择是否插入新的数据：**</strong></font>\n\n![img](https://s2.loli.net/2022/06/30/9SMX2eRNO7gsjVU.png)\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**7. sort()方法： 对数组排序：**</strong></font>\n\n```javascript\n7.sort()\n    语法：数组.sort()\n         数组.sort( function (a,b) { return a - b } )  升序\n         数组.sort( function (a,b) { return b - a } )  降序\n    作用: 将数组进行 排序\n    返回值 ：排序好的 新数组\n\n\n例如：\n    var arr = [11, 1, 22, 13, 45, 32, 2]       //准备一个原始数组\n    console.log(arr)     //第一次输出arr \n    res = arr.sort()    //使用方法reverse\n    console.log(arr)   //第二次输出arr\n    console.log(res)    //输出res\n\n输出结果：\n    第一次arr: [11, 1, 22, 13, 45, 32, 2]\n    第二次arr: [1, 11, 13, 2, 22, 32, 45]\n    res返回值: [1, 11, 13, 2, 22, 32, 45]\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**8. join()方法： 将数组链接成字符串：**</strong></font>\n\n```javascript\n8.join()\n    语法：数组.join(连接符)\n    作用: 将数组用 <连接符>  链接成为一个 <字符串>\n    返回值 ：链接好的 字符串\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**9. concat()方法： 将数组链接成字符串：**</strong></font>\n\n```javascript\n9.concat()\n    语法：数组.concat(其他数组)\n    作用: 将其他数组和数组  <拼接>  在一起  \n    返回值 ：拼接好的  新数组\n\n例如：\n    var arr = [100, 200, 300, 400]       //准备一个原始数组\n    console.log(arr)     //第一次输出arr \n    var res = arr.concat( [500, 600] )\n    console.log(arr)   //第二次输出arr\n    console.log(res)    //输出res\n\n输出结果：\n    第一次arr: [100, 200, 300, 400]   \n    第二次arr: [100, 200, 300, 400]   原始数据不发生变化\n    res返回值: [100, 200, 300, 400, 500, 600]   返回值  新拼接好的数组\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**10. slice()方法： 截取数组：**</strong></font>\n\n```javascript\n10.slice()\n    语法：数组.slice(开始索引, 结束索引)   //当不传递参数，默认返回所有数据   当传递一个参数 默认是从第几个数据开始截取\n        开始索引: 默认是0,\n        结束索引: 默认是 数组长度\n    作用:  <截取> 数组中的某些数据\n    返回值 ：以 <新数组> 的形式返回截取出来的数据\n\n例如：\n    var arr = [100, 200, 300, 400]       //准备一个原始数组\n    console.log(arr)     //第一次输出arr \n    var res = arr.slice( 1, 3)\n    console.log(arr)   //第二次输出arr\n    console.log(res)    //输出res\n\n输出结果：\n    第一次arr: [100, 200, 300, 400]   \n    第二次arr: [100, 200, 300, 400]   原始数据不发生变化\n    res返回值: [200, 300]   // 返回值  截取后的新数组  \n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**11. indexOf()方法： 查找 <数据> 在数据中的索引位置：**</strong></font>\n\n```javascript\n11.indexOf()\n    语法：数组.indexOF(数据)\n    作用: 查找 <数据> 在数组中的 <索引> 位置 \n    返回值 ：\n        有该数据， 返回 <第一次出现> 的索引位置\n        没有该数据， 返回 -1\n\n例如：\n    var arr = [100, 200, 300, 200]       //准备一个原始数组\n    console.log(arr)     //第一次输出arr \n    var res = arr.indexOf( 200 )\n    console.log(arr)   //第二次输出arr\n    console.log(res)    //输出res\n\n输出结果：\n    第一次arr: [100, 200, 300, 200]   \n    第二次arr: [100, 200, 300, 200]   原始数据不发生变化\n    res返回值: 1   返回值  返回该数据在列表中的索引位置\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**12. forEach()方法： 将数组链接成字符串：**</strong></font>\n\n```javascript\n12.forEach()\n    语法：数组.forEach( function (item, index, arr) {})\n        数组.forEach( function (数据, 索引， 数组) {执行内容})\n    作用: 遍历数组\n    返回值 ：没有返回值\n\n例如：\n    var arr = [100, 200, 300, 400]       //准备一个原始数组\n    console.log(arr)     //第一次输出arr \n    arr.forEach( function (item, index, arr) {\n            console.log(item);  //输出数据\n            console.log(index);  // 输出索引\n            console.log(arr);  //输出列表\n            console.log('------------------------------')\n        })\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**13.map()方法： 映射数组**</strong></font>\n\n```javascript\n13.map()\n    语法：数组.map( function (item, index, arr) {})\n    作用: 映射数组\n    返回值 ：映射后的 <新数组>\n\n例如：\n    var arr = [100, 200, 300, 400]       //准备一个原始数组\n    console.log(arr)     //第一次输出arr \n    var res = arr.map( function (item, index, arr) {\n            return item*10    //每一项都 乘以 10\n        })\n    console.log(res)\n\n输出结果：\n    第一次arr: [100, 200, 300, 400]   \n\n    res返回值: [1000, 2000, 3000, 4000]   返回值  新拼接好的数组\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**14.fileter()方法： 过滤 数组：**</strong></font>\n\n```javascript\n14.fileter()\n    语法：数组.fileter( function (item, index, arr) {} )\n    作用: 过滤数组\n    返回值 ：过滤后的 新数组\n\n例如：\n    var arr = [100, 200, 300, 400]       //准备一个原始数组\n    console.log(arr)     //第一次输出arr \n    var res = arr.filter( function (item, index, arr) {\n            return item > 150\n        })\n    console.log(res)\n\n输出结果：\n    第一次arr: [100, 200, 300, 400]   \n    res返回值: [200, 300, 400]   返回值  所有满足 大于150的项 列表\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**15. every()方法： 判断数是不是 每一项 都满足条件：**</strong></font>\n\n```javascript\n15.every()\n    语法：数组.every( function (item, index, arr) {} )\n    作用: 判断数是不是 每一项 都满足条件\n    返回值 ：一个布尔值\n\n例如：\n    var arr = [100, 200, 300, 400]       //准备一个原始数组\n    console.log(arr)     //第一次输出arr \n    var res = arr.every( function (item, index, arr) {\n            return item > 150\n        })\n    console.log(res)\n\n输出结果：\n    第一次arr: [100, 200, 300, 400]   \n    res返回值: false   // 返回值  布尔值   数组里面不是每一项都大于150\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**16. some()方法： 判断数组中是不是有某一项满足条件：**</strong></font>\n\n```javascript\n15.every()\n    语法：数组.every( function (item, index, arr) {} )\n    作用: 判断数组中 是不是有 某一项 满足条件\n    返回值 ：一个布尔值\n\n例如：\n    var arr = [100, 200, 300, 400]       //准备一个原始数组\n    console.log(arr)     //第一次输出arr \n    var res = arr.some( function (item, index, arr) {\n            return item > 150\n        })\n    console.log(res)\n\n输出结果：\n    第一次arr: [100, 200, 300, 400]   \n    res返回值: true   // 返回值  布尔值   数组里面不是每一项都大于150\n```\n","tags":["javascript"],"categories":["前端"]},{"title":"javascript_字符串的常用方法","url":"/2023/03/20/javascript-字符串的常用方法/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**javascript_字符串的常用方法：**</strong></font>\n\n<!--more-->\n\n```javascript\n1. charAt()\n    语法：字符串.charAt(索引)\n    作用：获取对应索引位置的字符\n    返回值： 对应索引位置的字符\n\n2.toLowerCase() 方法\n    语法：字符串.toLowerCase()\n    作用：将字符串内的字母全部转换成  小写\n    返回值： 转换后的字符串\n\n3.toUpperCase()\n    语法：字符串.toUpperCase()\n    作用：将字符串内的字母全部转换成大写\n    返回值： 转换后的字符串\n\n4.replace()\n    语法：字符串.replace(替换前内容，替换后内容)\n    作用：将字符串内的 第一个 满足换下内容的片段，替换成换上的内容\n    返回值：替换后的字符串\n\n5.trim()\n    语法：字符串.trim()   //不需要传递参数\n    作用： 去除字符串 首尾 的空格\n    返回值： 去除空格后的字符串\n\n6.split()\n    语法：字符串.split(分隔符)\n    作用：按照分隔符将字符串切割成一个数组\n    返回值：切割后的数组\n\n7.substr()、substring()、slice()\n    语法：字符串.substr()、字符串.substring()、字符串.slice()\n    作用：substr: 从索引截取几个内容， 例如（1，6） 从索引1 往后截取6个内容\n         substring： 从索引截取到索引   例如（1，6）  从索引1 截取到索引6   包前不包后\n         slice： 从索引截取到索引   例如（1，6）  从索引1 截取到索引6   包前不包后\n    返回值：切割后的数组\n```\n\n![img](https://s2.loli.net/2022/07/01/WEX5RrqdV32kbJm.png)\n","tags":["javascript"],"categories":["前端"]},{"title":"关于Jet Brains历史版本获取","url":"/2023/03/20/关于Jet-Brains历史版本获取/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**关于Jet Brains历史版本获取：**</strong></font>\n\n<!--more-->\n\n<font color=#b0171f size=4 face=宋体><strong>**官网给出的下载链接永远是最新的，但是最新的往往是需要收费的，所以以下链接可以直接定位到官网的历史版本下载地址，然后就可以尽情的去嗨皮了：**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**pycharm历史版本下载地址:      [点击下载](https://www.jetbrains.com/zh-cn/pycharm/download/other.html)**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**idea历史版本下载地址:     [点击下载]( https://www.jetbrains.com/zh-cn/idea/download/other.html)**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**WebStorm历史版本下载地址:      [点击下载](https://www.jetbrains.com/zh-cn/webstorm/download/other.html)**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**Pycharm激活教程:      [点击进入](https://www.yuque.com/lanchuan-vm6pi/buhvby/irtn6mlnmt1vuzgx?singleDoc)**</strong></font>\n","tags":["破解","IDEA"],"categories":["工具"]},{"title":"shell下链接mongodb加载跟多数据","url":"/2023/03/20/shell下链接mongodb加载跟多数据/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**shell下链接mongodb加载跟多数据**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**mongodb type it for more**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**当使用mongodb shell的时候 ，需要查看更多的数据时候，系统提示 type it for more**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**可以设置系统参数 DBQuery.shellBatchSize = 300**</strong></font>\n\n```\n# 进入mongodb数据库后\nDBQuery.shellBatchSize = 300\n# 则可以查看更多300条数据的数据\n```\n","tags":["mongodb","数据库","错误"],"categories":["数据库"]},{"title":"来自程序员的情人节礼物！","url":"/2023/03/20/来自程序员的情人节礼物！/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**来自程序员的情人节礼物！**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**Linux复制:**</strong></font>\n\n```python\npython3 # 点击copy  打开终端 粘贴剪贴板 即可！8秒之后自动关闭\nimport time\nimport os\nprint('\\n'.join([''.join([('love'[(x-y) % len('love')] if ((x*0.05)**2+(y*0.1)**2-1)**3-(x*0.05)**2*(y*0.1)**3 <= 0 else ' ')for x in range(-120, 30)])for y in range(30, -30, -1)]))\ntime.sleep(8)\nexit()\nexit\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**Windos下cmd复制:**</strong></font>\n\n```python\npython &::点击copy  打开终端 粘贴剪贴板 即可！8秒之后自动关闭\nimport time\nimport os\nprint('\\n'.join([''.join([('love'[(x-y) % len('love')] if ((x*0.05)**2+(y*0.1)**2-1)**3-(x*0.05)**2*(y*0.1)**3 <= 0 else ' ')for x in range(-120, 30)])for y in range(30, -30, -1)]))\ntime.sleep(8)\nexit()\nexit\n```\n\n","tags":["礼物"],"categories":["折腾"]},{"title":"mongodb随机返回N条结果","url":"/2023/03/20/mongodb随机返回N条结果/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**mongodb随机返回N条结果：**</strong></font>\n\n<!--more-->\n\n```python\n用$sample (aggregation)方法，具体命令为：\ndb.<数据库>.aggregate( [ { $sample: { size: N } } ] ) N为条数\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**异步携程查询**</strong></font>\n\n```python\nclass Image_Pust_():\n    ####  文档地址  https://www.cnblogs.com/aduner/p/13532504.html\n    client = motor.motor_asyncio.AsyncIOMotorClient('数据库链接')  # 使用链接访问\n    sss = client.sss    # client.数据库集合\n    test1 = sss.test1    # 数据库\n\n    async def Rand_find(self, document=None):\n        c = Image_Pust_().sss.test1\n        # async for document in c.find():\n        #     print(document)\n        a = c.aggregate([{\"$sample\": {\"size\": 15}}])   # 查询15条数据\n        return [i async for i in a]     #  返回数据\n```\n","tags":["mongodb","数据库"],"categories":["数据库"]},{"title":"正则表达式(基础语法)","url":"/2023/03/20/正则表达式-基础语法/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**正则表达式(基础语法)**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**Regular Expression,正则表达式，一种使用表达式的方式对字符串进行匹配的语法规则**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**我们抓取到页面源代码本质上就是一个超长的字符串，想从里面提取内容，用正则再合适不过了。**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**正则的有点：速度快、效率高、准确性高。**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**正则的缺点：新手上手难度高**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**不过只要掌握了正则编写的逻辑关系，写出一个提取页面内容的正则其实并不复杂**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**正则的语法：使用元字符进行排列组合用来匹配字符串 在线测试正则表达式：[https://tool,oschina.net/regex/](https://tool%2Coschina.net/regex/)**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**元字符：具体固定意义的特殊字符**</strong></font>\n\n<font color=#00b2c2 size=5 face=宋体><strong>**常用元字符：**</strong></font>\n\n```\n.       匹配除 换行符 以外的 任意字符\n\\w     匹配 字母 或 数字 或 下划线\n\\s      匹配任意的空白符\n\\d     匹配数字\n\\n      匹配一个换行符\n\\t     匹配一个制表符\n\n^       匹配字符串的开始\n$      匹配字符串的结尾\n\n\\W      匹配 非字母 或 数字 或 下划线\n\\D     匹配非数字\n\\S      匹配非空白字符\na|b    匹配 字符a 或 字符b  # 优先前面的\n()      匹配括号内的表达式，也表示一个组\n[...]  匹配字符组中的字符    #例如   [a-zA-Z0-9]\n[^...]  匹配除了字符组中的所有字符\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>**量词：控制前面的元字符出现的次数**</strong></font>\n\n```\n*  重复0次 或 多次\n+  至少重复一次 或 多次\n?  重复0次  或 多次\n{n}  重复 n 次\n{n,}  重复n次 或更多次\n{n,m}   重复n到m次\n```\n","tags":["python","正则"],"categories":["python"]},{"title":"python_Re模块的使用","url":"/2023/03/20/python-Re模块的使用/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**python_Re模块的使用：**</strong></font>\n\n<!--more-->\n\n```python\n# findall: 匹配字符串中所有的符合正则的内容  返回一个列表\nlst = re.findall(r\"\\d+\", \"我的电话是：10086，你妈妈的电话是：10010\")\nprind(lst)\n\n#  结果 ['10086', '10010']\n\n\n# finditer: 匹配字符串中的所有内容 (返回一个迭代器)   从迭代器中拿到内容  需要.group()\nit = re.finditer(r\"\\d+\", \"我的电话是：10086，你妈妈的电话是：10010\")\nfor i in it:\n    print(i.group())    # 从迭代器中拿数据\n\n\n# search: 全文匹配正则数据，返回第一个匹配到的数据   （返回对象match） 拿数据  需要.group()\nsea = re.search(r\"\\d+\", \"我的电话是：10086，你妈妈的电话是：10010\")\nsea.group()\n#  结果 '10086'\n\n\n# match: 从开始匹配数据   （返回对象match） 拿数据  需要.group()\nsea = re.match(r\"\\d+\", \"我的电话是：10086，你妈妈的电话是：10010\")\nsea.group()\n#  结果  无法匹配到\n\nsea = re.search(r\"(?P<call>\\d+)\", \"我的电话是：10086，你妈妈的电话是：10010\")\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**预加载正则表达式：**</strong></font>\n\n```python\nobj = re.compile(r\"\\d+\")\nres = obj.findall(\"我的电话是：10086，你妈妈的电话是：10010\")\n# 结果: ['10086','']\n```\n\n![img](https://s2.loli.net/2022/07/13/vZBRxOeAcM34u1k.png)\n","tags":["python","正则"],"categories":["python"]},{"title":"scrapy框架_创建与运行","url":"/2023/03/20/scrapy框架-创建与运行/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**scrapy框架_创建与运行**</strong></font>\n\n<!--more-->\n\n## <font color=#f26522 size=4 face=宋体><strong>**scrapy框架：**</strong></font>\n\n![img](https://s2.loli.net/2022/07/16/DulfvFrnzBwIxXo.png)\n\n<font color=#f26522 size=4 face=宋体><strong>**创建scrapy工程：**</strong></font>\n\n```python\n# 到达指定目录之后\nscrapy startproject s_projetc    # 创建一个 名叫 s_projetc  的scrapy 工程\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**创建爬虫文件：**</strong></font>\n\n```python\n# 进入到指定scrapy目录下\nscrapy genspider first www.baidu.com    # 在scrapy项目下 创建一个名叫  first 的爬虫文件 起始网址是www.baidu.com\n\n执行scrapy 工程\n\nscrapy crawl first   # 执行scrapy工程中的 first 文件\n\nscrapy crawl first --nolog   #不推荐做法 执行first文件  不打印log \n\n# settings.py中设置 \n# 显示指定类型的日志信息\nLOG_LEVEL = 'ERROR'    # 忽略日志信息，只打印错误日志信息\n```\n\n```python\n# 在scrapy中  可以直接对返回数据进行xpath解析\ndef parse(self, response):\n    div_list = response.xapth('//*/div')\n    for div in div_list:\n        # 返回xpath列表, 但是列表袁术一定是Selector类型的对象\n        # extract 可以将selector对象中的data参数存储的字符串提取出来\n        author = div.xpath('./div[1]/a/text()')[0].extract()\n        #列表调用了extract之后, 则表示将列表中的每一个Selector对象中的data对应的字符串提取了出来\n        content = div.xpath('./a[1]/div/text()').extract()\n        content = ''.join(content)\n        print(author, content)\n\n        break\n\n# 重点\n        # text = response.body.decode(response.encoding)\n        text = response.text   # 等同于  response.body.decode(response.encoding)\n        print(text)\n\n        url = response.url    # 返回请求地址   url\n        print(url)\n\n        status = response.status    #  返回请求状态\n        print(status)\n\n        headers = response.headers    # 返回  headers\n        print(headers)\n```\n\n","tags":["python","scrapy"],"categories":["scrapy"]},{"title":"scrapy框架持久化存储","url":"/2023/03/20/scrapy框架持久化存储/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**scrapy框架持久化存储：**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**—、基于终端指令 的持久化**</strong></font>\n\n```python\n# 要求：只可以将parse方法的返回值存储到本地的文本文件中\n# 存储格式限定：json、jsonlines、jl、csv、xml、marshal、pickle\n# 指令: scrapy crawl <爬虫入口文件> -o <保存路径>\n终端指令  ==>  scrapy crawl top_main -o ./ks.csv\n\n# 优点： 简介 高效 便捷\n# 缺点： 局限性比较墙（数据只可以存储到指定的 后缀 文本文件中）\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**例如：**</strong></font>\n\n```python\nimport scrapy\n\n# 基于终端的持久化存储范本\n\nclass TopMainSpider(scrapy.Spider):\n    name = 'top_main'\n    # allowed_domains = ['www.toptoon.net']\n    # start_urls = ['https://www.qiushibaike.com']\n    start_urls = ['https://www.xiurenb.com/']\n\n    def parse(self, response):\n        li_list = response.xpath('/html/body/div[3]/div/div[2]/ul/li')\n        images = []\n        for li in li_list:\n            girl_name = ''.join(li.xpath('a/div/span/text()').extract())\n            page_img = f\"https://www.xiurenb.com{''.join(li.xpath('a/img/@src').extract())}\"\n            images_o = {\n                'girl': girl_name,\n                'img': page_img\n            }\n            images.append(images_o)\n        return images\n\n# 终端运行命令 scrapy crawl <爬虫入口文件> -o <保存路径>   即可保存到本地持久化\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>**二、基于管道 持久化**</strong></font>\n\n```python\n1、数据解析\n2、在items.py 中定义数据名   # 例如 ： girl_name = scrapy.Field()\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**2、 设置封装爬虫文件中的提交管道数据**</strong></font>\n\n```python\nimport scrapy\nfrom xiuren.items import XiurenItem    # 导入items 下的管道类\n\nclass TopMainSpider(scrapy.Spider):\n    name = 'top_main'\n    # allowed_domains = ['www.xiurenb.com']\n    start_urls = ['https://www.xiurenb.com/']\n\n\n    def parse(self, response):\n        li_list = response.xpath('/html/body/div[3]/div/div[2]/ul/li')\n        images = []\n        for li in li_list:\n            girl_name = ''.join(li.xpath('a/div/span/text()').extract())\n            page_img = f\"https://www.xiurenb.com{''.join(li.xpath('a/img/@src').extract())}\"\n\n\n            item = ToptoonItem()   # 实例化导入的类\n\n            # 开始封装字段\n            item['girl_name'] = girl_name\n            item['page_img'] = page_img\n\n            yield item   # 将item 以迭代器的方式 提交给管道\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**3、items.py 下设置:**</strong></font>\n\n```python\nimport scrapy\n\nclass XiurenItem(scrapy.Item):\n    # define the fields for your item here like:\n    # name = scrapy.Field()\n    # \n    girl_name = scrapy.Field()\n    page_img = scrapy.Field()\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**4、 pipelines.py设置**</strong></font>\n\n```python\n#  在该文件夹下可以执行数据的存储 写入数据库等等\n\nfrom itemadapter import ItemAdapter\nclass XiurenPipeline:\n    fq = None\n    # 开始的时候执行一次\n    def open_spider(self, spider):\n        print(\"开始爬虫 ==>\")\n        # 在当前文件夹下打开_text_xiuren.txt\n        self.fq = open('_text_xiuren.txt', 'a+', encoding='utf-8')\n\n    def process_item(self, item, spider):\n        page_img = item['page_img']\n        girl_name = item['girl_name']\n        self.fq.write(f\"{girl_name} ==> {page_img}\\n\")\n        return item\n\n    # 爬虫结束的时候 执行一次\n    def close_spider(self, spider):\n        # 该函数下 并不局限任何参数\n        print(\"结束爬虫\")\n        self.fq.close()\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**5、settings.py 下开启管道（不开启 无法使用）**</strong></font>\n\n```python\n# 管道可以多个，但是需要在settings.py中配置每个管道\n\nITEM_PIPELINES = {\n   'toptoon.pipelines.ToptoonPipeline': 300,\n    # 300表示的是优先级  数值越小  优先级就越高\n}\n```\n","tags":["python","scrapy"],"categories":["scrapy"]},{"title":"Nginx跨域解决方案","url":"/2023/03/20/Nginx跨域解决方案/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**Nginx跨域解决方案：**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**Access-Control-Allow-Origin 轻松解决宝塔 Nginx 跨域问题**</strong></font>\n\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>**概述：**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**出于浏览器的同源策略限制。同源策略（Sameoriginpolicy）是一种约定，它是浏览器最核心也最基本的安全功能，如果缺少了同源策略，则浏览器的正常功能可能都会受到影响。可以说 Web 是构建在同源策略基础之上的，浏览器只是针对同源策略的一种实现。同源策略会阻止一个域的 javascript 脚本和另外一个域的内容进行交互。所谓同源（即指在同一个域）就是两个页面具有相同的协议（protocol），主机（host）和端口号（port）。**</strong></font>\n\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>**疑问：**</strong></font>\n\n- <font color=#f26522 size=4 face=宋体><strong>**提问 1：什么是跨域？**</strong></font>\n- <font color=#f26522 size=4 face=宋体><strong>**提问 2：如何解决跨域问题？**</strong></font>\n\n\n\n## <font color=#00b2c2 size=5 face=宋体><strong>**解答：**</strong></font>\n\n- <font color=#f26522 size=4 face=宋体><strong>**回答 1：a 页面想获取 b 页面的资源，如果 a、b 页面的协议、域名、端口、子域名不同，所进行的访问行动都是跨域的，而浏览器为了安全问题一般都限制了跨域访问，也就是不允许跨域请求资源。比如我们在使用 CDN 时就经常会遇到跨域问题。**</strong></font>\n- <font color=#f26522 size=4 face=宋体><strong>**回答 2：以宝塔 Nginx 环境来说，我们只要把下面的 Header 头指令添加到网站 b 宝塔面板「网站」==>「设置」==>「配置文件」==>「倒数第三行」当中保存并重载 Nginx 配置即可。**</strong></font>\n\n```\nadd_header Access-Control-Allow-Origin *;\nadd_header Access-Control-Allow-Headers \"Origin, X-Requested-With, Content-Type, Accept\";\nadd_header Access-Control-Allow-Methods \"GET, POST, OPTIONS\";\n```\n\n![img](https://s2.loli.net/2022/07/27/4hyM7asOkUq8CDE.png)\n\n## <font color=#00b2c2 size=5 face=宋体><strong>**验证：**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**如果你已经按照上面的方法在 b 网站宝塔面板 Nginx 配置文件中添加了 Header 头指令 ，那么现在你可以访问 a 网站按F12 查看元素检查是否还存在跨域错误提示。**</strong></font>\n\n## <font color=#00b2c2 size=5 face=宋体><strong>**最后：**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**注意：在实际中 Access-Control-Allow-Origin 尽量不要指定为 * ，最好设置为允许访问的域名，比如：https://www.a.com 。**</strong></font>\n","tags":["运维","linux","nginx","跨域"],"categories":["运维"]},{"title":"在CentOS7下安装部署ffmpeg","url":"/2023/03/20/在CentOS7下安装部署ffmpeg/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**在CentOS7下安装部署ffmpeg：**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**[FFmpeg](https://so.csdn.net/so/search?q=FFmpeg&spm=1001.2101.3001.7020)是一个开源免费的多媒记录、转换数字音频、视频，并能将flv、mov等。**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**我们的开发人员在分析视频流数据时，也会经常用到这款工具。比如：**</strong></font>\n\n<font color=#b0171f size=3 face=宋体><strong>**录制：采集–>编码–>封装—>生成文件**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**段落引用视频裁剪：输入音视频文件—>解复用得到视频流—>视频流解码–>视频帧画面–>图像帧裁剪–>编码—>封装–>生成文件**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**段落引用分辨率修改：输入音视频文件—>解复用得到视频流—>视频流解码–>视频帧画面–>图像帧修改分辨率–>编码—>封装–>生成文件**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**段落引用文件格式转码：输入MP4文件–>解复用封装得到解码数据包–>复用封装格式成FLV—>输出文件**</strong></font>\n![img](https://s2.loli.net/2022/07/27/CuVJHTw6dLsmUfv.jpg)\n\n<font color=#00b2c2 size=5 face=宋体><strong>**今天和大家分享一下如何在CentOS7下安装部署ffmpeg。**</strong></font>\n\n```python\n# 安装epel-release，因为安装需要使用其他的repo源，所以需要epel支持：\nyum install -y epel-release rpm\n\n# 安装Nux-Dextop源：\nrpm --import http://li.nux.ro/download/nux/RPM-GPG-KEY-nux.ro\nrpm -Uvh http://li.nux.ro/download/nux/dextop/el7/x86_64/nux-dextop-release-0-1.el7.nux.noarch.rpm\nyum repolist\n\n# 开始安装\nyum install -y ffmpeg\n```\n\n<font color=red size=5 face=宋体><strong>**这样ffmpeg就正常安装完成了。**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**FFmpeg具有非常强大的功能，包括视频采集、视频格式转换、视频抓图、给视频加水印等，同时还能兼容行转换，并使用高质量的多相滤波器动态调整视频大小。**</strong></font>\n","tags":["centos7","ffmpeg"],"categories":["视频编辑"]},{"title":"Mako模板创建流程","url":"/2023/03/20/Mako模板创建流程/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**Mako模板创建流程：**</strong></font>\n\n<!--more-->\n\n<font color=red size=3 face=宋体><strong>官方文档地址 ： https://docs.makotemplates.org/en/latest/</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**1.安装Django包：**</strong></font>\n\n```python\n# 安装django项目\n\npip3 install virtualenv   # 安装virtualenv\npython3 -m venv django_venv   # 创建venv虚拟环境\nsource ./django_venv/bin/activate    # 进入虚拟环境\n\n# 下载django\npip3 install django  # 直接安装\npip3 install django==2.2 -i https://pypi.douban.com/simple    # 指定安装版本 和安装源\n\n# 创建工程  \ndjango-admin startproject mysite    #  创建一个名叫mysite的django工程\npython manage.py startapp app     # 创建一个名叫app的子应用\n\n# 运行命令 \npython3 manage.py runserver 0.0.0.0:8000   # 指定运行到 8000 端口\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**2.配置settings：**</strong></font>\n\n```python\n# pip install mako    在虚拟环境中安装mako 包\nALLOWED_HOSTS = [\"*\"]    # 允许所有ip访问\n\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'app',          # 以上是默认系统生成， 此处添加子应用名称，在这里添加了才可以使用\n]\n\nTEMPLATES = [    # temolates 模板配置\n\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [os.path.join(BASE_DIR, 'templates')],     #  自动生成修改\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n            ],\n        },\n    },\n]\n\n\n#  固定写法\nLANGUAGE_CODE = 'zh-hans'\nTIME_ZONE = 'Asia/Shanghai'\nUSE_I18N = True\nUSE_I10N = True\nUSE_TZ = True\n\nSTATIC_URL = '/static/'\nSTATICFILES_DIRS = [\n    os.path.join(BASE_DIR, 'static')\n]\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**3.配置主路由urls内容：**</strong></font>\n\n```python\nfrom django.contrib import admin\nfrom django.urls import path, include    # 导入include包\n\nurlpatterns = [\n    path('admin/', admin.site.urls),    # 固定写法 系统自动生成\n    path('', include('app.urls'))     # 添加子路由\n]\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**4.配置子路由urls内容（mako模板版本）：**</strong></font>\n\n```python\nfrom django.urls import path\nfrom .views import mako   # 导入mako包\n\nurlpatterns = [\n    path('', mako.as_view())     # 指向mako模板\n]\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**5.创建mako模板py（app > base_render.py）文件：**</strong></font>\n\n```python\nfrom mako.lookup import TemplateLookup\nfrom django.template import RequestContext\nfrom django.conf import settings\nfrom django.template.context import Context\nfrom django.http import HttpResponse\n\ndef render_to_response(request, template, data=None):\n    context_instance = RequestContext(request)   #  实例化方法\n    path = settings.TEMPLATES[0]['DIRS'][0]     # 去settings中取 template路径\n    lookup = TemplateLookup(                    # mako包中的方法 实例化  并指定输入  输出 编码为  \"utf-8\"\n        directories=[path],                     # 默认的模板路径 替换成mako路径\n        output_encoding='utf-8',\n        input_encoding='utf-8',\n    )\n\n    mako_template = lookup.get_template(template)       # lookup下的方法get_template 传入主函数导入进来的 template\n\n    if not data:    # 判断传过来的data是否有值   如果没有值  就给一个默认的空字典\n        data = {}\n    if context_instance:\n        context_instance.update(data)\n    else:\n        context_instance = Context(data)\n    result = {}\n    for d in context_instance:\n        result.update(d)\n    result['csrf_token'] = ''.format(request.META.get('CSRF_COOKIE', ''))   # 固定写法 csrf_token 验证\n    return HttpResponse(mako_template.render(**result))   # 返回HttpResponse mako_template下的render方法    因为result 是字典 所有需要加两个*\n    # return HttpResponse(content, content_type='text/csv')  # 可以指定 content_type类型\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**6.配置views.py：**</strong></font>\n\n```python\nfrom .base_render import render_to_response\nfrom django.views.generic import View\n# Create your views here.\nfrom django.shortcuts import render\nfrom django.http import HttpResponse\nimport requests\n\n\nclass mako(View):\n    def get(self, request):\n        data = {'name': 'coocoo', 'age': 20}\n        return render_to_response(request, 'index.html', data=data)\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**7.创建 templates > index.html：**</strong></font>\n\n```python\n//该内容是mako模板下的html\n\n\n\n    \n    Title\n\n\n    {name}{age}\n    <%!\n        from django.conf import settings\n        import requests\n        res_a = requests.get('https://www.baidu.com')\n        res_a.encoding = 'utf-8'\n    %>\n{#    {settings.TEMPLATES[0]['DIRS'][0]}#}{res_a.text}\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**8.Mako基本语法**</strong></font>\n\n```python\n${name}   # 拿取变量 name    方式为 ${}\n<%! import requests %>    # 执行python代码 代码内容用 <%! 开始  %>结尾\n```\n","tags":["python","Mako"],"categories":["python","django"]},{"title":"Jinja2模板创建流程","url":"/2023/03/20/Jinja2模板创建流程/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**Jinja2模板创建流程：**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**1.安装Django包：**</strong></font>\n\n```python\n# 安装django项目\n\npip3 install virtualenv   # 安装virtualenv\npython3 -m venv django_venv   # 创建venv虚拟环境\nsource ./django_venv/bin/activate    # 进入虚拟环境\n\n# 下载django\npip3 install django  # 直接安装\npip3 install django==2.2 -i https://pypi.douban.com/simple    # 指定安装版本 和安装源\n\n# 创建工程  \ndjango-admin startproject mysite    #  创建一个名叫mysite的django工程\npython manage.py startapp app     # 创建一个名叫app的子应用\n\n# 运行命令 \npython3 manage.py runserver 0.0.0.0:8000   # 指定运行到 8000 端口\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**2.配置settings：**</strong></font>\n\n```python\n# pip install jinja2    在虚拟环境中安装mako 包\nALLOWED_HOSTS = [\"*\"]    # 允许所有ip访问\n\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'app',          # 以上是默认系统生成， 此处添加子应用名称，在这里添加了才可以使用\n]\n\nTEMPLATES = [    # temolates 模板配置\n\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [os.path.join(BASE_DIR, 'templates')],     #  自动生成修改\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n            ],\n        },\n    },\n]\n\n\n#  固定写法\nLANGUAGE_CODE = 'zh-hans'\nTIME_ZONE = 'Asia/Shanghai'\nUSE_I18N = True\nUSE_I10N = True\nUSE_TZ = True\n\nSTATIC_URL = '/static/'\nSTATICFILES_DIRS = [\n    os.path.join(BASE_DIR, 'static')\n]\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**3.配置主路由urls内容：**</strong></font>\n\n```python\nfrom django.contrib import admin\nfrom django.urls import path, include    # 导入include包\n\nurlpatterns = [\n    path('admin/', admin.site.urls),    # 固定写法 系统自动生成\n    path('', include('app.urls'))     # 添加子路由\n]\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**4.配置子路由urls内容（mako模板版本）：**</strong></font>\n\n```python\nfrom django.urls import path\nfrom .views import mako   # 导入mako包\n\nurlpatterns = [\n    path('', mako.as_view())     # 指向mako模板\n]\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**5.创建jinja2模板py（app > base_jinja2.py）文件：**</strong></font>\n\n```python\nfrom jinja2 import Environment\nfrom django.contrib.staticfiles.storage import staticfiles_storage\nfrom django.urls import reverse\n\ndef environment(**options):\n    env = Environment(**options)\n    env.globals.update({\n        'static': staticfiles_storage.url,\n        'url': reverse\n    })\n    return env\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**6.配置views.py：**</strong></font>\n\n```python\nfrom .base_render import render_to_response\nfrom django.views.generic import View\n# Create your views here.\nfrom django.shortcuts import render\nfrom django.http import HttpResponse\nimport requests\n\n\nclass mako(View):\n    def get(self, request):\n        data = {'name': 'coocoo', 'age': 20}\n        return render(request, 'index.html', data=data)\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**7.创建 templates > index.html：**</strong></font>\n\n```python\n//该内容是mako模板下的html\n    \n    Title\n\n\n    {name}{age}\n    <%!\n        from django.conf import settings\n        import requests\n        res_a = requests.get('https://www.baidu.com')\n        res_a.encoding = 'utf-8'\n    %>\n{#    {settings.TEMPLATES[0]['DIRS'][0]}#}{res_a.text}\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**8.Mako基本语法：**</strong></font>\n\n```python\n变量被 {{ 和 }} 包围，如下所示：\nMy first name is {{ first_name }}. My last name is {{ last_name }}.\n\n\n字典查找，属性查找和列表索引查找均以点符号实现：\n{{ my_dict.key }}\n{{ my_object.attribute }}\n{{ my_list.0 }}\n\n\n标签在渲染过程中提供了任意逻辑。\n这个定义是故意含糊的。例如，标签可以输出内容，或用作控制结构如 “if” 语句和 “for” 循环，或从数据库中抓取内容，甚至可以访问其他模板标签。\n标签被 {% 和 %} 包围，如下所示：\n\n标签被 {% 和 %} 包围，如下所示：\n{% csrf_token %}\n\n大多数标签都接受参数：\n{% cycle 'odd' 'even' %}\n\n一些标签需要开始和结束标签：\n{% if user.is_authenticated %}Hello, {{ user.username }}.{% endif %}\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**9、jinja2基本语法：**</strong></font>\n\n![img](https://s2.loli.net/2022/06/21/VmLFau3lHsfKrYp.png)\n\n","tags":["python","jinja2"],"categories":["python","django"]},{"title":"Linux下Django关于安装mysqlclient报错的问题","url":"/2023/03/20/Linux下Django关于安装mysqlclient报错的问题/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**Linux下Django关于安装mysqlclient报错的问题：**</strong></font>\n\n<!--more-->\n\n---\n\n<font color=#f26522 size=4 face=宋体><strong>**错误提示：**</strong></font>\n\n```\nERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**解决办法：**</strong></font>\n\n<font color=#b0171f size=3 face=宋体><strong>**我这边是因为缺少库导致的安装失败（PYTHON=3.81，DJANGO=4.0.6）**</strong></font>\n\n```shell\nsudo apt-get install libmysqlclient-dev\npip3 install wheel\n```\n\n<font color=#b0171f size=3 face=宋体><strong>**最后在执行mysqlclient的安装**</strong></font>\n\n```shell\npip3 install mysqlclient\n```\n\n","tags":["python","django","数据库","linux"],"categories":["python","error"]},{"title":"Package | 解决 Could not build wheels for opencv-python which use PEP 517 and cannot be installed","url":"/2023/03/20/Package-解决-Could-not-build-wheels-for-opencv-python-which-use-PEP-517-and-cannot-be-installed/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**背景：**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**在nvidia ngc平台下载docker image，根据实验要求在环境里安装opencv。因为当前实验tensorflow要求代码，还是使用尽可能新的环境，则可以避免大部分环境问题。**</strong></font>\n\n<font color=#00b2c2 size=5 face=宋体><strong>**问题：**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**通过pip安装opencv，指令如下：**</strong></font>\n\n```python\npip install opencv-python\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**安装过程的输出：**</strong></font>\n\n```shell\nCollecting opencv-python\n  Downloading https://files.pythonhosted.org/packages/77/f5/49f034f8d109efcf9b7e98fbc051878b83b2f02a1c73f92bbd37f317288e/opencv-python-4.4.0.42.tar.gz (88.9MB)\n    100% |████████████████████████████████| 88.9MB 919kB/s\n  Installing build dependencies ... done\n  Getting requirements to build wheel ... done\n    Preparing wheel metadata ... done\nRequirement already satisfied: numpy>=1.13.1 in /usr/local/lib/python3.5/dist-packages (from opencv-python) (1.14.5)\nBuilding wheels for collected packages: opencv-python\n  Building wheel for opencv-python (PEP 517) ...\n```\n\n<font color=red size=4 face=宋体><strong>**PEP 517信息出现后，过了很长时间，出现报错信息：**</strong></font>\n\n```shell\nConfiguring Project\n    Working directory:\n      /tmp/pip-install-zujf20md/opencv-python/_skbuild/linux-x86_64-3.6/cmake-build\n    Command:\n      cmake /tmp/pip-install-zujf20md/opencv-python/opencv -G 'Unix Makefiles' -DCMAKE_INSTALL_PREFIX:PATH=/tmp/pip-install-zujf20md/opencv-python/_skbuild/linux-x86_64-3.6/cmake-install -DPYTHON_EXECUTABLE:FILEPATH=/usr/bin/python -DPYTHON_VERSION_STRING:STRING=3.6.8 -DPYTHON_INCLUDE_DIR:PATH=/usr/include/python3.6m -DPYTHON_LIBRARY:FILEPATH=/usr/lib/x86_64-linux-gnu/libpython3.6m.so -DSKBUILD:INTERNAL=TRUE -DCMAKE_MODULE_PATH:PATH=/tmp/pip-build-env-tr73ewqw/overlay/lib/python3.6/site-packages/skbuild/resources/cmake -DPYTHON3_EXECUTABLE=/usr/bin/python -DPYTHON3_INCLUDE_DIR=/usr/include/python3.6m -DPYTHON3_LIBRARY=/usr/lib/x86_64-linux-gnu/libpython3.6m.so -DBUILD_opencv_python3=ON -DBUILD_opencv_python2=OFF -DBUILD_opencv_java=OFF -DOPENCV_PYTHON3_INSTALL_PATH=python -DINSTALL_CREATE_DISTRIB=ON -DBUILD_opencv_apps=OFF -DBUILD_opencv_freetype=OFF -DBUILD_SHARED_LIBS=OFF -DBUILD_TESTS=OFF -DBUILD_PERF_TESTS=OFF -DBUILD_DOCS=OFF -DCMAKE_BUILD_TYPE:STRING=Release\n\n  Copying files from CMake output\n  Traceback (most recent call last):\n    File \"/usr/local/lib/python3.6/dist-packages/pip/_vendor/pep517/_in_process.py\", line 207, in \n      main()\n    File \"/usr/local/lib/python3.6/dist-packages/pip/_vendor/pep517/_in_process.py\", line 197, in main\n      json_out['return_val'] = hook(**hook_input['kwargs'])\n    File \"/usr/local/lib/python3.6/dist-packages/pip/_vendor/pep517/_in_process.py\", line 141, in build_wheel\n      metadata_directory)\n    File \"/usr/local/lib/python3.6/dist-packages/setuptools/build_meta.py\", line 209, in build_wheel\n      wheel_directory, config_settings)\n    File \"/usr/local/lib/python3.6/dist-packages/setuptools/build_meta.py\", line 194, in _build_with_temp_dir\n      self.run_setup()\n    File \"/usr/local/lib/python3.6/dist-packages/setuptools/build_meta.py\", line 237, in run_setup\n      self).run_setup(setup_script=setup_script)\n    File \"/usr/local/lib/python3.6/dist-packages/setuptools/build_meta.py\", line 142, in run_setup\n      exec(compile(code, __file__, 'exec'), locals())\n    File \"setup.py\", line 496, in \n      main()\n    File \"setup.py\", line 289, in main\n      cmake_source_dir=cmake_source_dir,\n    File \"/tmp/pip-build-env-tr73ewqw/overlay/lib/python3.6/site-packages/skbuild/setuptools_wrap.py\", line 629, in setup\n      cmake_source_dir, skbuild_kw['cmake_install_dir'])\n    File \"setup.py\", line 381, in _classify_installed_files_override\n      with open('scripts/__init__.py', 'r') as custom_init:\n  FileNotFoundError: [Errno 2] No such file or directory: 'scripts/__init__.py'\n  ----------------------------------------\n  ERROR: Failed building wheel for opencv-python\n  Running setup.py clean for opencv-python\nFailed to build opencv-python\nERROR: Could not build wheels for opencv-python which use PEP 517 and cannot be installed directly\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>**解决方案：**</strong></font>\n\n```python\npip install --upgrade pip setuptools wheel\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**重试安装：**</strong></font>\n\n```python\npip install opencv-python\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**问题解决啦~！**</strong></font>\n","tags":["错误","opencv"],"categories":["python"]},{"title":"django设置debug设为False,前端样式出现错乱或静态文件404问题。","url":"/2023/03/20/django设置debug设为False-前端样式出现错乱或静态文件404问题。/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**django设置debug设为False,前端样式出现错乱或静态文件404问题。**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**django部署到生产环境中遇到的坑大部分都是引用静态文件带来的，**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**setting设置里面debug设为False，**</strong></font>\n\n<font color=#b0171f size=3 face=宋体><strong>**需要配置如下:**</strong></font>\n\n```python\nALLOWED_HOSTS=[\"服务器ip\"]\nSTATIC_ROOT = os.path.join(BASE_DIR, 'static')\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**然后执行python manage.py collectstatic将静态文件全部复制到根目录下static里。**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**这时候在开发环境下是不能处理一些静态文件了，需要在运行时强制Django处理静态文件：**</strong></font>\n\n```python\npython manage.py runserver 0.0.0.0:8000 --insecure\n```\n\n","tags":["python","django","错误"],"categories":["python","django"]},{"title":"python_协程的基础用法","url":"/2023/03/20/python-协程的基础用法/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**python_协程的基础用法：**</strong></font>\n\n<!--more-->\n\n```python\nimport aiohttp   # pip3 install aiohttp   # 支持异步模式的网络请求模块\nimport asyncio\nimport time\n\nasync def fetch(session, url):\n    a_ = time.time()\n    print(f\"发送请求： {a_}   {url}\")\n    async with session.get(url, verify_ssl=False) as response:\n        content = await response.content.read()\n        file_name = url.rsplit('_')[-1]\n        with open(f\"/home/x1/图片/{file_name}\", 'wb') as file_obj:\n            file_obj.write(content)\n        print(f\"下载完成了： {int(time.time() - a_)}   {url}\")\n\nasync def main():\n    async with aiohttp.ClientSession() as session:\n        url_list = [\n            'https://xxx1.jpg',\n            'https://xxx2.jpg',\n            'https://xxx3.jpg']\n        tasks = [asyncio.create_task(fetch(session, url)) for url in url_list]\n        await asyncio.wait(tasks)\n\nif __name__ == '__main__':\n    asyncio.run(main())\n```\n\n","tags":["python","异步、协程"],"categories":["python_异步"]},{"title":"ubuntu 安装 截图工具","url":"/2023/03/20/ubuntu-安装-截图工具/","content":"\n<font color=#f26522 size=5 face=宋体><strong>**ubuntu 安装 截图工具：**</strong></font>\n\n<!--more-->\n\n```shell\n# 安装火焰截图工具\nsudo apt-get install flameshot\n\n# 添加快捷键命令\nflameshot gui   # 火焰截图\ngnome-screenshot -a   # ubuntu本身系统截图命令\n```\n","tags":["工具","系统"],"categories":["linux"]},{"title":"Linux查看硬件信息","url":"/2023/03/20/Linux查看硬件信息/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**Linux查看硬件信息：**</strong></font>\n\n<!--more-->\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**系统：**</strong></font>\n\n```\n# uname -a               # 查看内核/操作系统/CPU信息\n# head -n 1 /etc/issue   # 查看操作系统版本\n# cat /proc/cpuinfo      # 查看CPU信息\n# hostname               # 查看计算机名\n# lspci -tv              # 列出所有PCI设备（yum install pciutils）\n# lsusb -tv              # 列出所有USB设备\n# lsmod                  # 列出加载的内核模块\n# env                    # 查看环境变量\n```\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**资源：**</strong></font>\n\n```\n# free -m                # 查看内存使用量和交换区使用量\n# df -h                  # 查看各分区使用情况\n# du -sh <目录名>        # 查看指定目录的大小\n# grep MemTotal /proc/meminfo   # 查看内存总量\n# grep MemFree /proc/meminfo    # 查看空闲内存量\n# uptime                 # 查看系统运行时间、用户数、负载\n# cat /proc/loadavg      # 查看系统负载\n```\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**磁盘和分区：**</strong></font>\n\n```\n# mount | column -t      # 查看挂接的分区状态\n# fdisk -l               # 查看所有分区\n# swapon -s              # 查看所有交换分区\n# hdparm -i /dev/hda     # 查看磁盘参数(仅适用于IDE设备)\n# dmesg | grep IDE       # 查看启动时IDE设备检测状况\n```\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**网络：**</strong></font>\n\n```\n# ifconfig               # 查看所有网络接口的属性\n# iptables -L            # 查看防火墙设置\n# route -n               # 查看路由表\n# netstat -lntp          # 查看所有监听端口\n# netstat -antp          # 查看所有已经建立的连接\n# netstat -s             # 查看网络统计信息\n```\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**进程：**</strong></font>\n\n```\n# ps -ef                 # 查看所有进程\n# top                    # 实时显示进程状态\n```\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**用户：**</strong></font>\n\n```\n# w                      # 查看活动用户\n# id <用户名>            # 查看指定用户信息\n# last                   # 查看用户登录日志\n# cut -d: -f1 /etc/passwd   # 查看系统所有用户\n# cut -d: -f1 /etc/group    # 查看系统所有组\n# crontab -l             # 查看当前用户的计划任务\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**服务：**</strong></font>\n\n```\n# chkconfig --list       # 列出所有系统服务\n# chkconfig --list | grep on    # 列出所有启动的系统服务\n```\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**程序：**</strong></font>\n\n```\n# rpm -qa                # 查看所有安装的软件包\n```\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**查看网卡型号：**</strong></font>\n\n```\n# lspci | grep Ethernet\n```\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**查看内存和cpu最直接最常用的命令：**</strong></font>\n\n```\n# free\n# cat /proc/cpuinfo\n```\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**查看硬盘信息（查看硬盘型号和硬盘序列号）：**</strong></font>\n\n```\n# df -h\n```\n","tags":["系统","linux","命令"],"categories":["linux"]},{"title":"m3u8下载协议不在白名单","url":"/2023/03/20/m3u8下载协议不在白名单/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>m3u8下载协议不在白名单：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**Protocol ‘https‘ not on whitelist ‘file,crypto‘ ——m3u8下载协议不在白名单，m3u8下载器推荐**</strong></font>\n\n```python\nffmpeg -allowed_extensions ALL -protocol_whitelist concat,file,http,https,tcp,tls,crypto -t 80 -i s_3.m3u8 -c copy ../v2.mp4\n```\n","tags":["错误","ffmpeg"],"categories":["视频编辑"]},{"title":"MTproxy_代理搭建","url":"/2023/03/20/MTproxy-代理搭建/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**1、MTproxy_代理搭建:**</strong></font>\n\n<!--more-->\n\n```shell\n# 自建脚本操作\n# 1、创建脚本路径\nmkdir /root/mtproxy\n\n# 2、进入脚本文件夹\ncd /root/mtproxy\n\n# 3、开始执行安装程序\nwget -N --no-check-certificate http://teadan.com/all_bash/mtproxy.sh && chmod +x mtproxy.sh && bash mtproxy.sh\n\n\n# 备用通道与自建脚本自由第 3 步骤不同，请替换为以下脚本\nwget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubiBackup/doubi/master/mtproxy.sh && chmod +x mtproxy.sh && bash mtproxy.sh\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>**2、安装完成后续操作**</strong></font>\n\n```python\n# 创建软连接，以后启动该脚本就可以直接 mt 呼出脚本界面了\nln -s /root/mtproxy/mtproxy.sh /usr/local/bin/mt\n```\n","tags":["代理"],"categories":["工具"]},{"title":"selenium 无头模式 使用方法：","url":"/2023/03/20/selenium-无头模式-使用方法：/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**selenium 无头模式 使用方法：**</strong></font>\n\n<!--more-->\n\n```python\nfrom selenium import webdriver   # 导入selenium包\nfrom selenium.webdriver.chrome.service import Service    # 无头模式\n\n\ndef get_ck():\n    chromeOptions = webdriver.ChromeOptions()   # 实例化\n    chromeOptions.add_argument('--user-agent=Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36')   # 添加headers头文件\n    chromeOptions.add_argument('--headless')\n    chromeOptions.add_argument('--no-sandbox')\n    chromeOptions.add_argument('--disable-gpu')\n    driver = webdriver.Chrome(service=Service(\"/usr/bin/chromedriver\"), options=chromeOptions)      # 设置文件路径\n\n    # 请求方式\n    drive.get(\"https://www.baidu.com\")\n\n    # 等待selenium加载完成js内容\n    driver.implicitly_wait(3)\n\n    # 获取text文本格式内容\n    driver.page_source\n\n    # 完成之后 退出chrome\n    driver.close()\n    driver.quit()\n```\n\n","tags":["selenium"],"categories":["逆向_反爬"]},{"title":"requests模块 失败重试 方法记录","url":"/2023/03/20/requests模块-失败重试-方法记录/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**requests模块 失败重试 方法记录**</strong></font>\n\n<!--more-->\n\n```python\nimport requests   # pip install requests\nfrom requests.adapters import HTTPAdapter\n\n\ndef session():\n    session = requests.Session()   # 实例化\n    session.mount('http://', HTTPAdapter(max_retries=5))   # http重试最大5次\n    session.mount('https://', HTTPAdapter(max_retries=5))    # https 重试最大5次\n    session.headers = {\n        'User-Agent': \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.0.0 Safari/537.36\",\n        # 'User-Agent': 'PostmanRuntime/7.28.4',\n    }\n    return session\n```\n","tags":["requests"],"categories":["python"]},{"title":"天虹小主机 z3735f原装windos8.1 修改装ubuntu","url":"/2023/03/20/天虹小主机-z3735f原装windos8-1-修改装ubuntu/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**天虹小主机 z3735f原装windos8.1 修改装ubuntu**</strong></font>\n\n<!--more-->\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**但如此低的配置，实在是…. 一言难尽！**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**配置如下：**</strong></font>\n\n```\n- 2G 内存 、32G硬盘\n- 因特尔四核 Z3735\n- 这种配置.....它装个linux 系统   它不香么？  为什么非要上windos？\n- 于是. . . . 有了下面一出！\n```\n\n------\n\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>**折腾开始!**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**盒子到手，开机，未激活的Win8.1，瞄了一眼容量，试了试浏览器开个网页，感觉比树莓派强好多。**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**于是找出了硬盘里积压多年的ubuntu16.04 server x64，开始了装机。**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**半分钟后，它愉快的滚进了Win8.1。**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**没事看来是bios没换，于是进Bios，选MASS Stronger 闪退。**</strong></font>\n\n------\n\n\n<font color=#00b2c2 size=5 face=宋体><strong>**然后. . . .进入正题：**</strong></font>\n\n- 首先准备一个已经制作完成的ubuntu U盘，其他发行版的也行（但Linux的内核版本最好4.00以上）。\n- 拷贝[jfwells/linux-asus-t100ta](https://github.com/jfwells/linux-asus-t100ta/blob/master/boot/bootia32.efi) => **[点击下载](https://github.com/jfwells/linux-asus-t100ta/raw/master/boot/bootia32.efi)** 这个文件到U盘EFI/BOOT目录\n  - 这里有个问题，因为ubuntu写入u盘的时候，是没有办法更改空间大小的，所以我把主意打到了iso镜像文件上。\n  - 首先用UltraISO的读取然后把efi文件拖入 EFI/BOOT 用 UltraISO 保存 然后在写入u盘 然后，就可以直接使用小主机安装ubuntu系统了\n- <font color=#b0171f size=3 face=宋体><strong>接下来插入，就能引导进入grub引导页，完成正常安装步骤</strong></font>\n- <font color=#b0171f size=3 face=宋体><strong>安装完后不要拔掉U盘，第二次继续引导U盘，对第一项按一下C键</strong></font>\n- <font color=#b0171f size=3 face=宋体><strong>将里面的内容修改为（以你自己分区为准，善用TAB键自动补全），下面是我的结果</strong></font>\n\n```\nlinux (hd1,gpt2)/boot/vmlinuz-4.15.0-45-generic root=/dev/mmcblk1p2\ninitrd (hd1,gpt2)/boot/initrd.img-4.15.0-45-generic\n```\n\n- <font color=red size=3 face=宋体><strong>这时就可以进入刚刚安装好的系统，直接sudo su进超级用户</strong></font>\n- 执行下列命令\n\n```shell\napt update\napt-get install grub-efi-ia32-bin\ngrub-install --target=i386-efi --efi-directory=/boot/efi\nupdate-grub\n```\n\n- <font color=#00b2c2 size=3 face=宋体><strong>最后重启，就可以愉快的使用了</strong></font>\n","tags":["ubuntu","系统","DIY"],"categories":["折腾"]},{"title":"ubuntu 安装ssh 远程登录","url":"/2023/03/20/ubuntu-安装ssh-远程登录/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**ubuntu 安装ssh 远程登录**</strong></font>\n\n<!--more-->\n\n```shell\nsudo apt-get update\nsudo apt-get install openssh-server\nsudo ps -e |grep ssh\nsudo ifconfig\n```\n","tags":["系统","运维"],"categories":["linux"]},{"title":"python_异步aiomysql数据库操作指南","url":"/2023/03/20/python-异步aiomysql数据库操作指南/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**python_异步aiomysql数据库操作指南**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**其实一般数据库 使用pymysql操作数据库就行，但是那种超大型的数据库执行操作，pymysql就显得有点力不从心了。**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**所以我们需要一个可以异步操作mysql数据库的模块，特此记录一下 异步mysql数据库操作**</strong></font>\n\n```python\nimport asyncio\nimport aiomysql\n\nclass MySql:\n    async def select(self, loop, sql, pool):\n        async with pool.acquire() as conn:\n            async with conn.cursor() as cur:\n                await cur.execute(sql)\n                # r = await cur.fetchone()\n                # print(r)\n                try:\n                    res = cur.description\n                    columns_name = [i[0] for i in res]\n                    # print(columns_name)  # ['city', 'prcp']\n                    res = await cur.fetchall()\n                    res_dict = [dict(zip(columns_name, row_value)) for row_value in res]\n                    return res_dict\n                except:\n                    r = await cur.fetchone()\n                    return r\n\n    async def insert(self, loop, sql, pool):\n        async with pool.acquire() as conn:\n            async with conn.cursor() as cur:\n                await cur.execute(sql)\n                await conn.commit()\n\n    async def main(self, loop, sql_str, key_s='find'):\n        pool = await aiomysql.create_pool(\n            host='192.168.700.200',\n            port=3306,\n            user='cores',\n            password='hJ3TsdrA',\n            db='cores',\n            autocommit=True,\n            loop=loop)\n        if key_s == 'find':\n            c1 = MySql().select(loop=loop, sql=sql_str, pool=pool)\n        # c2 = MySql().insert(loop=loop, sql=\"insert into minifw (name) values ('hello')\", pool=pool)\n        # c2 = MySql().select(loop=loop, sql=f\"select * from web_comic where title='先交往后恋爱'\", pool=pool)\n            tasks = [asyncio.ensure_future(c1)]\n            return await asyncio.gather(*tasks)\n        if key_s == 'insert':\n            c2 = MySql().insert(loop=loop, sql=sql_str, pool=pool)\n            tasks = [asyncio.ensure_future(c2)]\n            return await asyncio.gather(*tasks)\n\n    def run_loop(self, sql_str, key_s='find'):    # find == 查询操作     “insert” == 写入操作\n        cur_loop = asyncio.get_event_loop()\n        azz = cur_loop.run_until_complete(MySql().main(cur_loop, sql_str, key_s=key_s))\n        if azz == None:\n            return ''\n        else:\n            return azz[0]\n\nif __name__ == '__main__':\n    man_status = MySql().run_loop(f\"select * from wemic where title='测试数据'\")   # 执行查询操作\n```\n","tags":["python","数据库","mysql"],"categories":["python_异步-数据库"]},{"title":"安装chrome_ 使用selenium","url":"/2023/03/20/安装chrome-使用selenium/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**安装chrome_ 使用selenium**</strong></font>\n\n<!--more-->\n\n# <font color=#f26522 size=4 face=宋体><strong>**1、查看 chrome 版本**</strong></font>\n\n+ chrome_历史版本下载 => [适用于 Linux 的最新版本 (cypress.io)](https://chromium.cypress.io/linux/)\n+ [CentOS7安装chrome和chromedriver_centos chromedriver-CSDN博客](https://blog.csdn.net/China_hdy/article/details/126739461)\n\n```shell\ngoogle-chrome --version\n\n# centos7  selenium 版本更新\n# 执行 wget https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm下载最新Linux的chrome\nwget https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm\n\n# 下载之后执行sudo yum localinstall google-chrome-stable_current_x86_64.rpm安装本地的rpm包则会替换之前版本的chrome\nsudo yum localinstall google-chrome-stable_current_x86_64.rpm\n```\n\n------\n\n<font color=#f26522 size=4 face=宋体><strong>**2、更新 || 禁止自动更新chrome**</strong></font>\n\n```shell\n# 禁止自动更新\necho 'exclude=google-chrome-stable' >> /etc/yum.conf\n\n# 更新 chrome\nsudo yum update google-chrome-stable\n```\n\n\n\n---\n\n<font color=#f26522 size=4 face=宋体><strong>**3、安装chrome**</strong></font>\n\n<font color=#b0171f size=3 face=宋体><strong>首先安装google的epel源</strong></font>\n\n```python\nvi /etc/yum.repos.d/google.repo\n\n[google]\nname=Google-x86_64\nbaseurl=http://dl.google.com/linux/rpm/stable/x86_64\nenabled=1\ngpgcheck=0\ngpgkey=https://dl-ssl.google.com/linux/linux_signing_key.pub \n\n\nyum update  # 更新\nyum install google-chrome-stable  # 安装\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**4、chromedriver下载**</strong></font>\n\n[淘宝源 下载](https://npm.taobao.org/mirrors/chromedriver/)\n[官方源 下载](http://chromedriver.storage.googleapis.com/index.html)\n\n[chromedriver新版本(116+)](https://googlechromelabs.github.io/chrome-for-testing/)\n\n找到chrome对应的chromedriver 版本，并下载\n\n```shell\nwget https://chromedriver.storage.googleapis.com/74.0.3729.6/chromedriver_linux64.zip\n```\n\n将下载的chromedriver 放到脚本同级目录调用\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**5 、为chromedriver授权**</strong></font>\n\n```shell\nchmod 755 chromedriver\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**6、测试代码 ts.py**</strong></font>\n\n```python\nfrom selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\n\nchrome_options = Options()\nchrome_options.add_argument(\"--headless\")\nchrome_options.add_argument('--disable-gpu')\nchrome_options.add_argument('--no-sandbox')    # 禁止沙箱模式，否则肯能会报错遇到chrome异常\nurl=\"https://www.west.cn/login.asp\"\nbrower=webdriver.Chrome(executable_path=\"./chromedriver\", chrome_options=chrome_options)\nbrower.get(url)\nprint(brower.current_url)\nbrower.get(\"https://www.west.cn/Manager/\")\nprint(brower.current_url)\nbrower.quit()\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**7、测试结果**</strong></font>\n\n![img](https://s2.loli.net/2022/10/23/gGApHus5ODlxSTi.png)\n","tags":["selenium"],"categories":["逆向","反爬"]},{"title":"python base64图片 编码、解码","url":"/2023/03/20/python-base64图片-编码、解码/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**Python data image/png;base64图片编码解码：**</strong></font>\n\n<!--more-->\n\n<font color=red size=5 face=宋体><strong>**特此声明:**</strong></font>\n\n### 本文转载自 https://blog.51cto.com/mouday/3040437\n\n<font color=#f26522 size=4 face=宋体><strong>**编码后的内容，可以在浏览器中直接打开，提示：先去掉回车**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**data类型的Url大致有下面几种形式**</strong></font>\n\n```\ndata:,<文本数据>\ndata:text/plain,<文本数据>\ndata:text/html,<HTML代码>\ndata:text/html;base64,<base64编码的HTML代码>\ndata:text/css,<CSS代码>\ndata:text/css;base64,<base64编码的CSS代码>\ndata:text/javascript,<Javascript代码>\ndata:text/javascript;base64,<base64编码的Javascript代码>\ndata:image/gif;base64,base64编码的gif图片数据\ndata:image/png;base64,base64编码的png图片数据\ndata:image/jpeg;base64,base64编码的jpeg图片数据\ndata:image/x-icon;base64,base64编码的icon图片数据\n```\n\n<font color=red size=4 face=宋体><strong>**Python3代码：**</strong></font>\n\n```python\n# -*- coding: utf-8 -*-\n\nimport base64\nimport re\nimport uuid\n\n\ndef decode_image(src):\n    \"\"\"\n    解码图片\n    :param src: 图片编码\n        eg:\n            src=\"data:image/gif;base64,R0lGODlhMwAxAIAAAAAAAP///\n                yH5BAAAAAAALAAAAAAzADEAAAK8jI+pBr0PowytzotTtbm/DTqQ6C3hGX\n                ElcraA9jIr66ozVpM3nseUvYP1UEHF0FUUHkNJxhLZfEJNvol06tzwrgd\n                LbXsFZYmSMPnHLB+zNJFbq15+SOf50+6rG7lKOjwV1ibGdhHYRVYVJ9Wn\n                k2HWtLdIWMSH9lfyODZoZTb4xdnpxQSEF9oyOWIqp6gaI9pI1Qo7BijbF\n                ZkoaAtEeiiLeKn72xM7vMZofJy8zJys2UxsCT3kO229LH1tXAAAOw==\"\n\n    :return: str 保存到本地的文件名\n    \"\"\"\n    # 1、信息提取\n    result = re.search(\"data:image/(?P<ext>.*?);base64,(?P<data>.*)\", src, re.DOTALL)\n    if result:\n        ext = result.groupdict().get(\"ext\")\n        data = result.groupdict().get(\"data\")\n\n    else:\n        raise Exception(\"Do not parse!\")\n\n    # 2、base64解码\n    img = base64.urlsafe_b64decode(data)\n\n    # 3、二进制文件保存\n    filename = \"{}.{}\".format(uuid.uuid4(), ext)\n    with open(filename, \"wb\") as f:\n        f.write(img)\n\n    return filename\n\n\ndef encode_image(filename):\n    \"\"\"\n    编码图片\n    :param filename: str 本地图片文件名\n    :return: str 编码后的字符串\n        eg:\n        src=\"data:image/gif;base64,R0lGODlhMwAxAIAAAAAAAP///\n            yH5BAAAAAAALAAAAAAzADEAAAK8jI+pBr0PowytzotTtbm/DTqQ6C3hGX\n            ElcraA9jIr66ozVpM3nseUvYP1UEHF0FUUHkNJxhLZfEJNvol06tzwrgd\n            LbXsFZYmSMPnHLB+zNJFbq15+SOf50+6rG7lKOjwV1ibGdhHYRVYVJ9Wn\n            k2HWtLdIWMSH9lfyODZoZTb4xdnpxQSEF9oyOWIqp6gaI9pI1Qo7BijbF\n            ZkoaAtEeiiLeKn72xM7vMZofJy8zJys2UxsCT3kO229LH1tXAAAOw==\"\n\n    \"\"\"\n    # 1、文件读取\n    ext = filename.split(\".\")[-1]\n\n    with open(filename, \"rb\") as f:\n        img = f.read()\n\n    # 2、base64编码\n    data = base64.b64encode(img).decode()\n\n    # 3、图片编码字符串拼接\n    src = \"data:image/{ext};base64,{data}\".format(ext=ext, data=data)\n    return src\n\n\nif __name__ == '__main__':\n    # 下载百度首页logo保存到本地 baidu.png\n    # https://www.baidu.com/img/bd_logo1.png\n\n    # 编码测试\n    print(encode_image(\"baidu.png\"))\n    # src = \"data:image/png;base64,iVBORw0KGgoAAAA...\"\n\n    # 解码测试\n    # print(decode_image(src))\n```\n","tags":["python","编码、解码","base64","图片转码"],"categories":["编码、解码"]},{"title":"ffmpeg 参数说明","url":"/2023/03/20/ffmpeg-参数说明/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**ffmpeg 参数说明：**</strong></font>\n\n<!--more-->\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**视频比特率 转换**</strong></font>\n\n```python\n-b:v 1500k   # 将视频比特率 转换至 1500kbps\n\n# 示例：\n# ffmpeg -i <输入视频> -b:v 1500k <输出视频>\nffmpeg -i input.mp4 -b:v 1500k output.mp4\n```\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**音频比特率 转换**</strong></font>\n\n```python\n-b:a 1500k   # 将视频比特率 转换至 128kbps\n\n# 示例：\n# ffmpeg -i <输入音频> -b:v 1500k <输出音频>   # 可以是音视频\nffmpeg -i input.mp4 -b:a 128k output.mp4\n```\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**视频帧率 转换**</strong></font>\n\n```python\n-r 30   # 将视频帧率 转换至 30帧/s\n\n# 示例：\n# ffmpeg -i <输入视频> -r 30 <输出视频> \nffmpeg -i a.mp4 -r 30 b.mp4\n```\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**音频采样率 转换**</strong></font>\n\n```python\n-ar 44100   # 将音频采样率 转换至 44100HZ\n\n# 示例：\n# ffmpeg -i <输入音频> -ar 44100 <输出音频>   # 可以是音视频\nffmpeg -i input.mp4 -ar 44100 output.mp4\n```\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**音频声道 转换**</strong></font>\n\n```python\n-ac 1   # 将视频声道 转换至 1通道\n\n# 示例：\n# ffmpeg -i <输入音频> -ac 1 <输出音频>   # 可以是音视频\nffmpeg -i input.mp4 -ac 1 output.mp4\n```\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**截取时长**</strong></font>\n\n```python\nffmpeg  -i input.mp4 -vcodec copy -acodec copy -ss 00:00:00 -to 00:15:00 input2.mp4 -y   # 截取视频\n```\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**Telegram直流播放支持码率**</strong></font>\n\n```python\nffmpeg -i input.mp4 -r 25 -c:v libx264 -profile:v baseline -level 3.0 -b:v 800k  -b:a 128k -ac 1 -ar 44100 新3_转25帧.mp4\n```\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**FFmpeg_从视频截取图片**</strong></font>\n\n```python\nffmpeg -ss <截取时间> -i <输入视频> -y -f image2 -vframes 1 <输出图片>\n\n例如：ffmpeg -ss 00:00:01 -i a.mp4 -y -f image2 -vframes 1 b.jpg\n```\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**FFmpeg_添加字幕**</strong></font>\n\n```python\nffmpeg -i <输入视频> -i <输入字幕> -map 0:0 -map 0:1 -map 1 -c:a copy -c:v copy -c:s copy <输出视频>\n\n# 例如: ffmpeg -i a.mp4 -i b.acc -map 0:0 -map 0:1 -map 1 -c:a copy -c:v copy -c:s copy c.mp4\n```\n\n------\n\n\n<font color=#f26522 size=4 face=宋体><strong>**FFmpeg_合并音频、视频**</strong></font>\n\n```python\nffmpeg -i <输入视频> -i <输入音频> -vcodec copy -acodec copy <合并后的视频>\n\n# 例如：ffmpeg -i a.mp4 -i b.mav -vcodec copy -acodec copy c.mp4\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**FFmpeg_视频首帧添加封面图片**</strong></font>\n\n```python\nffmpeg -i <输入视频> -i <输入图片> -map 0 -map 1 -c copy -c:v:1 png -disposition:v:1 attached_pic <输出视频>\n\n# 例如： ffmpeg -i a.mp4 -i b.png -map 0 -map 1 -c copy -c:v:1 png -disposition:v:1 attached_pic c.mp4\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**FFmpeg_视频添加水印**</strong></font>\n\n```python\nffmpeg -i v2.mp4 -i s_logo.png -filter_complex \"[1:v][0:v]scale2ref=iw*0.1:-1[logo1][base]; [base][logo1]overlay=W-(w+20):20[v]\" -map [v] -map 0:a -y -profile high -level 4.1 v3.mp4\n```\n\n------\n\n\n\n<font color=#f26522 size=4 face=宋体><strong>**FFmpeg截取mp3指定时间的内容**</strong></font>\n\n```python\nffmpeg -i input.mp3 -ss hh:mm:ss -t hh:mm:ss -acodec copy output.mp3\n# 参数说明：\n# -ss : 指定从那裡开始\n# -t : 指定到那裡结束\n# -acodec copy : 编码格式和来源档桉相同（就是mp3）\n\n# 以下举个例子，如果我想把aa.mp3中的1分12秒到1分42秒的地方切出来，然后存成bb.mp3，指令如下\nffmpeg -i aa.mp3 -ss 00:01:12 -t 00:01:42 -acodec copy bb.mp3\n```\n","tags":["ffmpeg"],"categories":["视频编辑"]},{"title":"selenium 破解 cloudflare 5秒验证","url":"/2023/03/20/selenium-破解-cloudflare-5秒验证/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>**selenium 破解 cloudflare 5秒验证**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**cloudflare 5秒验证破解**</strong></font>\n\n##### <font color=#f26522 size=4 face=宋体><strong>**1、在被cloudflare保护的网站爬取数据的时候，首次请求会出现503**</strong></font>\n\n<font color=red size=3 face=宋体><strong>**不携带COOKIE 即出现503**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**2、cookie 具有时效(具体时效未曾测试)**</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>**3、selenium 无头模式被 cloudflare 拿捏了，**</strong></font>\n\n### 根据 https://zhuanlan.zhihu.com/p/542766089 博文技术讲解，方法测试如下\n\n<font color=#00b2c2 size=5 face=宋体><strong>**Undetected-chromedriver 过 5s验证**</strong></font>\n\n```\nimport undetected_chromedriver as uc\ndriver = uc.Chrome()\ndriver.get('https://nowsecure.nl')\n```\n\n### <font color=red size=4 face=宋体><strong>**实际情况，我发现在首次登录之后，取得 cookie 再次使用 requests 访问时，即可正常获取到数据**</strong></font>\n\n##### 但是 重点来了 ！！！\n\n##### 我们平常都是在服务器上跑 python 代码，而服务器 当然绝大多数是不会使用显示器的， 而 cloudflare 却在 JS 中添加了检测显示器的代码。\n\n##### 然后…. 是不是有一种东西 可以让 python 暂时使用 一个伪造的 显示器环境？\n\n<font color=red size=5 face=宋体><strong>**还真有！！！**</strong></font>\n\n<font color=#00b2c2 size=5 face=宋体><strong>**`centos7`安装 虚拟显示器环境 Xvfb**</strong></font>\n\n```shell\nyum update\nyum install Xvfb\nyum install libXfont\nyum install xorg-x11-fonts*\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>**正常使用代码**</strong></font>\n\n```python\nimport time\nimport undetected_chromedriver as uc   # pip3 install undetected_chromedriver\nfrom pyvirtualdisplay import Display   # pip3 install pyvirtualdisplay\n\n\n# 虚拟显示器设置\ndisplay = Display(visible=0, size=(1024, 768))\ndisplay.start()\n\n# # 无头模式\n# chrome_options = uc.ChromeOptions()\n# chrome_options.add_argument(\"--no-sandbox\")\n# chrome_options.add_argument(\"--disable-dev-shm-usage\")\n# chrome_options.add_argument(\"--start-maximized\")\n# chrome_options.add_argument('--disable-popup-blocking')\n# chrome_options.add_argument('--headless')\n# chrome_options.add_argument('--no-sandbox')\n# chrome_options.add_argument('--disable-gpu')\n# driver = uc.Chrome(options=chrome_options)\n\n# 有头模式\ndriver = uc.Chrome()\ndriver.get('请求网址')\ntime.sleep(5)\n\n# 打印网页源代码\nprint(driver.page_source)\n\n# 打印cookies\nprint(driver.get_cookies())\n\n# 退出浏览器\ndriver.close()\ndriver.quit()\n\n# 停止虚拟显示器\ndisplay.stop()\n```\n","tags":["python","selenium","cloudflare 5秒盾"],"categories":["逆向_反爬"]},{"title":"Centos7 update 的时候出现 No packages marked for update","url":"/2023/03/20/Centos7-update-的时候出现-No-packages-marked-for-update/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>Centos7 update 的时候出现 No packages marked for update</strong></font>\n\n<!--more-->\n\n<font color=#00b2c2 size=5 face=宋体><strong>**解决方法：**</strong></font>\n\n```\n# 按照以下步骤清除yum缓存\nrm -rf /var/cache/yum/*\nyum clean all\nyum update -y\n```\n","tags":["系统","运维","错误"],"categories":["linux"]},{"title":"Centos7系统更换yum源镜像为阿里云镜像（使用wget）","url":"/2023/03/20/Centos7系统更换yum源镜像为阿里云镜像（使用wget）/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**Centos7系统更换yum源镜像为阿里云镜像（使用wget）**</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>**1、安装wget**</strong></font>\n\n```\nyum install -y wget\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**2、备份服务器原有的yum源文件**</strong></font>\n\n```\nmv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**3、下载阿里云镜像文件**</strong></font>\n\n```\nwget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**4、清理缓存**</strong></font>\n\n```\nyum clean all\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**5、生成缓存**</strong></font>\n\n```\nyum makecache\n```\n\n<font color=#f26522 size=4 face=宋体><strong>**6、更新最新源设置**</strong></font>\n\n```\nyum update -y\n```\n","tags":["系统","运维"],"categories":["linux"]},{"title":"非常不错的 404 Error 源码","url":"/2023/03/20/非常不错的-404-Error-源码/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>**非常不错的 404 Error 源码**</strong></font>\n\n<!--more-->\n\n```html\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\n<title>404-对不起！您访问的页面不存在</title>\n<style type=\"text/css\">\n.head404{ width:580px; height:234px; margin:50px auto 0 auto; background:url(https://www.daixiaorui.com/Public/images/head404.png) no-repeat; }\n.txtbg404{ width:499px; height:169px; margin:10px auto 0 auto; background:url(https://www.daixiaorui.com/Public/images/txtbg404.png) no-repeat;}\n.txtbg404 .txtbox{ width:390px; position:relative; top:30px; left:60px;color:#eee; font-size:13px;}\n.txtbg404 .txtbox p {margin:5px 0; line-height:18px;}\n.txtbg404 .txtbox .paddingbox { padding-top:15px;}\n.txtbg404 .txtbox p a { color:#eee; text-decoration:none;}\n.txtbg404 .txtbox p a:hover { color:#FC9D1D; text-decoration:underline;}\n</style>\n</head>\n\n<body bgcolor=\"#494949\">\n    <div class=\"head404\"></div>\n    <div class=\"txtbg404\">\n  <div class=\"txtbox\">\n      <p>对不起，您请求的页面不存在、或已被删除、或暂时不可用</p>\n      <p class=\"paddingbox\">请点击以下链接继续浏览网页</p>\n      <p>》<a style=\"cursor:pointer\" onclick=\"history.back()\">返回上一页面</a></p>\n      <p>》<a href=\"https://www.daixiaorui.com\">返回网站首页</a></p>\n    </div>\n  </div>\n</body>\n</html>\n```\n\n![image-20230215210409562](https://s2.loli.net/2023/02/15/fYTaDKZgrhQsvjz.png)\n","tags":["html","源码"],"categories":["前端"]},{"title":"安装opencv-python报错或者卡住解决","url":"/2023/03/20/安装opencv-python报错或者卡住解决/","content":"\n<font color=#00b2c2 size=5 face=宋体><strong>安装opencv-python报错或者卡住解决：</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=4 face=宋体><strong>错误提示:</strong></font>\n\n```shell\nPackage | 解决 Could not build wheels for opencv-python which use PEP 517 and cannot be installed\n```\n\n\n\n#### <font color=#f26522 size=4 face=宋体><strong>背景：</strong></font>\n\n<font color=#b0171f size=3 face=宋体><strong>在nvidia ngc平台下载docker image，根据实验要求在环境里安装opencv。因为当前实验tensorflow要求版本较低，我下载了比较久远的版本镜</strong></font>\n\n#### <font color=#00b2c2 size=5 face=宋体><strong>问题：</strong></font>\n\n<font color=#f26522 size=4 face=宋体><strong>通过pip安装opencv，指令如下：</strong></font>\n\n```\npip install opencv-python\n```\n\n<font color=#f26522 size=4 face=宋体><strong>安装过程的输出：</strong></font>\n\n```\nCollecting opencv-python\n  Downloading https://files.pythonhosted.org/packages/77/f5/49f034f8d109efcf9b7e98fbc051878b83b2f02a1c73f92bbd37f317288e/opencv-python-4.4.0.42.tar.gz (88.9MB)\n    100% |████████████████████████████████| 88.9MB 919kB/s\n  Installing build dependencies ... done\n  Getting requirements to build wheel ... done\n    Preparing wheel metadata ... done\nRequirement already satisfied: numpy>=1.13.1 in /usr/local/lib/python3.5/dist-packages (from opencv-python) (1.14.5)\nBuilding wheels for collected packages: opencv-python\n  Building wheel for opencv-python (PEP 517) ...\n```\n\n<font color=red size=4 face=宋体><strong>PEP 517信息出现后，过了很长时间，出现报错信息：</strong></font>\n\n```\nConfiguring Project\n    Working directory:\n      /tmp/pip-install-zujf20md/opencv-python/_skbuild/linux-x86_64-3.6/cmake-build\n    Command:\n      cmake /tmp/pip-install-zujf20md/opencv-python/opencv -G 'Unix Makefiles' -DCMAKE_INSTALL_PREFIX:PATH=/tmp/pip-install-zujf20md/opencv-python/_skbuild/linux-x86_64-3.6/cmake-install -DPYTHON_EXECUTABLE:FILEPATH=/usr/bin/python -DPYTHON_VERSION_STRING:STRING=3.6.8 -DPYTHON_INCLUDE_DIR:PATH=/usr/include/python3.6m -DPYTHON_LIBRARY:FILEPATH=/usr/lib/x86_64-linux-gnu/libpython3.6m.so -DSKBUILD:INTERNAL=TRUE -DCMAKE_MODULE_PATH:PATH=/tmp/pip-build-env-tr73ewqw/overlay/lib/python3.6/site-packages/skbuild/resources/cmake -DPYTHON3_EXECUTABLE=/usr/bin/python -DPYTHON3_INCLUDE_DIR=/usr/include/python3.6m -DPYTHON3_LIBRARY=/usr/lib/x86_64-linux-gnu/libpython3.6m.so -DBUILD_opencv_python3=ON -DBUILD_opencv_python2=OFF -DBUILD_opencv_java=OFF -DOPENCV_PYTHON3_INSTALL_PATH=python -DINSTALL_CREATE_DISTRIB=ON -DBUILD_opencv_apps=OFF -DBUILD_opencv_freetype=OFF -DBUILD_SHARED_LIBS=OFF -DBUILD_TESTS=OFF -DBUILD_PERF_TESTS=OFF -DBUILD_DOCS=OFF -DCMAKE_BUILD_TYPE:STRING=Release\n\n  Copying files from CMake output\n  Traceback (most recent call last):\n    File \"/usr/local/lib/python3.6/dist-packages/pip/_vendor/pep517/_in_process.py\", line 207, in <module>\n      main()\n    File \"/usr/local/lib/python3.6/dist-packages/pip/_vendor/pep517/_in_process.py\", line 197, in main\n      json_out['return_val'] = hook(**hook_input['kwargs'])\n    File \"/usr/local/lib/python3.6/dist-packages/pip/_vendor/pep517/_in_process.py\", line 141, in build_wheel\n      metadata_directory)\n    File \"/usr/local/lib/python3.6/dist-packages/setuptools/build_meta.py\", line 209, in build_wheel\n      wheel_directory, config_settings)\n    File \"/usr/local/lib/python3.6/dist-packages/setuptools/build_meta.py\", line 194, in _build_with_temp_dir\n      self.run_setup()\n    File \"/usr/local/lib/python3.6/dist-packages/setuptools/build_meta.py\", line 237, in run_setup\n      self).run_setup(setup_script=setup_script)\n    File \"/usr/local/lib/python3.6/dist-packages/setuptools/build_meta.py\", line 142, in run_setup\n      exec(compile(code, __file__, 'exec'), locals())\n    File \"setup.py\", line 496, in <module>\n      main()\n    File \"setup.py\", line 289, in main\n      cmake_source_dir=cmake_source_dir,\n    File \"/tmp/pip-build-env-tr73ewqw/overlay/lib/python3.6/site-packages/skbuild/setuptools_wrap.py\", line 629, in setup\n      cmake_source_dir, skbuild_kw['cmake_install_dir'])\n    File \"setup.py\", line 381, in _classify_installed_files_override\n      with open('scripts/__init__.py', 'r') as custom_init:\n  FileNotFoundError: [Errno 2] No such file or directory: 'scripts/__init__.py'\n  ----------------------------------------\n  ERROR: Failed building wheel for opencv-python\n  Running setup.py clean for opencv-python\nFailed to build opencv-python\nERROR: Could not build wheels for opencv-python which use PEP 517 and cannot be installed directly\n```\n\n# <font color=#00b2c2 size=5 face=宋体><strong>解决方案：</strong></font>\n\n```shell\npip install --upgrade pip setuptools wheel\n```\n\n<font color=#f26522 size=4 face=宋体><strong>重试安装：</strong></font>\n\n```shell\npip install opencv-python\n```\n","tags":["错误","库"],"categories":["python","错误"]},{"title":"ubuntu搭建hexo博客教程(gitee版本)","url":"/2023/03/19/ubuntu搭建hexo博客教程-gitee版本/","content":"\n#### <font color=#00b2c2 size=5 face=宋体><strong>**系统:ubuntu 20.04：**</strong></font>\n\n<!--more-->\n\n```\n# 安装nodejs npm\nsudo apt update\nsudo apt install nodejs npm\n\n# 查看版本\nnodejs --version\n```\n\n![](https://s2.loli.net/2023/02/14/SZ1iWgvyFUYn9t2.png)\n\n<font color=#00b2c2 size=5 face=宋体><strong>**1、我们将会安装 Node.js 版本 14.x:**</strong></font>\n\n<font color=#f26522 size=3 face=宋体><strong>**1）以 sudo 用户身份运行下面的命令，下载并执行 NodeSource 安装脚本：**</strong></font>\n\n```\ncurl -sL https://deb.nodesource.com/setup_14.x | sudo -E bash -\n```\n\n<font color=#f26522 size=3 face=宋体><strong>**这个脚本将会添加 NodeSource 的签名 key 到你的系统，创建一个 apt 源文件，安装必备的软件包，并且刷新 apt 缓存。**</strong></font>\n\n<font color=#f26522 size=3 face=宋体><strong>**如果你需要另外的 Node.js 版本，例如`12.x`，将`setup_14.x`修改为`setup_12.x`**</strong></font>\n\n<font color=#f26522 size=3 face=宋体><strong>**2）NodeSource 源启用成功后，安装 Node.js 和 npm:**</strong></font>\n\n```\nsudo apt install nodejs\n```\n\n<font color=#f26522 size=3 face=宋体><strong>**nodejs 软件包同时包含`node`和`npm`二进制包。**</strong></font>\n\n<font color=#f26522 size=3 face=宋体><strong>**3）验证 Node.js 和 npm 是否正确安装。打印它们的版本号：**</strong></font>\n\n```\nnode --version\n```\n\n![image-20230214204628631](https://s2.loli.net/2023/02/14/WEa4s2cqZ8PVyBu.png)\n\n<font color=#00b2c2 size=5 face=宋体><strong>**2、运行 Git Bash 并切换淘宝镜像。**</strong></font>\n\n<font color=#f26522 size=3 face=宋体><strong>**如果不需要切换源，则可跳过此步骤：**</strong></font>\n\n```\n# 全局切换命令：\nnpm config set registry http://registry.npm.taobao.org/\n\n# 查看版本命令：\nnpm get registry\n\n# 切回官方镜像：\nnpm config set registry http://www.npmjs.org\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>**3、安装HEXO程序**</strong></font>\n\n```\nnpm install -g hexo\n\n# 查看版本：\nhexo v\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>**4、创建 hexo 文件夹**</strong></font>\n\n<font color=#f26522 size=3 face=宋体><strong>**hexo 文件夹，是未来博客运转的目标文件夹，写文、主题安装等等都在这里完成。**</strong></font>\n\n<font color=#f26522 size=3 face=宋体><strong>**请在指定路径新建文件夹（英文名），右键空白处，选择 Git Bash here，输入指令：**</strong></font>\n\n```\nhexo init\n```\n\n<font color=#00b2c2 size=5 face=宋体><strong>**5、安装主题**</strong></font>\n\n<font color=#f26522 size=3 face=宋体><strong>**现在这个是必须过程了，反正自带的主题也没人用不是么？**</strong></font>\n\n<font color=#f26522 size=3 face=宋体><strong>**6.1 在 theme 文件夹下，建立你要使用的主题的同名文件夹，比如 theme/next**</strong></font>\n\n<font color=#f26522 size=3 face=宋体><strong>**6.2 cd 到 theme 文件夹，或者直接在 theme 文件夹里右键运行 Git Bash。**</strong></font>\n\n<font color=#f26522 size=3 face=宋体><strong>**6.3 输入获取主题的命令：**</strong></font>\n\n```\ngit clone -b theme https://github.com/niemingzhao/niemingzhao.github.io.git themes/default\n```\n\n![img](https://s2.loli.net/2023/02/14/vC7O9xZuoVTRJht.png)\n\n<font color=red size=4 face=宋体><strong>**注意：在修改模板的时候，除了需要到主配置下添加模板名以外，还需要将主题下的配置文件修改为 _config.yml**</strong></font>\n\n<font color=#00b2c2 size=5 face=宋体><strong>**6、Hexo 主要命令**</strong></font>\n\n```\nhexo clean：清除 public 静态目录\nhexo s：本地启动默认指定 4000 端口预览 (s 是 server 是缩写 也就是启动 hexo 服务)\nhexo g：生成 public 静态目录\nhexo d： 部署\n```\n\n<font color=#00b2c2 size=5 face=\"宋体\"><strong>**7、Hexo 插件安装**</strong></font>\n\n```bash\nnpm install hexo-generator-search --save\n# 评论插件\nnpm i --save gitalk\n\n# RSS插件\nnpm install --save hexo-generator-feed\n\n# 安装 文章转换二维码插件\nnpm install --save hexo-helper-qrcode\n\n# gitee版本插件安装\nnpm install --save gitment\n```\n\n8、关于\n\n![image-20230320031831877](https://s2.loli.net/2023/03/20/KEzIYXph6gvs1iN.png)\n","tags":["教程","git","Hexo"],"categories":["博客"]},{"title":"Git 基础操作手册","url":"/2023/03/19/Git-基础操作手册/","content":"\n\n### git 基础操作手册\n<!--more-->\n```shell\n# 用户信息\ngit config --global user.name \"tttvin\"\ngit config --global user.email \"xxxxxx@qq.com\"\n\n# gitee\ngit config --global user.name \"tttvin\"\ngit config --global user.email \"tttvin@qq.com\"\n\n# 创建本地ssh key\nssh-keygen -t rsa -C \"tttvin@qq.com\"\n\n# 初始化仓库\ngit init \n\n# 添加文件到暂存区\ngit add . \n\n# 将暂存区内容添加到仓库中。\ngit commit\ngit commit -m fix\ngit commit -m \"init\"\n\n\n# 关于每次push 都需要输入密码的问题\ngit config --global credential.helper store\ngit pull /git push (这里需要输入用户名和密码，以后就不用啦)\n```\n\n部署ssh公钥\n\n```shell\nssh-keygen -t ed25519 -C \"xxxxxxxx@qq.com\"\n\ncat ~/.ssh/id_ed25519.pub\n```\n\n","tags":["教程"],"categories":["git"]},{"title":"Frp内网穿透","url":"/2023/03/05/Frp内网穿透/","content":"\n# <font color=#00b2c2 size=5 face=宋体><strong>Frp内网穿透</strong></font>\n\n<!--more-->\n\n<font color=#f26522 size=3 face=宋体><strong>**如果你觉得网上的一键穿透脚本不安全，可以使用该教程，进行自己配置**</strong></font>\n\n<font color=#b0171f size=3 face=宋体><strong>**1、 先下载frp配置包，这是我自己配置好的：**</strong></font>\n\n```\nwget https://bd.bcebos.com/v1/xly-icafe/frp_0.42.0_linux_amd64_hww2t8.tar-20220621121041-9cyxar.gz\n```\n\n<font color=#b0171f size=3 face=宋体><strong>**2、编辑 开启开机自动启动**</strong></font>\n\n```\nvim /etc/systemd/system/frps.service\n\n# 把下方内容复制到文件中\n[Unit]\nDescription=frps server\nDocumentation=network.target.syslog.target\nAfter=network.target\n\n[Service]\nType=simple\nExecStart=/root/frp/frps -c /root/frp/frps.ini\n\n[Install]\nWantedBy=multi-user.target\n```\n\n<font color=#b0171f size=3 face=宋体><strong>**3、启动服务，并设置为开机自动启动**</strong></font>\n\n```\nsystemctl start frps   #启动服务\nsystemctl enable frps    # 开机自动启动\nsystemctl status frps    # 查看状态\n```\n\n","tags":["内网穿透"],"categories":["工具"]}]